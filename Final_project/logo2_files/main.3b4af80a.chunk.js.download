(this["webpackJsonp@pa/web-editor"]=this["webpackJsonp@pa/web-editor"]||[]).push([[31],[function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"z",(function(){return d})),n.d(t,"u",(function(){return b})),n.d(t,"D",(function(){return f})),n.d(t,"w",(function(){return h})),n.d(t,"C",(function(){return p})),n.d(t,"t",(function(){return g})),n.d(t,"A",(function(){return O})),n.d(t,"B",(function(){return v})),n.d(t,"r",(function(){return j})),n.d(t,"x",(function(){return m})),n.d(t,"v",(function(){return y})),n.d(t,"s",(function(){return x})),n.d(t,"q",(function(){return w})),n.d(t,"y",(function(){return A})),n.d(t,"E",(function(){return E})),n.d(t,"zb",(function(){return k})),n.d(t,"vb",(function(){return C})),n.d(t,"Cb",(function(){return S})),n.d(t,"wb",(function(){return T})),n.d(t,"Ab",(function(){return _})),n.d(t,"Bb",(function(){return I})),n.d(t,"tb",(function(){return R})),n.d(t,"xb",(function(){return L})),n.d(t,"ub",(function(){return P})),n.d(t,"yb",(function(){return G})),n.d(t,"sb",(function(){return M})),n.d(t,"Kb",(function(){return B})),n.d(t,"i",(function(){return D})),n.d(t,"j",(function(){return N})),n.d(t,"H",(function(){return z})),n.d(t,"Y",(function(){return H})),n.d(t,"jb",(function(){return Y})),n.d(t,"mb",(function(){return X})),n.d(t,"hb",(function(){return U})),n.d(t,"a",(function(){return F})),n.d(t,"db",(function(){return W})),n.d(t,"nb",(function(){return V})),n.d(t,"ob",(function(){return K})),n.d(t,"ab",(function(){return q})),n.d(t,"cb",(function(){return J})),n.d(t,"kb",(function(){return Q})),n.d(t,"eb",(function(){return Z})),n.d(t,"fb",(function(){return $})),n.d(t,"pb",(function(){return ee})),n.d(t,"bb",(function(){return te})),n.d(t,"ib",(function(){return ne})),n.d(t,"lb",(function(){return re})),n.d(t,"Lb",(function(){return ae})),n.d(t,"Nb",(function(){return ie})),n.d(t,"Mb",(function(){return ce})),n.d(t,"Jb",(function(){return oe})),n.d(t,"S",(function(){return se})),n.d(t,"T",(function(){return ue})),n.d(t,"R",(function(){return le})),n.d(t,"N",(function(){return de})),n.d(t,"X",(function(){return be})),n.d(t,"L",(function(){return fe})),n.d(t,"U",(function(){return he})),n.d(t,"V",(function(){return pe})),n.d(t,"M",(function(){return ge})),n.d(t,"O",(function(){return Oe})),n.d(t,"J",(function(){return ve})),n.d(t,"K",(function(){return je})),n.d(t,"P",(function(){return me})),n.d(t,"Q",(function(){return ye})),n.d(t,"W",(function(){return xe})),n.d(t,"l",(function(){return we})),n.d(t,"n",(function(){return Ae})),n.d(t,"rb",(function(){return Ee})),n.d(t,"d",(function(){return ke})),n.d(t,"c",(function(){return Ce})),n.d(t,"h",(function(){return Se})),n.d(t,"f",(function(){return Te})),n.d(t,"g",(function(){return _e})),n.d(t,"e",(function(){return Ie})),n.d(t,"qb",(function(){return Re})),n.d(t,"Ob",(function(){return Le})),n.d(t,"o",(function(){return Pe})),n.d(t,"p",(function(){return Ge})),n.d(t,"I",(function(){return Me})),n.d(t,"k",(function(){return Be})),n.d(t,"G",(function(){return De})),n.d(t,"Ib",(function(){return Ne})),n.d(t,"F",(function(){return ze})),n.d(t,"Hb",(function(){return He})),n.d(t,"Eb",(function(){return Ye})),n.d(t,"Gb",(function(){return Xe})),n.d(t,"Fb",(function(){return Ue})),n.d(t,"m",(function(){return Fe})),n.d(t,"Db",(function(){return We})),n.d(t,"Pb",(function(){return Ve})),n.d(t,"Qb",(function(){return Ke})),n.d(t,"Rb",(function(){return qe})),n.d(t,"Z",(function(){return Je})),n.d(t,"gb",(function(){return Qe}));var r=n(40),a=n(101),i=n(100),c=n(46),o=n.n(c),s=n(1),u=n(209),l=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return n}(o.a.Group),d=function(e){return new o.a.Stage(e)},b=function(e){return new o.a.Layer(e)},f=function(e){return new o.a.Transformer(e)},h=function(e){return new o.a.Path(e)},p=function(e){return new o.a.TextPath(e)},g=function(e){return new o.a.Label(e)},O=function(e){return new o.a.Tag(e)},v=function(e){return new o.a.Text(e)},j=function(e){return new o.a.Group(e)},m=function(e){return new o.a.Rect(e)},y=function(e){return new o.a.Line(e)},x=function(e){return new o.a.Image(e)},w=function(e){return new o.a.Circle(e)},A=function(e){return new o.a.Shape(e)},E=function(e){return new l(e)},k=function(e){return e instanceof o.a.Stage},C=function(e){return e instanceof o.a.Layer},S=function(e){return e instanceof o.a.Transformer},T=function(e){return e instanceof o.a.Path},_=function(e){return e instanceof o.a.Text},I=function(e){return e instanceof o.a.TextPath},R=function(e){return e instanceof o.a.Group},L=function(e){return e instanceof o.a.Rect},P=function(e){return e instanceof o.a.Image},G=function(e){return e instanceof o.a.Shape},M=function(e){return e instanceof o.a.Container},B=function(e,t){return null===e||void 0===e?void 0:e.listening(t)},D=function(e,t,n){return e.on(t,n),function(){return e.off(t,n)}},N=function(e,t,n){e.on(t,(function r(a){n(a),e.off(t,r)}))},z=function(e,t){return e.off(t)},H=function(e,t,n){return e.fire(t,n)},Y=function(e){return null===e||void 0===e?void 0:e.getLayer()},X=function(e){return null===e||void 0===e?void 0:e.getStage()};function U(e){return e.container()}var F=function(e){return(null===e||void 0===e?void 0:e.getAttrs())||{}},W=function(e){var t=(null===e||void 0===e?void 0:e.getAttrs())||{};return new Proxy(t,{get:function(t,n){return function(e,t){return e&&e.getAttr(t)}(e,n)}})},V=function(e){return null===e||void 0===e?void 0:e.getType()},K=function(e){return null===e||void 0===e?void 0:e.getNodes()},q=function(e){return null===e||void 0===e?void 0:e.getNode()},J=function(e){return e.getActiveAnchor()},Q=function(e){return"function"===typeof(null===e||void 0===e?void 0:e.getParent)?e.getParent():null},Z=function(e){return e.getChildren()},$=function(e){return e.getChildren().toArray()},ee=function(e){return e.getPointerPosition()},te=function(e){return e.getAbsolutePosition()},ne=function(e){return e.globalCompositeOperation()},re=function(e){return W(Q(e))},ae=function(e,t){return e&&e.setAttrs(t)},ie=function(e,t){return e.setNodes(t)},ce=function(e,t){return e.globalCompositeOperation(t)},oe=function(e){return e.removeChildren()},se=function(e,t){return null===e||void 0===e?void 0:e.find(t)},ue=function(e,t){var n;return null===(n=se(e,t))||void 0===n?void 0:n.toArray()},le=function(e,t){return null===e||void 0===e?void 0:e.findOne(t)},de=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return null===e||void 0===e?void 0:e.findAncestor(t,n)},be=function(e,t){return k(e)||C(e)?le(e,t):le(Y(e),t)},fe=function(e,t){return le(e,t)},he=function(e,t){return le(e,t)},pe=function(e,t){return le(e,t)},ge=function(e,t){return le(e,t)},Oe=function(e,t){return le(e,t)},ve=function(e,t){return le(e,t)},je=function(e,t){return le(e,t)},me=function(e,t){return le(e,t)},ye=function(e,t){return le(e,t)},xe=function(e,t){return le(e,t)},we=function(e,t){return e.cache(t)},Ae=function(e){return e.clearCache()},Ee=function(e){return e.isCached()},ke=function(e,t){return e.add(t)},Ce=function(e,t){return e.add(t)},Se=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return e.add.apply(e,[t].concat(r))},Te=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return e.add.apply(e,[t].concat(r))},_e=function(e,t){return e.add(t)},Ie=function(e,t){return e.add(t)},Re=function(e){return null===e||void 0===e?void 0:e.hide()},Le=function(e){return null===e||void 0===e?void 0:e.show()},Pe=function(e,t){return e.clip(t)},Ge=function(e,t){return null===e||void 0===e?void 0:e.clone(t)},Me=function(e){return e.draw()},Be=function(e){var t;return k(e)||C(e)?e.batchDraw():null===(t=Y(e))||void 0===t?void 0:t.batchDraw()},De=function(e){return null===e||void 0===e?void 0:e.destroy()},Ne=function(e){return null===e||void 0===e?void 0:e.remove()},ze=function(e){return null===e||void 0===e?void 0:e.destroyChildren()},He=function(e){return e.moveUp()},Ye=function(e){return e.moveDown()},Xe=function(e){return e.moveToTop()},Ue=function(e){return e.moveToBottom()},Fe=function(e,t){return e.moveTo(t)},We=function(e){return e.toArray()},Ve=function(e,t){return e.toCanvas(t)},Ke=function(e,t){return e.toDataURL(t)},qe=function(e,t){return e.toImage(t)},Je=function(e){return We(Z(e)).find((function(e){return!W(e).id.includes(s.id)}))},Qe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(R(e)){var n=W(e),r=n.name,a=n.cellData;if(r===s.Bc){if(Object.keys(t).length)return e.getOrigClientRect(t);var i=W(e),c=i.width,o=i.height,l=i.x,d=i.y,b=i.rotation,f=re(e),h=f.x,p=f.y,g=X(e),O=W(g),v=O.zoomValue;return Object(u.a)({width:c*v,height:o*v,x:(l+h)*v,y:(d+p)*v,rotation:b})}if(r===s.Cc){var j=X(e),m=re(e),y=m.x,x=m.y,w=W(de(e,s.A)),A=w.x,E=w.y,k=a.getCellComputedSize(),C=k.width,S=k.height,T=a.getCellTopLeft(),_=T.x,I=T.y;return{x:(A+y+_)*j.scaleX(),y:(E+x+I)*j.scaleY(),width:C*j.scaleX(),height:S*j.scaleY()}}return e.getOrigClientRect(t)}return e.getClientRect(t)}},function(e,t,n){"use strict";n.d(t,"uc",(function(){return h})),n.d(t,"fb",(function(){return p})),n.d(t,"de",(function(){return g})),n.d(t,"We",(function(){return O})),n.d(t,"Xe",(function(){return v})),n.d(t,"Kd",(function(){return j})),n.d(t,"Hb",(function(){return m})),n.d(t,"db",(function(){return y})),n.d(t,"ig",(function(){return x})),n.d(t,"yd",(function(){return w})),n.d(t,"qc",(function(){return A})),n.d(t,"Og",(function(){return E})),n.d(t,"fg",(function(){return k})),n.d(t,"De",(function(){return C})),n.d(t,"hg",(function(){return S})),n.d(t,"gg",(function(){return B})),n.d(t,"rc",(function(){return M})),n.d(t,"Bf",(function(){return W})),n.d(t,"Eg",(function(){return D})),n.d(t,"fe",(function(){return N})),n.d(t,"h",(function(){return z})),n.d(t,"f",(function(){return H})),n.d(t,"tc",(function(){return Y})),n.d(t,"nf",(function(){return X})),n.d(t,"xd",(function(){return U})),n.d(t,"Ee",(function(){return F})),n.d(t,"xe",(function(){return $})),n.d(t,"Ze",(function(){return V})),n.d(t,"eb",(function(){return K})),n.d(t,"w",(function(){return q})),n.d(t,"G",(function(){return J})),n.d(t,"Kg",(function(){return Q})),n.d(t,"Jg",(function(){return Z})),n.d(t,"rf",(function(){return ie})),n.d(t,"vh",(function(){return ce})),n.d(t,"Th",(function(){return oe})),n.d(t,"nb",(function(){return se})),n.d(t,"Pe",(function(){return ue})),n.d(t,"kb",(function(){return le})),n.d(t,"Qe",(function(){return de})),n.d(t,"rd",(function(){return be})),n.d(t,"pc",(function(){return fe})),n.d(t,"ah",(function(){return he})),n.d(t,"Je",(function(){return pe})),n.d(t,"Ke",(function(){return ge})),n.d(t,"bh",(function(){return Oe})),n.d(t,"ug",(function(){return ve})),n.d(t,"xc",(function(){return je})),n.d(t,"Pg",(function(){return me})),n.d(t,"Jf",(function(){return ye})),n.d(t,"Ge",(function(){return xe})),n.d(t,"Af",(function(){return we})),n.d(t,"bd",(function(){return Ae})),n.d(t,"ec",(function(){return Ee})),n.d(t,"Yf",(function(){return ke})),n.d(t,"dc",(function(){return Ce})),n.d(t,"Zf",(function(){return Se})),n.d(t,"hd",(function(){return Te})),n.d(t,"ag",(function(){return _e})),n.d(t,"Oh",(function(){return Ie})),n.d(t,"pg",(function(){return Re})),n.d(t,"Bc",(function(){return Le})),n.d(t,"Cc",(function(){return Pe})),n.d(t,"Dc",(function(){return Ge})),n.d(t,"Ec",(function(){return Me})),n.d(t,"qg",(function(){return Be})),n.d(t,"ge",(function(){return De})),n.d(t,"tg",(function(){return Ne})),n.d(t,"Ae",(function(){return ze})),n.d(t,"uf",(function(){return He})),n.d(t,"Q",(function(){return Ye})),n.d(t,"Kc",(function(){return Xe})),n.d(t,"ud",(function(){return Ue})),n.d(t,"kg",(function(){return Fe})),n.d(t,"a",(function(){return We})),n.d(t,"Mc",(function(){return Ve})),n.d(t,"og",(function(){return Ke})),n.d(t,"Ub",(function(){return qe})),n.d(t,"Vb",(function(){return Je})),n.d(t,"Ce",(function(){return Qe})),n.d(t,"n",(function(){return Ze})),n.d(t,"H",(function(){return $e})),n.d(t,"zd",(function(){return et})),n.d(t,"jh",(function(){return tt})),n.d(t,"Vg",(function(){return nt})),n.d(t,"nd",(function(){return rt})),n.d(t,"Jc",(function(){return at})),n.d(t,"Sg",(function(){return it})),n.d(t,"Rg",(function(){return ct})),n.d(t,"od",(function(){return ot})),n.d(t,"vb",(function(){return st})),n.d(t,"gc",(function(){return ut})),n.d(t,"dg",(function(){return lt})),n.d(t,"He",(function(){return dt})),n.d(t,"Te",(function(){return bt})),n.d(t,"d",(function(){return ft})),n.d(t,"e",(function(){return ht})),n.d(t,"Xc",(function(){return pt})),n.d(t,"ad",(function(){return gt})),n.d(t,"ie",(function(){return Ot})),n.d(t,"je",(function(){return vt})),n.d(t,"me",(function(){return jt})),n.d(t,"ke",(function(){return mt})),n.d(t,"le",(function(){return yt})),n.d(t,"qe",(function(){return xt})),n.d(t,"oe",(function(){return wt})),n.d(t,"Se",(function(){return At})),n.d(t,"F",(function(){return Et})),n.d(t,"Tc",(function(){return kt})),n.d(t,"pe",(function(){return Ct})),n.d(t,"ne",(function(){return St})),n.d(t,"kh",(function(){return Tt})),n.d(t,"lh",(function(){return _t})),n.d(t,"mh",(function(){return It})),n.d(t,"ib",(function(){return Rt})),n.d(t,"jb",(function(){return Lt})),n.d(t,"mb",(function(){return Pt})),n.d(t,"Gb",(function(){return Gt})),n.d(t,"Db",(function(){return Mt})),n.d(t,"E",(function(){return Bt})),n.d(t,"k",(function(){return Dt})),n.d(t,"j",(function(){return Nt})),n.d(t,"l",(function(){return zt})),n.d(t,"mc",(function(){return Ht})),n.d(t,"nc",(function(){return Yt})),n.d(t,"oc",(function(){return Xt})),n.d(t,"K",(function(){return Ut})),n.d(t,"I",(function(){return Ft})),n.d(t,"J",(function(){return Wt})),n.d(t,"L",(function(){return Vt})),n.d(t,"s",(function(){return Kt})),n.d(t,"sf",(function(){return qt})),n.d(t,"Vf",(function(){return Jt})),n.d(t,"Ld",(function(){return Qt})),n.d(t,"Ud",(function(){return ee})),n.d(t,"Ih",(function(){return en})),n.d(t,"ld",(function(){return tn})),n.d(t,"Ch",(function(){return nn})),n.d(t,"Rh",(function(){return rn})),n.d(t,"fh",(function(){return an})),n.d(t,"Be",(function(){return cn})),n.d(t,"Gg",(function(){return on})),n.d(t,"vg",(function(){return sn})),n.d(t,"wg",(function(){return un})),n.d(t,"Ng",(function(){return ln})),n.d(t,"xg",(function(){return dn})),n.d(t,"Cf",(function(){return bn})),n.d(t,"wf",(function(){return fn})),n.d(t,"Cg",(function(){return hn})),n.d(t,"Ag",(function(){return pn})),n.d(t,"Bg",(function(){return gn})),n.d(t,"Fg",(function(){return On})),n.d(t,"Gh",(function(){return vn})),n.d(t,"Lc",(function(){return jn})),n.d(t,"Qh",(function(){return mn})),n.d(t,"zh",(function(){return yn})),n.d(t,"bf",(function(){return xn})),n.d(t,"X",(function(){return wn})),n.d(t,"U",(function(){return An})),n.d(t,"S",(function(){return En})),n.d(t,"ob",(function(){return kn})),n.d(t,"zg",(function(){return Cn})),n.d(t,"Hd",(function(){return Sn})),n.d(t,"Y",(function(){return Tn})),n.d(t,"Zb",(function(){return _n})),n.d(t,"Df",(function(){return In})),n.d(t,"z",(function(){return Rn})),n.d(t,"A",(function(){return Ln})),n.d(t,"V",(function(){return Pn})),n.d(t,"T",(function(){return Gn})),n.d(t,"pb",(function(){return Mn})),n.d(t,"ch",(function(){return Bn})),n.d(t,"eh",(function(){return Dn})),n.d(t,"dh",(function(){return Nn})),n.d(t,"x",(function(){return zn})),n.d(t,"y",(function(){return Hn})),n.d(t,"Vc",(function(){return Yn})),n.d(t,"Wc",(function(){return Xn})),n.d(t,"id",(function(){return Un})),n.d(t,"Hg",(function(){return Fn})),n.d(t,"Dg",(function(){return Wn})),n.d(t,"r",(function(){return Vn})),n.d(t,"p",(function(){return Kn})),n.d(t,"q",(function(){return qn})),n.d(t,"o",(function(){return Jn})),n.d(t,"Cd",(function(){return Qn})),n.d(t,"Hh",(function(){return $n})),n.d(t,"lf",(function(){return er})),n.d(t,"kf",(function(){return tr})),n.d(t,"if",(function(){return nr})),n.d(t,"jf",(function(){return rr})),n.d(t,"t",(function(){return ar})),n.d(t,"Ed",(function(){return ir})),n.d(t,"Ff",(function(){return cr})),n.d(t,"df",(function(){return or})),n.d(t,"td",(function(){return sr})),n.d(t,"vc",(function(){return ur})),n.d(t,"Z",(function(){return lr})),n.d(t,"wc",(function(){return dr})),n.d(t,"ab",(function(){return br})),n.d(t,"v",(function(){return fr})),n.d(t,"mf",(function(){return hr})),n.d(t,"Mf",(function(){return pr})),n.d(t,"Vd",(function(){return gr})),n.d(t,"th",(function(){return Or})),n.d(t,"Of",(function(){return vr})),n.d(t,"Qf",(function(){return jr})),n.d(t,"Pf",(function(){return mr})),n.d(t,"Nf",(function(){return yr})),n.d(t,"wb",(function(){return xr})),n.d(t,"m",(function(){return wr})),n.d(t,"Rc",(function(){return Ar})),n.d(t,"Rd",(function(){return Er})),n.d(t,"Md",(function(){return kr})),n.d(t,"Sd",(function(){return Cr})),n.d(t,"Re",(function(){return Sr})),n.d(t,"vd",(function(){return Tr})),n.d(t,"Tg",(function(){return _r})),n.d(t,"zc",(function(){return Ir})),n.d(t,"Zc",(function(){return Rr})),n.d(t,"Ue",(function(){return Lr})),n.d(t,"ye",(function(){return Pr})),n.d(t,"ze",(function(){return Gr})),n.d(t,"R",(function(){return Mr})),n.d(t,"Ie",(function(){return Br})),n.d(t,"hf",(function(){return Dr})),n.d(t,"he",(function(){return Nr})),n.d(t,"Gd",(function(){return zr})),n.d(t,"Tf",(function(){return Hr})),n.d(t,"Uf",(function(){return Yr})),n.d(t,"Oc",(function(){return Xr})),n.d(t,"Pc",(function(){return Ur})),n.d(t,"eg",(function(){return Fr})),n.d(t,"yb",(function(){return Wr})),n.d(t,"xb",(function(){return Vr})),n.d(t,"tb",(function(){return Zt})),n.d(t,"Nd",(function(){return Jr})),n.d(t,"C",(function(){return Qr})),n.d(t,"qh",(function(){return Zr})),n.d(t,"sh",(function(){return $r})),n.d(t,"rh",(function(){return ea})),n.d(t,"B",(function(){return ta})),n.d(t,"fd",(function(){return na})),n.d(t,"Fe",(function(){return ra})),n.d(t,"N",(function(){return aa})),n.d(t,"O",(function(){return ia})),n.d(t,"ph",(function(){return ca})),n.d(t,"Eh",(function(){return oa})),n.d(t,"Fh",(function(){return sa})),n.d(t,"Id",(function(){return ua})),n.d(t,"i",(function(){return la})),n.d(t,"qd",(function(){return da})),n.d(t,"Mg",(function(){return ba})),n.d(t,"Wg",(function(){return fa})),n.d(t,"sg",(function(){return ha})),n.d(t,"rg",(function(){return pa})),n.d(t,"Sb",(function(){return ga})),n.d(t,"Nb",(function(){return Oa})),n.d(t,"ae",(function(){return va})),n.d(t,"lc",(function(){return ja})),n.d(t,"kc",(function(){return ma})),n.d(t,"tf",(function(){return ya})),n.d(t,"Dh",(function(){return xa})),n.d(t,"Gc",(function(){return wa})),n.d(t,"Hc",(function(){return Aa})),n.d(t,"Ic",(function(){return Ea})),n.d(t,"cb",(function(){return ka})),n.d(t,"Oe",(function(){return Ca})),n.d(t,"bg",(function(){return Sa})),n.d(t,"Ne",(function(){return Ta})),n.d(t,"If",(function(){return _a})),n.d(t,"Hf",(function(){return Ia})),n.d(t,"bb",(function(){return Ra})),n.d(t,"b",(function(){return La})),n.d(t,"c",(function(){return Pa})),n.d(t,"mg",(function(){return Ga})),n.d(t,"ng",(function(){return Ma})),n.d(t,"lg",(function(){return Ba})),n.d(t,"Qc",(function(){return Da})),n.d(t,"af",(function(){return Na})),n.d(t,"gb",(function(){return za})),n.d(t,"Ef",(function(){return Ha})),n.d(t,"Nc",(function(){return Ya})),n.d(t,"rb",(function(){return Xa})),n.d(t,"sb",(function(){return Ua})),n.d(t,"of",(function(){return Fa})),n.d(t,"Ug",(function(){return Wa})),n.d(t,"W",(function(){return Va})),n.d(t,"Ib",(function(){return Ka})),n.d(t,"ih",(function(){return qa})),n.d(t,"Xd",(function(){return Ja})),n.d(t,"qb",(function(){return Qa})),n.d(t,"hb",(function(){return Za})),n.d(t,"ue",(function(){return $a})),n.d(t,"te",(function(){return ei})),n.d(t,"Ob",(function(){return ti})),n.d(t,"Lf",(function(){return ni})),n.d(t,"Fd",(function(){return ri})),n.d(t,"ub",(function(){return ai})),n.d(t,"Ad",(function(){return ii})),n.d(t,"pd",(function(){return ci})),n.d(t,"jg",(function(){return oi})),n.d(t,"gd",(function(){return si})),n.d(t,"ce",(function(){return ui})),n.d(t,"wd",(function(){return li})),n.d(t,"Pd",(function(){return di})),n.d(t,"yc",(function(){return bi})),n.d(t,"Qd",(function(){return fi})),n.d(t,"Od",(function(){return hi})),n.d(t,"Wd",(function(){return pi})),n.d(t,"fc",(function(){return gi})),n.d(t,"Fc",(function(){return Oi})),n.d(t,"Rb",(function(){return vi})),n.d(t,"Qb",(function(){return ji})),n.d(t,"se",(function(){return mi})),n.d(t,"Ve",(function(){return yi})),n.d(t,"md",(function(){return xi})),n.d(t,"Me",(function(){return wi})),n.d(t,"yg",(function(){return Ai})),n.d(t,"D",(function(){return Ei})),n.d(t,"gh",(function(){return ki})),n.d(t,"Tb",(function(){return Ci})),n.d(t,"Ye",(function(){return Si})),n.d(t,"Zg",(function(){return Ti})),n.d(t,"Xg",(function(){return _i})),n.d(t,"gf",(function(){return Ii})),n.d(t,"sd",(function(){return Ri})),n.d(t,"M",(function(){return Li})),n.d(t,"Bh",(function(){return Kr})),n.d(t,"be",(function(){return qr})),n.d(t,"lb",(function(){return Gi})),n.d(t,"ic",(function(){return Pi})),n.d(t,"hc",(function(){return Bi})),n.d(t,"Yd",(function(){return Di})),n.d(t,"Zd",(function(){return Ni})),n.d(t,"oh",(function(){return zi})),n.d(t,"Cb",(function(){return Hi})),n.d(t,"Fb",(function(){return Yi})),n.d(t,"Eb",(function(){return Xi})),n.d(t,"Bb",(function(){return Ui})),n.d(t,"Ab",(function(){return Fi})),n.d(t,"zb",(function(){return Wi})),n.d(t,"Ph",(function(){return Vi})),n.d(t,"Jb",(function(){return Ki})),n.d(t,"hh",(function(){return qi})),n.d(t,"Qg",(function(){return Ji})),n.d(t,"Kf",(function(){return Qi})),n.d(t,"Rf",(function(){return Zi})),n.d(t,"cf",(function(){return $i})),n.d(t,"jc",(function(){return ec})),n.d(t,"Dd",(function(){return tc})),n.d(t,"Ig",(function(){return nc})),n.d(t,"Bd",(function(){return rc})),n.d(t,"nh",(function(){return ac})),n.d(t,"bc",(function(){return ic})),n.d(t,"ac",(function(){return cc})),n.d(t,"yh",(function(){return oc})),n.d(t,"Sc",(function(){return sc})),n.d(t,"Td",(function(){return uc})),n.d(t,"kd",(function(){return lc})),n.d(t,"Mh",(function(){return dc})),n.d(t,"Lh",(function(){return bc})),n.d(t,"Nh",(function(){return fc})),n.d(t,"Ac",(function(){return hc})),n.d(t,"Lg",(function(){return pc})),n.d(t,"u",(function(){return gc})),n.d(t,"xf",(function(){return Oc})),n.d(t,"yf",(function(){return vc})),n.d(t,"vf",(function(){return jc})),n.d(t,"zf",(function(){return mc})),n.d(t,"jd",(function(){return yc})),n.d(t,"sc",(function(){return xc})),n.d(t,"Sh",(function(){return wc})),n.d(t,"Le",(function(){return Ac})),n.d(t,"Kh",(function(){return Ec})),n.d(t,"Yc",(function(){return kc})),n.d(t,"xh",(function(){return Cc})),n.d(t,"uh",(function(){return Sc})),n.d(t,"Jh",(function(){return Tc})),n.d(t,"re",(function(){return _c})),n.d(t,"P",(function(){return Ic})),n.d(t,"Kb",(function(){return Rc})),n.d(t,"Mb",(function(){return Lc})),n.d(t,"Lb",(function(){return Pc})),n.d(t,"Jd",(function(){return Gc})),n.d(t,"Sf",(function(){return Mc})),n.d(t,"pf",(function(){return Bc})),n.d(t,"we",(function(){return Dc})),n.d(t,"cg",(function(){return Nc})),n.d(t,"Pb",(function(){return zc})),n.d(t,"Gf",(function(){return Hc})),n.d(t,"ee",(function(){return Yc})),n.d(t,"qf",(function(){return Xc})),n.d(t,"ef",(function(){return Uc})),n.d(t,"ff",(function(){return Fc})),n.d(t,"Yg",(function(){return Wc})),n.d(t,"cc",(function(){return Mi})),n.d(t,"ve",(function(){return Kc})),n.d(t,"wh",(function(){return qc})),n.d(t,"Ah",(function(){return Jc})),n.d(t,"Wb",(function(){return Vc})),n.d(t,"Xf",(function(){return Qc})),n.d(t,"Wf",(function(){return Zc})),n.d(t,"cd",(function(){return $c})),n.d(t,"ed",(function(){return eo})),n.d(t,"dd",(function(){return to})),n.d(t,"g",(function(){return ro})),n.d(t,"Xb",(function(){return ao})),n.d(t,"Yb",(function(){return io})),n.d(t,"Uc",(function(){return co}));var r,a,i,c,o,s,u,l,d,b,f,h,p,g,O,v,j,m,y,x,w,A,E,k,C,S,T=n(2),_=n(4),I=n(115),R=n(20),L=n(11),P=n(63),G=new URLSearchParams(window.location.search);!function(e){e.done="done",e.in_progress="in_progress"}(h||(h={})),function(e){e.eraserOpen="eraserOpen",e.eraserType="eraserType",e.patchOpen="patchOpened",e.cropOpen="cropOpen",e.templateCategory="templateCategory",e.templateSearch="templateSearch",e.search="search",e.category="category",e.template="template",e.background="background",e.photos="photos",e.stickers="stickers",e.image="image",e.imageId="imageId",e.stickerId="stickerId",e.projectId="projectId",e.templateSize="templateSize",e.customSize="customSize",e.unit="unit",e.activeTemplateCategory="activeTemplateCategory",e.tab="tab",e.batch="batch",e.batch_key="batch_key",e.collectionId="collectionId",e.logo="logo",e.title="title",e.apiKey="apiKey",e.defaultTemplateId="defaultTemplateId",e.paymentFlow="paymentFlow",e.resultCode="resultCode",e.refusalReason="refusalReason",e.text="text"}(p||(p={})),function(e){e.projectId="projectId"}(g||(g={})),function(e){e.stickers="stickers",e.magic="magic-effects",e.duotone="duotone",e.colorToning="color-toning-effects",e.rainbow="rainbow-effects",e.overlays="overlays",e.text="text",e.light="lut-filters",e.stretch="runout",e.style="color-transfer",e.canvasEffect="canvas-effect",e.colorExposure="color-exposure",e.sky="sky",e.sketch="sketch-effects"}(O||(O={})),function(e){e.templateEditor="editor",e.upscale="upscale",e.removeBackground="remove-background"}(v||(v={})),function(e){e.PREMIUM="premium",e.FTE="fte"}(j||(j={})),function(e){e.keyDown="keyDown",e.fromButton="fromButton"}(m||(m={})),function(e){e.LEFT="left",e.RIGHT="right"}(y||(y={})),function(e){e.click="click",e.wheel="wheel",e.touchMove="touchMove"}(x||(x={})),function(e){e.arrowLeft="ArrowLeft",e.arrowUp="ArrowUp",e.arrowRight="ArrowRight",e.arrowDown="ArrowDown",e.deleteBtn="Backspace",e.fnDelete="Delete",e.enter="Enter",e.esc="Escape",e.keyA="KeyA",e.keyB="KeyB",e.keyC="KeyC",e.keyD="KeyD",e.keyI="KeyI",e.keyS="KeyS",e.keyV="KeyV",e.keyU="KeyU",e.keyX="KeyX",e.keyZ="KeyZ",e.minus="Minus",e.equal="Equal",e.digit0="Digit0",e.bracketRight="BracketRight",e.bracketLeft="BracketLeft",e.metaLeft="MetaLeft",e.metaRight="MetaRight"}(w||(w={})),function(e){e.colorToning="color-toning-effects",e.rainbow="rainbow-effects",e.magic="magic-effects",e.duotone="duotone-effect",e.lut="lut-filters",e.runout="runout",e.doubleExposure="double-exposure",e.sketch="sketch-effect",e.canvasEffect="canvas-effect",e.canvasEffectMask="canvas-effect-mask",e.canvasEffecfilterImage="canvas-effect-filter-image",e.colorTransfer="color-transfer",e.overlay="overlay",e.sky="sky-effect",e.imageEngine="image-engine",e.imageEngineFeatured="featured",e.imageEngineFX="fx",e.imageEngineBlur="blur",e.imageEnginePopArt="popArt",e.imageEngineArtistic="artistic",e.imageEngineColors="colors",e.imageEngineDistort="distort"}(A||(A={})),function(e){e.remover="remover",e.removeObjectBg="remove-object-bg",e.hsl="hsl"}(E||(E={})),function(e){e.background="fit",e.uploads="upload",e.templates="template",e.photos="add_photo",e.stickers="sticker",e.effects="effect",e.text="text",e.elements="shape",e.grids="grids",e.draw="draw"}(k||(k={})),function(e){e.ERASER="eraser",e.BRUSH="brush"}(C||(C={})),function(e){e.NONE="none",e.ONLY_SKETCH="only_sketch",e.TWO_SKETCH="two_sketch",e.FLIP_SKETCH="flip_sketch"}(S||(S={}));var M,B={canvas:"canvas-effect",colorToning:"color-toning-settings",background:"background",styleTransfer:"style-transfer-settings",doubleExposure:"double-exposure-settings",duotone:"duotone-settings",lut:"lut",magic:"magic-settings",sketch:"sketch-effect",shape:"shape",rainbow:"rainbow-settings",overlays:"overlays",sky:"sky-settings",featured:"image-engine-featured",fx:"image-engine-fx",blur:"image-engine-blur",artistic:"image-engine-artistic",popArt:"image-engine-popArt",distort:"image-engine-distort",paper:"image-engine-paper",colors:"image-engine-colors",packages:"packages"};!function(e){e.ICONS="icons",e.SIMPLE_SHAPES="simple-shapes",e.ORGANIC_SHAPES="organic-shapes",e.SVG_STICKERS="svg-stickers"}(M||(M={}));var D,N,z,H,Y,X,U,F,W={package_app_icons:R.a.ICON,package_simple_shapes:R.a.SHAPE,package_organic_shapes:R.a.ORGANIC_SHAPE,package_abstract_shapes:R.a.ABSTRACT_SHAPE,package_decorative_shapes:R.a.DECORATIVE_SHAPE,package_sticker_icons:R.a.SVG_STICKER};!function(e){e.line="line",e.bend="bend",e.font_bold="font_bold",e.font_size="font_size",e.text_align="text_align",e.letterSpace="letterSpace",e.font_family="font_family",e.font_italic="font_italic",e.textTransform="textTransform",e.font_semiBold="font_semiBold"}(D||(D={})),function(e){e.colorOpacity="colorOpacity",e.sizeOutline="sizeOutline",e.opacityOutline="opacityOutline",e.shadowOffsetX="shadowOffsetX",e.shadowOffsetY="shadowOffsetY",e.opacity="opacity",e.shadowBlur="shadowBlur",e.textDecoration="textDecoration",e.fontStyle="fontStyle",e.lineHeight="lineHeight",e.letterSpacing="letterSpacing",e.fontSize="fontSize",e.outlineTransparent="outlineTransparent",e.colorTransparent="colorTransparent",e.shadowTransparent="shadowTransparent",e.fontFamily="fontFamily",e.bend="bend"}(N||(N={})),function(e){e.brightness="brightness",e.contrast="contrast",e.shadows="shadows",e.highlights="highlights",e.opacity="opacity",e.saturation="saturation",e.hue="hue",e.clarity="clarity",e.temperature="temperature",e.zoom="zoom",e.rotate="rotate"}(z||(z={})),function(e){e.hsl_index="hsl_index",e.hsl_hue="hsl_hue",e.hsl_lightness="hsl_lightness",e.hsl_saturation="hsl_saturation"}(H||(H={})),function(e){e.INCORRECT_SHAPE_DATA="Data provided for Shape is incorrect",e.OOPS="Oops..."}(Y||(Y={})),function(e){e.opposite="opposite",e.adjacent="adjacent"}(X||(X={})),function(e){e[e.ARROW_LEFT=37]="ARROW_LEFT",e[e.ARROW_UP=38]="ARROW_UP",e[e.ARROW_RIGHT=39]="ARROW_RIGHT",e[e.ARROW_DOWN=40]="ARROW_DOWN"}(U||(U={})),function(e){e.file="we_p_a_d_f",e.fileName="we_p_a_d_f_n",e.data="we_p_a_d_p_d",e.analytics="we_p_a_d_a"}(F||(F={}));var V,K,q,J,Q,Z,$="otp-image-id";!function(e){e.picsart="picsart",e.shutterstock="shutterstock",e.unsplash="unsplash"}(V||(V={})),function(e){e.canvas="canvas",e.layers="layers"}(K||(K={})),function(e){e.OFFLINE="OFFLINE",e.SAVING="SAVING",e.NOT_SAVED="NOT_SAVED",e.SAVED="SAVED",e.INITIAL="INITIAL"}(q||(q={})),function(e){e.PENDING="pending",e.IN_PROGRESS="in_progress",e.DONE="done",e.ERROR="error"}(J||(J={})),function(e){e.remover="remover",e.replace="replace",e.eraser="eraser",e.crop="crop",e.duplicate="duplicate",e.delete="remove"}(Q||(Q={})),function(e){e.FONT="font",e.TEXT_STYLES="text-styles",e.COLOR="color",e.BLEND="blend",e.ADJUST="adjust",e.OUTLINE="outline",e.EFFECTS="effects",e.SHADOW="shadow",e.GRADIENT="gradient",e.TEXTURE="texture",e.GRID_ADJUST="grid-adjust"}(Z||(Z={}));var ee,te=[Z.ADJUST,Z.EFFECTS,"adjust_image_engine",Z.BLEND,Z.COLOR,Z.GRADIENT,"texture",Z.FONT,Z.TEXT_STYLES,Z.GRID_ADJUST,Z.OUTLINE,Z.SHADOW,"transform","position",Q.remover,Q.replace,Q.eraser,Q.crop,Q.duplicate,Q.delete,"upscale"],ne=G.get(p.logo),re=G.get(p.title),ae=G.get(p.apiKey),ie="https://api.picsart.io",ce={editorOnly:Boolean(Number("0")),categories:(null===(r="BACKGROUND UPLOADS PHOTOS STICKERS TEXT ELEMENTS TEMPLATES")?void 0:r.split(" "))||["BACKGROUND","UPLOADS","TEMPLATES","PHOTOS","STICKERS","TEXT","OVERLAYS","ELEMENTS","DRAW"],undoRedo:Boolean(Number("1")),zoom:Boolean(Number("1")),previewMode:Boolean(Number("1")),bugSnag:Boolean(Number("1")),analytics:Object({NODE_ENV:"production",PUBLIC_URL:"/create",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_UNSPLASH_KEY:"0B4xk-a2cAP3fMI2dSeBw5vM84BbxPmLGGvbVN_RQ8E",REACT_APP_ADYEN_KEY:"live_AWRY4KLIVNGCRDVAOUBDDX4OU4UE4VPH",REACT_APP_ZOOM:"1",REACT_APP_HINTS:"1",REACT_APP_UNDO_REDO:"1",REACT_APP_EDITOR_ONLY:"0",REACT_APP_BUGSNAG_ENV:"production",REACT_APP_API_URL:"https://api.picsart.com",REACT_APP_FONT_TOOLS:"typeFace size fontSettings letter line caps align",REACT_APP_CATEGORIES:"BACKGROUND UPLOADS PHOTOS STICKERS TEXT ELEMENTS TEMPLATES",REACT_APP_TOOLS:"blend font effects remove duplicate replace color gradient shadow outline adjust crop remover eraser texture text-styles",REACT_APP_BUGSNAG:"1",REACT_APP_BASE_PATH:"/",REACT_APP_AUTOSAVE:"0",REACT_APP_INFO_POPUP:"1",REACT_APP_SUBSCRIPTION:"1",REACT_APP_PREVIEW_MODE:"1",REACT_APP_RESTORE_STATE:"0",REACT_APP_AUTHENTICATION:"1",REACT_APP_IMAGE_EXTENSIONS:"jpeg jpg png",REACT_APP_CDN_130:"https://cdn130.picsart.com",REACT_APP_CDN_140:"https://cdn140.picsart.com",REACT_APP_AI_WEB:"https://aiweb.picsart.com/v2",REACT_APP_PA_STATIC:"https://pastatic.picsart.com",REACT_APP_UPLOAD_URL:"https://upload.picsart.com",REACT_APP_DEV_EFFRES:"https://dev-effres.picsart.com",REACT_APP_ALLOWED_MIME_TYPES:"image/jpeg image/png",REACT_APP_BUGSNAG_API_KEY:"02fb138278325575bce8a4784629009a",REACT_APP_HELP_WIDGET:"HINT SHORTCUT FEEDBACK HELP LANGUAGE"}).REACT_APP_ANALYTICS||"gtag",helpWidget:null===(a="HINT SHORTCUT FEEDBACK HELP LANGUAGE")?void 0:a.split(" "),authentication:Boolean(Number("1")),tools:(null===(i="blend font effects remove duplicate replace color gradient shadow outline adjust crop remover eraser texture text-styles")?void 0:i.split(" "))||te,fontTools:null===(c="typeFace size fontSettings letter line caps align")?void 0:c.split(" "),languageSlug:null===(o=Object({NODE_ENV:"production",PUBLIC_URL:"/create",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_UNSPLASH_KEY:"0B4xk-a2cAP3fMI2dSeBw5vM84BbxPmLGGvbVN_RQ8E",REACT_APP_ADYEN_KEY:"live_AWRY4KLIVNGCRDVAOUBDDX4OU4UE4VPH",REACT_APP_ZOOM:"1",REACT_APP_HINTS:"1",REACT_APP_UNDO_REDO:"1",REACT_APP_EDITOR_ONLY:"0",REACT_APP_BUGSNAG_ENV:"production",REACT_APP_API_URL:"https://api.picsart.com",REACT_APP_FONT_TOOLS:"typeFace size fontSettings letter line caps align",REACT_APP_CATEGORIES:"BACKGROUND UPLOADS PHOTOS STICKERS TEXT ELEMENTS TEMPLATES",REACT_APP_TOOLS:"blend font effects remove duplicate replace color gradient shadow outline adjust crop remover eraser texture text-styles",REACT_APP_BUGSNAG:"1",REACT_APP_BASE_PATH:"/",REACT_APP_AUTOSAVE:"0",REACT_APP_INFO_POPUP:"1",REACT_APP_SUBSCRIPTION:"1",REACT_APP_PREVIEW_MODE:"1",REACT_APP_RESTORE_STATE:"0",REACT_APP_AUTHENTICATION:"1",REACT_APP_IMAGE_EXTENSIONS:"jpeg jpg png",REACT_APP_CDN_130:"https://cdn130.picsart.com",REACT_APP_CDN_140:"https://cdn140.picsart.com",REACT_APP_AI_WEB:"https://aiweb.picsart.com/v2",REACT_APP_PA_STATIC:"https://pastatic.picsart.com",REACT_APP_UPLOAD_URL:"https://upload.picsart.com",REACT_APP_DEV_EFFRES:"https://dev-effres.picsart.com",REACT_APP_ALLOWED_MIME_TYPES:"image/jpeg image/png",REACT_APP_BUGSNAG_API_KEY:"02fb138278325575bce8a4784629009a",REACT_APP_HELP_WIDGET:"HINT SHORTCUT FEEDBACK HELP LANGUAGE"}).REACT_APP_LANGUAGE_SLUG)||void 0===o?void 0:o.toLowerCase(),subscription:Boolean(Number("1")),hints:Boolean(Number("1")),autoSave:Boolean(Number("0")),adjustSettings:(null===(s=Object({NODE_ENV:"production",PUBLIC_URL:"/create",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_UNSPLASH_KEY:"0B4xk-a2cAP3fMI2dSeBw5vM84BbxPmLGGvbVN_RQ8E",REACT_APP_ADYEN_KEY:"live_AWRY4KLIVNGCRDVAOUBDDX4OU4UE4VPH",REACT_APP_ZOOM:"1",REACT_APP_HINTS:"1",REACT_APP_UNDO_REDO:"1",REACT_APP_EDITOR_ONLY:"0",REACT_APP_BUGSNAG_ENV:"production",REACT_APP_API_URL:"https://api.picsart.com",REACT_APP_FONT_TOOLS:"typeFace size fontSettings letter line caps align",REACT_APP_CATEGORIES:"BACKGROUND UPLOADS PHOTOS STICKERS TEXT ELEMENTS TEMPLATES",REACT_APP_TOOLS:"blend font effects remove duplicate replace color gradient shadow outline adjust crop remover eraser texture text-styles",REACT_APP_BUGSNAG:"1",REACT_APP_BASE_PATH:"/",REACT_APP_AUTOSAVE:"0",REACT_APP_INFO_POPUP:"1",REACT_APP_SUBSCRIPTION:"1",REACT_APP_PREVIEW_MODE:"1",REACT_APP_RESTORE_STATE:"0",REACT_APP_AUTHENTICATION:"1",REACT_APP_IMAGE_EXTENSIONS:"jpeg jpg png",REACT_APP_CDN_130:"https://cdn130.picsart.com",REACT_APP_CDN_140:"https://cdn140.picsart.com",REACT_APP_AI_WEB:"https://aiweb.picsart.com/v2",REACT_APP_PA_STATIC:"https://pastatic.picsart.com",REACT_APP_UPLOAD_URL:"https://upload.picsart.com",REACT_APP_DEV_EFFRES:"https://dev-effres.picsart.com",REACT_APP_ALLOWED_MIME_TYPES:"image/jpeg image/png",REACT_APP_BUGSNAG_API_KEY:"02fb138278325575bce8a4784629009a",REACT_APP_HELP_WIDGET:"HINT SHORTCUT FEEDBACK HELP LANGUAGE"}).REACT_APP_ADJUST_SETTINGS)||void 0===s?void 0:s.split(" "))||["light","colors","details","hsl","positioning"],infoPopup:Boolean(Number("1")),restoreState:Boolean(Number("0")),logo:ne,title:re,apiKey:ae},oe={z_100:{label:"100%",value:1},z_200:{label:"200%",value:2},z_300:{label:"300%",value:3},z_75:{label:"75%",value:.75},z_50:{label:"50%",value:.5},z_25:{label:"25%",value:.25},z_10:{label:"10%",value:.1},fit:{label:"Fit",value:1},fill:{label:"Fill",value:"fill"}},se={brightness:0,saturation:0,contrast:0,zoom:0,rotate:0,hue:0,opacity:100,border:0,highlights:0,clarity:0,temperature:0,shadows:0,hsl:{}},ue={border:35,i_small:{w:58,h:36},t_small:{w:60,h:72},t_medium:{w:180,h:152},t_vertical:{w:132,h:44}},le="en",de="https://cdn140.picsart.com/35760842517696041022.jpeg",be="is_hovering",fe="EXPORT_RIGHT",he="Use your image",pe="photo",ge="photos",Oe="video",ve="texture",je="font",me="unsplash_photo",ye="shutterstock_photo",xe="pdf",we="shape",Ae="icons",Ee="element-child",ke="sticker",Ce="elements",Se="stickers",Te="images",_e="stickers-tool",Ie="scroll-layers",Re="template-collage",Le="free-grid",Pe="free-grid-cell",Ge="free-grid-cell-image",Me="free-grid-cell-shape",Be="template-collage-photo",De="NONE",Ne="text",ze="outline",He="shadow",Ye="color",Xe="gradient",Ue="is_vector",Fe="template",We="add_object",Ve="grid",Ke="template-background-texture",qe="effect",Je="effects",Qe="overlay",Ze="all_sizes",$e="canvas",et="language",tt=["goldwidget"],nt="upscale",rt="image_template",at="gold_icon",it="uploads",ct="Untitled",ot="in_progress",st="done",ut="error",lt="success",dt="pending",bt="premium",ft="adjust",ht="adjust_hsl",pt="hsl",gt=/^(hue|saturation|luminance)[0-7]$/,Ot=/\d+$/,vt=/^(-?([0-9]|[1-9][0-9]|100)?)$/,jt=/^([0-9]|[1-9][0-9]|100)$/,mt=/^-?([0-9]*|1[0-7][0-9]|180)$/,yt=/^([0-9]|[1-8][0-9]|9[0-9]|1[0-9][0-9]|2[0-5][0-9]|259)$/,xt=/^(-([0-9]|[1-4][0-9]|50)?|([0-9]|[1-8][0-9]|[1-9][0-9]|100))$/,wt=/^(-([0-9]|[1-8][0-9]|9[0-9]|1[0-8][0-9]|180)?|([0-9]|[1-8][0-9]|9[0-9]|1[0-8][0-9]|180))$/,At=/^([0-9]|[1-9][0-9]|9[0-9]|100)$/,Et=/^(?:-[1-9]|-?[1-4][0-9]|-?50|[0-9])$/,kt=/^#?([A-Fa-f\d]{2})([A-Fa-f\d]{2})([A-Fa-f\d]{2})([A-Fa-f\d]{0,2})$/i,Ct=/^([0-9]|10)$/,St=/^([1-9][0-9]{0,2})$/,Tt=5,_t=.25,It=.998,Rt=100,Lt=100,Pt=200,Gt=10,Mt=120,Bt=50,Dt=1024,Nt=2048,zt=800,Ht="The dimensions should be less than 2048px",Yt="The dimensions should be less than 1024px",Xt="This tool works best with file sizes larger than 800px",Ut=.75,Ft=.9,Wt=.9,Vt=.6,Kt=12.5,qt=150,Jt="space-",Qt={minCM:.43,minPixel:16,minInch:.17,maxCM:211.66,maxInch:83.33,maxPixel:8e3};!function(e){e.pixel="px",e.inch="in",e.centimeter="cm"}(ee||(ee={}));var Zt,$t,en=[{label:ee.pixel,value:ee.pixel},{label:ee.inch,value:ee.inch},{label:ee.centimeter,value:ee.centimeter}],tn={JPG:".jpg",PNG:".png",PDF:".pdf"},nn=[{label:"JPG",value:".jpg"},{label:"PNG",value:".png",icon:"goldIcon"},{label:"PDF",value:".pdf",icon:"goldIcon"}],rn=[{label:"Photo",value:"photo"},{label:"Sticker",value:"sticker"}],an=165,cn=1,on=.3,sn=100,un={r:255,g:255,b:255},ln={r:255,g:255,b:255,a:0},dn={r:0,g:0,b:0},bn={r:255,g:255,b:255},fn=5,hn=.05,pn=.6,gn=20,On=100,vn=!1,jn="rect-gradient",mn="-shape-group",yn="-effect-group",xn="rect-group",wn="crop-main",An="crop-group",En="fake-group",kn="default-tr",Cn="text-group",Sn="localImage",Tn="#".concat(wn),_n="effect-group",In="shape-group",Rn="base-group",Ln="#".concat(Rn),Pn="#".concat(An),Gn="#".concat(En),Mn="#".concat(kn),Bn="wordMark",Dn="watermark",Nn="#".concat(Bn),zn="background",Hn="#".concat(zn),Yn="hover-border",Xn="#".concat(Yn),Un="image-engine-effect",Fn="text_style",Wn="text_presets",Vn="simple_text",Kn="GTM-PQ45W6W",qn="photo_editor",Jn="dataLayer",Qn={duplicate:"duplicate",remove:"remove",back:"back",front:"front",backward:"backward",forward:"forward",copy:"copy",cut:"cut",paste:"paste",flipHorizontal:"flipHorizontal",flipVertical:"flipVertical"},Zn=ce.tools.includes("duplicate")?[{id:0,name:"Copy",type:"copy"},{id:1,name:"Cut",type:"cut"},{id:2,name:"Paste",type:"paste"},{id:3,name:"Duplicate",type:"duplicate",dataTest:"duplicate"}]:[],$n=[].concat(Zn,[{id:4,name:"Delete",type:"remove",dataTest:"delete"},{id:5,name:"Send to Back",type:"back",dataTest:"send_to_back"},{id:6,name:"Send Backward",type:"backward",dataTest:"send_backward"},{id:7,name:"Bring Forward",type:"forward",dataTest:"bring_forward"},{id:8,name:"Bring to Front",type:"front",dataTest:"bring_to_front"},{id:9,name:"Flip Horizontal",type:Qn.flipHorizontal,dataTest:"flip_horizontal"},{id:10,name:"Flip Vertical",type:Qn.flipVertical,dataTest:"flip_vertical"}]),er=168,tr=40,nr=$n.length*tr+52,rr=90,ar="website",ir="layerType",cr="shouldOverdrawWholeArea",or="REMOVED_RECT_GROUP",sr="IS_TRANSFORM_END",ur="fake-tr",lr="crop-tr",dr="#".concat(ur),br="#".concat(lr),fr="attachedId",hr="remove-object-bg-applied",pr=500,gr="meme_templates",Or={r:255,g:255,b:255},vr="sketch-effect-image-clip",jr="sketch-rect",mr="sketch-effect-image",yr="sketch-effect-image2",xr="double-exposure-image-clip-group",wr=["mouseenter","mouseleave","click","dblclick","mousedown","mouseover","mouseout"],Ar=8,Er=1e3,kr=200,Cr=8,Sr="image/png",Tr="image/jpeg",_r=[Tr,Sr,".ttf",".otf",".woff"],Ir="font_collections",Rr=[Object(L.c)(L.b.paColor96),Object(L.c)(L.b.paColor97),Object(L.c)(L.b.paColor98),Object(L.c)(L.b.paColor99),Object(L.c)(L.b.paColor100),Object(L.c)(L.b.paColor102),Object(L.c)(L.b.paColor101),Object(L.c)(L.b.paColor103)],Lr={default:{title:"Upgrade to Gold",contentBeforeLink:"You\u2019re using a premium feature.",contentAfterLink:"to remove the watermark and enjoy the full experience."},hsl:{title:"HSL is a premium feature",contentBeforeLink:"Get the most out of editing with advanced color adjustments.",contentAfterLink:"to remove the watermark"}},Pr="chooser",Gr="create_flow",Mr="commercial",Br="personal",Dr="success",Nr="no_search_result",zr="licenses",Hr="search",Yr="see_all",Xr=Object(L.c)(L.b.paColor68),Ur=3,Fr=[We,Fe,Ve,"free_style"],Wr="1",Vr=0;!function(e){e[e.vertical=0]="vertical",e[e.horizontal=1]="horizontal"}(Zt||(Zt={})),function(e){e.photo="photo",e.sticker="sticker",e.text="text",e.collageCell="collage-cell",e.collageCellImage="collage-cell-image",e.backgroundImage="background-image",e.backgroundColor="background-color"}($t||($t={}));var Kr,qr,Jr=767,Qr="/create",Zr="https://api.picsart.com",$r="https://upload.picsart.com",ea="".concat(Zr,"/collections"),ta="/",na=Object({NODE_ENV:"production",PUBLIC_URL:"/create",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_UNSPLASH_KEY:"0B4xk-a2cAP3fMI2dSeBw5vM84BbxPmLGGvbVN_RQ8E",REACT_APP_ADYEN_KEY:"live_AWRY4KLIVNGCRDVAOUBDDX4OU4UE4VPH",REACT_APP_ZOOM:"1",REACT_APP_HINTS:"1",REACT_APP_UNDO_REDO:"1",REACT_APP_EDITOR_ONLY:"0",REACT_APP_BUGSNAG_ENV:"production",REACT_APP_API_URL:"https://api.picsart.com",REACT_APP_FONT_TOOLS:"typeFace size fontSettings letter line caps align",REACT_APP_CATEGORIES:"BACKGROUND UPLOADS PHOTOS STICKERS TEXT ELEMENTS TEMPLATES",REACT_APP_TOOLS:"blend font effects remove duplicate replace color gradient shadow outline adjust crop remover eraser texture text-styles",REACT_APP_BUGSNAG:"1",REACT_APP_BASE_PATH:"/",REACT_APP_AUTOSAVE:"0",REACT_APP_INFO_POPUP:"1",REACT_APP_SUBSCRIPTION:"1",REACT_APP_PREVIEW_MODE:"1",REACT_APP_RESTORE_STATE:"0",REACT_APP_AUTHENTICATION:"1",REACT_APP_IMAGE_EXTENSIONS:"jpeg jpg png",REACT_APP_CDN_130:"https://cdn130.picsart.com",REACT_APP_CDN_140:"https://cdn140.picsart.com",REACT_APP_AI_WEB:"https://aiweb.picsart.com/v2",REACT_APP_PA_STATIC:"https://pastatic.picsart.com",REACT_APP_UPLOAD_URL:"https://upload.picsart.com",REACT_APP_DEV_EFFRES:"https://dev-effres.picsart.com",REACT_APP_ALLOWED_MIME_TYPES:"image/jpeg image/png",REACT_APP_BUGSNAG_API_KEY:"02fb138278325575bce8a4784629009a",REACT_APP_HELP_WIDGET:"HINT SHORTCUT FEEDBACK HELP LANGUAGE"}).REACT_APP_IE_RESOURCES_PATH||"".concat("https://dev-effres.picsart.com","/effects"),ra="https://pastatic.picsart.com",aa="https://cdn130.picsart.com",ia="https://cdn140.picsart.com",ca="https://aiweb.picsart.com/v2",oa=!1,sa="picsart.com"===window.location.hostname,ua="we",la="live_AWRY4KLIVNGCRDVAOUBDDX4OU4UE4VPH",da=ce.autoSave,ba="".concat(ia,"/").concat(ce.editorOnly?"32100740010980471095":"24006428923291359486",".png"),fa="user_key",ha="temporary_user_limit_",pa="temporary",ga=("".concat(ua,"_survey_modal_count"),"".concat(ua,"_editor_is_open_modal")),Oa="".concat(ua,"-info-popup"),va="".concat(ua,"-my-replay-info-popup"),ja="".concat(ua,"_experiment_seeall_variant"),ma="".concat(ua,"_experiment_seeall_id"),ya="CDm03yihQtyAodsMgvt5uw",xa={name:"PicsArt Web Editor",version:6},wa="".concat(Zr,"/shop/categories/shape_masks?short=0"),Aa="".concat(Zr,"/shop/subscription/items-packages"),Ea="".concat(Zr,"/shop/subscription/users/items"),ka="".concat(Zr,"/users/show/me.json"),Ca="".concat(Zr,"/photos/show"),Sa="".concat(Zr,"/stickers/show"),Ta="".concat(Zr,"/shop/item"),_a="".concat(Zr,"/photos/unsplash/id"),Ia="".concat(Zr,"/shutterstock/photo"),Ra="".concat(Zr,"/location"),La="".concat($r,"/photos/add.json"),Pa="".concat($r,"/stickers/add.json"),Ga=("".concat(window.location.origin,"/u"),"".concat(Zr,"/templates/cards")),Ma="".concat(Zr,"/templates/search"),Ba="".concat(Zr,"/templates"),Da="".concat(Zr,"/templates/cards/hashtag"),Na="".concat(Zr,"/templates/cards/web_ratio_card?market=").concat(ar),za="".concat(Zr,"/templates/ratios"),Ha="".concat(Zr,"/shop"),Ya="".concat(ia,"/64362219110754792788.json"),Xa=150,Ua=150,Fa="".concat(Zr,"/collections/items/font"),Wa="".concat(Zr,"/file/add"),Va=120,Ka="picsart://create_flow",qa="https://apps.microsoft.com/windows/en-us/app/109e8ce6-65e9-4f52-b1b6-3942a9851cd8",Ja="".concat(Zr,"/deeplinks/redirect"),Qa=150,Za=150,$a=88,ei=100,ti=8,ni=360,ri=80,ai=193,ii=100,ci=4096,oi="CKHovx6O54",si=53,ui="".concat(ua,"_FontNames"),li=50,di=999,bi="".concat(Zr,"/shop/font"),fi=1024,hi=100,pi=3,gi="".concat(ua,"-eraser-first-open"),Oi="".concat(ua,"-editor-first-open"),vi="".concat(ua,"-editor-sticker-first-open"),ji="".concat(ua,"-editor-photo-first-open"),mi="".concat(ua,"-object-removal-first-open"),yi="".concat(ua,"-premium-toaster-shown"),xi="".concat(ua,"-image-placeholder-first-open"),wi="".concat(ua,"-photos-first-open"),Ai="".concat(ua,"-text-first-apply"),Ei="".concat(ua,"-batch-editor-first-open"),ki="".concat(ra,"/91671767329821691916.svg"),Ci="".concat(Zr,"/edit-history"),Si="".concat(Zr,"/projects"),Ti="".concat(Si,"/storage/usage"),_i="".concat(Zr,"/shop/subscription/restore"),Ii=186,Ri=!1,Li=188;!function(e){e.errorMessage="errorMessage",e.importantMessage="importantMessage"}(Kr||(Kr={})),function(e){e.THIS_IS_PREMIUM_EFFECT="This is a premium effect"}(qr||(qr={}));G.get(p.defaultTemplateId);var Pi,Gi="".concat(ia,"/80750985636351851972.png");!function(e){e.NO_ACCESS_REPLAY="NO_ACCESS_REPLAY",e.UPLOAD_FONT_UNSUPPORTED_ERROR="UPLOAD_FONT_UNSUPPORTED_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.CANVAS_ERROR="CANVAS_ERROR",e.TEMPLATE_ERROR="TEMPLATE_ERROR",e.GET_IMAGE_ERROR="GET_IMAGE_ERROR",e.SAVE_ERROR="SAVE_ERROR",e.SHARE_ERROR="SHARE_ERROR",e.APPLY_EFFECT_ERROR="APPLY_EFFECT_ERROR",e.MAGIC_EFFECTS_ERROR="MAGIC_EFFECTS_ERROR",e.UPLOAD_FILE_MAX_LIMIT_ERROR="UPLOAD_FILE_MAX_LIMIT_ERROR",e.UPLOAD_UNABLE_ERROR="UPLOAD_UNABLE_ERROR",e.UPLOAD_ERROR="UPLOAD_ERROR",e.UPLOAD_FILE_UNSUPPORTED_ERROR="UPLOAD_FILE_UNSUPPORTED_ERROR",e.BACKGROUND_REMOVAL_ERROR="BACKGROUND_REMOVAL_ERROR",e.DRAG_INTO_CANVAS_SIZE_ERROR="DRAG_INTO_CANVAS_SIZE_ERROR",e.DRAG_INTO_CANVAS_EMPTY_ERROR="DRAG_INTO_CANVAS_EMPTY_ERROR",e.DRAG_INTO_CANVAS_INVALID_MULTI_ERROR="DRAG_INTO_CANVAS_INVALID_MULTI_ERROR",e.SKETCH_EFFECT_ERROR="SKETCH_EFFECT_ERROR",e.MANAGE_STORAGE_ERROR="MANAGE_STORAGE_ERROR"}(Pi||(Pi={}));var Mi,Bi=(u={},Object(_.a)(u,Pi.NO_ACCESS_REPLAY,{type:Kr.errorMessage,message:"It seems  you don\u2019t have access to this replay.",onClose:function(){window.history.replaceState({},document.title,window.location.pathname)}}),Object(_.a)(u,Pi.UPLOAD_FONT_UNSUPPORTED_ERROR,{type:Kr.errorMessage,message:"Some of your files were not uploaded since the file type is invalid. Please update your selection to TTF, OTF or WOFF."}),Object(_.a)(u,Pi.SERVER_ERROR,{type:Kr.errorMessage,message:"Server error. Please try again in a couple of minutes."}),Object(_.a)(u,Pi.CANVAS_ERROR,{type:Kr.importantMessage,message:"Please make sure to use photos where a face is clearly visible."}),Object(_.a)(u,Pi.TEMPLATE_ERROR,{type:Kr.errorMessage,message:"Template no longer exists. Please select a different template."}),Object(_.a)(u,Pi.GET_IMAGE_ERROR,{type:Kr.errorMessage,message:"Unable to get image, please try again."}),Object(_.a)(u,Pi.SAVE_ERROR,{type:Kr.errorMessage,message:"An unexpected error occurred while saving your work, please try again."}),Object(_.a)(u,Pi.SHARE_ERROR,{type:Kr.errorMessage,message:"An unexpected error occurred while sharing your post, please try again."}),Object(_.a)(u,Pi.APPLY_EFFECT_ERROR,{type:Kr.errorMessage,message:"There was a problem with applying your effect, please try again."}),Object(_.a)(u,Pi.MAGIC_EFFECTS_ERROR,{type:Kr.errorMessage,message:"There was a problem with loading effects, please try refreshing your page."}),Object(_.a)(u,Pi.UPLOAD_FILE_MAX_LIMIT_ERROR,{type:Kr.importantMessage,message:"You can upload only one image."}),Object(_.a)(u,Pi.UPLOAD_UNABLE_ERROR,{type:Kr.errorMessage,message:"Unable to upload your image, please try again."}),Object(_.a)(u,Pi.UPLOAD_ERROR,{type:Kr.errorMessage,message:"An unexpected error occurred while uploading your image, please try again."}),Object(_.a)(u,Pi.UPLOAD_FILE_UNSUPPORTED_ERROR,{type:Kr.errorMessage,message:"Not a valid file type. Please update your selection to JPEG, JPG, or PNG."}),Object(_.a)(u,Pi.BACKGROUND_REMOVAL_ERROR,{type:Kr.errorMessage,message:"An unexpected error occurred while removing the background of your image, please try again."}),Object(_.a)(u,Pi.DRAG_INTO_CANVAS_SIZE_ERROR,{type:Kr.importantMessage,message:"You have selected too many images. You can only upload 30 images or 100 MB in total size."}),Object(_.a)(u,Pi.DRAG_INTO_CANVAS_EMPTY_ERROR,{type:Kr.importantMessage,message:"Please select files to upload."}),Object(_.a)(u,Pi.DRAG_INTO_CANVAS_INVALID_MULTI_ERROR,{type:Kr.errorMessage,message:"Some of your files were not uploaded since the file type is invalid. Please update your selection to JPEG, JPG, or PNG."}),Object(_.a)(u,Pi.SKETCH_EFFECT_ERROR,{type:Kr.importantMessage,message:"Person not detected, get better results by uploading a portrait."}),Object(_.a)(u,Pi.MANAGE_STORAGE_ERROR,{type:Kr.importantMessage,headerText:"Cloud Storage Full",message:"Please manage your storage to duplicate this Replay.",buttonText:"Got it",onClose:function(){"/create/my-replays"!==window.location.pathname&&"/my-replays"!==window.location.pathname&&(window.location.replace("my-replays"),P.a.sendEvent("popup_action","custom_event",{source:"my_replays",name:"storage_is_full",action_type:"got_it"}))}}),u),Di={imageWasDownloaded:"Your image is successfully downloaded.",imageWasShared:"Your image has been shared to Your PicsArt profile."},Ni={templateWarning:"Your changes won't be saved. Do you still want to change the template?",exitWarning:"Your changes won't be saved. Do you still want to exit?",effectWarning:"Please select a photo or sticker to apply an effect.",fontDeleteWarning:"Do you want to delete this font"},zi=null===(l="image/jpeg image/png")?void 0:l.split(" "),Hi="data-rbd-drag-handle-draggable-id",Yi="data-rbd-droppable-id",Xi="currentColumn",Ui=80,Fi="10px 10px 20px ".concat(L.b.paColor122),Wi={display:"none",clientY:0,clientX:0},Vi="searchKey",Ki=140,qi=350,Ji=128,Qi=22,Zi=512,$i=new RegExp("\\.(".concat(null===(d="jpeg jpg png")?void 0:d.replace(/\s/g,"|"),")(\\\\?.*)$")),ec=/^(\/video)(\/.*)?$/,tc=["stickers-tool","text-tool",Re,"editor","overlay","canvas"],nc=[pe,we,"text",ke,Re,Le,Pe,Ke],rc=[A.duotone,A.sketch],ac={personCutout:{size:1024},removeObjectBackground:{size:672,max_width:4e3,max_height:5e3}},ic=154,cc=250,oc=window.devicePixelRatio,sc="https://docs.google.com/forms/d/1Oe7DmO1VH1lNSajapBNdUEdwuESXdPU-OZWEd2iYaVU/edit",uc=2048,lc=1024,dc=[A.imageEngineFeatured,A.imageEngineBlur,A.imageEngineFX,A.imageEnginePopArt],bc=[A.lut,A.colorToning,A.overlay].concat(dc),fc=[E.remover,E.removeObjectBg],hc=["normal","500","300"],pc=4,gc={top:100,left:50,right:50,bottom:100},Oc=5,vc=5,jc=20,mc=100,yc=["featured","fx","blur","artistic","popArt","distort","paper","colors"],xc={package_simple_shapes:M.SIMPLE_SHAPES,package_organic_shapes:M.ORGANIC_SHAPES,package_app_icons:M.ICONS},wc=[{id:1,label:oe.z_300.label,value:oe.z_300.value},{id:2,label:oe.z_200.label,value:oe.z_200.value},{id:3,label:oe.z_100.label,value:oe.z_100.value},{id:4,label:oe.z_75.label,value:oe.z_75.value},{id:5,label:oe.z_50.label,value:oe.z_50.value},{id:6,label:oe.z_25.label,value:oe.z_25.value},{id:7,label:oe.z_10.label,value:oe.z_10.value},{id:8,label:oe.fit.label,value:oe.fit.value},{id:9,label:oe.fill.label,value:oe.fill.value}],Ac={discover:0,"my-photos":1},Ec={verticalOffset:23,horizontalOffset:110,width:479},kc=["hsl_hue","hsl_saturation","hsl_luminance"],Cc=[{from:"/".concat(v.removeBackground),to:"/batch"},{from:"/chooser",to:"/search"}],Sc=(b={},Object(_.a)(b,v.upscale,"/batch"),Object(_.a)(b,v.removeBackground,"/batch"),b),Tc={save:"save",exit:"exit",tryAgain:"tryAgain",manageStorage:"manageStorage",upgradeStorage:"upgradeStorage"},_c={isOnLine:{title:"Save Replay Before Exiting?",firstChoice:"Don't save",secondChoice:"Save & Exit",networkText:"Your recent changes have not been saved. Would you like to save before exiting?",actionType:Tc.save},isOffline:{title:"Exit Without Saving?",firstChoice:"Cancel",secondChoice:"Exit",networkText:"You have no internet connection, recent changes have not been saved. By exiting now you will lose any unsaved changes.",isOffline:!0,actionType:Tc.exit},onlineFailed:{title:"Oops...",firstChoice:"Don't save",secondChoice:"Try Again",networkText:"Something went wrong. There was an error saving this Replay.",actionType:Tc.tryAgain},upgradeStorage:{title:"Save Replay Before Exiting?",firstChoice:"Don't save",secondChoice:"Upgrade & Save",networkText:"Your cloud storage is full. Recent changes have not been saved. Please upgrade to PicsArt Gold for additional cloud storage space.",actionType:Tc.upgradeStorage},manageStorage:{title:"Save Replay Before Exiting?",firstChoice:"Don't save",secondChoice:"Manage Storage",networkText:"Please manage your cloud storage space to save this Replay.",actionType:Tc.manageStorage}},Ic={blur_amount:0,background_ratio:1,color:Object(L.c)(L.b.paColor9),border_radius:0,border_size:0,border_thickness:0},Rc=24,Lc=48,Pc=48,Gc="".concat(ia,"/42562349740725815550.svg"),Mc="".concat(ia,"/92002489833603039019.png"),Bc=700,Dc=["adjust","adjust_hsl"],Nc="".concat(ua,"_stored_layers"),zc="".concat(ua,"_editor_opened_from_new_page"),Hc=da&&!1,Yc="new-container",Xc="scroll-overlay",Uc={deleteItem:"deleteItem",deleteItems:"deleteItems",upgradeStorage:"upgradeStorage"},Fc=(f={},Object(_.a)(f,Uc.deleteItem,{title:"Delete Replay",description:"Are you sure you want to delete this replay?",firstChoice:"Delete",secondChoice:"Cancel"}),Object(_.a)(f,Uc.deleteItems,{title:"Delete Replays",description:"Are you sure you want to delete these replays?",firstChoice:"Delete",secondChoice:"Cancel"}),Object(_.a)(f,Uc.upgradeStorage,{title:"Cloud Storage Full",description:"Please manage your storage or upgrade to PicsArt Gold for additional cloud storage space.",firstChoice:"Upgrade",secondChoice:"Cancel"}),f),Wc="Your storage is full";!function(e){e.fx="fx",e.blur="blur",e.paper="paper",e.popArt="popArt",e.runout="runout",e.duotone="duotone",e.distort="distort",e.overlays="overlays",e.featured="featured",e.artistic="artistic",e.sky_effects="sky-effects",e.lut_filters="lut-filters",e.canvas_effect="canvas-effect",e.stickers_tool="stickers-tool",e.magic_effects="magic-effects",e.color_exposure="color-exposure",e.color_transfer="color-transfer",e.sketch_effects="sketch-effects",e.rainbow_effects="rainbow-effects",e.color_toning_effects="color-toning-effects"}(Mi||(Mi={}));var Vc,Kc=["color-toning","lut"],qc="-",Jc="";!function(e){e.CHANGE_SKY="change-sky",e.DUOTONE="duotone"}(Vc||(Vc={}));var Qc={Shear:["Size"],Colorize:["fade"],Invert:["fade"]},Zc={Polygon:{density:12}},$c=["lut","colors"],eo=["lut"],to=["Hue","Saturation"],no={hue:{name:"Hue",min:-180,max:180}},ro={"color-exposure":{hue:{name:"Colorize",min:-180,max:180}},"color-toning":{saturation:{name:"Color Intensity",min:-100,max:100}},"style-transfer":no,magic:no,Colorize:no,Hue:no,Invert:no,Saturation:no,adjust:Object(T.a)(Object(T.a)({},{luminance0:{name:"Lightness",min:-100,max:100},luminance1:{name:"Lightness",min:-100,max:100},luminance2:{name:"Lightness",min:-100,max:100},luminance3:{name:"Lightness",min:-100,max:100},luminance4:{name:"Lightness",min:-100,max:100},luminance5:{name:"Lightness",min:-100,max:100},luminance6:{name:"Lightness",min:-100,max:100},luminance7:{name:"Lightness",min:-100,max:100}}),{},{hue:{name:"Hue",min:-180,max:180}})},ao={"lut-filters":"lut","magic-effects":I.a.MAGIC,"color-toning-effects":I.a.COLOR_TONING,"color-transfer":I.a.STYLE_TRANSFER,"color-exposure":I.a.COLOR_EXPOSURE,duotone:I.a.DUOTONE,"rainbow-effects":I.a.RAINBOW,"sky-effects":I.a.CHANGE_SKY,"canvas-effect":I.a.CANVAS,"sketch-effects":I.a.SKETCH},io={"canvas-effect":ao["canvas-effect"],"sketch-effects":ao["sketch-effects"],runout:"runout",overlays:"overlays"},co="layer-1"},,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return c}));var r=n(268),a=r.a.getState,i=r.a.dispatch;function c(e){return e(a())}},,,function(e,t,n){"use strict";n.d(t,"eb",(function(){return rn})),n.d(t,"W",(function(){return cn})),n.d(t,"Qb",(function(){return on})),n.d(t,"Nb",(function(){return sn})),n.d(t,"Ib",(function(){return un})),n.d(t,"gd",(function(){return ln})),n.d(t,"Wb",(function(){return dn})),n.d(t,"Vb",(function(){return bn})),n.d(t,"Pb",(function(){return fn})),n.d(t,"wd",(function(){return hn})),n.d(t,"db",(function(){return pn})),n.d(t,"ec",(function(){return gn})),n.d(t,"gc",(function(){return On})),n.d(t,"Hb",(function(){return vn})),n.d(t,"Mb",(function(){return jn})),n.d(t,"rd",(function(){return mn})),n.d(t,"u",(function(){return yn})),n.d(t,"Ub",(function(){return xn})),n.d(t,"bd",(function(){return wn})),n.d(t,"Wd",(function(){return An})),n.d(t,"Ec",(function(){return En})),n.d(t,"Xb",(function(){return kn})),n.d(t,"ob",(function(){return Cn})),n.d(t,"Rd",(function(){return Sn})),n.d(t,"Fb",(function(){return Tn})),n.d(t,"P",(function(){return _n})),n.d(t,"Q",(function(){return In})),n.d(t,"r",(function(){return Rn})),n.d(t,"s",(function(){return Ln})),n.d(t,"Hd",(function(){return Pn})),n.d(t,"Jb",(function(){return Gn})),n.d(t,"ac",(function(){return Mn})),n.d(t,"e",(function(){return Dn})),n.d(t,"Yb",(function(){return Nn})),n.d(t,"h",(function(){return zn})),n.d(t,"i",(function(){return Hn})),n.d(t,"g",(function(){return Yn})),n.d(t,"f",(function(){return Xn})),n.d(t,"b",(function(){return Un})),n.d(t,"n",(function(){return Fn})),n.d(t,"m",(function(){return Wn})),n.d(t,"yd",(function(){return Vn})),n.d(t,"Bb",(function(){return Kn})),n.d(t,"Zb",(function(){return qn})),n.d(t,"o",(function(){return Jn})),n.d(t,"N",(function(){return Zn})),n.d(t,"dc",(function(){return $n})),n.d(t,"D",(function(){return er})),n.d(t,"td",(function(){return tr})),n.d(t,"l",(function(){return nr})),n.d(t,"k",(function(){return rr})),n.d(t,"Sd",(function(){return ar})),n.d(t,"fd",(function(){return ir})),n.d(t,"a",(function(){return cr})),n.d(t,"Eb",(function(){return or})),n.d(t,"Y",(function(){return sr})),n.d(t,"d",(function(){return ur})),n.d(t,"fc",(function(){return lr})),n.d(t,"H",(function(){return dr})),n.d(t,"Z",(function(){return br})),n.d(t,"Cb",(function(){return fr})),n.d(t,"Sb",(function(){return hr})),n.d(t,"xd",(function(){return pr})),n.d(t,"Tb",(function(){return gr})),n.d(t,"lb",(function(){return Or})),n.d(t,"U",(function(){return vr})),n.d(t,"ud",(function(){return jr})),n.d(t,"Kb",(function(){return mr})),n.d(t,"Ab",(function(){return yr})),n.d(t,"Gb",(function(){return xr})),n.d(t,"Od",(function(){return wr})),n.d(t,"Id",(function(){return Ar})),n.d(t,"Kd",(function(){return Er})),n.d(t,"Jd",(function(){return kr})),n.d(t,"Lc",(function(){return Cr})),n.d(t,"Xc",(function(){return Sr})),n.d(t,"Oc",(function(){return _r})),n.d(t,"K",(function(){return Ir})),n.d(t,"J",(function(){return Rr})),n.d(t,"Nc",(function(){return Lr})),n.d(t,"p",(function(){return Pr})),n.d(t,"Bd",(function(){return Gr})),n.d(t,"Cd",(function(){return Mr})),n.d(t,"Ad",(function(){return Br})),n.d(t,"yb",(function(){return Dr})),n.d(t,"w",(function(){return Nr})),n.d(t,"L",(function(){return zr})),n.d(t,"zb",(function(){return Hr})),n.d(t,"zd",(function(){return Yr})),n.d(t,"G",(function(){return Xr})),n.d(t,"qb",(function(){return Ur})),n.d(t,"Lb",(function(){return Fr})),n.d(t,"ib",(function(){return Vr})),n.d(t,"kb",(function(){return Kr})),n.d(t,"gb",(function(){return qr})),n.d(t,"jb",(function(){return Jr})),n.d(t,"Ld",(function(){return Qr})),n.d(t,"Nd",(function(){return Zr})),n.d(t,"Md",(function(){return $r})),n.d(t,"Ud",(function(){return ea})),n.d(t,"Pd",(function(){return ta})),n.d(t,"Qd",(function(){return na})),n.d(t,"I",(function(){return ra})),n.d(t,"E",(function(){return aa})),n.d(t,"z",(function(){return ia})),n.d(t,"F",(function(){return ca})),n.d(t,"vd",(function(){return oa})),n.d(t,"A",(function(){return sa})),n.d(t,"ad",(function(){return ua})),n.d(t,"Kc",(function(){return la})),n.d(t,"Hc",(function(){return da})),n.d(t,"j",(function(){return ba})),n.d(t,"Gc",(function(){return fa})),n.d(t,"Jc",(function(){return ha})),n.d(t,"Ic",(function(){return pa})),n.d(t,"Fc",(function(){return ga})),n.d(t,"Dd",(function(){return Oa})),n.d(t,"od",(function(){return va})),n.d(t,"Fd",(function(){return ja})),n.d(t,"O",(function(){return ma})),n.d(t,"xb",(function(){return ya})),n.d(t,"Rb",(function(){return xa})),n.d(t,"Ob",(function(){return wa})),n.d(t,"V",(function(){return Aa})),n.d(t,"v",(function(){return Ea})),n.d(t,"Uc",(function(){return ka})),n.d(t,"Vc",(function(){return Ca})),n.d(t,"Tc",(function(){return Sa})),n.d(t,"pd",(function(){return Ta})),n.d(t,"sd",(function(){return _a})),n.d(t,"x",(function(){return Ia})),n.d(t,"Ed",(function(){return Ra})),n.d(t,"nd",(function(){return La})),n.d(t,"c",(function(){return Pa})),n.d(t,"jc",(function(){return Ga})),n.d(t,"ab",(function(){return Ma})),n.d(t,"qd",(function(){return Ba})),n.d(t,"hb",(function(){return Da})),n.d(t,"Yc",(function(){return Na})),n.d(t,"ae",(function(){return za})),n.d(t,"be",(function(){return Ha})),n.d(t,"Db",(function(){return Ya})),n.d(t,"sc",(function(){return Xa})),n.d(t,"rc",(function(){return Ua})),n.d(t,"vb",(function(){return Wa})),n.d(t,"wb",(function(){return Va})),n.d(t,"ie",(function(){return Ka})),n.d(t,"tb",(function(){return Ja})),n.d(t,"ub",(function(){return Qa})),n.d(t,"Xd",(function(){return ni})),n.d(t,"Rc",(function(){return ci})),n.d(t,"Sc",(function(){return oi})),n.d(t,"Qc",(function(){return si})),n.d(t,"hc",(function(){return ui})),n.d(t,"de",(function(){return ri})),n.d(t,"ke",(function(){return ti})),n.d(t,"je",(function(){return $a})),n.d(t,"Yd",(function(){return li})),n.d(t,"fe",(function(){return ii})),n.d(t,"ce",(function(){return ai})),n.d(t,"Zc",(function(){return di})),n.d(t,"cc",(function(){return Ie})),n.d(t,"qc",(function(){return Re})),n.d(t,"uc",(function(){return Le})),n.d(t,"Bc",(function(){return Pe})),n.d(t,"Td",(function(){return Me})),n.d(t,"nc",(function(){return Be})),n.d(t,"X",(function(){return De})),n.d(t,"M",(function(){return Ne})),n.d(t,"md",(function(){return ze})),n.d(t,"B",(function(){return He})),n.d(t,"t",(function(){return Ye})),n.d(t,"mc",(function(){return Xe})),n.d(t,"wc",(function(){return Ue})),n.d(t,"xc",(function(){return Fe})),n.d(t,"oc",(function(){return We})),n.d(t,"Pc",(function(){return Ve})),n.d(t,"R",(function(){return Ke})),n.d(t,"kc",(function(){return qe})),n.d(t,"ic",(function(){return Qe})),n.d(t,"mb",(function(){return Ze})),n.d(t,"Zd",(function(){return $e})),n.d(t,"lc",(function(){return et})),n.d(t,"C",(function(){return tt})),n.d(t,"Vd",(function(){return rt})),n.d(t,"yc",(function(){return st})),n.d(t,"tc",(function(){return ut})),n.d(t,"nb",(function(){return lt})),n.d(t,"ee",(function(){return dt})),n.d(t,"Wc",(function(){return bt})),n.d(t,"vc",(function(){return ht})),n.d(t,"Ac",(function(){return gt})),n.d(t,"zc",(function(){return Ot})),n.d(t,"Cc",(function(){return vt})),n.d(t,"bb",(function(){return jt})),n.d(t,"cb",(function(){return mt})),n.d(t,"jd",(function(){return yt})),n.d(t,"q",(function(){return xt})),n.d(t,"ld",(function(){return wt})),n.d(t,"id",(function(){return At})),n.d(t,"kd",(function(){return Et})),n.d(t,"ed",(function(){return kt})),n.d(t,"dd",(function(){return St})),n.d(t,"hd",(function(){return Tt})),n.d(t,"sb",(function(){return _t})),n.d(t,"Gd",(function(){return It})),n.d(t,"y",(function(){return Rt})),n.d(t,"pb",(function(){return Lt})),n.d(t,"fb",(function(){return Pt})),n.d(t,"Mc",(function(){return Bt})),n.d(t,"S",(function(){return Dt})),n.d(t,"T",(function(){return Nt})),n.d(t,"pc",(function(){return Xt})),n.d(t,"Dc",(function(){return Ut})),n.d(t,"he",(function(){return Ft})),n.d(t,"ge",(function(){return Vt})),n.d(t,"bc",(function(){return Kt})),n.d(t,"cd",(function(){return qt})),n.d(t,"rb",(function(){return Jt}));var r,a=n(15),i=n(14),c=n(22),o=n(456),s=n.n(o),u=n(1),l=n(302),d=n(0),b=function(e){var t=e.toolType;return t&&u.Nh.includes(t)},f=function(e,t,n){var r=e.filter((function(e){var t=e.settings,r=e.active;return n?r&&b(t||{}):b(t||{})})).reduce((function(e,t){var n=t.id,r=t.settings.toolType,a=t.resources,i=String(r);return e[i]=e[i]||[],e[i].push(a.id||n),e}),{}),a=t&&Object(d.T)(t,"Image").filter((function(e){return Object(d.db)(e)[u.mf]}));return(null===a||void 0===a?void 0:a.length)&&(r[u.Og.removeObjectBg]=a.map((function(e){return Object(d.db)(e).id}))),r},h=n(131),p=n(103),g=n(246),O=n(126),v=n.n(O),j=n(130),m=n.n(j),y=function(e){return!!e.isPremium},x=function(e){return e.type===u.Je},w=function(e){return e.type===u.Yf},A=function(e){return e.type===u.tg},E=function(e){return e.type===u.Af},k=function(e){return e.type===u.Bc},C=function(e){return e.type===u.pg},S=function(e){var t=e.resources;return(null===t||void 0===t?void 0:t.type)===u.Jf},T=function(e){var t=e.resources;return(null===t||void 0===t?void 0:t.type)===u.Pg},_=function(e){return!!e.resources.templateId},I=function(e){return!!e.settings.isPremiumTexture},R=function(e){var t=e.resources;return null===t||void 0===t?void 0:t.templateId},L=function(e){var t=e.resources;return null===t||void 0===t?void 0:t.id},P=function(e){var t=e.resources;return null===t||void 0===t?void 0:t.id},G=function(e){var t=e.resources;return null===t||void 0===t?void 0:t.id},M=function(e){var t=e.resources;return null===t||void 0===t?void 0:t.url},B=function(e,t,n,r){var a=e.filter(y),c=v()(a.filter((function(e){return _(e)&&!C(e)})),R),o=v()(e.filter((function(e){return _(e)&&C(e)&&!e.resources.id})),R),s=v()([].concat(Object(i.a)(c),Object(i.a)(o)),R),l=a.filter((function(e){return!_(e)})),d=v()(l.filter(w),P),b=v()(l.filter(A),G),h=v()(l.filter(E),M),p=e.find(I),O=l.filter(x),j=e.filter(k).map((function(e){var t;return null===(t=e.cellsLayers)||void 0===t?void 0:t.filter((function(e){return e.isPremium}))})),B=a.filter((function(e){return C(e)&&!!L(e)})),D=v()([].concat(Object(i.a)(O),Object(i.a)(m()(j)),Object(i.a)(B)),L),N=D.filter(T),z=D.filter(S).filter((function(e){var t=e.resources.id;return t&&!r.includes(t)})),H=D.filter((function(e){return!S(e)&&!T(e)}));return[].concat(Object(i.a)(H.map((function(e){var t=e.resources,n=t.url,r=t.id;return{type:u.Je,url:n,id:r,source:u.Ze.picsart}}))),Object(i.a)(N.map((function(e){var t=e.resources,n=t.url,r=t.id;return{type:u.Je,url:n,id:r,source:u.Ze.unsplash}}))),Object(i.a)(z.map((function(e){var t=e.resources,n=t.url,r=t.id;return{type:u.Je,url:n,id:r,source:u.Ze.shutterstock}}))),Object(i.a)(p?[{type:"texture",source:u.Ze.picsart}]:[]),Object(i.a)(n.length?[{type:"effect",source:u.Ze.picsart}]:[]),Object(i.a)(Object(g.a)(e)?[{type:"hsl",source:u.Ze.picsart}]:[]),Object(i.a)(h.map((function(){return{type:u.Af,source:u.Ze.picsart}}))),Object(i.a)(b.map((function(e){return{type:u.tg,id:G(e),source:u.Ze.picsart}}))),Object(i.a)(d.map((function(e){return{type:u.Yf,id:P(e),source:u.Ze.picsart}}))),Object(i.a)(s.map((function(e){return{type:u.kg,id:R(e),source:u.Ze.picsart}}))),Object(i.a)(Object.keys(f(e,t)).map((function(e){return{type:e,source:u.Ze.picsart}}))))},D=n(2),N=n(4),z=n(394),H=n.n(z),Y=n(305),X=n.n(Y),U=n(30),F=n(19),W=n(20),V=function(e){return!!e.meta.templateId},K=function(e){return e.meta.templateId},q=function(e){return e.meta.resourceId},J=function(e){return e.meta.url},Q=function(e){return e.meta.source===U.b.shutterstock},Z=function(e){return e.meta.source===U.b.unsplash},$=(r={},Object(N.a)(r,W.a.COLLAGE_CELL_IMAGE,"add_photo"),Object(N.a)(r,W.a.PHOTO,"add_photo"),Object(N.a)(r,W.a.SVG_STICKER,"sticker"),Object(N.a)(r,W.a.BACKGROUND_IMAGE,"background"),Object(N.a)(r,W.a.ICON,"shape"),r),ee={lut:"light","color-toning":"color_toning"},te={"remove-object-bg":"tool_cutout",remover:"tool_remove"},ne=function(e){var t=v()(e.filter((function(e){return V(e)&&!Object(F.g)(e)})),K),n=e.filter((function(e){return!V(e)})),r=v()(n.filter(F.s),q),a=v()(n.filter(F.w),q),i=v()(n.filter(F.p),J);return{photos:n.filter(F.n),shapes:i,texts:a,stickers:r,templates:t}},re=n(210),ae=n.n(re),ie=n(560),ce=n.n(ie),oe=n(328),se=n.n(oe),ue=n(421),le=n(41),de=n.n(le),be=n(31),fe=n(84),he=n(329),pe=n(142),ge=["width","height","x","y","fontSize"],Oe=function(e,t){var n=e.width,r=e.height,a=e.x,i=e.y,c=e.fontSize,o=Object(fe.a)(e,ge),s=Object(pe.a)();return Object(D.a)(Object(D.a)({},o),{},{x:a*t+s.x,y:i*t+s.y,width:n*t,height:r*t},c&&{fontSize:c*t})},ve=function(e,t,n){return Object(he.a)(e,t).map((function(e){return Oe(e,n)}))},je=n(340),me=n(331),ye=n(193),xe=n(85),we=function(e){return xe.a.layerRegistry[e].layer.imageWithoutEffect||""},Ae=n(199),Ee=n(209),ke=n(266),Ce=function(e){var t=e.x,n=e.y,r=e.width,a=e.height;return[{x:t,y:n},{x:t+r,y:n},{x:t+r,y:n+a},{x:t,y:n+a},{x:t+r/2,y:n,h:a/2+n,w:1},{x:t+r/2,y:n+a},{x:t,y:n+a/2},{x:t+r,y:n+a/2,w:r/2+t,h:1}]},Se=n(527),Te=function(e,t){var n=Object(be.g)(e,t.id);return Object(F.j)(n)?Object(D.a)(Object(D.a)({},n),Object(Se.a)(n)):Object(D.a)(Object(D.a)({},t),{},{height:t.height+(t.sizeOutline||0),width:t.width+(t.sizeOutline||0),x:t.x-(t.sizeOutline||0)*t.scaleX/2,y:t.y-(t.sizeOutline||0)*t.scaleY/2})},_e=n(11),Ie=function(e){return e.layers},Re=function(e){return e.newHistory},Le=function(e){return Ie(e).layers},Pe=function(e){return Ie(e).selectedLayerIds},Ge=function(e){return Pe(e)[0]},Me=function(e){return Le(e).filter((function(e){return!Object(F.k)(e)})).length},Be=function(e){return Ie(e).zoomValue},De=function(e){return Ie(e).dragSelectionInProgress},Ne=function(e){return!!Ie(e).clipBoard.ids.length},ze=function(e){return Ie(e).setupStage},He=function(e){return Ie(e).cssSizes},Ye=function(e){return Ie(e).artBoardSizes},Xe=function(e){var t=Ie(e),n=t.cssSizes,r=t.artBoardSizes;return{x:n.width/r.width,y:n.height/r.height}},Ue=function(e){return Ie(e).measurement},Fe=function(e){return Ie(e).selectedLayerIds},We=Object(c.a)([Ye,Ue],(function(e,t){var n=e.width,r=e.height,a=Object(Ae.a)(t);return{convertedWidth:Object(Ae.b)(n/a,t),convertedHeight:Object(Ae.b)(r/a,t)}})),Ve=function(e,t){return Object(be.g)(Le(e),t)},Ke=function(e){var t=Ie(e).cropGroupCSSMetrics,n=Be(e);return t?{x:t.x*n,y:t.y*n,width:t.width*n,height:t.height*n}:{}},qe=function(e){var t=Le(e),n=Ye(e),r=Object(be.f)(t,[u.z]),i=Object(a.a)(r,1)[0];return i?Object(D.a)(Object(D.a)({},Object(me.a)(i)),n):{}},Je=Object(c.a)(qe,Be,(function(e,t){var n=Object(pe.a)(),r=n.x,a=n.y;return{x:e.x*t+r,y:e.y*t+a,width:e.width*e.scaleX*t,height:e.height*e.scaleY*t}})),Qe=function(e){var t=Le(e),n=Object(be.f)(t,[u.z]);return Object(a.a)(n,1)[0]},Ze=function(e,t){var n=Le(e),r=ae()(n,"id"),a=r[t];return a?Object(be.q)(a,r).reverse():[]},$e=function(e,t){return Object(be.i)(Le(e),t)},et=Object(c.a)([qe,Be],Oe),tt=Object(c.a)([He,Be],(function(e,t){return{width:e.width*Math.max(1,t),height:e.height*Math.max(1,t)}})),nt=Object(c.a)(Le,(function(e){return e.filter((function(e){return e.id!==u.eh}))})),rt=Object(c.a)(Le,(function(e){return e.find((function(e){return e.id===u.eh}))})),at=Object(c.a)(Le,(function(e){return e.filter((function(e){return e.type===U.d.COLOR_LAYER}))})),it=Object(c.a)(Le,(function(e){return e.filter((function(e){return e.type===U.d.IMAGE_LAYER}))})),ct=Object(c.a)(Le,(function(e){return e.filter((function(e){return e.type===U.d.VECTOR_LAYER}))})),ot=Object(c.a)(Le,(function(e){return e.filter((function(e){return e.type===U.d.TEXT_LAYER}))})),st=(Object(c.a)(nt,(function(e){return e[e.length-1]})),Object(c.a)(nt,(function(e){return e[e.length-2]})),Object(c.a)(Ie,(function(e){return e.layers.filter((function(t){return e.selectedLayerIds.includes(t.id)}))}))),ut=Object(c.a)(Ie,(function(e){return e.layers.filter((function(t){return e.hoveredLayerIds.includes(t.id)}))})),lt=(Object(c.a)(Le,Ge,(function(e,t){return Object(be.g)(e,t)})),Object(c.a)(Le,Ge,(function(e,t){return!!t&&Object(be.i)(e,t)}))),dt=function(e,t){return nt(e).filter(t)},bt=Object(c.a)(dt,(function(e){return e[e.length-1]})),ft=function(e){return Object(c.a)([Pe,Le],(function(t,n){return n.filter((function(n){return(e||t).includes(n.id)}))}))},ht=Object(c.a)([ct,it],(function(e,t){var n=[].concat(Object(i.a)(e),Object(i.a)(t)).map((function(e){return{id:e.id,adjust:e.adjust,type:e.type,metaType:e.meta.type,isPhoto:Object(F.n)(e),isVector:Object(F.g)(e)||Object(F.r)(e)||Object(F.a)(e),isSticker:Object(F.t)(e),isCollageCellImage:Object(F.e)(e)}}));return n.length?n:[{}]})),pt=function(e){return Object(c.a)(ft(e),(function(e){return e.filter((function(e){return e.type===U.d.IMAGE_LAYER}))}))},gt=function(e){return Object(c.a)(pt(e),(function(e){return e.map((function(e){return{id:e.id,effect:e.effect}}))}))},Ot=function(e){return Object(c.a)(pt(e),(function(e){return e.map((function(e){return{hslIndex:e.meta.hslIndex,adjustGroups:e.meta.adjustGroups}}))}))},vt=function(e){return Object(c.a)(pt(e),(function(e){return e.map((function(e){return{withoutEffect:we(e.id),original:e.url}}))}))},jt=Object(c.a)(Ie,(function(e){return e.layers.find((function(t){return t.id===e.editingTextId}))})),mt=Object(c.a)([jt,Le,Be],(function(e,t,n){return ve([e],t,n)[0]})),yt=Object(c.a)(st,(function(e){return e.filter((function(e){return e.meta.type===W.a.TEXT}))})),xt=Object(c.a)([st,yt],(function(e,t){return e.length===t.length})),wt=Object(c.a)([yt],(function(e){var t,n,r,i=Object(a.a)(e,1)[0];return Object(D.a)(Object(D.a)({},i),{},{fontStyle:null===i||void 0===i?void 0:i.fontStyle,fontBold:(null===i||void 0===i||null===(t=i.fontStyle)||void 0===t?void 0:t.includes("bold"))?"bold":"normal",fontItalic:(null===i||void 0===i||null===(n=i.fontStyle)||void 0===n?void 0:n.includes("italic"))?"italic":"normal",fontDecoration:(null===i||void 0===i||null===(r=i.textDecoration)||void 0===r?void 0:r.includes("underline"))?"underline":"normal"})})),At=Object(c.a)(st,(function(e){var t,n,r=e[0],i=null===r||void 0===r?void 0:r.effect,c=(null===i||void 0===i?void 0:i.category)===u.Wb.DUOTONE?[de()(null===i||void 0===i||null===(t=i.settings.find((function(e){return"color1"===e.name})))||void 0===t?void 0:t.value).toRgb(),de()(null===i||void 0===i||null===(n=i.settings.find((function(e){return"color2"===e.name})))||void 0===n?void 0:n.value).toRgb()]:[(null===r||void 0===r?void 0:r.colorRGB1)||de()(Object(_e.c)(_e.b.paColor9)).toRgb(),(null===r||void 0===r?void 0:r.colorRGB2)||de()(Object(_e.c)(_e.b.paColor9)).toRgb()],o=Object(a.a)(c,2),s=o[0],l=o[1];return{colorTransparent:null===r||void 0===r?void 0:r.colorTransparent,colorRGB1:s,colorRGB2:l,outlineColor:null===r||void 0===r?void 0:r.outlineColor,outlineTransparent:null===r||void 0===r?void 0:r.outlineTransparent,shadowColor:null===r||void 0===r?void 0:r.shadowColor,shadowTransparent:null===r||void 0===r?void 0:r.shadowTransparent}})),Et=Object(c.a)(st,(function(e){var t=e[0];return{colorOpacity:null===t||void 0===t?void 0:t.colorOpacity,sizeOutline:null===t||void 0===t?void 0:t.sizeOutline,opacityOutline:null===t||void 0===t?void 0:t.opacityOutline,shadowBlur:null===t||void 0===t?void 0:t.shadowBlur,shadowOpacity:null===t||void 0===t?void 0:t.shadowOpacity,shadowOffsetX:null===t||void 0===t?void 0:t.shadowOffsetX,shadowOffsetY:null===t||void 0===t?void 0:t.shadowOffsetY}})),kt=Object(c.a)(st,(function(e){var t,n=null===(t=e[0])||void 0===t?void 0:t.globalCompositeOperation;return e.every((function(e){return e.globalCompositeOperation===n}))?n||"normal":""})),Ct=Object(c.a)([Le],(function(e){return e.reduce((function(t,n){return n.selectable&&!Object(F.d)(n)&&t.push(Te(e,n)),t}),[])})),St=Object(c.a)([Ct,Le,Be],ve),Tt=Object(c.a)([st,Le,Be],ve),_t=Object(c.a)([ut,Le,Be],(function(e,t,n){var r=e.map((function(e){var n=Object(F.e)(e)?Object(be.g)(t,e.id):e;return Te(t,n)}));return ve(r,t,n)})),It=Object(c.a)([st],(function(e){return e.filter((function(e){return e.transformable})).map((function(e){return e.id}))})),Rt=Object(c.a)([Le,st,Be,et],(function(e,t,n,r){var i=Object(a.a)(t,1)[0];if(i&&Object(F.b)(i)){var c=Object(F.d)(i),o=c?r:ve([i],e,n)[0],s=o.x,u=o.y,l=o.width,d=o.height,b=o.scaleX,f=o.scaleY;return Object(D.a)(Object(D.a)({},ve([i],e,n)[0]),{},{x:s,y:u,width:c?l*b:l,height:c?d*f:d})}})),Lt=Object(c.a)([Le,Ct,st,Be,Je],(function(e,t,n,r,a){return m()(t.filter((function(e){var t=e.id;return!n.find((function(e){var n=e.id;return t===n}))})).map((function(t){var n=Object(Ee.a)(Object(D.a)(Object(D.a)({},t),{},{height:t.height*t.scaleY,width:t.width*t.scaleX}));return ve([Object(D.a)(Object(D.a)(Object(D.a)({},t),n),{},{rotation:0,scaleY:1,scaleX:1})],e,r)[0]})).map((function(e){return Object(je.a)(e)})).concat(Ce(a)))})),Pt=Object(c.a)([st],(function(e){var t,n=(null===(t=e[0])||void 0===t?void 0:t.type)===U.d.TEXT_LAYER?"text":"default";return e.find((function(e,t){var r=e.type===U.d.TEXT_LAYER?"text":"default";return t&&r!==n}))?"textWithGroup":n}));function Gt(e){var t=e.layers,n=e.rootId,r=e.orderedList,a=void 0===r?[]:r,c=t.find((function(e){return e.id===n}));return c&&(a.push(c),a.push(Object(i.a)(c.dependencies).reverse().reduce((function(e,n){return Gt({layers:t,rootId:n.layerId,orderedList:e})}),[]))),a}var Mt,Bt=Object(c.a)([Le],(function(e){return function(t){var n=t.rootId,r=t.orderedList,a=void 0===r?[]:r;return ce()(Gt({layers:e,rootId:n,orderedList:a}),1/0).filter((function(t){var n=Object(F.h)(t),r=!Object(F.k)(t);if(!n)return r;var a=Object(be.g)(e,t.id),i=1===Object(be.g)(e,a.id).dependencies.length;return r&&i})).map((function(e){return e.id}))}})),Dt=Object(c.a)(st,(function(e){var t=e.some((function(e){return e.effect})),n=X()(e.map((function(e){return e.meta.type}))).map((function(n){var r,a=e[0],c=null===a||void 0===a||null===(r=a.effect)||void 0===r?void 0:r.category,o=e.length>1?ye.a[n].filter((function(e){return t?e!==u.Jg.EFFECTS&&e!==u.Jg.ADJUST:e!==u.Jg.EFFECTS})):ye.a[n];return c&&ye.b[c]?e.length>1?[].concat(Object(i.a)(o),Object(i.a)(ye.b[c])).filter((function(e){return e!==u.Jg.GRADIENT})):[].concat(Object(i.a)(o),Object(i.a)(ye.b[c])):o}));return se.a.apply(void 0,Object(i.a)(n))})),Nt=Object(c.a)(st,(function(e){var t=Object(a.a)(e,1)[0];return t.meta.type!==W.a.TEXT?ye.c[t.meta.type]||t.meta.type.toLowerCase():t.meta.source||t.meta.type.toLowerCase()})),zt=Object(c.a)(at,(function(e){return m()(e.map((function(e){var t=e.colorRGB1,n=e.colorRGB2;return[t].concat(Object(i.a)(n?[n]:[]))})))})),Ht=Object(c.a)(ot,(function(e){var t=e.map((function(e){var t=e.colorRGB1,n=e.outlineColor,r=e.shadowColor,a=[t],i=n&&!Object(ke.a)(n,{r:0,g:0,b:0}),c=r&&!Object(ke.a)(r,u.xg);return i&&a.push(n),c&&a.push(r),a}));return m()(t)})),Yt=Object(c.a)(ct,(function(e){var t=e.map((function(e){var t=e.colorRGB1,n=e.outlineColor,r=e.paths,a=n&&!Object(ke.a)(n,u.Cf);return[].concat(Object(i.a)(r.map((function(e){return de()(e.fill).toRgb()}))),Object(i.a)(t?[t]:[]),Object(i.a)(a?[n]:[]))}));return m()(t)})),Xt=Object(c.a)([zt,Ht,Yt],(function(e,t,n){return Object(ue.uniqWith)([].concat(Object(i.a)(e),Object(i.a)(t),Object(i.a)(n)),ke.a)})),Ut=Object(c.a)(Object(c.a)(ft(Mt),(function(e){return e.filter((function(e){return e.type===U.d.VECTOR_LAYER}))})),(function(e){return e.reduce((function(e,t){return[].concat(Object(i.a)(e),Object(i.a)(t.paths))}),[]).sort((function(e,t){return e>t?1:-1}))})),Ft=Object(c.a)(Le,(function(e){return e.filter((function(e){return Object(F.n)(e)&&!Object(F.v)(e)&&e.meta.license===u.Kd.FTE||Object(F.t)(e)&&!Object(F.v)(e)&&!e.isPremium})).map((function(e){return String(e.meta.resourceId)}))})),Wt={"remove-object-bg":"tool_cutout",remover:"tool_remove"},Vt=Object(c.a)(Le,Ft,(function(e,t){var n={sticker:!1,add_photo:!1,text:!1,shape:!1,mask:!1,effect:!1,is_remix:!!t.length,is_unsplash:!1,adjust:!1,adjust_hsl:!1,template:!1,tool_remove:!1,tool_cutout:!1},r=new Set,a={textAdjustments:{},adjust:[]},c=[];return e.forEach((function(e){var t,o,s=e.id,u=e.meta,l=u.resourceId,d=u.source;if(r.add(s),l&&r.add(l),d===U.b.unsplash&&(n.is_unsplash=!0),Object(F.t)(e)&&!Object(F.v)(e)&&(n.sticker=!0),Object(F.n)(e)&&!Object(F.v)(e)&&(n.add_photo=!0),Object(F.p)(e)&&(n.shape=!0),Object(F.w)(e)&&!Object(F.v)(e)){n.text=!0;var b=e,f=b.colorOpacity,p=b.sizeOutline,g=b.opacityOutline,O=b.shadowOffsetX,v=b.shadowOffsetY,j=b.opacity,m=b.shadowBlur,y=b.textDecoration,x=b.fontStyle,w=b.lineHeight,A=b.letterSpacing,E=b.fontSize,k=b.outlineTransparent,C=b.colorTransparent,S=b.shadowTransparent,T=b.fontFamily,_=b.bend;a.textAdjustments={id:s,colorOpacity:f,sizeOutline:p,opacityOutline:g,shadowOffsetX:O,shadowOffsetY:v,opacity:j,shadowBlur:m,textDecoration:y,fontStyle:x,lineHeight:w,letterSpacing:A,fontSize:E,outlineTransparent:k,colorTransparent:C,shadowTransparent:S,bend:_,fontFamily:T},c.push(e.meta.resourceId||e.id)}if(Object(h.a)(e)&&(n.adjust_hsl=!0),Object(F.v)(e)&&(n.template=!0),null===(t=e.meta.usedTools)||void 0===t||t.forEach((function(e){n[Wt[e]||e]=!0})),(null===e||void 0===e?void 0:e.effect)&&(n.effect=!0),Object(F.q)(e)&&!Object(F.d)(e)){var I=e.adjust;(null===I||void 0===I?void 0:I.settings.length)&&(a.adjust=[].concat(Object(i.a)(I.settings),[{id:s}]))}(null===e||void 0===e||null===(o=e.adjust)||void 0===o?void 0:o.settings.length)&&(n.adjust=!0)})),{layers:e,params:n,layerIdSet:r,adjustments:a,textIds:c}})),Kt=Object(c.a)(Le,(function(e){return e.reduce((function(e,t){return Object(D.a)(Object(D.a)({},e),{},Object(N.a)({},t.id,Object(F.j)(t)?t.dependencies[0].layerId:t.id))}),{})})),qt=Object(c.a)(Le,(function(e){return e.filter((function(e){return!Object(F.b)(e)&&e.selectable})).map((function(e){return e.id}))})),Jt=Object(c.a)(st,(function(e){if(!e.length)return{};var t=Object(a.a)(e,1)[0];return{isPlaceholderActive:Object(F.h)(t),isGroup:e.length>1,isPhoto:Object(F.n)(t),isSticker:Object(F.t)(t)}})),Qt=function(e){return e.ui},Zt=function(e){return e.layer},$t=function(e){return e.canvas},en=function(e){return e.general},tn=function(e){return e.history},nn=function(e){return e.objectRemoval},rn=function(e){return e.effects},an=function(e){return e.data},cn=function(e){return e.draftProject},on=function(e){return Qt(e).isSidebarOpen},sn=function(e){return Qt(e).isLayersOpen},un=function(e){return Qt(e).isHintsOpen},ln=function(e){return Qt(e).selectedFitId},dn=function(e){return Qt(e).isWidgetOpen},bn=function(e){return Qt(e).isWidgetLoading},fn=function(e){return Qt(e).isShortcutModalOpen},hn=function(e){return Qt(e).successModal},pn=function(e){return Qt(e).effectModal},gn=function(e){return Qt(e).mobileOnlyAssetsModal},On=function(e){return Qt(e).monetizationOpenedFrom},vn=function(e){return Qt(e).isHelpListOpen},jn=function(e){return Qt(e).isInitialLoading},mn=function(e){return Qt(e).showUploadModal},yn=function(e){return Qt(e).authModal},xn=function(e){return Qt(e).isToolbarDisabled},wn=function(e){return function(e){return Qt(e).events}(e).scrollSidebarToTop},An=function(e){return Qt(e).zoom},En=function(e){return Qt(e).notificationOneTimeOpen},kn=function(e){return Qt(e).languageSwitcherOpen},Cn=function(e){return Qt(e).fitTabLock},Sn=function(e){return Qt(e).visibilityLayerSettings},Tn=function(e){return Qt(e).isExportModalOpen},_n=function(e){return Qt(e).contextMenu},In=function(e){return _n(e).show},Rn=function(e){return tn(e).appHistory},Ln=function(e){return tn(e).appHistoryStep},Pn=function(e){return tn(e).undoRedoDisabled},Gn=function(e){var t;return!!(null===(t=Rn(e)[Ln(e)])||void 0===t?void 0:t.draft)},Mn=function(e){return Zt(e).layers},Bn=function(e){return Zt(e).layers.filter((function(e){return e.type===u.Bc})).reduce((function(e,t){return(null===t||void 0===t?void 0:t.cellsLayers)?e.concat(t.cellsLayers):e}),[])},Dn=function(e){return Object(p.a)(Mn(e))},Nn=function(e,t){return Object(p.c)(Mn(e),t)},zn=function(e){return Object(p.b)(Mn(e))},Hn=function(e){return zn(e).map((function(e){return e.id}))},Yn=function(e){var t;return null===(t=Dn(e))||void 0===t?void 0:t.id},Xn=function(e){var t;return null===(t=Dn(e))||void 0===t?void 0:t.settings.effectId},Un=function(e){return Zt(e).activeEffect},Fn=function(e){return Zt(e).activeTexture},Wn=function(e){return Mn(e).filter((function(e){return e.active&&e.type===u.tg}))},Vn=function(e){return Mn(e).find((function(e){return e.type===u.pg}))},Kn=function(e){return Mn(e).reduce((function(e,t){return e[t.id]=t.uiMetaData||{},e}),{})},qn=Object(c.a)([Wn],(function(e){return 1===e.length?e[0].id:""})),Jn=function(e){return Zt(e).activeToolbar},Qn=function(e){return Zt(e).effectsData},Zn=function(e){return Qn(e).colorTransfer},$n=function(e){return Qn(e).magic},er=function(e){return Qn(e).canvas},tr=function(e){return Qn(e).sketch},nr=function(e){return en(e).activeSetting},rr=function(e){return en(e).activeReplaceMode},ar=function(e){return en(e).visibilityTextarea},ir=function(e){return en(e).selectedCategory},cr=function(e){return en(e).activeCropMode},or=function(e){return en(e).isDropperActive},sr=function(e){return en(e).droppablePhotoCollageId},ur=function(e){return en(e).activeEffectPage},lr=function(e){return null!==On(e)},dr=function(e){return en(e).canvasSizes},br=function(e){return en(e).droppablePhotoFromSidebar},fr=function(e){return en(e).isCanvasLoading},hr=function(e){return en(e).isTemplateCollageClicked},pr=function(e){return en(e).tempImageData},gr=function(e){return en(e).isTemplatesLoading},Or=function(e){return en(e).error},vr=function(e){return en(e).currentTemplateData},jr=function(e){return en(e).snapEnabled},mr=function(e){return en(e).isHoverBorderApplicable},yr=function(e){return en(e).imageUrl},xr=function(e){return en(e).isFromSeeAll},wr=function(e){return en(e).userPaidItems},Ar=function(e){return en(e).uploadedFilesWithDrag},Er=function(e){return en(e).uploadedImages},kr=function(e){return en(e).uploadedFonts},Cr=function(e){return en(e).oneTimePaymentResult},Sr=function(e){return en(e).ratioCards},Tr=function(e){return en(e).chooser},_r=function(e){return Tr(e).originalImages},Ir=function(e){return Tr(e).isPremium},Rr=function(e){return Tr(e).done},Lr=function(e){return _r(e)[0]||{}},Pr=function(e){return Tr(e).additionalInfo},Gr=function(e){return Pr(e).id},Mr=function(e){return Pr(e).width},Br=function(e){return Pr(e).height},Dr=function(e){return Pr(e).originalImageId},Nr=function(e){return Pr(e).background},zr=function(e){return Pr(e).originalDataType},Hr=function(e){return Pr(e).originalImageLicense},Yr=function(e){return Pr(e).templateFilter},Xr=function(e){return Pr(e).scale},Ur=function(e){return Pr(e).hasFte},Fr=function(e){return Pr(e).isHslOpen},Wr=function(e){return en(e).eraser},Vr=function(e){return Wr(e).open},Kr=function(e){return Wr(e).removeBgOpen},qr=function(e){return Wr(e).forceUpdate},Jr=function(e){return Wr(e).passedImage},Qr=function(e){return en(e).user},Zr=function(e){var t;return null===(t=Qr(e))||void 0===t?void 0:t.key},$r=function(e){var t;return null===(t=Qr(e))||void 0===t?void 0:t.id},ea=function(e){return en(e).waitingUser},ta=function(e){return en(e).userStorage},na=function(e){return en(e).userSubscription},ra=function(e){return $t(e).width},aa=function(e){return $t(e).height},ia=function(e){return $t(e).blank},ca=function(e){return Object(d.jb)($t(e).baseGroup)},oa=function(e){return Object(d.mb)($t(e).baseGroup)},sa=function(e){return $t(e).baseGroup},ua=function(e){return $t(e).baseGroup},la=function(e){return nn(e).isOpen},da=function(e){return nn(e).forceUpdate},ba=function(e){return nn(e).activeImg},fa=function(e){return nn(e).activeToolType},ha=function(e){return nn(e).appliedMaskImg},pa=function(e){return nn(e).isSaved},ga=function(e){return nn(e).activeBtns},Oa=function(e){return an(e).templates},va=function(e){return an(e).shapes},ja=function(e){return an(e).texts},ma=function(e){return an(e).colors},ya=function(e){return an(e).image},xa=function(e){return cn(e).isTemplateChanged},wa=function(e){return cn(e).isLocalImageUploadInProgress},Aa=function(e){return cn(e).history},Ea=function(e){return cn(e).status},ka=function(e){return cn(e).id},Ca=function(e){return cn(e).name},Sa=function(e){return cn(e).autoSaveReady},Ta=Object(c.a)(Sr,(function(e){return e.filter((function(e){return e.show_as_category}))})),_a=Object(c.a)(wr,(function(e){return e.filter((function(e){var t=e.type,n=e.source;return t===u.Je&&n===u.Ze.shutterstock})).map((function(e){return e.id}))})),Ia=Object(c.a)(Mn,(function(e){return e.find((function(e){return e.id===u.x}))})),Ra=Object(c.a)(Mn,(function(e){return e.filter((function(e){return e.type===u.tg}))})),La=Object(c.a)(Mn,(function(e){return e.filter((function(e){var t=e.type,n=e.elementType;return t===u.Af&&n!==u.rc.ICONS}))})),Pa=Object(c.a)(Dn,ca,(function(e,t){if(!t)return null;var n=Object(d.M)(t,"#".concat(null===e||void 0===e?void 0:e.id));return e&&n&&n.attrs.image&&e.id!==u.x?{layer:e,node:n,src:n.attrs.image.src}:null})),Ga=function(e){return en(e).newCanvasEnabled},Ma=function(e){return Ga(e)?Ie(e).editingTextId:en(e).editingTextId},Ba=Object(c.a)([function(e){return Ie(e).dragInProgress},Ma,st,cr],(function(e,t,n,r){return!r&&!e&&!t&&!!n.length})),Da=Object(c.a)([Le,function(e){return Wr(e).imageId}],(function(e,t){return e.find((function(e){return e.id===t}))})),Na=Object(c.a)([Le,function(e){return nn(e).activeImageId}],(function(e,t){return e.find((function(e){return e.id===t}))})),za=Object(c.a)(Le,_a,(function(e,t){return e.some((function(e){return Object(h.b)(e,t)}))})),Ha=Object(c.a)(st,_a,(function(e,t){return e.some((function(e){return Object(h.b)(e,t)}))})),Ya=Object(c.a)(nr,At,(function(e,t){var n=t.shadowTransparent,r=t.outlineTransparent,a=t.colorTransparent;return e===u.Jg.SHADOW?n:e===u.Jg.OUTLINE?r:e===u.Jg.COLOR?a:void 0})),Xa=function(e){return e.newHistory.stack},Ua=function(e){return e.newHistory.pointer},Fa=function(e){return rn(e).data},Wa=function(e,t){return Fa(e)[t]},Va=Object(c.a)([function(e){return rn(e).settings},Dn],(function(e,t){return(null===t||void 0===t?void 0:t.settings.activeEffect)&&e[t.settings.activeEffect]||[]})),Ka=Object(c.a)(Mn,(function(e){return e.reduce((function(e,t){var n=t.resources,r=t.type,a=t.isPremium;return(null===n||void 0===n?void 0:n.id)?("photo"!==r&&"template-collage"!==r||e.photos.push({id:n.id,isPremium:a||!1,license:null===n||void 0===n?void 0:n.license}),"sticker"===r&&e.stickers.push({id:n.id,isPremium:a||!1}),e):e}),{photos:[],stickers:[]})})),qa=Object(c.a)([Fa,Dn],(function(e,t){var n;return(null===t||void 0===t?void 0:t.settings.type)&&null!==(n=(e[t.settings.type]||[]).find((function(e){return e.name===t.settings.activeEffect})))&&void 0!==n?n:null})),Ja=Object(c.a)([qa],(function(e){return e?e.builderName:""})),Qa=Object(c.a)([qa],(function(e){var t;return e&&null!==(t=null===e||void 0===e?void 0:e.ignoredSettings)&&void 0!==t?t:[]})),Za=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object(c.a)([Mn,Bn,rn],(function(t,n,r){return[].concat(Object(i.a)(t),Object(i.a)(n)).filter((function(t){var n=t.settings,a=t.active;return e?a&&Object(l.a)(n,r):Object(l.a)(n,r)})).reduce((function(e,t){var n=t.settings,r=n.type,a=n.activeEffect;return r&&a&&e.push(String(a)),e}),[])}))},$a=Za(!1),ei=Za(!0),ti=Object(c.a)([Mn,ca],f),ni=function(e,t){return e.some((function(e){var n=e.isPremium,r=e.settings.isPremiumTexture,a=e.resources,i=a.id;return a.type===u.Jf?n&&i&&!t.includes(Number(i)):r||n}))},ri=Object(c.a)(Mn,ca,rn,$a,_a,(function(e,t,n,r,a){return ni(e,a)||!!Object.keys(f(e,t)).length||!!r.length||function(e,t){return!!e.find((function(e){var n;return null===(n=e.cellsLayers)||void 0===n?void 0:n.find((function(e){return e.isPremium||Object(l.a)(e.settings,t)}))}))}(e,n)||Object(g.a)(e)})),ai=Object(c.a)(Mn,ca,ei,_a,(function(e,t,n,r){return ni(e.filter((function(e){return e.active})),r)||Object.keys(f(e,t,!0)).length||n.length||Object(g.a)(e)})),ii=Object(c.a)(Mn,(function(e){return e.filter((function(e){var t,n=e.resources;return null===n||void 0===n||null===(t=n.url)||void 0===t?void 0:t.includes("shutterstock")}))})),ci=Object(c.a)(Mn,ca,_a,$a,(function(e,t,n,r){return B(e,t,r,n)})),oi=Object(c.a)(Le,_a,rn,(function(e,t){var n=e.filter(F.o),r=ne(n),a=r.photos,c=r.shapes,o=r.texts,s=r.stickers,l=r.templates,d=e.find(F.d),b=e.some((function(e){return Object(h.d)(e)})),f=X()(H()(m()(Object(h.c)(e))).filter((function(e){return e!==u.Og.hsl}))),p=e.some((function(e){return Object(h.a)(e)||f.includes(u.Og.hsl)})),g=n.filter((function(e){return Object(F.e)(e)&&!!q(e)})),O=v()([].concat(Object(i.a)(a),Object(i.a)(g)),q),j=O.filter(Z),y=O.filter(Q).filter((function(e){var n=e.meta.resourceId;return n&&!t.includes(Number(n))})),x=O.filter((function(e){return!Q(e)&&!Z(e)}));return[].concat(Object(i.a)(x.map((function(e){var t=e.url,n=e.meta.resourceId;return{type:u.Je,url:t,id:n,source:u.Ze.picsart}}))),Object(i.a)(j.map((function(e){var t=e.url,n=e.meta.resourceId;return{type:u.Je,url:t,id:n,source:u.Ze.unsplash}}))),Object(i.a)(y.map((function(e){var t=e.url,n=e.meta.resourceId;return{type:u.Je,url:t,id:n,source:u.Ze.shutterstock}}))),Object(i.a)(c.map((function(){return{type:u.Af,source:u.Ze.picsart}}))),Object(i.a)(o.map((function(e){return{type:u.tg,id:q(e),source:u.Ze.picsart}}))),Object(i.a)(s.map((function(e){return{type:u.Yf,id:q(e),source:u.Ze.picsart}}))),Object(i.a)(l.map((function(e){return{type:u.kg,id:K(e),source:u.Ze.picsart}}))),Object(i.a)(d?[{type:"texture",source:u.Ze.picsart}]:[]),Object(i.a)(b?[{type:"effect",source:u.Ze.picsart}]:[]),Object(i.a)(p?[{type:"hsl",source:u.Ze.picsart}]:[]),Object(i.a)(f.map((function(e){return{type:e||"",source:u.Ze.picsart}}))))})),si=Object(c.a)(Le,_a,(function(e){return gt(function(e){return Le(e).map((function(e){return e.id}))}(e))(e)}),(function(e,t,n){var r=ne(e),i=r.photos,c=r.shapes,o=r.texts,s=r.stickers,l=r.templates,d=H()(m()(Object(h.c)(e))).filter((function(e){return e!==u.Og.hsl})),b=e.some((function(e){return Object(h.a)(e)||d.includes(u.Og.hsl)})),f=Object(D.a)(Object(D.a)(Object(D.a)(Object(D.a)(Object(D.a)(Object(D.a)({},i.length&&{add_photo:i.some(F.o)}),s.length&&{sticker:s.some(F.o)}),o.length&&{text:o.some(F.o)}),c.length&&{shape:c.some(F.o)}),l.length&&{template:l.some(F.o)}),{},{adjust_hsl:b||null});return n.forEach((function(e){var t,n,r;(null===(t=e.effect)||void 0===t?void 0:t.category)&&(f[ee[null===(n=e.effect)||void 0===n?void 0:n.category]||(null===(r=e.effect)||void 0===r?void 0:r.category)]=!!e.effect.isPremium)})),d.forEach((function(e){e&&(f[te[e]||e]=!0)})),Object.entries(f).reduce((function(e,t){var n=Object(a.a)(t,2),r=n[0],i=n[1];return null===i||e.push(Object(N.a)({},r,i)),e}),[])})),ui=Object(c.a)(Le,(function(e){return e.reduce((function(e,t){var n,r,a=Object(F.o)(t),i=Object(h.d)(t),c=Object(h.e)(t);if(a){var o=($[t.meta.type]||t.meta.type).toLowerCase();e[o]=e[o]||[],e[o].push(t.meta.resourceId||t.id)}i&&(e.effect=e.effect||[],e.effect.push(null===(n=t.effect)||void 0===n?void 0:n.name));c&&(null===(r=t.meta.usedTools)||void 0===r||r.forEach((function(n){e[n]=e[n]||[],e[n].push(t.meta.resourceId||t.id)})));return e}),{})})),li=Object(c.a)(Qt,en,la,(function(e,t,n){return t.error.isVisible||e.effectModal.isOpen||e.successModal.isOpen||e.isWidgetOpen||e.isHintsOpen||null!==e.monetizationOpenedFrom||e.isShortcutModalOpen||t.activeReplaceMode||t.eraser.open||t.activeCropMode||t.isDropperActive||t.isCanvasLoading||n})),di=Object(c.a)([Mn,zn,sr],(function(e,t,n){var r=s()(e,(function(e){return e.cellsLayers||e})).find((function(e){return e.id===n})),i=1===t.length?t:[],c=Object(a.a)(i,1)[0],o=r||c||{},l=o.id,d=o.type;if(d&&[u.pg,u.Cc].includes(d))return l}))},,function(e,t,n){"use strict";n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return x})),n.d(t,"c",(function(){return A}));var r,a,i,c,o,s=n(2),u=n(4),l=n(41),d=n.n(l),b=Boolean(Number("0")),f="--pa-color-",h=b?{"--x-accent-1-1":"#72FFEA","--x-accent-1-2":"#00C5C3","--x-accent-1-3":"#009E9C","--x-accent-1-4":"#007675","--x-accent-1-5":"#004F4E","--x-accent-1-action":"#00C5C3","--x-accent-2-1":"#7B33F1","--x-accent-2-2":"#5300DB","--x-accent-2-3":"#4400B5","--x-accent-2-4":"#3D00A2","--x-accent-2-5":"#2F007C","--x-accent-2-action":"#4400B5","--x-link-1":"#5A00EE","--x-link-1-action":"#3A0098","--x-link-2":"#C209C1","--x-link-2-action":"#8F008A","--x-status-success":"#007675","--x-status-error":"#E7000A","--x-status-warning":"#F67E0C","--x-bg-1":"#121212","--x-bg-2":"#1C1C1E","--x-bg-3":"#262628","--x-bg-4":"#313132","--x-bg-5":"#5E5E61","--x-bg-6":"#777778","--x-bg-modal":"rgba(0,0,0,.35)","--x-text-1":"#FFFFFF","--x-text-2":"#A0A0A3","--x-text-disabled":"#636369"}:{"--x-accent-1-1":"#C209C1","--x-accent-1-2":"#CE3ACD","--x-accent-1-3":"#DA6BDA","--x-accent-1-4":"#E79DE6","--x-accent-1-5":"#F6E8F1","--x-accent-1-action":"#8F008A","--x-accent-2-1":"#5A00EE","--x-accent-2-2":"#7B33F1","--x-accent-2-3":"#9C66F5","--x-accent-2-4":"#BD99F8","--x-accent-2-5":"#DACAFB","--x-accent-2-action":"#3A0098","--x-link-1":"#72FFEA","--x-link-1-action":"#00C5C3","--x-link-2":"#BD99F8","--x-link-2-action":"#7B33F1","--x-status-success":"#72FFEA","--x-status-success-action":"green","--x-status-error":"#F33462","--x-status-error-action":"red","--x-status-warning":"#E4A546","--x-status-warning-action":"yellow","--x-bg-1":"#FFFFFF","--x-bg-2":"#F8F8F8","--x-bg-3":"#F0F0F0","--x-bg-4":"#E0E0E0","--x-bg-5":"#CBCBCB","--x-bg-6":"#B7B7B7","--x-bg-modal":"rgba(0,0,0,.35)","--x-text-color-1":"#080808","--x-text-color-2":"#5F5F5F","--x-text-color-disabled":"#9D9D9D","--x-icon-color-1":"var(--x-text-color-1)","--x-icon-color-2":"var(--x-text-color-2)"},p=(r={},Object(u.a)(r,"".concat(f,"1"),h["--x-accent-1-1"]||"#c209c1"),Object(u.a)(r,"".concat(f,"2"),"#dcdde9"),Object(u.a)(r,"".concat(f,"3"),"#000000"),Object(u.a)(r,"".concat(f,"4"),"#edeef4"),Object(u.a)(r,"".concat(f,"5"),"#626777"),Object(u.a)(r,"".concat(f,"6"),"#282b36"),Object(u.a)(r,"".concat(f,"7"),"#bcc0d1"),Object(u.a)(r,"".concat(f,"8"),"#16191d"),Object(u.a)(r,"".concat(f,"9"),"#ffffff"),Object(u.a)(r,"".concat(f,"10"),"#545869"),Object(u.a)(r,"".concat(f,"11"),"#e0e0e0"),Object(u.a)(r,"".concat(f,"12"),"#f7f7fb"),Object(u.a)(r,"".concat(f,"13"),"#babcc5"),Object(u.a)(r,"".concat(f,"14"),"#535771"),Object(u.a)(r,"".concat(f,"15"),"#48525b"),Object(u.a)(r,"".concat(f,"16"),"#b10808"),Object(u.a)(r,"".concat(f,"17"),"#1d2025"),Object(u.a)(r,"".concat(f,"18"),"#f46b66"),Object(u.a)(r,"".concat(f,"19"),"#7b8196"),Object(u.a)(r,"".concat(f,"20"),"#f1463f"),Object(u.a)(r,"".concat(f,"34"),"#9393ae"),Object(u.a)(r,"".concat(f,"35"),"#080808"),Object(u.a)(r,"".concat(f,"36"),"#1d1d1d"),Object(u.a)(r,"".concat(f,"37"),"#3a76e8"),Object(u.a)(r,"".concat(f,"38"),"#86909c"),Object(u.a)(r,"".concat(f,"39"),"#f8f8fb"),Object(u.a)(r,"".concat(f,"40"),"#3a76e7"),Object(u.a)(r,"".concat(f,"41"),"#ededf4"),Object(u.a)(r,"".concat(f,"42"),"#d6dff9"),Object(u.a)(r,"".concat(f,"44"),"#ac00a6"),Object(u.a)(r,"".concat(f,"45"),"#33d1ac"),Object(u.a)(r,"".concat(f,"46"),"#3673eb"),Object(u.a)(r,"".concat(f,"47"),"#386cd0"),Object(u.a)(r,"".concat(f,"48"),"#da5853"),Object(u.a)(r,"".concat(f,"49"),"#545f6a"),Object(u.a)(r,"".concat(f,"50"),"#7151e1"),Object(u.a)(r,"".concat(f,"51"),"#e81515"),Object(u.a)(r,"".concat(f,"53"),"#e8e8f1"),Object(u.a)(r,"".concat(f,"54"),"#3d4148"),Object(u.a)(r,"".concat(f,"55"),"#f3f7ff"),Object(u.a)(r,"".concat(f,"56"),"#b0cbfe"),Object(u.a)(r,"".concat(f,"57"),"#0055ff"),Object(u.a)(r,"".concat(f,"58"),"#505462"),Object(u.a)(r,"".concat(f,"59"),"#494c59"),Object(u.a)(r,"".concat(f,"60"),"#f8f8f8"),Object(u.a)(r,"".concat(f,"61"),"#bbbcc3"),Object(u.a)(r,"".concat(f,"62"),h["--x-accent-1-5"]||"#f6e8f1"),Object(u.a)(r,"".concat(f,"64"),"#50535c"),Object(u.a)(r,"".concat(f,"65"),"#4e00cc"),Object(u.a)(r,"".concat(f,"66"),"#222222"),Object(u.a)(r,"".concat(f,"67"),"#0077ff"),Object(u.a)(r,"".concat(f,"68"),"#e95fff"),Object(u.a)(r,"".concat(f,"70"),"#44a0ff"),Object(u.a)(r,"".concat(f,"71"),"#3373fb"),Object(u.a)(r,"".concat(f,"73"),"#b3cbfe"),Object(u.a)(r,"".concat(f,"74"),"#ae1d8a"),Object(u.a)(r,"".concat(f,"75"),"#f4f5f8"),Object(u.a)(r,"".concat(f,"76"),"#f9fafc"),Object(u.a)(r,"".concat(f,"77"),"#eef3fe"),Object(u.a)(r,"".concat(f,"78"),"#4a7ef2"),Object(u.a)(r,"".concat(f,"79"),"#def8f2"),Object(u.a)(r,"".concat(f,"80"),"#fde3e2"),Object(u.a)(r,"".concat(f,"81"),"#4cdbb9"),Object(u.a)(r,"".concat(f,"82"),"#575b6b"),Object(u.a)(r,"".concat(f,"83"),"#575c6b"),Object(u.a)(r,"".concat(f,"84"),"#e9e9ee"),Object(u.a)(r,"".concat(f,"85"),"#d8d8e2"),Object(u.a)(r,"".concat(f,"92"),"#1d83ff"),Object(u.a)(r,"".concat(f,"94"),"#f4f5fa"),Object(u.a)(r,"".concat(f,"95"),"#b5b9d2"),Object(u.a)(r,"".concat(f,"96"),"#ff5556"),Object(u.a)(r,"".concat(f,"97"),"#ffc445"),Object(u.a)(r,"".concat(f,"98"),"#f9e64b"),Object(u.a)(r,"".concat(f,"99"),"#50ca6d"),Object(u.a)(r,"".concat(f,"100"),"#5fe2eb"),Object(u.a)(r,"".concat(f,"101"),"#b850da"),Object(u.a)(r,"".concat(f,"102"),"#4843fa"),Object(u.a)(r,"".concat(f,"103"),"#f34ea9"),Object(u.a)(r,"".concat(f,"105"),"#f9f9fe"),Object(u.a)(r,"".concat(f,"107"),"#708099"),Object(u.a)(r,"".concat(f,"109"),"#f1f1f6"),Object(u.a)(r,"".concat(f,"110"),"#9ba0ae"),Object(u.a)(r,"".concat(f,"111"),"#9390b1"),Object(u.a)(r,"".concat(f,"112"),"#0067de"),Object(u.a)(r,"".concat(f,"113"),"#0257bb"),Object(u.a)(r,"".concat(f,"130"),"#5f6579"),Object(u.a)(r,"".concat(f,"131"),"#5d5e6d"),Object(u.a)(r,"".concat(f,"132"),"#575876"),Object(u.a)(r,"".concat(f,"133"),"#4d5465"),Object(u.a)(r,"".concat(f,"134"),"#4b4b4b"),Object(u.a)(r,"".concat(f,"142"),"#24242f"),Object(u.a)(r,"".concat(f,"145"),"#545d6b"),Object(u.a)(r,"".concat(f,"176"),"#292b36"),Object(u.a)(r,"".concat(f,"178"),"#ffa858"),Object(u.a)(r,"".concat(f,"179"),h["--x-accent-1-3"]||"#da6bda"),Object(u.a)(r,"".concat(f,"183"),"#fda513"),Object(u.a)(r,"".concat(f,"184"),"#ea4335"),Object(u.a)(r,"".concat(f,"185"),h["--x-accent-2-1"]||"#5a00ee"),Object(u.a)(r,"".concat(f,"186"),"#9393ad"),Object(u.a)(r,"".concat(f,"190"),"#ff0000"),Object(u.a)(r,"".concat(f,"192"),"#545869"),Object(u.a)(r,"".concat(f,"202"),"#ffffff"),Object(u.a)(r,"".concat(f,"203"),"#000000"),Object(u.a)(r,"".concat(f,"204"),"#ffffff"),Object(u.a)(r,"".concat(f,"205"),"#c209c1"),Object(u.a)(r,"".concat(f,"206"),"#bcc0d1"),Object(u.a)(r,"".concat(f,"208"),"#282b36"),Object(u.a)(r,"".concat(f,"209"),"#ffffff"),Object(u.a)(r,"".concat(f,"210"),"#ffffff"),Object(u.a)(r,"".concat(f,"211"),"#282b36"),Object(u.a)(r,"".concat(f,"213"),"#5a00ee"),r),g=(a={},Object(u.a)(a,"".concat(f,"1"),"#72ffea"),Object(u.a)(a,"".concat(f,"2"),"#5e5e61"),Object(u.a)(a,"".concat(f,"3"),"#ffffff"),Object(u.a)(a,"".concat(f,"4"),"#313132"),Object(u.a)(a,"".concat(f,"5"),"#8e8e93"),Object(u.a)(a,"".concat(f,"6"),"#ffffff"),Object(u.a)(a,"".concat(f,"7"),"#8e8e93"),Object(u.a)(a,"".concat(f,"8"),"#ffffff"),Object(u.a)(a,"".concat(f,"9"),"#1c1c1e"),Object(u.a)(a,"".concat(f,"10"),"#8e8e93"),Object(u.a)(a,"".concat(f,"12"),"#262628"),Object(u.a)(a,"".concat(f,"34"),"#ffffff"),Object(u.a)(a,"".concat(f,"44"),"#00c5c3"),Object(u.a)(a,"".concat(f,"60"),"#121212"),Object(u.a)(a,"".concat(f,"62"),"#004f4e"),Object(u.a)(a,"".concat(f,"71"),"#1c1c1e"),Object(u.a)(a,"".concat(f,"109"),"#121212"),Object(u.a)(a,"".concat(f,"153"),"#262628"),Object(u.a)(a,"".concat(f,"176"),"#ffffff"),Object(u.a)(a,"".concat(f,"185"),"#00c5c3"),Object(u.a)(a,"".concat(f,"192"),"#ffffff"),Object(u.a)(a,"".concat(f,"202"),"#ffffff"),Object(u.a)(a,"".concat(f,"203"),"#262628"),Object(u.a)(a,"".concat(f,"204"),"#121212"),Object(u.a)(a,"".concat(f,"205"),"#72ffea"),Object(u.a)(a,"".concat(f,"206"),"#8e8e93"),Object(u.a)(a,"".concat(f,"208"),"#262628"),Object(u.a)(a,"".concat(f,"210"),"#5e5e61"),a),O=(i={},Object(u.a)(i,"".concat(f,"400"),"#b7b7b7"),Object(u.a)(i,"".concat(f,"401"),"#cbcbcb"),Object(u.a)(i,"".concat(f,"402"),"#e0e0e0"),Object(u.a)(i,"".concat(f,"403"),"#f0f0f0"),Object(u.a)(i,"".concat(f,"404"),"#f8f8f8"),Object(u.a)(i,"".concat(f,"405"),"#ffffff"),Object(u.a)(i,"".concat(f,"406"),"#ffffffcc"),Object(u.a)(i,"".concat(f,"407"),"#8f008a"),Object(u.a)(i,"".concat(f,"408"),"#c209c1"),Object(u.a)(i,"".concat(f,"409"),"#ce3acd"),Object(u.a)(i,"".concat(f,"410"),"#da6bda"),Object(u.a)(i,"".concat(f,"411"),"#e79de6"),Object(u.a)(i,"".concat(f,"412"),"#f6e8f1"),Object(u.a)(i,"".concat(f,"413"),"#3a0098"),Object(u.a)(i,"".concat(f,"414"),"#5a00ee"),Object(u.a)(i,"".concat(f,"415"),"#7b33f1"),Object(u.a)(i,"".concat(f,"416"),"#9c66f5"),Object(u.a)(i,"".concat(f,"417"),"#bd99f8"),Object(u.a)(i,"".concat(f,"418"),"#dacafb"),Object(u.a)(i,"".concat(f,"420"),"#c209c1"),Object(u.a)(i,"".concat(f,"421"),"#080808"),Object(u.a)(i,"".concat(f,"422"),"#5f5f5f"),Object(u.a)(i,"".concat(f,"423"),"#c9c9c9"),Object(u.a)(i,"".concat(f,"424"),"#ffffff"),Object(u.a)(i,"".concat(f,"425"),"#5a00ee"),Object(u.a)(i,"".concat(f,"426"),"#007675"),Object(u.a)(i,"".concat(f,"427"),"#e7000a"),Object(u.a)(i,"".concat(f,"428"),"#f67e0c"),i),v=(c={},Object(u.a)(c,"".concat(f,"400"),"#777778"),Object(u.a)(c,"".concat(f,"401"),"#5e5e61"),Object(u.a)(c,"".concat(f,"402"),"#313132"),Object(u.a)(c,"".concat(f,"403"),"#262628"),Object(u.a)(c,"".concat(f,"404"),"#1c1c1e"),Object(u.a)(c,"".concat(f,"405"),"#121212"),Object(u.a)(c,"".concat(f,"406"),"#121212b8"),Object(u.a)(c,"".concat(f,"407"),"#00c5c3"),Object(u.a)(c,"".concat(f,"408"),"#72ffea"),Object(u.a)(c,"".concat(f,"409"),"#00c5c3"),Object(u.a)(c,"".concat(f,"410"),"#009e9c"),Object(u.a)(c,"".concat(f,"411"),"#007675"),Object(u.a)(c,"".concat(f,"412"),"#004f4e"),Object(u.a)(c,"".concat(f,"413"),"#4400b5"),Object(u.a)(c,"".concat(f,"414"),"#7b33f1"),Object(u.a)(c,"".concat(f,"415"),"#5300db"),Object(u.a)(c,"".concat(f,"416"),"#4400b5"),Object(u.a)(c,"".concat(f,"417"),"#3d00a2"),Object(u.a)(c,"".concat(f,"418"),"#2f007c"),Object(u.a)(c,"".concat(f,"420"),"#72ffea"),Object(u.a)(c,"".concat(f,"421"),"#ffffff"),Object(u.a)(c,"".concat(f,"422"),"#a0a0a3"),Object(u.a)(c,"".concat(f,"423"),"#636369"),Object(u.a)(c,"".concat(f,"424"),"#080808"),Object(u.a)(c,"".concat(f,"425"),"#bd99f8"),Object(u.a)(c,"".concat(f,"426"),"#72ffea"),Object(u.a)(c,"".concat(f,"427"),"#f33462"),Object(u.a)(c,"".concat(f,"428"),"#e4a546"),O),j=Object(s.a)(Object(s.a)({},p),b&&g),m=(o={},Object(u.a)(o,"".concat(f,"43"),"".concat(j["".concat(f,"185")],"66")),Object(u.a)(o,"".concat(f,"69"),"".concat(j["".concat(f,"71")],"33")),Object(u.a)(o,"".concat(f,"72"),"".concat(j["".concat(f,"185")],"33")),Object(u.a)(o,"".concat(f,"115"),"".concat(j["".concat(f,"4")],"80")),Object(u.a)(o,"".concat(f,"116"),"".concat(j["".concat(f,"10")],"1a")),Object(u.a)(o,"".concat(f,"118"),"".concat(j["".concat(f,"142")],"a6")),Object(u.a)(o,"".concat(f,"121"),"".concat(j["".concat(f,"3")],"99")),Object(u.a)(o,"".concat(f,"122"),"".concat(j["".concat(f,"130")],"8f")),Object(u.a)(o,"".concat(f,"123"),"".concat(j["".concat(f,"14")],"b3")),Object(u.a)(o,"".concat(f,"124"),"".concat(j["".concat(f,"6")],"cc")),Object(u.a)(o,"".concat(f,"125"),"".concat(j["".concat(f,"6")],"14")),Object(u.a)(o,"".concat(f,"126"),"".concat(j["".concat(f,"67")],"0d")),Object(u.a)(o,"".concat(f,"138"),"".concat(j["".concat(f,"6")],"1a")),Object(u.a)(o,"".concat(f,"140"),"".concat(j["".concat(f,"67")],"33")),Object(u.a)(o,"".concat(f,"141"),"".concat(j["".concat(f,"9")],"07")),Object(u.a)(o,"".concat(f,"143"),"".concat(j["".concat(f,"131")],"40")),Object(u.a)(o,"".concat(f,"144"),"".concat(j["".concat(f,"132")],"40")),Object(u.a)(o,"".concat(f,"146"),"".concat(j["".concat(f,"3")],"4d")),Object(u.a)(o,"".concat(f,"147"),"".concat(j["".concat(f,"145")],"38")),Object(u.a)(o,"".concat(f,"148"),"".concat(j["".concat(f,"6")],"99")),Object(u.a)(o,"".concat(f,"149"),"".concat(j["".concat(f,"3")],"12")),Object(u.a)(o,"".concat(f,"150"),"".concat(j["".concat(f,"145")],"6b")),Object(u.a)(o,"".concat(f,"151"),"".concat(j["".concat(f,"55")],"99")),Object(u.a)(o,"".concat(f,"152"),"".concat(j["".concat(f,"9")],"80")),Object(u.a)(o,"".concat(f,"153"),"".concat(j["".concat(f,"4")],"99")),Object(u.a)(o,"".concat(f,"154"),"".concat(j["".concat(f,"66")],"59")),Object(u.a)(o,"".concat(f,"155"),"".concat(j["".concat(f,"66")],"33")),Object(u.a)(o,"".concat(f,"156"),"".concat(j["".concat(f,"66")],"54")),Object(u.a)(o,"".concat(f,"160"),"".concat(j["".concat(f,"6")],"17")),Object(u.a)(o,"".concat(f,"161"),"".concat(j["".concat(f,"3")],"66")),Object(u.a)(o,"".concat(f,"162"),"".concat(j["".concat(f,"3")],"33")),Object(u.a)(o,"".concat(f,"163"),"".concat(j["".concat(f,"133")],"1a")),Object(u.a)(o,"".concat(f,"164"),"".concat(j["".concat(f,"9")],"e6")),Object(u.a)(o,"".concat(f,"165"),"".concat(j["".concat(f,"6")],"33")),Object(u.a)(o,"".concat(f,"167"),"".concat(j["".concat(f,"134")],"1f")),Object(u.a)(o,"".concat(f,"168"),"".concat(j["".concat(f,"92")],"33")),Object(u.a)(o,"".concat(f,"171"),"".concat(j["".concat(f,"2")],"99")),Object(u.a)(o,"".concat(f,"172"),"".concat(j["".concat(f,"67")],"1a")),Object(u.a)(o,"".concat(f,"174"),"".concat(j["".concat(f,"3")],"b3")),Object(u.a)(o,"".concat(f,"180"),"".concat(j["".concat(f,"66")],"66")),Object(u.a)(o,"".concat(f,"212"),"".concat(j["".concat(f,"211")],"14")),Object(u.a)(o,"".concat(f,"220"),"".concat(j["".concat(f,"3")],"33")),Object(u.a)(o,"".concat(f,"191"),"".concat(j["".concat(f,"4")],"60")),Object(u.a)(o,"".concat(f,"193"),"".concat(j["".concat(f,"60")],"cc")),Object(u.a)(o,"".concat(f,"194"),"".concat(j["".concat(f,"3")],"1c")),o),y=Object(s.a)(Object(s.a)(Object(s.a)({},j),v),m),x=Object.keys(y).reduce((function(e,t){var n=t.split(f)[1];return e["".concat("paColor").concat(n)]="var(".concat(t,")"),e}),{}),w=/^var\((.+)\)$/,A=function(e){var t=e.replace(w,"$1"),n=y[t];return d()(n).toRgbString()}},function(e,t,n){"use strict";n.d(t,"u",(function(){return h})),n.d(t,"a",(function(){return l.b})),n.d(t,"b",(function(){return l.c})),n.d(t,"g",(function(){return l.i})),n.d(t,"j",(function(){return l.l})),n.d(t,"k",(function(){return l.m})),n.d(t,"f",(function(){return l.g})),n.d(t,"e",(function(){return l.f})),n.d(t,"n",(function(){return l.p})),n.d(t,"o",(function(){return l.q})),n.d(t,"s",(function(){return l.u})),n.d(t,"q",(function(){return l.s})),n.d(t,"p",(function(){return l.r})),n.d(t,"c",(function(){return l.d})),n.d(t,"d",(function(){return l.e})),n.d(t,"l",(function(){return l.n})),n.d(t,"m",(function(){return l.o})),n.d(t,"h",(function(){return l.j})),n.d(t,"r",(function(){return l.t})),n.d(t,"i",(function(){return l.k})),n.d(t,"t",(function(){return l.v}));var r,a=n(4),i=n(14),c=n(2),o=n(117),s=n.n(o),u=n(333),l=n(77),d=n(52),b=n(103),f={layers:[],activeToolbar:"",activeEffect:"",activeTexture:0,selectedTextId:0,selectedText:"",effectsData:{magic:{sid:"",url:""},canvas:{sid:"",url:""},colorTransfer:{sid:""},sketch:{blobUrl:"",svgDoc:""}}},h=Object(u.a)(f,(r={},Object(a.a)(r,l.c,(function(e,t){var n=t.newLayers.map((function(t){return d.a.generateNewLayer(Object(c.a)(Object(c.a)({},t),{},{layers:e.layers}))}));return Object(c.a)(Object(c.a)({},e),{},{layers:[].concat(Object(i.a)(n),Object(i.a)(e.layers))})})),Object(a.a)(r,l.b,(function(e,t){var n=d.a.generateNewLayer(t.payload);return Object(c.a)(Object(c.a)({},e),{},{layers:[n].concat(Object(i.a)(e.layers))})})),Object(a.a)(r,l.i,(function(e,t){var n=e.layers.filter((function(e){return e.id!==t.payload.id}));return Object(c.a)(Object(c.a)({},e),{},{layers:n,activeToolbar:1!==n.length||n[0].active?e.activeToolbar:""})})),Object(a.a)(r,l.h,(function(e,t){var n=Object(i.a)(e.layers),r=Object(b.c)(n,t.id);return r.active=!0,r.effectLayer={},r.settings.isDoubleGroup=!1,Object(c.a)(Object(c.a)({},e),{},{layers:n})})),Object(a.a)(r,l.d,(function(e,t){var n=t.templateLayers.map((function(e){var t=d.a.generateNewLayer(e);return t.active=!1,t})),r=Object(c.a)({},e.layers[0]);return r.active=!1,n.push(r),Object(c.a)(Object(c.a)({},e),{},{layers:n})})),Object(a.a)(r,l.g,(function(e){return Object(c.a)(Object(c.a)({},e),{},{layers:[Object(c.a)({},d.a.getCanvasLayer())]})})),Object(a.a)(r,l.m,(function(e,t){if(!t.layersIds||!t.layersIds.length)return e;var n=e.layers.map((function(e){var n,r,a;return Object(c.a)(Object(c.a)({},e),{},{active:!!(null===(n=t.layersIds)||void 0===n?void 0:n.find((function(t){var n=t.id;return e.id===n}))),effectLayer:Object(c.a)(Object(c.a)({},e.effectLayer),{},{active:!!(null===(r=t.layersIds)||void 0===r?void 0:r.find((function(t){var n,r=t.id;return(null===e||void 0===e||null===(n=e.effectLayer)||void 0===n?void 0:n.id)===r})))}),cellsLayers:null===(a=e.cellsLayers)||void 0===a?void 0:a.map((function(e){var n,r;return Object(c.a)(Object(c.a)({},e),{},{active:!!(null===(n=t.layersIds)||void 0===n?void 0:n.find((function(t){var n=t.id;return e.id===n}))),effectLayer:Object(c.a)(Object(c.a)({},e.effectLayer),{},{active:!!(null===(r=t.layersIds)||void 0===r?void 0:r.find((function(t){var n,r=t.id;return(null===e||void 0===e||null===(n=e.effectLayer)||void 0===n?void 0:n.id)===r})))})})}))})})),r=n.find((function(e){var n,r,a=e.id,i=e.effectLayer;return a===(null===(n=t.layersIds[0])||void 0===n?void 0:n.id)||(null===i||void 0===i?void 0:i.id)===(null===(r=t.layersIds[0])||void 0===r?void 0:r.id)}));if(r||(r=Object(b.a)(n)),!r)return e;var a=Object(b.d)(r);return Object(c.a)(Object(c.a)({},e),{},{layers:n,activeToolbar:a})})),Object(a.a)(r,l.l,(function(e,t){if(!t.id)return e;var n=e.layers.map((function(e){var n,r,a;return Object(c.a)(Object(c.a)({},e),{},{active:e.id===t.id||(null===(n=e.settings)||void 0===n?void 0:n.childId)===t.id,effectLayer:Object(c.a)(Object(c.a)({},e.effectLayer),{},{active:(null===e||void 0===e||null===(r=e.effectLayer)||void 0===r?void 0:r.id)===t.id}),cellsLayers:null===(a=e.cellsLayers)||void 0===a?void 0:a.map((function(e){var n;return Object(c.a)(Object(c.a)({},e),{},{active:t.id===e.id,effectLayer:Object(c.a)(Object(c.a)({},e.effectLayer),{},{active:(null===e||void 0===e||null===(n=e.effectLayer)||void 0===n?void 0:n.id)===t.id})})}))})})),r=n.find((function(e){var n;return e.id===t.id||e.settings.childId===t.id||(null===e||void 0===e||null===(n=e.effectLayer)||void 0===n?void 0:n.id)===t.id}));if(r||(r=Object(b.a)(n)),!r)return e;var a=Object(b.d)(r);return Object(c.a)(Object(c.a)({},e),{},{layers:n,activeToolbar:a})})),Object(a.a)(r,l.f,(function(e){return Object(c.a)(Object(c.a)({},e),{},{layers:e.layers.map((function(e){var t;return Object(c.a)(Object(c.a)({},e),{},{active:!1,effectLayer:Object(c.a)(Object(c.a)({},e.effectLayer),{},{active:!1}),cellsLayers:null===(t=e.cellsLayers)||void 0===t?void 0:t.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{active:!1})}))})}))})})),Object(a.a)(r,l.e,(function(e,t){var n,r=s()(e.layers),a=r.find((function(e){return e.id===t.id}));return a?(a.resources=t.changed_resource,a.isPremium=null!==(n=t.isPremium)&&void 0!==n?n:a.isPremium,Object(c.a)(Object(c.a)({},e),{},{layers:r})):e})),Object(a.a)(r,l.o,(function(e,t){var n=s()(e.layers);return t.batchSettings.forEach((function(e){var t=e.settings,r=e.id,a=e.resources,i=e.effectLayer,o=e.isPremium,s=n.find((function(e){return r===e.id}));s&&(t&&(s.settings=Object(c.a)(Object(c.a)({},s.settings),t)),a&&(s.resources=Object(c.a)(Object(c.a)({},s.resources),a)),i&&(s.effectLayer=i),s.isPremium="boolean"===typeof o?o:s.isPremium)})),Object(c.a)(Object(c.a)({},e),{},{layers:n})})),Object(a.a)(r,l.n,(function(e,t){var n,r,a,i,o=s()(e.layers),u=t.id?Object(b.c)(o,t.id):Object(b.a)(o);if(!u)return e;(t.is_visible&&(u.is_visible=t.is_visible),t.settings&&(u.settings=Object(c.a)(Object(c.a)({},u.settings),t.settings)),u.isPremium=null!==(n=t.isPremium)&&void 0!==n?n:u.isPremium,t.resources&&(u.resources=Object(c.a)(Object(c.a)({},u.resources),t.resources)),t.hasOwnProperty("hideFromLayers")&&(u.hideFromLayers=t.hideFromLayers),t.isRemoveEffectLayer&&(u.effectLayer={},u.settings.isDoubleGroup=!1),t.effectLayer&&!t.isRemoveEffectLayer)&&(u.effectLayer=Object(c.a)(Object(c.a)(Object(c.a)({},u.effectLayer),t.effectLayer),{},{isPremium:null!==(r=t.isPremium)&&void 0!==r?r:u.isPremium,resources:Object(c.a)(Object(c.a)({},null===(a=u.effectLayer)||void 0===a?void 0:a.resources),t.effectLayer.resources),settings:Object(c.a)(Object(c.a)({},null===(i=u.effectLayer)||void 0===i?void 0:i.settings),t.effectLayer.settings)}));t.active&&(o=o.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{active:(null===u||void 0===u?void 0:u.id)===e.id,effectLayer:Object(c.a)(Object(c.a)({},e.effectLayer),{},{active:!1})})})));var l=o.find((function(e){var t;return e.active||(null===(t=e.effectLayer)||void 0===t?void 0:t.active)}));return Object(c.a)(Object(c.a)({},e),{},{layers:o,activeToolbar:t.active?Object(b.d)(l):e.activeToolbar})})),Object(a.a)(r,l.a,(function(e,t){return Object(c.a)(Object(c.a)({},e),{},{activeToolbar:t.activeToolbar})})),Object(a.a)(r,l.p,(function(e,t){return Object(c.a)(Object(c.a)({},e),{},{activeEffect:t.activeEffect})})),Object(a.a)(r,l.q,(function(e,t){return Object(c.a)(Object(c.a)({},e),{},{activeTexture:t.activeTexture})})),Object(a.a)(r,l.u,(function(e,t){return Object(c.a)(Object(c.a)({},e),{},{layers:t.layers})})),Object(a.a)(r,l.s,(function(e,t){return Object(c.a)(Object(c.a)({},e),{},{selectedTextId:t.selectedTextId})})),Object(a.a)(r,l.r,(function(e,t){return Object(c.a)(Object(c.a)({},e),{},{selectedText:t.selectedText})})),Object(a.a)(r,l.j,(function(e){return Object(c.a)(Object(c.a)({},e),{},{activeEffect:"",activeTexture:0,selectedTextId:0,selectedText:"",activeToolbar:""})})),Object(a.a)(r,l.t,(function(e,t){var n,r,a,i;return Object(c.a)(Object(c.a)({},e),{},{effectsData:{magic:Object(c.a)(Object(c.a)({},e.effectsData.magic),t.effectsData.magic),canvas:Object(c.a)(Object(c.a)({},e.effectsData.canvas),t.effectsData.canvas),colorTransfer:Object(c.a)(Object(c.a)(Object(c.a)({},e.effectsData.colorTransfer),t.effectsData.colorTransfer),{},{dbItem:(null===(n=t.effectsData)||void 0===n||null===(r=n.colorTransfer)||void 0===r?void 0:r.dbItem)||(null===(a=e.effectsData)||void 0===a||null===(i=a.colorTransfer)||void 0===i?void 0:i.dbItem)}),sketch:Object(c.a)(Object(c.a)({},e.effectsData.sketch),t.effectsData.sketch)}})})),Object(a.a)(r,l.v,(function(e,t){var n,r=s()(e.layers);return((null===t||void 0===t||null===(n=t.ids)||void 0===n?void 0:n.map((function(e){return Object(b.c)(r,e)})))||[]).forEach((function(e){e.uiMetaData=Object(c.a)(Object(c.a)({},e.uiMetaData||{}),{},Object(a.a)({},t.adjustGroupId||"",!!t.adjustGroupIsOpen))})),Object(c.a)(Object(c.a)({},e),{},{layers:r})})),Object(a.a)(r,l.k,(function(){return f})),r))},,,,function(e,t,n){"use strict";var r,a;n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),function(e){e.font="font",e.bend="bend",e.font_family="font_family",e.change_text="change_text",e.blend_mode="blend_mode",e.text_added="text_added",e.image_added="image_added",e.shape_added="shape_added",e.overlay_added="overlay_added",e.draw_placeholder="draw_placeholder",e.add_layers="add_layers",e.remove_layer="remove_layer",e.replace_image="replace_image",e.change_adjust="change_adjust",e.duplicate_layer="duplicate_layer",e.object_position="object_position",e.flip_object="flip_object",e.bulk_action="bulk_action",e.change_color="change_color",e.change_ratio="change_ratio",e.reorder_layers="reorder_layers",e.add_placeholder="add_placeholder",e.change_background_texture="change_background_texture",e.free_grid_added="free_grid_added"}(r||(r={})),function(e){e.transformend="transformend",e.crop="crop",e.text="text",e.photo="photo",e.shape="shape",e.color="color",e.eraser="eraser",e.sticker="sticker",e.texture="texture",e.remover="remover",e.overlay="overlay",e.text_group="text-group",e.grid_cell="grid_cell",e.free_grid="free_grid",e.effect_group="effect-group",e.text_color_opacity="text_color_opacity"}(a||(a={}))},function(e,t,n){"use strict";var r=n(14),a=n(2),i=n(75),c=n(1),o=n(442),s={activeSetting:"",ratioCards:[],chooser:{done:!1,isPremium:!1,originalImages:[],additionalInfo:{id:"",templateFilter:{type:"",value:""},width:0,height:0,name:"",hasFte:0,originalWidth:0,originalHeight:0,scale:{width:0,height:0},measurement:"px"}},user:null,userStorage:null,userSubscription:null,tempImageData:[],waitingUser:!0,canvasSizes:{width:0,height:0},eraser:{open:!1,removeBgOpen:!1,passedImage:null,forceUpdate:!1,imageId:""},error:{isVisible:!1,errorKey:c.ic.SERVER_ERROR},droppablePhotoFromSidebar:{isDropEnd:!1,draggableId:""},droppablePhotoCollageId:"",selectedCategory:"",visibilityTextarea:!1,editingTextId:"",activeReplaceMode:!1,activeCropMode:!1,isDropperActive:!1,isCanvasLoading:!1,isTemplatesLoading:!1,isTemplateCollageClicked:!1,activeEffectPage:"",currentTemplateData:{licenses:"",template_size:"",template_id:"",template_tag:"",premium_template:!1},snapEnabled:!1,isHoverBorderApplicable:!0,newCanvasEnabled:!0,isFromSeeAll:!1,userPaidItems:[],uploadedFilesWithDrag:[],uploadedImages:[],uploadedFonts:[],oneTimePaymentResult:null},u=Object(i.c)({name:"general",initialState:s,reducers:{setImageUrl:function(e,t){var n=t.payload;e.imageUrl=n},setUser:function(e,t){var n=t.payload;e.user=n},setWaitingUser:function(e,t){var n=t.payload;e.waitingUser=n},setUserStorage:function(e,t){var n=t.payload;e.userStorage=n},setUserSubscription:function(e,t){var n=t.payload;e.userSubscription=n},setIsFromSeeAll:function(e,t){var n=t.payload;e.isFromSeeAll=n},setActiveSettings:function(e,t){var n=t.payload;e.activeSetting=n},storeImageDataTemp:function(e,t){var n=t.payload;e.tempImageData=n},removeImageDataTemp:function(e){e.tempImageData=[]},chooserDone:function(e){e.chooser.done=!0},updateChooserPremium:function(e,t){var n=t.payload;e.chooser.isPremium=n},chooserAdditionalInfo:function(e,t){var n=t.payload;e.chooser.additionalInfo=Object(a.a)(Object(a.a)({},e.chooser.additionalInfo),n)},updateChooser:function(e,t){var n=t.payload,i=e.chooser;if(n.extraData&&n.extraData.width){var c=i.originalImages.map((function(e){var t,r;return Object(a.a)(Object(a.a)({},e),{},{width:null===(t=n.extraData)||void 0===t?void 0:t.width,height:null===(r=n.extraData)||void 0===r?void 0:r.height})}));i.originalImages=c,i.additionalInfo.width=n.extraData.width,i.additionalInfo.height=n.extraData.height,i.additionalInfo.originalWidth=n.extraData.originalWidth,i.additionalInfo.originalHeight=n.extraData.originalHeight,i.additionalInfo.scale=n.extraData.scale,e.canvasSizes.width=n.extraData.width,e.canvasSizes.height=n.extraData.height}i.done=!0,n.originalImages&&(i.originalImages=[].concat(Object(r.a)(i.originalImages),Object(r.a)(n.originalImages)))},updateCanvasSizes:function(e,t){var n=t.payload;e.canvasSizes=n},reset:function(e){return Object(a.a)(Object(a.a)({},s),{},{user:e.user,waitingUser:e.waitingUser,isFromSeeAll:e.isFromSeeAll,ratioCards:e.ratioCards})},resetEditorOnPageChange:function(e,t){var n=t.payload;e.activeSetting=s.activeSetting,e.chooser.isPremium=n,e.chooser.done=!0,e.selectedCategory=s.selectedCategory},openEraser:function(e,t){var n=t.payload,r=void 0===n?{}:n;e.eraser.open=!0,e.eraser.removeBgOpen=!!r.removeBgOpen,void 0!==r.passedImage&&(e.eraser.passedImage=r.passedImage)},setEraserImageId:function(e,t){var n=t.payload;e.eraser.open=!0,e.eraser.imageId=n},updateEraserImage:function(e){e.eraser.forceUpdate=!e.eraser.forceUpdate},closeEraser:function(e){e.eraser.open=!1,e.eraser.removeBgOpen=!1,e.eraser.passedImage=null},setEditingTextId:function(e,t){var n=t.payload;e.editingTextId=n},setVisibilityTextarea:function(e,t){var n=t.payload;e.visibilityTextarea=n},setActiveReplaceMode:function(e,t){var n=t.payload;e.activeReplaceMode=n},setActiveCropMode:function(e,t){var n=t.payload;e.activeCropMode=n},setIsDropperActive:function(e,t){var n=t.payload;e.isDropperActive=n},setCanvasLoading:function(e,t){var n=t.payload;e.isCanvasLoading=n},setTemplateCollageClicked:function(e,t){var n=t.payload;e.isTemplateCollageClicked=n},toggleIsTemplatesLoading:function(e,t){var n=t.payload;e.isTemplatesLoading=n},setDroppablePhotoCollageId:function(e,t){var n=t.payload;e.droppablePhotoCollageId=n},setSelectedCategory:function(e,t){var n=t.payload;e.selectedCategory=n},setHoverBorderApplicable:function(e,t){var n=t.payload;e.isHoverBorderApplicable=n},setErrorModal:function(e,t){var n=t.payload;e.error=Object(a.a)(Object(a.a)({},s.error),n)},setDroppablePhotoFromSidebar:function(e,t){var n=t.payload;e.droppablePhotoFromSidebar=n},setActiveEffectPage:function(e,t){var n=t.payload;e.activeEffectPage=n},setCurrentTemplateData:function(e,t){var n=t.payload;e.currentTemplateData=n},setEnableSnapping:function(e,t){var n=t.payload;e.snapEnabled=n},resetCurrentTemplateData:function(e){e.currentTemplateData=s.currentTemplateData},setNewCanvasEnabled:function(e,t){var n=t.payload;e.newCanvasEnabled=n},setUserPaidItems:function(e,t){var n=t.payload;e.userPaidItems=n},storeUploadedFilesWithDrag:function(e,t){var n=t.payload;e.uploadedFilesWithDrag=n},addUploadImage:function(e,t){var n=t.payload;e.uploadedImages=[n].concat(Object(r.a)(e.uploadedImages))},resetUploadImagesStatus:function(e,t){var n=t.payload;e.uploadedImages=e.uploadedImages.map((function(e){return n&&e.status===c.vb&&e.id===n||e.status===c.vb?Object(a.a)(Object(a.a)({},e),{},{status:c.He}):e}))},updateUploadImage:function(e,t){var n=t.payload;e.uploadedImages=e.uploadedImages.map((function(e){return e.id===n.id?Object(a.a)(Object(a.a)({},e),{},{status:n.status,url:n.originalUrl}):e}))},updateAllUploadImages:function(e,t){var n=t.payload;e.uploadedImages=[].concat(Object(r.a)(e.uploadedImages.filter((function(e){return e.status===c.od}))),Object(r.a)(n))},storeUploadedFonts:function(e,t){var n=t.payload;e.uploadedFonts=n},setOneTimePaymentResult:function(e,t){var n=t.payload;e.oneTimePaymentResult=n}},extraReducers:function(e){e.addCase(o.a.fulfilled,(function(e,t){var n=t.payload;e.ratioCards.length||(e.ratioCards=n)}))}});t.a=u},,function(e,t,n){"use strict";n.d(t,"o",(function(){return a})),n.d(t,"v",(function(){return i})),n.d(t,"w",(function(){return c})),n.d(t,"n",(function(){return o})),n.d(t,"t",(function(){return s})),n.d(t,"u",(function(){return u})),n.d(t,"s",(function(){return l})),n.d(t,"a",(function(){return b})),n.d(t,"p",(function(){return f})),n.d(t,"g",(function(){return h})),n.d(t,"j",(function(){return p})),n.d(t,"f",(function(){return g})),n.d(t,"i",(function(){return O})),n.d(t,"h",(function(){return v})),n.d(t,"e",(function(){return j})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return y})),n.d(t,"b",(function(){return x})),n.d(t,"q",(function(){return w})),n.d(t,"l",(function(){return A})),n.d(t,"r",(function(){return E})),n.d(t,"m",(function(){return k})),n.d(t,"k",(function(){return C}));var r=n(20),a=function(e){return e.meta.isPremium},i=function(e){return!!e.meta.templateId},c=function(e){return e.meta.type===r.a.TEXT},o=function(e){return e.meta.type===r.a.PHOTO},s=function(e){return e.meta.type===r.a.STICKER},u=function(e){return e.meta.type===r.a.SVG_STICKER},l=function(e){return s(e)||u(e)},d=function(e){return e.meta.type===r.a.ICON},b=function(e){return u(e)||d(e)},f=function(e){return e.meta.type===r.a.SHAPE},h=function(e){return e.meta.type===r.a.COLLAGE},p=function(e){return e.meta.type===r.a.CROP_GROUP},g=function(e){return e.meta.type===r.a.COLLAGE_CELL},O=function(e){return e.meta.type===r.a.COLLAGE_CELL_PLACEHOLDER},v=function(e){return e.meta.type===r.a.COLLAGE_CELL_PLACEHOLDER_IMAGE},j=function(e){return e.meta.type===r.a.COLLAGE_CELL_IMAGE},m=function(e){return e.meta.type===r.a.BACKGROUND_COLOR},y=function(e){return e.meta.type===r.a.BACKGROUND_IMAGE},x=function(e){return y(e)||m(e)},w=function(e){return o(e)||s(e)},A=function(e){return h(e)||g(e)||x(e)},E=function(e){return d(e)||f(e)||function(e){return e.meta.type===r.a.ORGANIC_SHAPE}(e)||function(e){return e.meta.type===r.a.ABSTRACT_SHAPE}(e)||function(e){return e.meta.type===r.a.DECORATIVE_SHAPE}(e)},k=function(e){return h(e)||g(e)||j(e)||O(e)||v(e)},C=function(e){return function(e){return e.meta.type===r.a.GROUP}(e)||h(e)||p(e)||function(e){return e.meta.type===r.a.COLLAGE_CELL_PLACEHOLDER_IMAGE&&!e.visible}(e)||function(e){return g(e)||O(e)}(e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r,a;n(39),n(1);!function(e){e.TEXT="TEXT",e.ICON="ICON",e.SHAPE="SHAPE",e.PHOTO="PHOTO",e.GROUP="GROUP",e.STICKER="STICKER",e.COLLAGE="COLLAGE",e.CROP_GROUP="CROP_GROUP",e.SVG_STICKER="SVG_STICKER",e.COLLAGE_CELL="COLLAGE_CELL",e.ORGANIC_SHAPE="ORGANIC_SHAPE",e.ABSTRACT_SHAPE="ABSTRACT_SHAPE",e.DECORATIVE_SHAPE="DECORATIVE_SHAPE",e.BACKGROUND_COLOR="BACKGROUND_COLOR",e.BACKGROUND_IMAGE="BACKGROUND_IMAGE",e.COLLAGE_CELL_IMAGE="COLLAGE_CELL_IMAGE",e.COLLAGE_CELL_PLACEHOLDER="COLLAGE_CELL_PLACEHOLDER",e.COLLAGE_CELL_PLACEHOLDER_IMAGE="COLLAGE_CELL_PLACEHOLDER_IMAGE"}(r||(r={})),function(e){e.PHOTO="photo",e.TEXT="font",e.ICON="",e.SHAPE="",e.GROUP="",e.STICKER="sticker",e.SVG_STICKER="sticker",e.COLLAGE="",e.CROP_GROUP="",e.COLLAGE_CELL="",e.BACKGROUND_COLOR="",e.BACKGROUND_IMAGE="",e.COLLAGE_CELL_IMAGE="template-collage",e.COLLAGE_CELL_PLACEHOLDER="",e.COLLAGE_CELL_PLACEHOLDER_IMAGE="",e.ORGANIC_SHAPE="",e.ABSTRACT_SHAPE="",e.DECORATIVE_SHAPE=""}(a||(a={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return N}));var r=n(4),a=n(14),i=n(84),c=n(15),o=n(2),s=n(75),u=n(117),l=n.n(u),d=n(20),b=n(30),f=n(165),h=n(132),p=n(19),g=n(78),O=n(311),v=function(e,t){var n=Object(f.a)(e),r=t.map((function(t){return Object(g.a)(e,t)})).map((function(e,n){return Object(p.j)(e)?e.id:t[n]})),a=Object(O.a)({root:n,layers:e,ids:r});return Object(h.a)(e,a).map((function(e,t){return Object(p.j)(e)?e.id:a[t]}))},j=n(1);function m(e,t){var n=e.x,r=e.y,a=e.id,i=e.width,c=e.height,o=e.rotation,s=e.scaleX,u=void 0===s?1:s,l=e.scaleY,d=void 0===l?1:l,b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,f=Object(g.a)(t,b),h=i/(u*f.scaleX),p=c/(d*f.scaleY),O={id:a,rotation:o,x:n/f.scaleX,y:r/f.scaleY,scaleX:u/f.scaleX,scaleY:d/f.scaleY,width:h,height:p};return f.id===j.z?O:m(O,t,f.id)}var y=function(e,t){return m(e,t)},x=n(329),w=n(73),A=n(85),E=n(31),k=n(6),C=n(9),S=n(312);j.vh.restoreState&&window.addEventListener("beforeunload",(function(){var e=JSON.stringify(Object(k.b)(C.cc));Object(S.e)(e)}));var T=function(){var e=Object(S.b)(),t=Object(S.a)();return null===e||t&&JSON.parse(t)||!j.vh.restoreState?{}:JSON.parse(e)},_=n(41),I=n.n(_),R=n(283),L=n.n(R),P=n(215),G=function(e,t,n){e.selectedLayerIds.forEach((function(r){var a,i=e.layers.find((function(e){return e.id===r})),c=null===i||void 0===i||null===(a=i.paths)||void 0===a?void 0:a.filter((function(e){return e.id===n}))[0];c?(i.colorRGB1=void 0,c.fill=I()(t.colorRGB1).toHex8String(),L()(t.colorTransparent)||(i.colorTransparent=t.colorTransparent)):Object(P.a)(e.layers,r,t)}))},M=["id","type","dependencies"],B=Object(o.a)({layers:[],selectedLayerIds:[],hoveredLayerIds:[],clipBoard:{ids:[],elements:[]},editingTextId:"",dragSelectionInProgress:!1,dragInProgress:!1,artBoardSizes:{width:1080,height:1080,initialWidth:1080,initialHeight:1080},measurement:j.Ud.pixel,zoomValue:1,cssSizes:{width:1e3,height:1e3},setupStage:!1},T()),D=Math.abs,N=Object(s.c)({name:"layers",initialState:B,reducers:{addLayers:function(e,t){var n=t.payload;Object(E.b)(e,n.layers,n.over)},addAndSelectLayers:function(e,t){Object(E.a)(e,t)},addAndSelectLayersWithoutHistory:function(e,t){Object(E.a)(e,t)},replaceExistingPhoto:function(e,t){var n=e.layers,r=e.selectedLayerIds,a=Object(c.a)(r,1)[0],i=Object(E.g)(n,a),s=n.find((function(e){return e.id===a}));Object(p.j)(i)&&Object(E.r)({layers:n,id:i.id}),Object(E.j)(n,a,Object(o.a)(Object(o.a)({},t.payload),{},{meta:Object(o.a)(Object(o.a)({type:d.a.PHOTO},null===s||void 0===s?void 0:s.meta),t.payload.meta),maskUrl:""}))},removeLayers:function(e,t){Object(E.m)(e,t)},removeLayersWithoutHistory:function(e,t){Object(E.m)(e,t)},removeBackgroundLayer:function(e,t){var n=t.payload.id,r=Object(E.f)(e.layers,[n]),a=Object(c.a)(r,1)[0];Object(E.l)(e,a)},emptyBaseGroup:function(e){var t=Object(f.a)(e.layers);t&&(t.dependencies=[],e.layers=e.layers.filter((function(e){return e.id===j.z})),e.selectedLayerIds=[])},changePositionBy:function(e,t){var n=t.payload,r=e.layers,a=e.selectedLayerIds;r.forEach((function(e){if(e.transformable&&a.includes(e.id)){var t=Object(E.g)(r,e.id),i=Object(p.j)(t)?t:e;i.x+=n.x||0,i.y+=n.y||0}}))},patchSelectedLayers:function(e,t){var n=t.payload;Object(E.k)(e,n)},patchSelectedLayersWithoutHistory:function(e,t){var n=t.payload;Object(E.k)(e,n)},patchSelectedLayerPathsWithoutHistory:function(e,t){var n=t.payload;G(e,n,n.pathId)},patchLayer:function(e,t){var n=t.payload,r=n.id,a=n.patch;Object(E.j)(e.layers,r,a)},patchLayerWithoutHistory:function(e,t){var n=t.payload,r=n.id,a=n.patch;Object(E.j)(e.layers,r,a)},putLayer:function(e,t){var n=t.payload,r=e.layers.findIndex((function(e){return e.id===n.id}));e.layers[r]=n},setLayersFromHistory:function(e,t){Object.assign(e,t.payload)},ungroup:function(e,t){var n=t.payload;Object(E.r)({layers:e.layers,id:n})},deselect:function(e){e.editingTextId?Object(E.c)(e):e.selectedLayerIds=[]},setClipBoardElements:function(e){Object(E.n)(e)},paste:function(e){var t=e.layers,n=e.clipBoard,r=n.ids,c=n.elements,o=Object(f.a)(t),s=t.find((function(e){return e.id===j.eh}));e.selectedLayerIds=function e(n,r){var o,u,d=r.map((function(n){var r=c.find((function(e){return e.id===n})),a=(r.id,r.type),o=r.dependencies,s=Object(i.a)(r,M),u=A.a.createLayer(a,l()(s)).toJSON();return o.length&&e(u,o.map((function(e){return e.layerId}))),t.push(u),Object(E.h)(u.id)}));return s?(o=n.dependencies).splice.apply(o,[n.dependencies.length-1,0].concat(Object(a.a)(d))):(u=n.dependencies).push.apply(u,Object(a.a)(d)),d.map((function(e){return e.layerId}))}(o,r),Object(E.n)(e)},selectLayers:function(e,t){Object(E.c)(e),t.payload?e.selectedLayerIds=t.payload:e.selectedLayerIds=e.layers.filter((function(e){return!Object(p.b)(e)&&e.selectable})).map((function(e){return e.id})),e.hoveredLayerIds=e.hoveredLayerIds.filter((function(t){return!e.selectedLayerIds.includes(t)}))},selectBackgroundLayer:function(e){var t=e.layers.find((function(e){return Object(p.b)(e)}));(null===t||void 0===t?void 0:t.id)&&(e.selectedLayerIds=[null===t||void 0===t?void 0:t.id])},mouseoverToLayers:function(e,t){e.hoveredLayerIds=[].concat(Object(a.a)(e.hoveredLayerIds),Object(a.a)(t.payload)).filter((function(t){return!e.selectedLayerIds.includes(t)}))},mouseoutFromLayers:function(e,t){e.hoveredLayerIds=e.hoveredLayerIds.filter((function(e){return!t.payload.includes(e)}))},toggleSelection:function(e,t){var n=t.payload,r=e.selectedLayerIds.indexOf(n);-1===r?e.selectedLayerIds.push(n):e.selectedLayerIds.splice(r,1)},batchUpdate:function(e,t){t.payload.forEach((function(t){Object.values(N.caseReducers).find((function(e){return e.name===t.type.replace("layers/","")}))(e,t)}))},applyEffect:function(e,t){var n=t.payload,r=n.layerId,a=n.effect;e.layers.find((function(e){return e.id===r})).effect=a},setEffectSetting:function(e,t){Object(E.o)(e.layers,t)},setEffectSettingWithoutHistory:function(e,t){Object(E.o)(e.layers,t)},setAdjustSetting:function(e,t){var n=t.payload,r=n.layerIds,a=n.settingName,i=n.value,c=n.isPremium;r.forEach((function(t){var n=e.layers.find((function(e){return e.id===t})),r=n.adjust.settings.find((function(e){return e.name===a}));r?(r.value=i,r.isPremium=c):n.adjust.settings.push({name:a,value:i,isPremium:c})}))},toggleAdjustGroups:function(e,t){var n=t.payload,a=n.layerIds,i=n.adjustGroupId,c=n.value;a.forEach((function(t){var n=e.layers.find((function(e){return e.id===t}));n.meta.adjustGroups?n.meta.adjustGroups[i]=c:n.meta.adjustGroups=Object(r.a)({},i,c)}))},setHslIndex:function(e,t){var n=t.payload,r=n.layerIds,a=n.value;r.forEach((function(t){e.layers.find((function(e){return e.id===t})).meta.hslIndex=a}))},resetEffect:function(e,t){var n=t.payload,r=n.layerId,a=n.url,i=e.layers.find((function(e){return e.id===r}));i.effect=void 0,a&&(i.url=a)},duplicate:function(e){var t=e.layers,n=e.selectedLayerIds,r=t.find((function(e){return e.id===n[0]})),a=t.some((function(e){return n.includes(e.id)&&Object(p.b)(e)}));if(!r||!a&&!Object(p.m)(r)){var i=v(t,n),c=Object(E.f)(t,i);e.selectedLayerIds=c.map((function(e){return Object(p.j)(e)?e.dependencies[0].layerId:e.id}))}},sendBackward:function(e){var t=Object(c.a)(e.selectedLayerIds,1)[0];Object(E.d)(t,e.layers,"backward")},sendForward:function(e){var t=Object(c.a)(e.selectedLayerIds,1)[0];Object(E.d)(t,e.layers,"forward")},sendBack:function(e){var t=Object(c.a)(e.selectedLayerIds,1)[0];Object(E.d)(t,e.layers,"back")},sendFront:function(e){var t=Object(c.a)(e.selectedLayerIds,1)[0];Object(E.d)(t,e.layers,"front")},flip:function(e,t){var n=e.layers,r=e.selectedLayerIds,a=t.payload.flipType,i=a===j.Cd.flipHorizontal,c=a===j.Cd.flipVertical;r.forEach((function(e){var t=n.find((function(t){return t.id===e})),r=n.filter(p.j).find((function(e){return e.dependencies.find((function(e){return e.layerId===t.id}))})),a=null===r||void 0===r?void 0:r.clip,o=Math.cos(Object(w.a)(t.rotation)),s=Math.sin(Object(w.a)(t.rotation));if(i){var u=t.x,l=t.width,d=t.scaleX;if(t.x+=o*l*d,t.y+=s*l*d,t.scaleX=-t.scaleX,a){var b=u-a.x;t.x=a.x-b+a.width}}else if(c){var f=t.y,h=t.height,g=t.scaleY;if(t.x-=s*h*g,t.y-=o*h*-g,t.scaleY=-t.scaleY,a){var O=f-a.y;t.y=a.y-O+a.height}}}))},reorder:function(e,t){var n=t.payload,r=n.previousLayerId,a=n.nextLayerId,i=n.isFromTop;if(r&&a){var c=e.layers,o=Object(E.g)(c,r),s=Object(E.g)(c,a),u=Object(p.i)(o)||Object(p.j)(o),l=Object(p.i)(s)||Object(p.j)(s),d=o&&(Object(p.m)(o)||Object(p.j)(o)),b=s&&(Object(p.m)(s)||Object(p.j)(s)),f=d&&Object(g.b)(c,r,u),h=b&&Object(g.b)(c,a,l),O=f?f.id:r,v=h?h.id:a,j=Object(E.g)(c,O);j.dependencies=j.dependencies.filter((function(e){return e.layerId!==O}));var m=Object(E.g)(c,v);m.dependencies=m.dependencies.reduce((function(e,t){return i&&e.push(t),t.layerId===v&&e.push(Object(E.h)(O)),!i&&e.push(t),e}),[])}},setEditingText:function(e,t){var n=t.payload;if(!n)return Object(E.c)(e);var r=Object(E.f)(e.layers,[n])[0];r&&(e.editingTextId=n,r.visible=!1)},confirmTextEdit:function(e,t){var n=t.payload,r=n.id,a=n.value,i=Object(E.f)(e.layers,[r])[0];i.isPlaceholder=!1,i.text=a},setDragInProgress:function(e,t){e.dragInProgress=t.payload},setSetupStage:function(e,t){e.setupStage=t.payload},setDragSelectionInProgress:function(e,t){e.dragSelectionInProgress=t.payload},restore:function(e){Object.assign(e,T())},setCropAttributes:function(e,t){var n=t.payload,r=Object(c.a)(e.selectedLayerIds,1)[0],a=e.layers,i=e.zoomValue,s=e.cropGroupCSSMetrics;if(r){var u=Object(E.g)(a,r),l=Object(E.f)(a,[r]),f=Object(c.a)(l,1)[0],h=u.dependencies.findIndex((function(e){return e.layerId===r})),p=n||s;if(p){var g={x:p.x/i,y:p.y/i,width:p.width/i,height:p.height/i},O=y(Object(o.a)(Object(o.a)({},g),{},{id:f.id,scaleX:1,scaleY:1,rotation:f.rotation}),a),v=Object(E.e)(a,[f],b.d.GROUP_LAYER,{rotation:f.rotation,selectable:!1,meta:{type:d.a.CROP_GROUP}});f.selectable=!0,v.clip={width:O.width,height:O.height,x:f.x+O.x-f.width*Number(f.scaleX<0)*D(f.scaleX),y:f.y+O.y-f.height*Number(f.scaleY<0)*D(f.scaleY)},u.dependencies.length>h?u.dependencies=u.dependencies.reduce((function(e,t,n){return n===h&&e.push(Object(E.h)(v.id)),e.push(t),e}),[]):u.dependencies=u.dependencies.reduce((function(e,t,n){return e.push(t),t.layerId!==j.eh&&n!==u.dependencies.length-1||e.push(Object(E.h)(v.id)),e}),[]),a.push(v),e.cropGroupCSSMetrics=void 0,f.zIndex=void 0}}},setActiveCropMode:function(e){var t=Object(c.a)(e.selectedLayerIds,1)[0],n=e.layers,r=Object(E.g)(n,t),a=Object(E.f)(n,[t]),i=Object(c.a)(a,1)[0];if(Object(p.j)(r)){var s=r.id,u=r.clip,l=i.width*D(i.scaleX),d=i.height*D(i.scaleY),b=Number(r.scaleX<0)*l-Number(i.scaleX<0)*l,f=Number(r.scaleY<0)*d-Number(i.scaleY<0)*d,h=i.x+b-Number(r.scaleX<0)*u.width,g=i.y+f-Number(r.scaleY<0)*u.height,O=Object(x.a)([Object(o.a)(Object(o.a)({},r),{},{clip:Object(o.a)(Object(o.a)({},u),{},{x:u.x-h,y:u.y-g})})],n),v=Object(c.a)(O,1)[0];e.cropGroupCSSMetrics=v.clip,Object(E.r)({layers:n,id:s})}i.zIndex=n.length},setupArtBoard:function(e,t){var n=e.cssSizes,r=e.artBoardSizes,a=r.width,i=r.height;Object(E.p)(e,Object(o.a)(Object(o.a)({width:a,height:i},t.payload),{},{cssWidth:n.width,cssHeight:n.height}))},setCanvasCSSSizes:function(e,t){e.cssSizes=t.payload;var n=e.artBoardSizes,r=e.cssSizes;Object(E.p)(e,{width:n.width,height:n.height,cssWidth:r.width,cssHeight:r.height})},setArtBoardSizes:function(e,t){var n=Object(o.a)(Object(o.a)({},e.artBoardSizes),t.payload),r=e.cssSizes;Object(E.p)(e,{width:n.width,height:n.height,cssWidth:r.width,cssHeight:r.height}),e.artBoardSizes=n},setArtBoardSizesWithoutHistory:function(e,t){var n=Object(o.a)(Object(o.a)({},e.artBoardSizes),t.payload),r=e.cssSizes;Object(E.p)(e,{width:n.width,height:n.height,cssWidth:r.width,cssHeight:r.height}),e.artBoardSizes=n},setMeasurement:function(e,t){e.measurement=t.payload},updateZoom:function(e,t){e.zoomValue=t.payload},reset:function(e){Object.assign(e,B)},takeHistorySnapshot:function(){}}})},,function(e,t,n){"use strict";n.d(t,"j",(function(){return c})),n.d(t,"r",(function(){return o})),n.d(t,"i",(function(){return s})),n.d(t,"l",(function(){return u})),n.d(t,"g",(function(){return l})),n.d(t,"t",(function(){return d})),n.d(t,"k",(function(){return b})),n.d(t,"o",(function(){return f})),n.d(t,"n",(function(){return h})),n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return g})),n.d(t,"f",(function(){return O})),n.d(t,"e",(function(){return v})),n.d(t,"h",(function(){return j})),n.d(t,"m",(function(){return m})),n.d(t,"a",(function(){return y})),n.d(t,"q",(function(){return r})),n.d(t,"s",(function(){return a})),n.d(t,"d",(function(){return x})),n.d(t,"p",(function(){return w}));var r,a,i="-?\\d*\\.?\\d+(e[+-]?\\d*)?",c=new RegExp("".concat(i),"g"),o=new RegExp("[MLHVCSQTAZ]( *".concat(i," *,?)*"),"gi"),s=new RegExp("".concat(i," *,?").concat(i),"g"),u=/[MLSQHVCTAZ]/gi,l="#000000",d="rgba(255, 255, 255, 0)",b=100,f=-100,h=100,p=60,g=140,O=60,v=140,j=0,m=50,y={x:0,y:0,width:9e3,height:9e3};!function(e){e.M="M",e.L="L",e.C="C",e.S="S",e.Q="Q",e.H="H",e.V="V",e.T="T",e.A="A",e.Z="Z"}(r||(r={})),function(e){e.m="m",e.l="l",e.c="c",e.s="s",e.q="q",e.h="h",e.v="v",e.t="t",e.a="a",e.z="z"}(a||(a={}));var x=["r","g","b"],w={simple_14:{movePoints:{moveX:-13,moveY:-13},path:"M0.5341720109675345,1.0130054825027726c-0.2761922770239871,0-0.5000000229196992-0.11315739247899026-0.5000000229196992-0.2528004498083482V0.2659008861859494C0.03417198804783524,0.12625782885659148,0.2579797339435474,0.013005505679212806,0.5341720109675345,0.013005505679212806  S1.0341720338872336,0.12616289815820309,1.0341720338872336,0.26580595548756103v0.4943041465084751C1.0341720338872336,0.899753159325394,0.8103642879915216,1.0130054825027726,0.5341720109675345,1.0130054825027726z"},simple_16:{movePoints:{moveX:-7,moveY:-9},path:"M0.9659123412383716,0.8170299442848754c-0.020357921122071354-0.055734497297731125-0.026891393482177974-0.1156254655803778-0.01912697705422518-0.1740049898685097c0.0059653443287930015-0.020026632927320338,0.010699744589739829-0.0406200573525837,0.01391913676718367-0.061685808026132924c0.00018937601043787308-0.0005667914979430284,0.0007575040417514923-0.003306283738000999,0.0005681280313136192-0.00406200573525837  c0.0030300161670059693-0.021254681172863565,0.00463971225572789-0.04298168859401299,0.00463971225572789-0.0650865570137911s-0.001609696088721921-0.04383187584092753-0.00463971225572789-0.0650865570137911c0.00018937601043787308-0.0007557219972573713-0.00037875202087574617-0.003495214237315342-0.0005681280313136192-0.00406200573525837c-0.003219392177443842-0.021065750673549224-0.007859104433171733-0.04165917509881259-0.01391913676718367-0.061685808026132924  c-0.007764416427952795-0.05837952428813192-0.001230944067846175-0.11836495782043577,0.01912697705422518-0.1740049898685097c0.006060032334011939-0.016531418690004997,0.025660449414331803-0.05195588731144427,0.025660449414331803-0.05195588731144427c0.021778241200355403-0.021727007421149424,0.021778241200355403-0.057057010792931524,0-0.07878401821408096l-0.04819619465643869-0.04808281207550024c-0.006817536375763431-0.006801497975316341-0.014960704824591973-0.01152476045817491-0.023577313299515196-0.013980856949261367  c-0.019032289049006244-0.005667914979430284-0.040431778228485905-0.000944652496571714-0.055487171058296814,0.013980856949261367c0,0-0.0355080019571012,0.01945984142937731-0.05198371486519616,0.025505617407436277C0.7542846495740485,0.07472201247882257,0.6916958781243314,0.08105118420585306,0.631000866778993,0.07179358973945027c-0.015244768840248783-0.004250936234572713-0.030773601696154375-0.007651685222230883-0.04649181056249784-0.010296712212631683  c-0.0034087681878817153-0.0010391177462288855-0.013351008735870052-0.003117353238686656-0.014297888788059416-0.002172700742114942c-0.020357921122071354-0.0027394922400579705-0.041189282270237396-0.004250936234572713-0.06230470743406024-0.004250936234572713s-0.04194678631198888,0.001416978744857571-0.06230470743406024,0.004250936234572713c-0.0009468800521893653-0.000944652496571714-0.010889120600177701,0.0011335829958860567-0.014297888788059416,0.002172700742114942c-0.015812896871562402,0.002645026990400799-0.031341729727467994,0.006140241227716141-0.04649181056249784,0.010296712212631683  c-0.06060032334011938,0.009257594466402798-0.12328378279505535,0.0029284227393723133-0.18123284198904452-0.018137327934176908c-0.016570400913313892-0.00604577597805897-0.05198371486519616-0.025505617407436277-0.05198371486519616-0.025505617407436277C0.13654010352570647,0.013225134952003996,0.1150459263410079,0.008596337718802596,0.09610832529722058,0.014169787448575711c-0.008616608474923224,0.002550561740743628-0.016759776923751767,0.0071793589739450265-0.023577313299515196,0.013980856949261367l-0.04829088266165763,0.04817727732515741  c-0.021778241200355403,0.021727007421149424-0.021778241200355403,0.057057010792931524,0,0.07878401821408096c0,0,0.01960041708031986,0.035424468621439276,0.025660449414331803,0.05195588731144427c0.020357921122071354,0.055734497297731125,0.026891393482177974,0.1156254655803778,0.01912697705422518,0.1740049898685097c-0.0059653443287930015,0.020026632927320338-0.010699744589739829,0.0406200573525837-0.01391913676718367,0.061685808026132924c-0.00018937601043787308,0.0005667914979430284-0.0007575040417514923,0.003306283738000999-0.0005681280313136192,0.00406200573525837  c-0.0030300161670059693,0.021254681172863565-0.00463971225572789,0.04298168859401299-0.00463971225572789,0.0650865570137911s0.001609696088721921,0.04383187584092753,0.00463971225572789,0.0650865570137911c-0.00018937601043787308,0.0007557219972573713,0.00037875202087574617,0.003495214237315342,0.0005681280313136192,0.00406200573525837c0.003219392177443842,0.021065750673549224,0.007859104433171733,0.04165917509881259,0.01391913676718367,0.061685808026132924  c0.007764416427952795,0.05837952428813192,0.001230944067846175,0.11836495782043577-0.01912697705422518,0.1740049898685097c-0.006060032334011939,0.016531418690004997-0.025660449414331803,0.05195588731144427-0.025660449414331803,0.05195588731144427c-0.021778241200355403,0.021727007421149424-0.021778241200355403,0.057057010792931524,0,0.07878401821408096l0.04819619465643869,0.04808281207550024c0.006817536375763431,0.006801497975316341,0.014960704824591973,0.01152476045817491,0.023577313299515196,0.013980856949261367  c0.019032289049006244,0.005667914979430284,0.040431778228485905,0.000944652496571714,0.055487171058296814-0.013980856949261367c0,0,0.0355080019571012-0.01945984142937731,0.05198371486519616-0.025505617407436277c0.05794905919398916-0.021065750673549224,0.12063251864892514-0.027300457150922535,0.18123284198904452-0.018137327934176908c0.015244768840248783,0.004250936234572713,0.030773601696154375,0.007651685222230883,0.04649181056249784,0.010296712212631683  c0.0034087681878817153,0.0010391177462288855,0.013351008735870052,0.003117353238686656,0.014297888788059416,0.002172700742114942c0.020357921122071354,0.0027394922400579705,0.041189282270237396,0.004250936234572713,0.06230470743406024,0.004250936234572713s0.04194678631198888-0.001416978744857571,0.06230470743406024-0.004250936234572713c0.0009468800521893653,0.000944652496571714,0.010889120600177701-0.0011335829958860567,0.014297888788059416-0.002172700742114942c0.015812896871562402-0.002645026990400799,0.031341729727467994-0.006140241227716141,0.04649181056249784-0.010296712212631683  c0.06060032334011938-0.009257594466402798,0.12328378279505535-0.0029284227393723133,0.18123284198904452,0.018137327934176908c0.016570400913313892,0.00604577597805897,0.05198371486519616,0.025505617407436277,0.05198371486519616,0.025505617407436277c0.01505539282981091,0.015019974695490252,0.03645488200929056,0.019648771928691654,0.055487171058296814,0.013980856949261367c0.008616608474923224-0.002550561740743628,0.016759776923751767-0.0071793589739450265,0.023577313299515196-0.013980856949261367l0.04819619465643869-0.04808281207550024  c0.021778241200355403-0.021727007421149424,0.021778241200355403-0.057057010792931524,0-0.07878401821408096C0.9915727906527034,0.8689858315963197,0.9719723735723835,0.8335613629748804,0.9659123412383716,0.8170299442848754L0.9659123412383716,0.8170299442848754z"},organic_1:{movePoints:{moveX:-10,moveY:-10},path:"m0 0.37780546985435276 0.13502309421406464-0.0110438185435973-0.05521530579863355 0.2333451982598784 0.12267974087000148-0.044353400279931086-0.08593235305179828 0.255432835347073 0.22698578783090137-0.044353400279931086-0.030717047253164736 0.09992874520900137 0.17177048203226783 0.0110438185435973-0.030717047253164736 0.12219450840173784 0.2515782704476989-0.0110438185435973 0.15339678812316623-0.11115068985814056 0.04909074116226634-0.03330958173633378-0.024498258545468807 0.12219450840173784h0.04909074116226634l0.04296617652589914-0.08888492666540407 0.024498258545468807-0.255432835347073-0.10430604696089989-0.02226576319273649 0.08593235305179828-0.3555397066616163-0.17798927073996376-0.05557534492907028s0.04296617652589914-0.17776985333080814 0.024498258545468807-0.15550409013807165-0.15933290461687596 0.09975061910345948-0.15933290461687596 0.09975061910345948l-0.030717047253164736-0.09992874520900137-0.1410534347791031 0.07784110812180677-0.030717047253164736-0.11115068985814056-0.12267974087000148 0.13323832694533513-0.06143409450632947-0.11097256375259866h-0.17177048203226783z"},organic_3:{movePoints:{moveX:-10,moveY:-8},path:"M0.591326238157756 1.0049810401551191c-0.20486744888525282-0.2109104861659367-0.39729584383635047-0.3748488306065371-0.4966198047954381-0.4335175926033998S0.007727291080308524 0.16152475613060294 0.020166345014463707 0.11455261440526668 0.0822673794281627-0.014295869220754513 0.26847624741218273 0.009097371322298327s0.26696848329895184 0.15224172416907403 0.26696848329895184 0.15224172416907403c0.03100339957831103 0.1405451038975476 0.07454008834785417-0.011696620271526419 0.07454008834785417-0.011696620271526419s0.11176301489324279-0.08206200253991551 0.23587084846356388-0.09375862281144193 0.155205468405709 0.03508986081457925 0.16142499537278662 0.1288484836260212c0.006219526967077592 0.09375862281144193 0.024878107868310368 0.3631522103350107-0.1055434879261652 0.5036973142325584S0.591326238157756 1.0049810401551191 0.591326238157756 1.0049810401551191z"},decorative_12:{movePoints:{moveX:-10,moveY:-10},path:"M0.46021765417170496 0.00977136916664341L0.18137847642079805 0.08329380707099915l0.45126964933494557 0.2419125376207834-0.3506650544135429 0.10682098720039299 0.2215235792019347 0.12930462304985404L0.009431680773881498 0.7132150815031567 0.6094316807738814 1.0097713923276936l0.2408706166868198-0.06346646575227613-0.4087061668681983-0.2170572102260206 0.4814993954050786-0.14856275839770464-0.24280532043530834-0.13091737330065925L1.0094316807738815 0.3197040203066824z"}}},,,,,,function(e,t,n){"use strict";t.a=function(e){return new Promise((function(t,n){var r=new Image;r.crossOrigin="";var a=0;r.onload=function(){t(r)},r.onerror=function(){if(a>0)return n(new Error("Could not load image at ".concat(e)));a++,r.src=e},r.src=e}))}},function(e,t,n){"use strict";var r,a,i,c;n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return c})),function(e){e.IMAGE_LAYER="IMAGE_LAYER",e.COLOR_LAYER="COLOR_LAYER",e.TEXT_LAYER="TEXT_LAYER",e.GROUP_LAYER="GROUP_LAYER",e.VECTOR_LAYER="VECTOR_LAYER"}(r||(r={})),function(e){e.READY="READY",e.UPDATE="UPDATE"}(a||(a={})),function(e){e.UNSENT="UNSENT",e.STATIC="STATIC",e.COLLAGE="COLLAGE"}(i||(i={})),function(e){e.unsplash="unsplash_photo",e.shutterstock="shutterstock_photo",e.photo="photo",e.textPresets="text_presets",e.fontPresets="font_preset",e.textHeading="heading",e.textSubHeading="sub_heading",e.textBody="body"}(c||(c={}))},function(e,t,n){"use strict";n.d(t,"r",(function(){return i})),n.d(t,"i",(function(){return c.a})),n.d(t,"b",(function(){return u})),n.d(t,"f",(function(){return l.a})),n.d(t,"j",(function(){return d.a})),n.d(t,"e",(function(){return p})),n.d(t,"l",(function(){return O})),n.d(t,"m",(function(){return j})),n.d(t,"p",(function(){return P})),n.d(t,"c",(function(){return G})),n.d(t,"q",(function(){return M})),n.d(t,"g",(function(){return f.a})),n.d(t,"a",(function(){return B})),n.d(t,"d",(function(){return D})),n.d(t,"k",(function(){return H})),n.d(t,"h",(function(){return w.a})),n.d(t,"n",(function(){return Y})),n.d(t,"s",(function(){return X})),n.d(t,"o",(function(){return U}));var r=n(14),a=n(116),i=function(e){var t=e.layers,n=e.id,i=e.removeGroup,c=void 0===i||i,o=t.find((function(e){return e.id===n}));if(o&&o.dependencies){var s=t.findIndex((function(e){return e.id===n})),u=t.find((function(e){return e.dependencies.find((function(e){return n===e.layerId}))})),l=o.dependencies,d=o.rotation;l.forEach((function(e){var n=e.layerId,r=t.find((function(e){return e.id===n}));if(r){r.draggable=!0,r.selectable=!0;var i=Object(a.a)(d||0,r.x*o.scaleX,r.y*o.scaleY);r.x=i.x+o.x,r.y=i.y+o.y,r.scaleX*=o.scaleX,r.scaleY*=o.scaleY,r.rotation+=o.rotation||0}})),u.dependencies=u.dependencies.reduce((function(e,t){return t.layerId===n?e.push.apply(e,Object(r.a)(l)):e.push(t),e}),[]),c&&t.splice(s,1)}},c=n(457),o=n(1),s=n(19),u=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=e.layers,i=a.find((function(e){return e.id===o.eh})),c=i||n;t.forEach((function(e){var t,n,i=e.layerId,o=e.layers,u=a.find((function(e){return e.id===i})),l=o.find((function(e){return Object(s.b)(e)}));if(l){if(a.push.apply(a,Object(r.a)(o)),u&&u.dependencies){var d;u.dependencies.unshift(Object(w.a)(l.id));var b=o.filter((function(e){return!Object(s.b)(e)}));(d=u.dependencies).push.apply(d,Object(r.a)(b.map((function(e){var t=e.id;return Object(w.a)(t)}))))}}else c?a.splice.apply(a,[a.length-1,0].concat(Object(r.a)(o))):a.push.apply(a,Object(r.a)(o)),u&&u.dependencies&&(c?(t=u.dependencies).splice.apply(t,[u.dependencies.length-1,0].concat(Object(r.a)(o.map((function(e){var t=e.id;return Object(w.a)(t)}))))):(n=u.dependencies).push.apply(n,Object(r.a)(o.map((function(e){var t=e.id;return Object(w.a)(t)})))))}))},l=n(132),d=n(215),b=n(85),f=n(78),h=function(e,t){return e.dependencies.find((function(e){return e.layerId===t}))},p=function(e,t,n,r){var i=b.a.createLayer(n,r).toJSON();return t.forEach((function(t){var n=Object(f.a)(e,t.id),r=h(n,t.id);i.dependencies.push(r),n.dependencies=n.dependencies.filter((function(e){return e!==r}));var c=Object(a.a)(-(i.rotation-n.rotation),t.x,t.y);t.x=c.x-i.x,t.y=c.y-i.y,t.rotation-=i.rotation-n.rotation,t.draggable=!1,t.selectable=!1})),i};function g(e,t){var n=t.dependencies.map((function(e){return e.layerId}));return Object(l.a)(e,n).reduce((function(t,n){return n.dependencies.length&&t.push.apply(t,Object(r.a)(g(e,n))),t}),n)}var O=function e(t,n){var a=n.id,i=Object(f.a)(t.layers,a);i.dependencies=i.dependencies.filter((function(e){return a!==e.layerId}));var c=[a].concat(Object(r.a)(g(t.layers,n)));t.layers=t.layers.filter((function(e){return!c.includes(e.id)})),i.dependencies.length||i.id===o.z||e(t,i)},v=function e(t,n,a){return Object(l.a)(t,n.dependencies.map((function(e){return e.layerId}))).reduce((function(n,i){return a(i)&&n.push(i),i.dependencies.length&&n.push.apply(n,Object(r.a)(e(t,i,a))),n}),[])};var j=function(e,t){var n=null===t||void 0===t?void 0:t.payload,r=e.selectedLayerIds,a=n?n.ids:r,i=X(e.layers,a),c=Object(l.a)(e.layers,i),o="";c.forEach((function(t){Object(s.b)(t)||(Object(s.e)(t)&&(o=function(e,t){var n=Object(f.a)(e.layers,t),r=v(e.layers,n,s.h);return r.length?(Object(d.a)(e.layers,r[0].id,{visible:!0,selectable:!0,interactable:!0}),r[0].id):""}(e,t.id)),O(e,t))})),e.selectedLayerIds=o?[o]:e.selectedLayerIds.filter((function(e){return!a.includes(e)}))},m=n(2),y=n(30),x=n(278),w=n(188),A=n(104),E=n(165),k=n(20),C=function(e,t){var n=!e.layers.length,r=t.x,a=t.y,i=t.scaleY,c=t.scaleX;if(n){var s=b.a.createLayer(y.d.GROUP_LAYER,{draggable:!1,selectable:!1,transformable:!1,id:o.z,x:r,y:a,scaleY:i,scaleX:c,dependencies:[],meta:{type:k.a.GROUP}});return A.a.setBaseGroup(s.renderable),s.toJSON()}var u=Object(E.a)(e.layers);return u.x=r,u.y=a,u.scaleX=c,u.scaleY=i,u},S=n(15),T=n(447),_=n(153),I=function(e,t,n){var r=n.width,a=n.height,i=Object(E.a)(e.layers),c=e.artBoardSizes,u=c.initialWidth,l=c.initialHeight,d=c.width,b=c.height,h=u/l>d/b,p=u/l>r/a,g=h?d/u:b/l,O=p?r/u:a/l,v=O/g,j=h?0:(d-u*g)/2,y=h?(b-l*g)/2:0,x=p?0:(r-u*O)/2,w=p?(a-l*O)/2:0;e.layers.forEach((function(t){if(t!==i){if(Object(s.c)(t))return t.width=r,void(t.height=a);if(Object(s.d)(t)){var n=Object(T.a)({width:r,height:a,nextWidth:t.width,nextHeight:t.height});Object.entries(n).forEach((function(e){var n=Object(S.a)(e,2),r=n[0],a=n[1];t[r]=a}))}else{if(Object(f.a)(e.layers,t.id).id===o.z){if(Object(s.w)(t)){var c=Object(_.b)(Object(m.a)(Object(m.a)({},t),{},{scaleX:v}));Object.entries(c).forEach((function(e){var n=Object(S.a)(e,2),r=n[0],a=n[1];t[r]=a}))}else t.scaleX*=v,t.scaleY*=v;t.x=(t.x-j)*v+x,t.y=(t.y-y)*v+w}}}}))},R=n(142),L=function(e){var t=e.zoom,n=e.width,r=e.height,a=e.cssWidth,i=e.cssHeight,c=a-o.u.right-o.u.left,s=i-o.u.top-o.u.bottom,u=n/r,l=n/c,d=r/s,b={x:0,y:0,width:n,height:r,scaleX:1,scaleY:1};if(l>=d){var f=1/l,h=f*n/u;b.scaleX=f,b.scaleY=h/r,b.x=o.u.left,b.y=o.u.top+(s-h)/2}else{var p=1/d,g=p*r*u;b.scaleX=g/n,b.scaleY=p,b.x=o.u.left+(c-g)/2,b.y=o.u.top}return Object(R.c)({toZoom:t}),b},P=function(e,t){var n=t.width,a=t.height,i=t.cssWidth,c=t.cssHeight,o=t.initialLayersAttributes,s=!e.layers.length,u=C(e,L({width:n,height:a,cssWidth:i,cssHeight:c,zoom:e.zoomValue})),l=[];if(null===o||void 0===o?void 0:o.length)l.push.apply(l,Object(r.a)(o.map((function(e){return b.a.createLayer(e.type,e.type===y.d.TEXT_LAYER?Object(m.a)(Object(m.a)({},e.data),{},{divideByScale:u.scaleX}):e.data).toJSON()}))));else if(s){var d=Object(x.a)({width:n,height:a});l.push(b.a.createLayer(d.type,d.data).toJSON())}s||I(e,u,{width:n,height:a}),l.length&&(u.dependencies=l.map((function(e){return Object(w.a)(e.id)})),e.layers=[u].concat(l))},G=function(e){var t=e.layers.find((function(t){return t.id===e.editingTextId}));t&&(t.visible=!0),e.editingTextId=""};var M=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=t.dependencies;return null===a||void 0===a||a.forEach((function(t){var a=n[t.layerId];if(a.id===o.eh)return r;a.type===y.d.VECTOR_LAYER&&0!==a.dependencies.length||r.push(n[t.layerId]),a.type!==y.d.GROUP_LAYER&&e(a,n,r)})),r};n(311);var B=function(e,t){var n,r=t.payload;if(r.length){u(e,r);var a=null===(n=r[0].layers)||void 0===n?void 0:n.map((function(e){return e.id}));e.selectedLayerIds=a.includes(o.eh)?e.selectedLayerIds:a,e.hoveredLayerIds=[]}},D=function(e,t,n){var r=Object(f.a)(t,e),a=Object(s.j)(r),i=a?Object(f.a)(t,r.id):r,c=a?r.id:e,u=i.dependencies.findIndex((function(e){return e.layerId===c})),l=i.dependencies.splice(u,1),d=Object(S.a)(l,1)[0];switch(n){case"backward":i.dependencies.splice(1===u?u:u-1,0,d);break;case"forward":i.dependencies.splice(u+1,0,d);break;case"back":i.dependencies.splice(1,0,d);break;case"front":var b=i.dependencies.find((function(e){return e.layerId===o.eh}))?1:0;i.dependencies.splice(i.dependencies.length-b,0,d)}},N=n(41),z=n.n(N),H=function(e,t){e.selectedLayerIds.forEach((function(n){var r=e.layers.find((function(e){return e.id===n}));if(r){var a,i=t.colorRGB1;i&&(null===r||void 0===r||null===(a=r.paths)||void 0===a||a.forEach((function(e){e.fill=z()(i).toHex8String()})))}Object(d.a)(e.layers,n,t)}))},Y=function(e){var t=e.layers,n=e.selectedLayerIds,r=Object(l.a)(t,n),a=[],i=[];r.forEach((function(e){var n=Object(f.a)(t,e.id),r=Object(s.j)(n),c=r?n:e;a.push(Object(m.a)(Object(m.a)({},c),{},{x:c.x+o.Gb,y:c.y+o.Gb})),i.push(c.id),r&&a.push(e),e.dependencies.forEach((function(e){a.push(Object(l.a)(t,[e.layerId])[0])}))})),e.clipBoard={elements:a,ids:i}},X=function(e,t){var n=t.reduce((function(t,n){var r=Object(f.a)(e,n).id;return r!==o.z&&(t[n]=r),t}),{});return t.filter((function(e){return!t.includes(n[e])}))},U=function(e,t){var n=t.payload,r=n.layerId,a=n.settingName,i=n.value,c=e.find((function(e){return e.id===r}));if(c.effect){var o=c.effect.settings.find((function(e){return e.name===a}));o?o.value=i:c.effect.settings.push({name:a,value:i})}}},,,function(e,t,n){"use strict";var r=n(40),a=n(42),i=n(3),c=n.n(i),o=n(562),s=n.n(o),u=n(563),l=n.n(u),d=n(1),b=n(564),f=Object({NODE_ENV:"production",PUBLIC_URL:"/create",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_UNSPLASH_KEY:"0B4xk-a2cAP3fMI2dSeBw5vM84BbxPmLGGvbVN_RQ8E",REACT_APP_ADYEN_KEY:"live_AWRY4KLIVNGCRDVAOUBDDX4OU4UE4VPH",REACT_APP_ZOOM:"1",REACT_APP_HINTS:"1",REACT_APP_UNDO_REDO:"1",REACT_APP_EDITOR_ONLY:"0",REACT_APP_BUGSNAG_ENV:"production",REACT_APP_API_URL:"https://api.picsart.com",REACT_APP_FONT_TOOLS:"typeFace size fontSettings letter line caps align",REACT_APP_CATEGORIES:"BACKGROUND UPLOADS PHOTOS STICKERS TEXT ELEMENTS TEMPLATES",REACT_APP_TOOLS:"blend font effects remove duplicate replace color gradient shadow outline adjust crop remover eraser texture text-styles",REACT_APP_BUGSNAG:"1",REACT_APP_BASE_PATH:"/",REACT_APP_AUTOSAVE:"0",REACT_APP_INFO_POPUP:"1",REACT_APP_SUBSCRIPTION:"1",REACT_APP_PREVIEW_MODE:"1",REACT_APP_RESTORE_STATE:"0",REACT_APP_AUTHENTICATION:"1",REACT_APP_IMAGE_EXTENSIONS:"jpeg jpg png",REACT_APP_CDN_130:"https://cdn130.picsart.com",REACT_APP_CDN_140:"https://cdn140.picsart.com",REACT_APP_AI_WEB:"https://aiweb.picsart.com/v2",REACT_APP_PA_STATIC:"https://pastatic.picsart.com",REACT_APP_UPLOAD_URL:"https://upload.picsart.com",REACT_APP_DEV_EFFRES:"https://dev-effres.picsart.com",REACT_APP_ALLOWED_MIME_TYPES:"image/jpeg image/png",REACT_APP_BUGSNAG_API_KEY:"02fb138278325575bce8a4784629009a",REACT_APP_HELP_WIDGET:"HINT SHORTCUT FEEDBACK HELP LANGUAGE"}),h=f.REACT_APP_BUGSNAG_API_KEY,p=f.REACT_APP_BUGSNAG_ENV,g=function(){function e(){Object(r.a)(this,e),this.bugsnagClient=null}return Object(a.a)(e,[{key:"init",value:function(){h&&d.vh.bugSnag&&(this.bugsnagClient=s.a.start({apiKey:h,plugins:[new l.a],appVersion:b.version,releaseStage:p,enabledReleaseStages:["production","preproduction","staging"]}))}},{key:"getErrorBoundary",value:function(){var e=this;return function(t){var n=t.children;if(e.bugsnagClient){var r,a=null===(r=e.bugsnagClient.getPlugin("react"))||void 0===r?void 0:r.createErrorBoundary(c.a);return c.a.createElement(a,{},n)}return n}}},{key:"trigger",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"log";d.Eh&&console[t](e)}},{key:"setUser",value:function(e){this.bugsnagClient&&this.bugsnagClient.setUser(String(e.id),e.email,e.name)}},{key:"leaveBreadcrumb",value:function(e,t,n){this.bugsnagClient&&this.bugsnagClient.leaveBreadcrumb(e,t,n)}}]),e}();t.a=new g},,,,,,,,,function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"f",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"g",(function(){return d})),n.d(t,"h",(function(){return b})),n.d(t,"c",(function(){return f})),n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return p}));var r=n(1),a=n(6),i=n(9),c=n(11),o=n(0),s=function(e){return Object(o.db)(e).id===r.x},u=function(e){return Object(o.db)(e)[r.Ed]===r.pg},l=function(e){return Object(o.db)(e).id.includes(r.zh)},d=function(e){return setTimeout((function(){var t;(null===e||void 0===e||null===(t=e.getChildren())||void 0===t?void 0:t.length)&&(null===e||void 0===e||e.forceUpdate())})),e},b=function(e){e.forceUpdate()},f=function(e){return Object(o.X)(e,r.pb)},h=function(e){return e},p=function(e){var t,n=e.isSelected,s=e.needToDraw,u=Object(a.b)(i.ad),l=(t=u,Object(o.R)(t,r.y));Object(o.Lb)(l,{stroke:n?Object(c.c)(c.b.paColor1):""}),s&&Object(o.k)(u)}},,function(e,t,n){"use strict";n.d(t,"t",(function(){return r.a})),n.d(t,"o",(function(){return a.a})),n.d(t,"a",(function(){return g})),n.d(t,"l",(function(){return O})),n.d(t,"r",(function(){return m})),n.d(t,"v",(function(){return C})),n.d(t,"d",(function(){return L})),n.d(t,"b",(function(){return H})),n.d(t,"g",(function(){return q})),n.d(t,"s",(function(){return Q})),n.d(t,"m",(function(){return ne})),n.d(t,"n",(function(){return re})),n.d(t,"e",(function(){return oe})),n.d(t,"c",(function(){return se})),n.d(t,"p",(function(){return de})),n.d(t,"h",(function(){return he})),n.d(t,"i",(function(){return Oe})),n.d(t,"q",(function(){return je})),n.d(t,"k",(function(){return we})),n.d(t,"u",(function(){return Ae})),n.d(t,"f",(function(){return j.b})),n.d(t,"j",(function(){return ke}));var r=n(318),a=n(319),i=n(7),c=n.n(i),o=n(2),s=n(10),u=n(12),l=n(6),d=n(306),b=n(50),f=n(520),h=n(1),p=n(0),g=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,a,i,s,g,v,j,m,y,x,w,A,E,k,C,S,T,_,I,R,L,P,G,M,B,D,N,z,H,Y,X,U,F,W;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.stage,r=t.baseGroup,a=t.layerArr,i=t.settings,s=t.sendAttrs,g=i.id,v=i.url,j=i.originalUrl,m=i.type,y=i.opacity,x=i.license,w=i.contrast,A=i.toolType,E=i.isPremium,k=i.saturation,C=i.brightness,S=i.highlights,T=i.clarity,_=i.shadows,I=i.temperature,R=i.hue,L=i.hsl,P=i.globalCompositeOperation,G=i.resources,M=Object(p.db)(r),B=M.width,D=M.height,N=Object(p.db)(n),z=N.scaleX,H=N.scaleY,Y={url:v,originalUrl:j,license:x,toolType:A,isPremium:E,isCropAble:!0,hasPatch:m===h.Je||m===h.Yf,isErasable:m===h.Je,isReplaceAble:m!==h.Yf,resizeWidth:B/z,resizeHeight:D/H},s&&(Y=Object(o.a)(Object(o.a)(Object(o.a)({},Y),i),{},{fromHistory:!0})),e.next=8,Object(d.b)({id:g,baseGroup:r,layerArr:a,image:Y});case 8:return(X=r&&Object(p.R)(r,(function(e){return Object(p.db)(e).id===g})))&&Object(p.l)(X,{pixelRatio:Object(b.a)(X)}),P&&O({baseGroup:r,settings:{id:g,modeName:{value:P}},valueKey:"value"}),U={id:g,type:m,isPremium:E,konva_tagName:"Image",is_visible:!i.bulk,resources:Object(o.a)(Object(o.a)({},G),{},{url:v})},Object(l.a)({type:u.a,payload:U}),Object(l.a)({type:u.l,id:g,settings:{toolType:A}}),F={id:g,type:m},W=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];F.name=e,F[e]="hsl"===e?{value:Object(f.a)(i.hsl)}:{value:t?100*i[e]:i[e]},q({baseGroup:r,layerArr:a,settings:F,valueKey:"value"})},k&&W("saturation"),S&&W("highlights"),T&&W("clarity"),_&&W("shadows"),I&&W("temperature"),R&&W("hue"),L&&W("hsl"),C&&W("brightness"),w&&W("contrast"),y&&W("opacity",!0),e.abrupt("return",X);case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(e){var t=e.baseGroup,n=e.settings,r=e.valueKey,a=Object(p.R)(t,(function(e){return Object(p.db)(e).id===n.id}));if(a){Object(p.rb)(a)&&Object(p.n)(a);var i="source-over"===n.modeName[r]?"normal":n.modeName[r];Object(p.Mb)(a,i),Object(l.a)({type:u.l,isPremium:n.isPremium,settings:{blendMode:i||"normal"}})}},v=n(323),j=n(158),m=Object(j.a)((function(e){var t,n,r=e.baseGroup,a=e.layersArr,i=e.settings,c=i.duplicateLayerId.includes(h.zh),o=i.duplicateLayerId.replace(h.zh,""),s=(null===(t=i.source)||void 0===t?void 0:t.activeLayer)||(c?a.find((function(e){return e.id===o})):a.find((function(e){return e.id===i.duplicateLayerId}))),u=i.source?0:void 0,l=(null===(n=i.source)||void 0===n?void 0:n.konvaElem)||Object(p.R)(r,(function(e){return Object(p.db)(e).id==="".concat(i.duplicateLayerId).concat(h.zh)}));l||(l=Object(p.R)(r,(function(e){return Object(p.db)(e).id===i.duplicateLayerId}))),l&&s&&!Object(p.db)(l).id.includes("overlay")&&Object(v.a)({baseGroup:r,layerArr:[s],konvaElems:[l],fromHistoryId:i.id,movePixels:u,duplicateType:i.duplicateType})})),y=n(4),x=n(29),w=n(160),A=n(521),E=n(282),k=n(16),C=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,a,i,s,d,f,g,O,v,j,m,C,S,T,_,I,R,L,P,G,M,B,D,N;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.stage,r=t.baseGroup,a=t.layerArr,i=t.settings,s=t.valueKey,i.type!==k.b.remover){e.next=28;break}return d=i.url[s],f=i.originalImageUrl[s],g=i.id,O=Object(p.M)(r,"#".concat(g)),e.next=6,Object(x.a)(d);case 6:if(v=e.sent,e.t0=p.Lb,e.t1=O,e.t2=o.a,e.t3=o.a,e.t4={},e.t5=f,!e.t5){e.next=18;break}return e.next=16,Object(x.a)(f);case 16:e.t6=e.sent,e.t5={originalImageUrl:e.t6};case 18:return e.t7=e.t5,e.t8=(0,e.t3)(e.t4,e.t7),e.t9={},e.t10={image:v},e.t11=(0,e.t2)(e.t8,e.t9,e.t10),(0,e.t0)(e.t1,e.t11),O&&Object(p.l)(O,{pixelRatio:Object(b.a)(O)}),Object(l.a)({type:u.l,id:g,resources:{url:d},settings:Object(o.a)(Object(o.a)({},i),{},{type:"",toolType:i.toolType[s]})}),Object(p.I)(r),e.abrupt("return");case 28:if(i.type!==k.b.eraser){e.next=73;break}if(j=i.id,m=i.url[s],C=i.additionalSettings,S=i.fromEditor,T=Object(p.M)(r,"#".concat(j)),m){e.next=34;break}return Object(p.G)(T),e.abrupt("return");case 34:return e.next=36,Object(x.a)(m);case 36:if(_=e.sent,T){e.next=42;break}return I=Object(p.s)(Object(o.a)({id:j,image:_},C)),Object(p.h)(r,I),Object(p.I)(r),e.abrupt("return");case 42:if(!S){e.next=69;break}if(L=i.maskUrl[s],P=i.originalImageUrl[s],G=i[h.mf][s],e.t12=p.Lb,e.t13=T,R={url:m},Object(y.a)(R,h.mf,G),e.t14=y.a,e.t15=R,e.t16=L,!e.t16){e.next=55;break}return e.next=54,Object(x.a)(L);case 54:e.t16=e.sent;case 55:if(e.t17=e.t16,(0,e.t14)(e.t15,"mask",e.t17),e.t18=y.a,e.t19=R,e.t20=P,!e.t20){e.next=64;break}return e.next=63,Object(x.a)(P);case 63:e.t20=e.sent;case 64:e.t21=e.t20,(0,e.t18)(e.t19,"originalImage",e.t21),e.t22=R,(0,e.t12)(e.t13,e.t22),Object(l.a)({type:u.l,resources:{url:m}});case 69:return Object(p.Lb)(T,{image:_}),T&&Object(p.l)(T,{pixelRatio:Object(b.a)(T)}),Object(p.I)(r),e.abrupt("return");case 73:if(i.type!==k.b.grid_cell){e.next=86;break}if(M=Object(o.a)(Object(o.a)({},i),{},{data_url:"",id:i.id,fromHistory:!0,url:i.url[s].src||i.url[s],isPremium:i.isPremium[s]}),!n||!M.url.includes("data:image/")&&M.url){e.next=79;break}return e.next=78,Object(w.a)({stage:n,baseGroup:r,layerArr:a,fromHistory:!0,settings:M,valueKey:s,isReplace:!1});case 78:return e.abrupt("return");case 79:return B=i.id,D=i[h.mf][s],N=Object(p.M)(r,"#".concat(B)),Object(p.Lb)(N,Object(y.a)({},h.mf,D)),Object(p.I)(r),e.next=85,Object(E.a)({elem:M,valueKey:s,props:i.props,fromHistoryId:i.id,forceTemplateCollageReplace:i.forceTemplateCollageReplace});case 85:return e.abrupt("return");case 86:return e.next=88,Object(A.a)(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)({data_url:"",id:i.id,url:i.url[s],isPremium:i.isPremium[s]},i.x&&{x:i.x[s]}),i.y&&{y:i.y[s]}),i.zoom&&{zoom:i.zoom[s]}),i.width&&{width:i.width[s]}),i.height&&{height:i.height[s]}),i.ratio&&{ratio:i.ratio[s]}),i.rotation&&{rotation:i.rotation[s]}),i.toolType&&{toolType:i.toolType[s]}),i.contrast&&{contrast:i.contrast[s]}),i.brightness&&{brightness:i.brightness[s]}),i.highlights&&{highlights:i.highlights[s]}),i.hue&&{highlights:i.hue[s]}),i.clarity&&{clarity:i.clarity[s]}),i.shadows&&{shadows:i.shadows[s]}),i.temperature&&{temperature:i.temperature[s]}),i.saturation&&{saturation:i.saturation[s]}),i.hsl[s]),i.is_placeholder_active&&{is_placeholder_active:i.is_placeholder_active[s]}),i[h.mf]&&Object(y.a)({},h.mf,i[h.mf][s])),i.props,i.forceTemplateCollageReplace,i.id);case 88:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=n(130),T=n.n(S),_=n(307),I=n(310),R=n(211),L=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,a,i,s,d,b,f,g,v,j,m,y,x,w,A,E,k,C,S,L,P;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.baseGroup,r=t.layerArr,a=t.settings,i=t.sendAttrs,e.next=3,Object(R.a)(h.gg.packages);case 3:return s=e.sent,d=a.id,b=a.childId,f=a.url,g=a.elementType,v=a.element||T()(s.map((function(e){return e.items}))).find((function(e){return e.url===f}))||{url:f},e.next=8,Object(_.a)(v.url);case 8:if(j=e.sent,m=j.svgDoc,y=j.svgWidth,x=j.svgHeight,w=a.colorRGB1?Object(o.a)({},a.colorRGB1):Object(o.a)({},v.rgb),A=i?{positionX:a.x,positionY:a.y,scaleX:a.scaleX,scaleY:a.scaleY,rotation:a.rotation,childrenAttrs:a.childrenAttrs,fromHistory:!0}:{},E=Object(I.a)({baseGroup:n,settings:Object(o.a)(Object(o.a)({},A),{},{id:d,childId:b,shapeType:g,svgDoc:m,svgWidth:y,svgHeight:x,colorRGB1:w,stroke:v.stroke}),fireClick:!1}),k=E.childrenAttrs,C=E.ratio,S={type:h.Af,elementType:g,id:d,konva_tagName:"Group",is_visible:!a.bulk,isPremium:a.isPremium,resources:{url:v.url,ratio:C,viewbox:v.viewbox},defaultSettings:{colorRGB1:w,childrenAttrs:k,childId:b,stroke:v.stroke}},Object(l.a)({type:u.a,payload:S}),L=Object(p.L)(n,"#".concat(d))){e.next=20;break}return e.abrupt("return");case 20:return P={id:b,originalId:d,type:a.type},a.saturation&&(P.saturation={value:a.saturation},P.name="saturation",q({baseGroup:n,layerArr:r,settings:P,valueKey:"value"})),a.brightness&&(P.brightness={value:a.brightness},P.name="brightness",q({baseGroup:n,layerArr:r,settings:P,valueKey:"value"})),a.highlights&&(P.highlights={value:a.highlights},P.name="highlights",q({baseGroup:n,layerArr:r,settings:P,valueKey:"value"})),a.clarity&&(P.name="clarity",P.clarity={value:a.clarity},q({baseGroup:n,layerArr:r,settings:P,valueKey:"value"})),a.shadows&&(P.name="shadows",P.shadows={value:a.shadows},q({baseGroup:n,layerArr:r,settings:P,valueKey:"value"})),a.temperature&&(P.name="temperature",P.temperature={value:a.temperature},q({baseGroup:n,layerArr:r,settings:P,valueKey:"value"})),a.hue&&(P.name="hue",P.hue={value:a.hue},q({baseGroup:n,layerArr:r,settings:P,valueKey:"value"})),a.contrast&&(P.contrast={value:a.contrast},P.name="contrast",q({baseGroup:n,layerArr:r,settings:P,valueKey:"value"})),a.opacity&&100!==a.opacity&&(P.opacity={value:a.opacity},P.name="opacity",q({baseGroup:n,layerArr:r,settings:P,valueKey:"value"})),g!==h.rc.ICONS&&a.corner_radius&&(P.corner_radius={value:a.corner_radius},P.name="corner_radius",q({baseGroup:n,layerArr:r,settings:P,valueKey:"value"})),a.globalCompositeOperation&&O({baseGroup:n,settings:{id:b,modeName:{value:a.globalCompositeOperation}},valueKey:"value"}),g!==h.rc.ICONS&&("sizeOutline"in a||"opacityOutline"in a)&&(P.id=b||d,P.originalId=d,P.type="outline",P.color=a.outlineColor,"sizeOutline"in a&&(P.sizeOutline={value:a.sizeOutline},P.outlineTransparent={value:a.outlineTransparent},P.name="sizeOutline",q({baseGroup:n,layerArr:r,settings:P,valueKey:"value"})),g!==h.rc.ICONS&&"opacityOutline"in a&&(P.opacityOutline={value:a.opacityOutline},P.name="opacityOutline",q({baseGroup:n,layerArr:r,settings:P,valueKey:"value"})),Object(l.a)({type:u.l,id:d,settings:{outlineColor:a.outlineColor}})),e.abrupt("return",L);case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=n(27),G=n(9),M=n(320),B=n(140),D=n(261),N=n(133),z=function(e,t){return new Promise((function(n){Object(N.e)({data:t.grid,baseGroup:e,settings:t,onCellImagesLoaded:function(e,r){var a={grid:t.grid,type:h.Bc,id:e.id(),konva_tagName:e.className,isPremium:t.grid.is_premium,resources:{gridData:e.getAttr("gridData"),url:Object(N.h)(e)},cellsLayers:r};Object(P.b)((function(){Object(l.a)({type:u.a,payload:a}),Object(l.a)({type:u.j,id:e.id()})})),n(e)}})}))},H=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,a,i,o,s,d,b,f,p,O,v,j,m,y,x,w,A;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.stage,r=t.baseGroup,a=t.layerArr,i=t.settings,o=t.valueKey,s=t.sendAttrs,d=k.b.photo,b=k.b.sticker,f=k.b.shape,p=k.b.text,O=k.b.text_group,v=k.b.overlay,j=k.b.grid_cell,m=k.b.free_grid,e.t0=i.type,e.next=e.t0===m?5:e.t0===d||e.t0===b||e.t0===h.og?9:e.t0===f?13:e.t0===O||e.t0===p?17:e.t0===v?22:e.t0===j?25:27;break;case 5:return e.next=7,z(r,i);case 7:return y=e.sent,e.abrupt("break",28);case 9:return e.next=11,g({stage:n,baseGroup:r,layerArr:a,settings:i,sendAttrs:s});case 11:return y=e.sent,e.abrupt("break",28);case 13:return e.next=15,L({stage:n,baseGroup:r,layerArr:a,settings:i,sendAttrs:s});case 15:return y=e.sent,e.abrupt("break",28);case 17:return Object(l.a)({type:u.q,selectedTextId:0}),e.next=20,oe({stage:n,baseGroup:r,settings:i,sendAttrs:s});case 20:return y=e.sent,e.abrupt("break",28);case 22:return e.next=24,de({baseGroup:r,stage:n,layerArr:a,valueKey:o,settings:i,sendAttrs:s});case 24:return e.abrupt("break",28);case 25:return se({baseGroup:r,settings:i}),e.abrupt("break",28);case 27:return e.abrupt("break",28);case 28:return void 0!==(x=Object(D.a)(i))&&(w=Object(l.b)((function(e){return Object(G.ac)(e)})),A=Object(M.a)(w,0,+x),Object(l.a)({type:u.s,layers:A}),Object(B.c)(r,!1)),e.abrupt("return",y);case 31:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=n(47),X=n(51),U=n(63),F=n(68),W=n(156),V=n(327),K=n(554),q=function(e){var t,n=e.baseGroup,r=e.layerArr,a=e.settings,i=e.valueKey,c=a.name,s=a.type,d=a.id,b=a.originalId;c.includes("hsl")?t=a.hsl[i]:t=a[c][i];var f=r.find((function(e){return e.id===d})),g={},O=Object(o.a)({},null===f||void 0===f?void 0:f.settings.hsl);c.includes("hsl")?(g="hsl_index"===c?{hsl:Object(o.a)(Object(o.a)({},null===f||void 0===f?void 0:f.settings.hsl),{},Object(y.a)({},c,t))}:Object(y.a)({},c,t),O=Object(o.a)(Object(o.a)({},null===f||void 0===f?void 0:f.settings.hsl),g.hsl)):g=Object(y.a)({},c,t);var v="oldValue"===i?"undo":"redo";switch(f&&U.a.trigerSettingsAction(f,v,"adjust"),a.type){case h.pg:case h.Cc:var j=Object(p.R)(n,"#".concat(d));if(!j)break;Object(p.l)(j);var m=!1;if(s===h.Cc){var x=r.filter((function(e){return e.type===h.Bc}));m=Object(V.a)(x)||Object(W.a)(O)}else if(s===h.pg){m=r.filter((function(e){return e.type===h.pg})).some((function(e){return Object(W.a)(e.settings.hsl)}))||Object(W.a)(O)}var w=m?[X.a.IEAdjust,X.a.IEHSL]:[X.a.IEAdjust];Object(p.Lb)(j,{filters:w}),Object(Y.g)(j),c in Y.d&&Y.d[c]?Y.d[c](t,j):Object(Y.h)(c,j,t,f);break;case h.Bc:Object(Y.f)(n,"#".concat(d),t,Y.d[c],c);break;case h.Yf:Object(Y.f)(n,"#".concat(d),t,Y.d[c],c,{cacheRatio:!0,activeLayer:f,drawHitFromCache:!0});break;case"lut-filter-image":Object(Y.f)(n,"#".concat(d,"|image-lut-filter"),t,Y.d[c],c);break;case h.rc.SIMPLE_SHAPES:case h.rc.ORGANIC_SHAPES:case h.rc.ICONS:case h.rc.SVG_STICKERS:case"shape":Object(Y.f)(n,"#".concat(d.replace(h.Qh,"")),t,Y.d[c],c,{cacheRatio:!0});break;case"editor":case h.Je:case h.og:Object(Y.f)(n,"#".concat(d),t,Y.d[c],c,{cacheRatio:!["zoom","rotate"].includes(c),drawHitFromCache:!0});break;case"overlay":Object(Y.f)(n,"#".concat(d),t,Y.d[c],c,{activeLayer:f});break;case"outline":var A=Object(p.R)(n,"#".concat(d)),E=a.color;if(!A)return;if("sizeOutline"===c){var C=a.outlineTransparent[i];Object(p.Lb)(A,{strokeWidth:t/h.Be}),Object(l.a)({type:u.l,id:d,settings:Object(o.a)(Object(o.a)({},null===f||void 0===f?void 0:f.settings),{},{outlineTransparent:C})});var S=E&&Object(F.a)(E,Number(!C));Object(p.db)(A).stroke&&Object(p.Lb)(A,{stroke:S})}if("opacityOutline"===c){var T=Object(F.a)(E,t/100);A.stroke(T)}break;case"shadow":var _,I=Object(p.W)(n,"#".concat(d)),R=a.shadowTransparent[i],L=a.color,P=Object(F.a)(L,Number(!R));Object(p.Lb)(I,{shadowColor:P});var G=Object(p.db)(I).originalScale;switch(c){case"x_offset":Object(p.Lb)(I,{shadowOffsetX:t*G});break;case"y_offset":Object(p.Lb)(I,{shadowOffsetY:t*G});break;case"opacity":Object(p.Lb)(I,{shadowOpacity:t/100});break;case"blur_depth":Object(p.Lb)(I,{shadowBlur:Object(K.a)(t)*G})}Object(l.a)({type:u.l,id:d,settings:(_={},Object(y.a)(_,c,t),Object(y.a)(_,"shadowTransparent",R),_)});break;case k.b.text_color_opacity:var M=Object(p.W)(n,"#".concat(d));if(!M)return;Object(p.Lb)(M,{opacity:t/100})}Object(l.a)({type:u.l,id:b||d,settings:g})},J=n(192),Q=function(e){var t=e.baseGroup,n=e.settings;if(t){var r=n.children.map((function(e){return e.id}));Object(J.a)({ids:r,baseGroup:t,type:n.children[0].type})}},Z=n(461),$=n(462),ee=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e.replace("#","");3===n.length&&(n="".concat(n[0]).concat(n[0]).concat(n[1]).concat(n[1]).concat(n[2]).concat(n[2]));var r=parseInt(n.substring(0,2),16),a=parseInt(n.substring(2,4),16),i=parseInt(n.substring(4,6),16);return"rgba(".concat(r,",").concat(a,",").concat(i,",").concat(t,")")},te=n(221),ne=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,a,i,s,d,b,f,p,g,O,v,j,m,x,w,A;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.baseGroup,r=t.layerArr,a=t.settings,i=t.valueKey,s=a.id,d=a.type,b=a.colorRGB1[i],f={},e.t0=d,e.next=e.t0===h.Af?7:"text"===e.t0?14:"canvas"===e.t0?21:26;break;case 7:return g=a.colorType,O=a.transparent[i],v=a.selectedChildAttrs[i],j=a.childrenAttrs[i],p={},Object(y.a)(p,"".concat(g,"Transparent"),O),Object(y.a)(p,"colorRGB2",Object(o.a)({},a.colorRGB2[i])),Object(y.a)(p,"settingType",d),f=p,(null===j||void 0===j?void 0:j.length)&&v&&(f.childrenAttrs=j.map((function(e){if(e.id===v.id&&e[v.fieldName]){var t=ee(null===v||void 0===v?void 0:v.color);return Object(o.a)(Object(o.a)({},e),{},Object(y.a)({},v.fieldName,t))}return e}))),"outline"===a.colorType?f.outlineColor=b:f.colorRGB1=b,m=(null===v||void 0===v?void 0:v.color)?Object(te.a)(null===v||void 0===v?void 0:v.color):Object(o.a)({},b),Object(Z.a)({baseGroup:n,type:a.colorType,activeLayer:r.find((function(e){return e.id===s})),rgb:m,transparent:O,selectedChildAttrs:v}),e.abrupt("break",27);case 14:return x=a.colorType,w=a.transparent[i],f=Object(y.a)({},"".concat(x,"Transparent"),w),"color"===x&&(f=Object(o.a)(Object(o.a)({},f),{},{colorRGB1:b,colorRGB2:Object(o.a)({},a.colorRGB2[i]),settingType:x})),"outline"===x&&(f.outlineColor=b),"shadow"===x&&(f.shadowColor=b),Object($.a)({baseGroup:n,layerArr:r,type:x,colorRGB1:b,fromHistoryId:s,transparent:w}),e.abrupt("break",27);case 21:return e.next=23,he({baseGroup:n,layerArr:r,valueKey:i,settings:a});case 23:return A=e.sent,f={colorRGB1:b,colorRGB2:Object(o.a)({},a.colorRGB2[i]),settingType:null===A||void 0===A?void 0:A.settingType,isImage:null===A||void 0===A?void 0:A.isImage,url:null===A||void 0===A?void 0:A.url,transparent:null===A||void 0===A?void 0:A.transparent,isPremiumTexture:null===A||void 0===A?void 0:A.isPremium},e.abrupt("break",27);case 26:return e.abrupt("break",27);case 27:Object(l.a)({type:u.l,id:s,settings:f});case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(e){var t=e.baseGroup,n=e.settings,r=e.valueKey,a=n.id,i=n.type,c=Object(l.b)(G.m),o=Object(p.W)(t,"#".concat(a)),s=c.find((function(e){return e.id===a}));if(o){var d="oldValue"===r?"undo":"redo";switch(s&&U.a.trigerSettingsAction(s,d,"text"),i){case"font_family":var b=n.fontFamily[r],f=n.isPremium[r];Object(p.Lb)(o,{fontFamily:b,isPremium:f}),Object(l.a)({type:u.l,id:a,isPremium:f,settings:{font_family:b}});break;case"font_italic":case"font_bold":var h=n.fontStyle[r],g=n.settingFontStyle[r];o.fontStyle(h),Object(l.a)({type:u.l,id:a,settings:Object(y.a)({},i,g)});break;case"text_decoration":var O=n.textDecoration[r];o.textDecoration(O),Object(l.a)({type:u.l,id:a,settings:{font_decoration:O}});break;case"text_align":var v=n.textAlign[r];o.align(v),Object(l.a)({type:u.l,id:a,settings:{text_align:v}});break;case"line":var j=n.name,m=n[j][r];"line"===j&&o.lineHeight(m/20),"letter"===j&&o.letterSpacing(m/10),Object(l.a)({type:u.l,id:a,settings:Object(y.a)({},j,m)});break;case"font_size":var x=n.fontSize[r];o.fontSize(x),Object(l.a)({type:u.l,id:a,settings:{font_size:x}})}}},ae=n(41),ie=n.n(ae),ce=n(124),oe=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,a,i,s,d,b,f,g,O,v,j,m,y,x,w,A,E,C,S,T,_,I;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.baseGroup,r=t.settings,a=t.sendAttrs,i=r.id,s=r.groupId,d=r.type,b=r.textAttrs,f=r.textStyles,g=r.font,d!==k.b.text_group){e.next=10;break}return e.next=6,Object(ce.c)({textAttrs:b,id:i,baseGroup:n,fireClick:!1,groupId:s,fromHistory:!0});case 6:return O=e.sent,v={type:"text",id:i,konva_tagName:"Text",resources:{text:b.text},isPremium:b.isPremium,defaultSettings:{font_family:b.fontFamily,font_size:b.fontSize,text_align:b.align||"left",font_italic:b.fontStyle||"normal"}},Object(l.a)({type:u.a,payload:v}),e.abrupt("return",O);case 10:return a&&(g=Object(o.a)(Object(o.a)(Object(o.a)({},g),f),{},{x:r.x,y:r.y,fontSize:r.fontSize||g.font_size,scaleX:r.scaleX,scaleY:r.scaleY,width:r.width,height:r.height,rotation:r.rotation,isPlaceholder:r.isPlaceholder,fill:f?ie()(f.fill).toRgbString():r.fill,opacity:r.opacity||1,isPremium:g.isPremium,padding:g.padding||r.padding||0,bend:r.bend,data:r.data},f&&Object(o.a)(Object(o.a)({},f.shadowColor&&{shadowColor:ie()(f.shadowColor).toRgbString()}),f.stroke&&{stroke:ie()(f.stroke).toRgbString()}))),e.next=13,Object(ce.b)({id:i,font:g,baseGroup:n,fireClick:!1,fromHistory:a});case 13:return(j=e.sent)&&Object(p.Lb)(j,{groupId:s}),m={type:h.tg,id:i,isTextStyle:g.text_type===h.Hg,konva_tagName:"Text",is_visible:!r.bulk,resources:{text:g.text},isPremium:g.isPremium,defaultSettings:{font_family:g.font_family,font_size:g.font_size,font_bold:g.font_bold||(g.font_semiBold?g.font_semiBold:"normal"),font_semiBold:g.font_semiBold||"normal",text_align:g.align}},Object(l.a)({type:u.a,payload:m}),Object(l.a)({type:u.j,id:i}),(f||g.isTextStyle)&&(x=(y=f||g).fill,w=y.stroke,A=y.strokeWidth,E=y.strokeOpacity,C=y.shadowOpacity,S=y.shadowOffsetX,T=y.shadowOffsetY,_=y.shadowColor,I=y.shadowBlur,Object(l.a)({type:u.m,batchSettings:[{id:i,settings:Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)({colorRGB1:ie()(x).toRgb(),colorRGB2:{r:0,g:0,b:0}},A&&{sizeOutline:Math.round(10*A/2)}),E&&{opacityOutline:E}),C&&{opacity:100*C}),_&&void 0!==S&&{x_offset:50+S}),_&&void 0!==T&&{y_offset:50+T}),_&&{shadowTransparent:!1}),_&&{shadowColor:ie()(_).toRgb()}),I&&{blur_depth:h.vf}),w&&{outlineColor:ie()(w).toRgb()}),w&&{outlineTransparent:!1})}]})),e.abrupt("return",j);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(e){var t=e.baseGroup,n=e.settings;if(t){var r=Object(o.a)(Object(o.a)({},n),{},{type:h.pg,id:n.prevImageId,isPremium:n.isPremium,konva_tagName:"Image",is_placeholder_active:!0,resources:{url:n.url}}),a=Object(p.r)(Object(o.a)(Object(o.a)({},n),{},{type:h.pg}));n.children.forEach((function(e){var t=Object(p.s)(e);Object(p.h)(a,t)})),Object(p.h)(t,a),Object(p.I)(t),Object(P.b)((function(){Object(l.a)({type:u.a,payload:r}),Object(l.a)({type:u.j,id:n.prevImageId})})),Object(B.c)(t)}},ue=n(52),le=n(314),de=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,a,i,s,d,b,f,p,g,v,j,m,y,x,w,A;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.stage,a=t.baseGroup,i=t.layerArr,s=t.settings,d=t.valueKey,b=void 0===d?"newValue":d,f=t.sendAttrs,p=s.images[b],g=s.id,v=p.image1,j=p.image2,v){e.next=6;break}return Object(r.a)({baseGroup:a,settings:Object(o.a)(Object(o.a)({},s),{},{withoutCheckIsExist:!0}),layerArr:i,dispatch:l.a}),e.abrupt("return");case 6:return e.next=8,Object(le.a)({images:p,id:g,effectGroup:a,stage:n,layerArr:i,fireClick:!0,fromHistory:f,effectType:h.qc.overlay});case 8:v.globalCompositeOperation&&O({baseGroup:a,settings:{id:v.id,modeName:{value:v.globalCompositeOperation}},valueKey:"value"}),(null===j||void 0===j?void 0:j.globalCompositeOperation)&&O({baseGroup:a,settings:{id:j.id,modeName:{value:j.globalCompositeOperation}},valueKey:"value"}),m=i.find((function(e){return e.id==="".concat(g,"0")})),y="newValue"===b?Object(o.a)({},ue.a.generateOverlaySettings()):{zoom:v.zoom,rotate:v.rotation,opacity:v.opacity,hue:v.hue,saturation:v.saturation,contrast:v.contrast},Object(l.a)({type:u.n,activeEffect:v.name}),m?(Object(l.a)({type:u.l,settings:Object(o.a)(Object(o.a)({},y),{},{url:v.resource_url}),id:"".concat(g,"0")}),j||Object(l.a)({type:u.g,payload:{id:"".concat(g,"1")}})):(x={type:"overlay",id:"".concat(g,"0"),konva_tagName:"Image",name:"first-overlay-image",resources:{url:v.resource_url}},Object(l.a)({type:u.a,payload:x}),Object(l.a)({type:u.j,id:"".concat(g,"0")}),Object(l.a)({type:u.n,activeEffect:v.name})),w=i.find((function(e){return e.id==="".concat(g,"1")})),j&&("oldValue"===b&&(y={zoom:j.zoom,rotate:j.rotation,opacity:j.opacity,hue:j.hue,saturation:j.saturation,contrast:j.contrast}),w?Object(l.a)({type:u.l,settings:Object(o.a)(Object(o.a)({},y),{},{url:j.resource_url}),id:"".concat(g,"1")}):(A={type:"overlay",id:"".concat(g,"1"),konva_tagName:"Image",name:"second-overlay-image",resources:{url:j.resource_url}},Object(l.a)({type:u.a,payload:A}),Object(l.a)({type:u.j,id:"".concat(g,"1")})));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=n(321),fe=n(523),he=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,a,i,o,s,d,b,f,g,O,v,j,m,y,w,A,E,k;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.baseGroup,r=t.layerArr,a=t.settings,i=t.valueKey,o=a.id,s=a.url[i],d=a.colorType[i],b=a.x,f=a.y,g=a.width,O=a.height,v=a.colorRGB1[i],j=a.colorRGB2[i],m=a.transparent[i],y=a.isPremium[i],w=!0,!m){e.next=7;break}Object(fe.a)({baseGroup:n,layerArr:r}),e.next=20;break;case 7:if(!s){e.next=18;break}return(A=Object(p.R)(n,h.y))&&Object(p.G)(A),e.next=12,Object(x.a)(s);case 12:E=e.sent,k=Object(p.s)({image:E,is_settings:!0,id:o,x:b,y:f,width:g,height:O}),Object(p.h)(n,k),Object(p.Fb)(k),e.next=20;break;case 18:Object(be.a)({baseGroup:n,layerArr:r,settings:{colorRGB1:v,colorRGB2:j,id:o},type:d}),Object(l.a)({type:u.o,activeTexture:0});case 20:return e.abrupt("return",{settingType:d,isImage:w,url:s,transparent:m,isPremium:y});case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pe=n(59),ge=n(57),Oe=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,a,i,o,s,d,b,f,g,O,v,j,m,y,x,w,A,E,k,C;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.baseGroup,r=t.layerArr,a=t.settings,i=t.valueKey,o=a.id,s=a.url[i],d=a.colorType,b=(d=void 0===d?{}:d)[i],f=a.x,g=a.y,O=a.width,v=a.height,j=a.transparent[i],m=a.settingType[i],y=a.activeTexture[i],x=a.isPremium[i],!s){e.next=19;break}return(w=Object(p.R)(n,h.y))&&Object(p.G)(w),e.next=9,pe.h.getImageData(s,{});case 9:A=e.sent,(E=Object(p.s)({id:o,image:A,width:O[i],height:v[i],x:f[i],y:g[i],is_settings:!0})).attrs.layerUrl=s,Object(p.h)(n,E),Object(p.i)(E,"mousedown",ge.c),Object(p.Fb)(E),Object(p.I)(n),Object(l.a)({type:u.l,settings:{isImage:!0,transparent:j,settingType:m,url:s,width:O[i],height:v[i],x:f[i],y:g[i],isPremiumTexture:x}}),e.next=22;break;case 19:k=a.colorRGB1[i],C=a.colorRGB2[i],Object(be.a)({baseGroup:n,layerArr:r,settings:{colorRGB1:k,colorRGB2:C,id:o},type:b}),Object(l.a)({type:u.l,id:o,settings:{colorRGB1:k,colorRGB2:C,settingType:m,isImage:!1,transparent:!1,isPremiumTexture:x}});case 22:Object(l.a)({type:u.o,activeTexture:y});case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ve=n(17),je=function(e){var t,n=e.baseGroup,r=e.settings,a=e.valueKey,i=r.id,c=r.text[a],o=r.isPlaceholder,s=(o=void 0===o?{isPlaceholder:!1}:o)[a],d=r.isAlreadyChanged,b=(d=void 0===d?{isAlreadyChanged:!1}:d)[a],f=r.isEmptyText,h=(f=void 0===f?{isEmptyText:!1}:f)[a],g=Object(p.W)(n,"#".concat(i));if(g){var O=(null===(t=r.textTransform)||void 0===t?void 0:t[a])||"none",v=Object(ce.d)(O,c);Object(p.Lb)(g,{text:v,textTransform:O,isPlaceholder:s,isAlreadyChanged:b,emptyText:h}),Object(p.I)(g),Object(p.I)(n),Object(P.b)((function(){Object(l.a)({type:u.p,selectedText:v}),Object(l.a)({type:u.l,id:i,settings:{selectedText:v,textTransform:O}}),Object(l.a)({type:u.d,id:i,changed_resource:{text:v}}),Object(l.a)(ve.a.actions.setVisibilityTextarea(!1))}))}},me=n(249),ye=n(463),xe=n(21),we=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,a,i,o,s,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.stage,r=t.baseGroup,a=t.settings,i=t.valueKey,o={width:a.elem[i].type===me.a.STATIC?a.elem[i].width:a.originalWidth[i],height:a.elem[i].type===me.a.STATIC?a.elem[i].height:a.originalHeight[i]},Object(l.a)(ve.a.actions.updateCanvasSizes(o)),Object(l.a)(xe.a.actions.setArtBoardSizes(o)),s={originalWidth:a.originalWidth[i],originalHeight:a.originalHeight[i],originalOriginalWidth:a.originalOriginalWidth[i],originalOriginalHeight:a.originalOriginalHeight[i],baseGroup:r,stage:n,dispatch:l.a,activeEffect:a.activeEffect[i],elem:a.elem[i],zoom:a.zoom[i],fromHistory:!0},e.next=7,Object(ye.a)(s);case 7:if(d=e.sent,Object(l.a)({type:u.n,activeEffect:a.activeEffect[i]}),d){e.next=11;break}return e.abrupt("return");case 11:Object(l.a)(ve.a.actions.chooserAdditionalInfo({width:null===d||void 0===d?void 0:d.boxWidthOriginal,height:null===d||void 0===d?void 0:d.boxHeightOriginal}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ae=function(e){var t=e.baseGroup,n=e.layersArr,r=e.settings,a=e.valueKey,i=r.indexes[a],c=i.prevIndex,o=i.newIndex,s=Object(M.a)(n,c,o);Object(l.a)({type:u.s,layers:s}),t&&Object(B.c)(t)},Ee=n(445),ke=function(e){var t=e.baseGroup,n=e.settings,r=e.valueKey;Object(p.T)(t,"#".concat(n.id)).forEach((function(e){(e&&Object(p.Ab)(e)||Object(p.Bb)(e))&&Object(Ee.a)({textNode:e,bendRange:n.bend[r],baseGroup:t})}))}},,function(e,t,n){"use strict";n.d(t,"e",(function(){return y})),n.d(t,"a",(function(){return x})),n.d(t,"c",(function(){return w})),n.d(t,"b",(function(){return A})),n.d(t,"g",(function(){return k})),n.d(t,"d",(function(){return S})),n.d(t,"h",(function(){return _})),n.d(t,"f",(function(){return I}));var r=n(4),a=n(2),i=n(84),c=n(14),o=n(1),s=n(50),u=n(335),l=n(220),d=n(345),b=n(51),f=n(0),h=n(73),p=function(e,t,n){var r,a,i=Object(f.db)(e),c=i.width,o=i.height,u=i.x,l=i.y,d=i.scaleX,b=i.scaleY,p=i.rotation,g=d>0?1:-1,O=b>0?1:-1,v=d<0,j=b<0,m=v&&!j,y=j&&!v,x=((Math.abs((null===n||void 0===n||null===(r=n.settings)||void 0===r?void 0:r.scaleXTransformer)||0)||1)+t/100)*g,w=((Math.abs((null===n||void 0===n||null===(a=n.settings)||void 0===a?void 0:a.scaleYTransformer)||0)||1)+t/100)*O,A=Math.atan(o/c),E=Math.sqrt(Math.pow(c,2)+Math.pow(o,2)),k=Object(h.a)(p),C=k+A;y?C=Math.PI/2-k+A:m&&(C=Math.PI/2-A+k);var S=Math.cos(C)*E,T=Math.sin(C)*E,_=u+S,I=l+T;y?(_=u+T,I=l-S):m&&(_=u+T,I=l+S);var R=u-(x-d)*((_+u)/2-u),L=l-(w-b)*((I+l)/2-l);Object(f.Lb)(e,{x:R,y:L,scaleX:x,scaleY:w}),Object(f.l)(e,{pixelRatio:Object(s.a)(e)})},g=["index"],O=["index"],v=["index"],j=function(e,t){e.some((function(e){return e===b.a.IEAdjust}))||Object(f.Lb)(t,{filters:[].concat(Object(c.a)(e),[b.a.IEAdjust])})},m=function(e,t){e.some((function(e){return e===b.a.IEHSL}))||Object(f.Lb)(t,{filters:[].concat(Object(c.a)(e),[b.a.IEHSL])})},y={brightness:j,contrast:j,saturation:j,hue:j,colorize:j,color_intensity:j,border:j,corner_radius:j,shadows:j,highlights:j,temperature:j,clarity:j,hsl:m,hsl_index:m,hsl_hue:m,hsl_saturation:m,hsl_luminance:m},x=function(e,t){Object(f.Lb)(t,{brightness:e})},w=function(e,t){Object(f.Lb)(t,{saturation:e})},A=function(e,t){Object(f.Lb)(t,{contrast:e})},E=function(e,t){Object(f.Lb)(t,{hue:e})},k=function(e){var t=Object(s.a)(e);Object(f.l)(e,{pixelRatio:t})},C=function(e){return e>0?1:-1},S={fade:function(e,t){Object(f.Lb)(t,{opacity:(100-e)/100})},brightness:x,contrast:A,hue:E,highlights:function(e,t){Object(f.Lb)(t,{highlights:e})},clarity:function(e,t){Object(f.Lb)(t,{clarity:e})},shadows:function(e,t){Object(f.Lb)(t,{shadows:e})},temperature:function(e,t){Object(f.Lb)(t,{temperature:e})},saturation:w,color_intensity:w,colorize:E,opacity:function(e,t){Object(f.Lb)(t,{opacity:e/100})},border:function(e,t){var n=Object(s.a)(t);Object(f.db)(t).isCached&&Object(f.n)(t),Object(f.fb)(t).forEach((function(t){return Object(f.Lb)(t,{strokeWidth:e/10})})),Object(f.l)(t,{pixelRatio:n})},corner_radius:function(e,t){var n=Object(s.a)(t);Object(f.db)(t).isCached&&Object(f.n)(t),Object(f.Lb)(t,{cornerRadius:e}),Object(f.l)(t,{pixelRatio:n})},gridBorderSize:function(e,t){t.setAttr("gridBorderSize",e)},gridBorderRadius:function(e,t){t.setAttr("gridBorderRadius",e)},gridThickness:function(e,t){t.setAttr("gridThickness",e)},hsl:function(e,t){var n=Object(l.a)(e);Object(f.Lb)(t,{hsl:Object(a.a)({},n)})},hsl_index:function(e,t){var n=Object(f.db)(t);Object(f.Lb)(t,{hsl:Object(a.a)(Object(a.a)({},n.hsl),{},{index:e})})},hsl_hue:function(e,t){var n=Object(f.db)(t).hsl,c=(n=void 0===n?{}:n).index,o=void 0===c?0:c,s=Object(i.a)(n,g);Object(f.Lb)(t,{hsl:Object(a.a)(Object(a.a)({},s),{},Object(r.a)({index:o},"hue".concat(o),e))})},hsl_saturation:function(e,t){var n=Object(f.db)(t).hsl,c=(n=void 0===n?{}:n).index,o=void 0===c?0:c,s=Object(i.a)(n,O);Object(f.Lb)(t,{hsl:Object(a.a)(Object(a.a)({},s),{},Object(r.a)({index:o},"saturation".concat(o),e))})},hsl_luminance:function(e,t){var n=Object(f.db)(t).hsl,c=(n=void 0===n?{}:n).index,o=void 0===c?0:c,s=Object(i.a)(n,v);Object(f.Lb)(t,{hsl:Object(a.a)(Object(a.a)({},s),{},Object(r.a)({index:o},"luminance".concat(o),e))})}},T=function(e,t,n,r){var a=t*(r?2:1)/100,i=function(e){var t=Object(f.db)(e);return{x:C(t.scaleX),y:C(t.scaleY)}}(e),c=i.x,o=i.y,u=Object(f.db)(e),l=u.scaleXTransformer,d=void 0===l?1:l,b=u.scaleYTransformer,h=void 0===b?1:b;Object(f.l)(Object(f.Lb)(e,{scaleX:(d+a)*c,scaleY:(h+a)*o,estimatedZoomValue:a}),{pixelRatio:Object(s.a)(e)})},_=function(e,t,n,r,a,i){var c;if(i||(null===r||void 0===r||null===(c=r.effectLayer)||void 0===c?void 0:c.type)!==o.qc.overlay||"zoom"!==e||r.type===o.Cc)"zoom"===e&&T(t,n,0,a);else{p(t,n,r);var s=Object(f.kb)(t),l=Object(f.M)(s,"#".concat(r.id));l&&s&&Object(d.a)(s,l)}"rotate"===e&&function(e,t){var n=Object(f.db)(e);if(0===n.offsetX||0===n.offsetY)return Object(u.a)(e,t);Object(f.l)(Object(f.Lb)(e,{rotation:t}))}(t,n)},I=function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},c="string"===typeof t&&Object(f.R)(e,(function(e){return Object(f.db)(e).id.includes(t.replace("#",""))})),o=Object(f.S)(e,t)||c;o.each((function(e){var t;if(e){var c=Object(f.db)(e),o=c.filters||[];c.isCached||a.includes("grid")||Object(f.l)(e,{pixelRatio:Object(s.a)(e)}),null===(t=y[a])||void 0===t||t.call(y,o,e),r&&r(n,e),i.cacheRatio&&!c.isCached&&k(e),i.handleZoomRotation&&_(a,e,n,i.activeLayer,i.multiplyZoomValue)}}))}},,function(e,t,n){"use strict";n.d(t,"h",(function(){return g})),n.d(t,"g",(function(){return p})),n.d(t,"i",(function(){return O})),n.d(t,"f",(function(){return j})),n.d(t,"e",(function(){return m})),n.d(t,"a",(function(){return E})),n.d(t,"c",(function(){return C})),n.d(t,"b",(function(){return T})),n.d(t,"d",(function(){return _}));var r=n(14),a=n(15),i=n(6),c=n(9),o=n(12),s=n(0),u=n(1),l=n(334),d=n(43),b=n(57),f=n(250),h=n(86),p=function(e){return["template-background",u.qg].includes(Object(s.db)(e).name)||Object(d.f)(e)||Object(s.N)(e,(function(e){return Object(d.f)(e)}))||Object(d.d)(e)},g=function(e){var t,n=Object(i.b)(c.F),g=Object(s.mb)(n),O=Object(d.c)(n),v=[];if(e.forEach((function(e){if(Object(d.f)(e)){var t=Object(s.R)(e,(function(e){return Object(s.db)(e).name===u.qg}));v.push({id:Object(s.db)(t).id})}else v.push({id:Object(l.a)(Object(s.db)(e).id,e.attrs.isFromTemplate)})})),v.length?Object(i.a)({type:o.k,layersIds:v}):Object(i.a)({type:o.e}),1===e.length){if(t=Object(a.a)(e,1)[0],p(t))return void Object(f.a)(t,n);Object(h.e)(t)}Object(f.a)(null,n),Object(b.f)(n);var j=e.map((function(e){var t=Object(s.N)(e,".".concat(u.Bc),!0);if(Object(s.tb)(t))return t;var n=Object(s.N)(e,(function(e){return Object(s.db)(e).id.includes(u.zh)}));if(n)return n;var r=Object(s.kb)(e);return Object(s.tb)(r)&&Object(s.db)(r).id!==u.z?r:e})),m=Object(h.g)(e);if(O)Object(s.Lb)(O,{nodes:Object(r.a)(j),shouldOverdrawWholeArea:m,visible:!0}),t&&(Object(h.b)({layer:n,node:t,isAttach:!0}),Object(d.g)(O));else{var y=Object(h.c)(Object(s.db)(g).scaleX,t);Object(s.h)(n,y),Object(h.d)(y),Object(s.Lb)(y,{nodes:Object(r.a)(j),shouldOverdrawWholeArea:m}),Object(h.f)({layer:n})}},O=function(e){var t=Object(i.b)(c.F),n=Object(d.c)(t),a=Object(r.a)(Object(s.ob)(n));e.forEach((function(e){var t=a.findIndex((function(t){return Object(s.db)(e).id===Object(s.db)(t).id}));-1!==t?a.splice(t,1):a.push(e)})),g(a)},v=function(e){var t=Object(s.jb)(e),n=Object(d.c)(t);return Object(s.ob)(n)},j=function(e){var t=v(e),n=Object(s.db)(e).id;return t&&t.some((function(e){return Object(s.db)(e).id===n}))},m=function(e){var t=v(e);return 1===(null===t||void 0===t?void 0:t.length)&&j(e)},y=n(11),x=n(199),w=n(73),A=function(e){return 180*e/Math.PI},E=function(e,t){var n=Object(s.cb)(e);if(n){var r=Object(i.b)((function(e){return[Object(c.p)(e),Object(c.kc)(e),Object(c.jc)(e)]})),o=Object(a.a)(r,3),u=o[0],l=o[1],d=o[2],b=u.width,f=u.height,h=u.scale,p=u.measurement,g=b/h.width,O=f/h.height,v=Object(s.R)(e,".".concat(n)),j=Object(s.R)(e,"Label"),m=Object(s.db)(v),E=m.x,k=m.y,C=m.width,S=m.height,T=d?l.scaleX:t.x,_=d?l.scaleY:t.y,I=Object(s.db)(e).height/_,R=Object(s.db)(e).width/T,L=E+C/2+12,P=k+S/2+12,G=Object(x.a)(p),M="px"===p?Math.round:function(e){return+e.toFixed(2).toString()},B=M(R*(d?1:g)/G),D=M(I*(d?1:O)/G),N="   ".concat(B," x ").concat(D," ").concat(p,"  ");if("rotater"===n){N=function(e){var t=Object(w.a)(e),n=A(Math.asin(Math.sin(t))),r=Math.sign(Math.sin(t));return Math.sign(Math.cos(t))<=0&&(n=r*(180-r*n)),"   ".concat(Math.round(n),"\u02da   ")}(Object(s.db)(e).rotation),P=k-S/2-12}if(j){Object(s.Lb)(j,{x:L,y:P});var z=Object(s.R)(e,"#label-text");Object(s.Lb)(z,{text:N})}else{var H=Object(s.t)({id:"transform-badge",x:L,y:P});Object(i.b)(c.jc)&&Object(s.j)(e,"transformend",(function(){H.destroy()})),Object(s.e)(H,Object(s.A)({fill:Object(y.c)(y.b.paColor208),cornerRadius:2,opacity:.5})),Object(s.e)(H,Object(s.B)({id:"label-text",text:N,fontSize:10,fill:Object(y.c)(y.b.paColor209),height:16,lineHeight:1.8})),Object(s.g)(e,H)}}},k=function(e){return{"middle-right":{offsetX:-e,offsetY:0},"middle-left":{offsetX:e,offsetY:0},"top-center":{offsetX:0,offsetY:e},"bottom-center":{offsetX:0,offsetY:-e}}},C=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=k(r);t.forEach((function(t){var r,i,c=Object(s.Q)(e,".".concat(t)),o=t.includes("middle-"),u=o?6:20,l=o?20:6;Object(s.Lb)(c,{width:u*n.x,height:l*n.y,anchorCornerRadius:3,offsetX:u/2*n.x+(null===(r=a[t])||void 0===r?void 0:r.offsetX),offsetY:l/2*n.y+(null===(i=a[t])||void 0===i?void 0:i.offsetY)})}))},S=n(2),T=function(e,t){var n;if(null===(n=Object(s.ob)(e))||void 0===n?void 0:n.length){var r=Object(s.U)(e,".rotater"),a=Object(s.U)(e,"#rotater-icon"),i=Object(s.db)(a).width,c=t.y,o=a?i:14;Object(s.Lb)(r,{width:24*t.x,height:24*t.y,offsetX:12*t.x,offsetY:12*t.y+4*c});var u=Object(s.db)(e),l={x:u.width/2-o/2*c,y:-(u.rotateAnchorOffset+4*c)-o/2*c,scaleX:c,scaleY:c};if(a)Object(s.Lb)(a,l);else{var d=Object(s.w)(Object(S.a)(Object(S.a)({},l),{},{width:o,height:o,fill:Object(y.c)(y.b.paColor8),id:"rotater-icon",listening:!1,data:"M11.7636 0.491235C11.7636 0.219929 12.003 0 12.2983 0C12.5936 0 12.8331 0.219929 12.8331 0.491206V3.43856C12.8338 3.6506 12.6863 3.83918 12.4673 3.90619L9.25905 4.88863C8.97851 4.97438 8.67545 4.83492 8.58212 4.5772C8.48879 4.31948 8.64058 4.04107 8.92112 3.95532L11.2899 3.2298C10.1759 2.11185 8.60217 1.47503 6.9524 1.47474C3.70395 1.47414 1.07009 3.89289 1.06943 6.87714C1.06943 7.14845 0.830066 7.36838 0.534744 7.36838C0.239422 7.36838 1.27884e-05 7.14845 1.27884e-05 6.87714C-0.00345202 5.21822 0.697256 3.6234 1.9533 2.43154C4.61849 -0.0974585 9.01069 -0.162795 11.7636 2.28567V0.491235ZM12.9305 7.12289C12.9305 6.85159 13.1699 6.63166 13.4652 6.63166C13.7606 6.63166 13.9999 6.85159 13.9999 7.12289C14.0034 8.78181 13.3027 10.3766 12.0466 11.5685C9.38145 14.0975 4.98921 14.1628 2.23631 11.7144V13.5088C2.23631 13.7801 1.99692 14 1.70159 14C1.40627 14 1.16687 13.7801 1.16687 13.5088V10.5615C1.16615 10.3494 1.31363 10.1608 1.53263 10.0938L4.74088 9.1114C5.02142 9.02565 5.32448 9.1651 5.41781 9.42282C5.51115 9.68054 5.35935 9.95896 5.07882 10.0447L2.71007 10.7702C3.82399 11.8882 5.39776 12.525 7.04754 12.5253C10.296 12.5259 12.9299 10.1071 12.9305 7.12289Z"}));Object(s.g)(e,d)}}},_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(s.V)(e,".back");if(n){var r=Object(s.db)(n),a=r.strokeWidth;n.sceneFunc((function(e,n){var r=t.color,i=void 0===r?Object(y.c)(y.b.paColor9):r,c=t.shadowBlur,o=void 0===c?0:c,u=t.shadowColor,l=void 0===u?"":u,d=t.showDefaultBorder,b=void 0!==d&&d,f=t.offset,h=void 0===f?0:f,p=Object(s.db)(n).width,g=Object(s.db)(n).height,O=a-h;e.shadowBlur=o,e.shadowColor=l,e.strokeStyle=i,b||(e.beginPath(),e.lineWidth=a,e.rect(O,O,p+h,g+h),e.stroke()),e.beginPath(),e.rect(-h,-h,p+2*h,g+2*h),e.stroke(),e.fillStrokeShape(n)}))}}},function(e,t,n){"use strict";var r=n(0);t.a=function(e){var t=Object(r.wb)(e)?Object(r.kb)(e):e;return Math.max(2*Object(r.db)(t).scaleY,4)}},function(e,t,n){"use strict";var r=n(46),a=n.n(r),i=n(0),c=n(62),o=n(260);t.a={HSL:a.a.Filters.HSL,RGB:a.a.Filters.RGB,Blur:a.a.Filters.Blur,Contrast:a.a.Filters.Contrast,Brighten:a.a.Filters.Brighten,IEAdjust:function(e){var t=Object(o.b)(e,"Adjust"),n=Object(i.db)(this),r=n.hue,a=n.noise,s=n.clarity,u=n.shadows,l=n.contrast,d=n.brightness,b=n.saturation,f=n.highlights,h=n.temperature;Object(c.i)().accessGraph((function(){var n=t.parameter("brightness",!0),i=t.parameter("contrast",!0),o=t.parameter("saturation",!0),p=t.parameter("hue",!0),g=t.parameter("temperature",!0),O=t.parameter("highlights",!0),v=t.parameter("shadows",!0),j=t.parameter("noise",!0),m=t.parameter("clarity",!0);n.value=Number(d)||0,o.value=Number(b)||0,O.value=Number(f)||0,i.value=Number(l)||0,j.value=Number(a)||0,p.value=5/9*Number(r)||0,m.value=Number(s)||0,g.value=Number(h)||0,v.value=Number(u)||0;var y=t.outputImage(),x=Object(c.i)().runValue(y);t.delete(),y.delete();var w=x.getValue(),A=w.convertRGBA();w.delete(),x.delete(),n.delete(),i.delete(),e.data.set(Object(c.g)().core.ImageARGB8.getRawBuffer(A)),A.delete()}))},Grayscale:a.a.Filters.Grayscale,IEHSL:function(e){var t=Object(o.b)(e,"hsl"),n=Object(i.db)(this).hsl;Object(c.i)().accessGraph((function(){for(var r=0;r<8;++r){var a="hue".concat(r),i="saturation".concat(r),o="luminance".concat(r),s=t.parameter(a,!0),u=t.parameter(i,!0),l=t.parameter(o,!0);s.value=Number(n[a])||0,u.value=Number(n[i])||0,l.value=.7*Number(n[o])||0}var d=t.outputImage(),b=Object(c.i)().runValue(d);t.delete(),d.delete();var f=b.getValue(),h=f.convertRGBA();f.delete(),b.delete(),e.data.set(Object(c.g)().core.ImageARGB8.getRawBuffer(h)),h.delete()}))}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(2),a=n(40),i=n(42),c=n(1),o=n.p+"static/media/transparent_bg.32ef7416.png",s=n(63),u=n(332),l={sticker:"Sticker",photo:"Image",text:"Text",mask:"Mask",canvas:"Background",effect:"FX",shape:"Shape"},d=function(){function e(){Object(a.a)(this,e)}return Object(i.a)(e,null,[{key:"generateOverlaysSettings",value:function(){return{hue:0,brightness:0,saturation:0,contrast:0}}},{key:"generateOverlaySettings",value:function(){return{opacity:100,hue:0,brightness:0,saturation:0,contrast:0,zoom:0,rotate:0,scaleXTransformer:1,scaleYTransformer:1,blendMode:e.blendModeConfigs.overlays,effectGroupId:"",effectName:"",overlayGroupId:"",konva_tagName:"",type:"",imageSrc:"",isGroup:!1,isDoubleGroup:!1,isHover:!1}}},{key:"generateColorToningSettings",value:function(){return{color:"",blendMode:e.blendModeConfigs.colorToning,fade:0,brightness:0,saturation:0,color_intensity:0,contrast:0,effectName:"",isGroup:!1,effectGroupId:"",effectId:""}}},{key:"generateMagicSettings",value:function(){return{blendMode:e.blendModeConfigs.magic,fade:0,hue:0,brightness:0,saturation:0,contrast:0,effectName:"",isGroup:!1,effectGroupId:"",effectId:""}}},{key:"generateDoubleExposureSettings",value:function(){return{colorize:0,brightness:0,saturation:0,contrast:0,opacity:100,zoom:20,rotate:0}}},{key:"generateColorExposureOverlaySettings",value:function(){return{blendMode:e.blendModeConfigs.doubleExposure,opacity:100,zoom:20,rotate:0,brightness:0,saturation:0,contrast:0}}},{key:"generateDuotoneSettings",value:function(){return{colorRGB1:{},colorRGB2:{},blendMode:e.blendModeConfigs.duotone,fade:0,brightness:0,saturation:0,hue:0,contrast:0,effectName:"",isGroup:!1,effectGroupId:"",effectId:""}}},{key:"generateRainbowSettings",value:function(){return{color:"",blendMode:e.blendModeConfigs.rainbow,fade:0,brightness:0,saturation:0,contrast:0,effectName:"",isGroup:!1,effectGroupId:"",effectId:""}}},{key:"generateSketchSettings",value:function(){return{colorRGB1:{},colorRGB2:{},blendMode:e.blendModeConfigs.sketch,brightness:0,saturation:0,contrast:0}}},{key:"generateLutSettings",value:function(){return{blendMode:e.blendModeConfigs.lut,saturation:0,brightness:0,contrast:0,fade:0}}},{key:"generateCanvasEffectSettings",value:function(){return{blendMode:e.blendModeConfigs.canvasEffect,fade:0,brightness:0,saturation:0,contrast:0}}},{key:"generateRunOutSettings",value:function(){return{blendMode:e.blendModeConfigs.runout,runOutType:"",offset:0,angle:0,reverse:1,activeReverse:"activeLeft",returnedType:"CANVAS",offsetX:500,offsetY:500,degrees:0,vertOrHorizontal:0,effectName:"",isGroup:!1,effectGroupId:"",activeEffect:""}}},{key:"generateTemplateCollageSettings",value:function(){return{opacity:100,saturation:0,contrast:0,brightness:0,zoom:0,rotate:0,hue:0,highlights:0,clarity:0,temperature:0,shadows:0,hsl:{},scaleXTransformer:1,scaleYTransformer:1,effectName:"",isGroup:!1,effectGroupId:"",activeEffect:""}}},{key:"generateFreeGridCellSettings",value:function(){return{opacity:100,saturation:0,contrast:0,brightness:0,zoom:0,rotate:0,hue:0,highlights:0,clarity:0,temperature:0,shadows:0,hsl:{},scaleXTransformer:1,scaleYTransformer:1,effectName:"",isGroup:!1,effectGroupId:"",activeEffect:"",is_placeholder_active:!0}}},{key:"generateFreeGridSettings",value:function(e){var t=0;return null===e||void 0===e||e.forEach((function(e){var n,r,a;null!=(null===e||void 0===e||null===(n=e.settings)||void 0===n?void 0:n.counter)&&null!=t&&((null===e||void 0===e||null===(r=e.settings)||void 0===r?void 0:r.counter)>t&&(t=null===e||void 0===e||null===(a=e.settings)||void 0===a?void 0:a.counter))})),{gridBorderRadius:0,gridThickness:0,gridBorderSize:0,counter:t+1}}},{key:"generateColorTransferSettings",value:function(){return{hue:0,brightness:0,saturation:0,contrast:0,fade:0,blendMode:e.blendModeConfigs.colorTransfer}}},{key:"generateChangeSkySettings",value:function(){return{blendMode:e.blendModeConfigs.sky,brightness:0,saturation:0,contrast:0,colorRGB1:{r:255,g:255,b:255},colorRGB2:{r:255,g:255,b:255}}}},{key:"getCanvasLayer",value:function(){var t="canvas",n=e.generateSettings(t,{});return Object(r.a)({type:t,active:!0,id:c.x,is_visible:!0,resources:{}},n)}},{key:"generateNewLayer",value:function(t){var n=t.type,a=t.isTextStyle,i=void 0!==a&&a,c=t.konva_tagName,o=void 0===c?"":c,l=t.resources,d=void 0===l?{}:l,b=t.cellsLayers,f=void 0===b?[]:b,h=t.id,p=t.id2,g=t.isPremium,O=void 0!==g&&g,v=t.is_visible,j=void 0===v||v,m=t.defaultSettings,y=void 0===m?{}:m,x=t.elementType,w=t.grid,A=t.layers,E={type:n,isTextStyle:i,konva_tagName:o,id:h,id2:p,resources:d,cellsLayers:f,isPremium:O,is_visible:j,elementType:x,grid:w,uiMetaData:t.uiMetaData},k=e.generateSettings(n,y,A);return E=Object(r.a)(Object(r.a)({},E),k),s.a.setDefaultettings(Object(r.a)(Object(r.a)({},E.settings),{},{id:h}),Object(u.a)(E)),E}},{key:"generateSettings",value:function(t,n,a){var i={name:l[t],settings:{}},o={};switch(t){case c.Yf:o=e.generateStickerSettings();break;case"editor":case c.Je:o=e.generatePhotoSettings();break;case"text":o=e.generateTextSettings();break;case"overlays":o=e.generateOverlaysSettings();break;case"overlay":o=e.generateOverlaySettings();break;case"effect":o=e.generateEffectSettings();break;case"canvas":o=e.generateCanvasSettings();break;case c.Af:o=e.generateShapeSettings();break;case"color-toning-effects":o=e.generateColorToningSettings();break;case"rainbow-effects":o=e.generateRainbowSettings();break;case"magic-effect":o=e.generateMagicSettings();break;case"double-exposure":o=e.generateDoubleExposureSettings();break;case"double-exposure-effect":o=e.generateColorExposureOverlaySettings();break;case"duotone-effect":o=e.generateDuotoneSettings();break;case"sketch-effect":o=e.generateSketchSettings();break;case c.ag:o=e.generateStickerSettings();break;case"text-tool":o=e.generatePhotoSettings();break;case"lut-filter-image":o=e.generateLutSettings();break;case"canvas-effect-filter-image":o=e.generateCanvasEffectSettings();break;case"runout-image":o=e.generateRunOutSettings();break;case c.Bc:var s=null===a||void 0===a?void 0:a.filter((function(e){return e.type===c.Bc}));o=e.generateFreeGridSettings(s);break;case c.Cc:o=e.generateFreeGridCellSettings();break;case c.pg:o=e.generateTemplateCollageSettings();break;case"color-transfer-img":o=e.generateColorTransferSettings();break;case"sky":o=e.generateChangeSkySettings();break;case"template-background-texture":o=e.generatePhotoSettings()}return i.settings=Object(r.a)(Object(r.a)({},o),n),i}},{key:"generateCanvasSettings",value:function(){return{opacity:100,defaultTransparentBg:o,colorRGB1:{r:255,g:255,b:255},colorRGB2:{r:255,g:255,b:255},settingType:"color",type:"canvas",transparent:!1}}},{key:"generateStickerSettings",value:function(){return{opacity:100,saturation:0,brightness:0,highlights:0,clarity:0,temperature:0,shadows:0,hue:0,contrast:0,hsl:{},zoom:0,rotate:0,scaleXTransformer:1,scaleYTransformer:1,blendMode:e.blendModeConfigs.sticker}}},{key:"generatePhotoSettings",value:function(){return{brightness:0,saturation:0,contrast:0,opacity:100,zoom:0,hue:0,highlights:0,clarity:0,temperature:0,shadows:0,hsl:{},rotate:0,scaleXTransformer:1,scaleYTransformer:1,blendMode:e.blendModeConfigs.photo,toolType:""}}},{key:"generateTextSettings",value:function(){return{colorRGB1:{r:0,g:0,b:0},colorRGB2:{r:0,g:0,b:0},outlineColor:c.wg,textColorOpacity:100,sizeOutline:30,opacityOutline:c.vg,shadowColor:c.xg,x_offset:c.xf,y_offset:c.yf,opacity:100,blur_depth:20,font_decoration:"normal",font_bold:"normal",font_italic:"normal",line:20,letterSpace:0,text_align:"left",font_size:25,outlineTransparent:!0,colorTransparent:!1,shadowTransparent:!0}}},{key:"generateEffectSettings",value:function(){return{}}},{key:"generateShapeSettings",value:function(){return{brightness:0,saturation:0,contrast:0,opacity:100,border:0,highlights:0,clarity:0,temperature:0,shadows:0,hue:0,hsl:{},corner_radius:0,sizeOutline:20,opacityOutline:100,colorRGB1:{},colorRGB2:{},outlineTransparent:!0,colorTransparent:!1,outlineColor:c.Cf,blendMode:e.blendModeConfigs.shape}}}]),e}();d.blendModeConfigs={photo:"normal",colorToning:"hard-light",rainbow:"screen",magic:"normal",doubleExposure:"lighten",duotone:"normal",sketch:"normal",overlays:"screen",sticker:"normal",fitTool:"normal",lut:"normal",canvasEffect:"normal",runout:"normal",colorTransfer:"normal",sky:"normal",shape:"normal"}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"x",(function(){return a})),n.d(t,"J",(function(){return i})),n.d(t,"f",(function(){return c})),n.d(t,"cb",(function(){return s})),n.d(t,"Z",(function(){return u})),n.d(t,"m",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"g",(function(){return b})),n.d(t,"A",(function(){return f})),n.d(t,"Y",(function(){return h})),n.d(t,"U",(function(){return p})),n.d(t,"W",(function(){return g})),n.d(t,"M",(function(){return O})),n.d(t,"n",(function(){return v})),n.d(t,"C",(function(){return j})),n.d(t,"eb",(function(){return m})),n.d(t,"u",(function(){return y})),n.d(t,"l",(function(){return x})),n.d(t,"bb",(function(){return w})),n.d(t,"o",(function(){return A})),n.d(t,"G",(function(){return E})),n.d(t,"p",(function(){return k})),n.d(t,"O",(function(){return C})),n.d(t,"P",(function(){return S})),n.d(t,"db",(function(){return T})),n.d(t,"r",(function(){return _})),n.d(t,"z",(function(){return I})),n.d(t,"q",(function(){return R})),n.d(t,"v",(function(){return L})),n.d(t,"I",(function(){return P})),n.d(t,"y",(function(){return G})),n.d(t,"Q",(function(){return M})),n.d(t,"F",(function(){return B})),n.d(t,"D",(function(){return D})),n.d(t,"gb",(function(){return N})),n.d(t,"E",(function(){return z})),n.d(t,"B",(function(){return H})),n.d(t,"fb",(function(){return Y})),n.d(t,"N",(function(){return X})),n.d(t,"T",(function(){return U})),n.d(t,"V",(function(){return F})),n.d(t,"R",(function(){return W})),n.d(t,"w",(function(){return V})),n.d(t,"S",(function(){return K})),n.d(t,"t",(function(){return q})),n.d(t,"c",(function(){return J})),n.d(t,"H",(function(){return Q})),n.d(t,"s",(function(){return Z})),n.d(t,"K",(function(){return $})),n.d(t,"X",(function(){return ee})),n.d(t,"h",(function(){return te})),n.d(t,"e",(function(){return ne})),n.d(t,"j",(function(){return re})),n.d(t,"k",(function(){return ae})),n.d(t,"d",(function(){return ie})),n.d(t,"i",(function(){return ce})),n.d(t,"ab",(function(){return oe})),n.d(t,"L",(function(){return se}));var r;!function(e){e[e.Below=-1]="Below",e[e.Base=e.Below+5]="Base",e[e.Above=e.Base+5]="Above"}(r||(r={}));var a=1,i=r.Base,c=r.Base,o=r.Base,s=r.Base,u=r.Base,l=r.Base,d=c+5,b=r.Base+5,f=r.Base,h=r.Above,p=r.Above,g=r.Above,O=r.Above,v=r.Above,j=v+5,m=v+5,y=l+5,x=v+5,w=x,A=s+5,E=A+5,k=E+5,C=i,S=i,T=h+5,_=T+5,I=T+5,R=h+5,L=R+5,P=m+5,G=P+5,M=P+5,B=m+5,D=G+5,N=D+5,z=N+5,H=M+5,Y=H+5,X=Y+5,U=X+5,F=Y+5,W=U+5,V=H+5,K=H+5,q=H+5,J=c+5,Q=p+5,Z=H+5,$=H+5,ee=g+5,te=o+5,ne=te+5,re=o+5,ae=re+5,ie=ae+5,ce=ae+5,oe=u+5,se=O+5},,function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return O}));var r=n(84),a=n(2),i=n(1),c=n(52),o=n(12),s=n(6),u=n(9),l=["title","canvasEffectSrc","effect_resource_url","isReplace","resetSettings","effectUrl"],d=["type","effectUrl","elemName","isReplace"],b=["title","isReplace","blendMode"],f=function(e){var t=e.effectType,n=e.settings,f=e.layerArr,h=e.effectGroup,p=e.activeImageLayer,g=e.fromHistory,O=void 0!==g&&g,v=i.qc.duotone,j=i.qc.magic,m=i.qc.colorToning,y=i.qc.rainbow,x=i.qc.lut,w=i.qc.runout,A=i.qc.imageEngine,E=i.qc.doubleExposure,k=i.qc.colorTransfer,C=i.qc.canvasEffect,S=i.qc.overlay,T=i.qc.sky,_=i.qc.sketch;switch(t){case v:return function(e){var t=e.settings,n=e.layerArr,r=e.activeImageLayer,u=t.colorRGB1,l=t.colorRGB2,d=t.title,b=t.effectUrl,f=t.isReplace,h=Object(a.a)(Object(a.a)({},c.a.generateDuotoneSettings()),{},{colorRGB1:u,colorRGB2:l,type:"duotone-effect",effectId:"duotone-image",activeEffect:d,effectName:"",isGroup:!0,effectGroupId:"",isPremiumTexture:!1}),p={is_local:!0,effectUrl:b};f&&(h=Object(a.a)(Object(a.a)({},h),{},{blendMode:(null===r||void 0===r?void 0:r.settings.blendMode)||c.a.blendModeConfigs.duotone,fade:(null===r||void 0===r?void 0:r.settings.fade)||0,brightness:(null===r||void 0===r?void 0:r.settings.brightness)||0}));var g=(null===n||void 0===n?void 0:n.find((function(e){return"duotone-effect"===e.type})))||r;g&&(h=Object(a.a)(Object(a.a)({},h),{},{effectGroupId:"".concat(g.id).concat(i.zh),effectName:d}),Object(s.a)({type:o.l,isPremium:null===r||void 0===r?void 0:r.isPremium,resources:p,id:g.id,settings:h}),Object(s.a)({type:o.j,id:g.id})),Object(s.a)({type:o.n,activeEffect:d})}({settings:n,layerArr:f,activeImageLayer:p});case j:return function(e){var t=e.settings,n=e.activeImageLayer,r=t.effect,u=t.magicUrl,l=t.isReplace;if(n){Object(s.a)({type:o.n,activeEffect:r.uid});var d=Object(a.a)(Object(a.a)({},c.a.generateDuotoneSettings()),{},{isGroup:!0,effectName:r.title,effectGroupId:"".concat(n.id).concat(i.zh),effectId:"image-magic-effect",type:"magic-effect",activeEffect:r.uid,isPremiumTexture:!1});l&&(d=Object(a.a)(Object(a.a)({},d),{},{fade:n.settings.fade||t.fade||0,brightness:n.settings.brightness||t.brightness||0,saturation:n.settings.saturation||t.saturation||0,contrast:n.settings.contrast||t.contrast||0,hue:n.settings.hue||t.hue||0,highlights:n.settings.highlights||t.highlights||0,clarity:n.settings.clarity||t.clarity||0,shadows:n.settings.shadows||t.shadows||0,temperature:n.settings.temperature||t.temperature||0,blendMode:n.settings.blendMode||t.blendMode||"normal",hsl:n.settings.hsl||t.hsl||{}})),Object(s.a)({type:o.l,isPremium:null===n||void 0===n?void 0:n.isPremium,resources:{effectUrl:u},settings:d,id:n.id}),Object(s.a)({type:o.j,id:n.id})}}({settings:n,layerArr:f,activeImageLayer:p});case k:return function(e){var t=e.settings,n=e.layerArr,r=e.activeImageLayer,u=t.elementName,l=t.colorTransferUrl,d=t.id,b=t.isReplace,f=(null===n||void 0===n?void 0:n.find((function(e){return"color-transfer-img"===e.id})))||r;if(Object(s.a)({type:o.n,activeEffect:u}),f){var h=Object(a.a)(Object(a.a)({},c.a.generateColorTransferSettings()),{},{isGroup:!0,effectName:u,effectGroupId:"".concat(f.id).concat(i.zh),effectId:d,colorTransferEffectId:t.effectId,colorTransferEffectUrl:t.colorTransferEffectUrl,type:"color-transfer-img",activeEffect:u,isPremiumTexture:!1});b&&(h=Object(a.a)(Object(a.a)({},h),{},{fade:(null===r||void 0===r?void 0:r.settings.fade)||0,brightness:(null===r||void 0===r?void 0:r.settings.brightness)||0,saturation:(null===r||void 0===r?void 0:r.settings.saturation)||0,contrast:(null===r||void 0===r?void 0:r.settings.contrast)||0,hue:(null===r||void 0===r?void 0:r.settings.hue)||0,blendMode:(null===r||void 0===r?void 0:r.settings.blendMode)||"normal"})),Object(s.a)({type:o.l,settings:h,isPremium:null===r||void 0===r?void 0:r.isPremium,resources:{effectUrl:l},id:f.id}),Object(s.a)({type:o.j,id:f.id})}}({settings:n,layerArr:f,activeImageLayer:p});case m:return function(e){var t=e.settings,n=e.layerArr,r=e.activeImageLayer,u=t.color1,l=t.title,d=t.isReplace,b=(null===n||void 0===n?void 0:n.find((function(e){return"color-toning-effects"===e.type})))||r;if(b){var f=Object(a.a)(Object(a.a)({},c.a.generateColorToningSettings()),{},{color1:u,type:"color-toning-effects",activeEffect:l,isGroup:!0,effectName:l,effectGroupId:"".concat(b.id).concat(i.zh),effectId:"rect-effect",isPremiumTexture:!1});d&&(f=Object(a.a)(Object(a.a)({},f),{},{fade:(null===r||void 0===r?void 0:r.settings.fade)||0,color_intensity:(null===r||void 0===r?void 0:r.settings.color_intensity)||0,blendMode:"normal"!==(null===r||void 0===r?void 0:r.settings.blendMode)?null===r||void 0===r?void 0:r.settings.blendMode:c.a.blendModeConfigs.colorToning}));var h=b.id;Object(s.a)({type:o.l,settings:f,resources:{effectUrl:""},isPremium:null===r||void 0===r?void 0:r.isPremium}),Object(s.a)({type:o.j,id:h}),Object(s.a)({type:o.n,activeEffect:l})}}({settings:n,layerArr:f,activeImageLayer:p});case y:return function(e){var t=e.settings,n=e.activeImageLayer,r=t.color1,u=t.color2,l=t.color3,d=t.title,b=t.isReplace,f=Object(a.a)(Object(a.a)({},c.a.generateColorToningSettings()),{},{color1:r,color2:u,color3:l,type:"rainbow-effects",effect:!0,activeEffect:d,blendMode:"screen",effectName:d,isGroup:!0,effectGroupId:"".concat(null===n||void 0===n?void 0:n.id).concat(i.zh),effectId:"rect-effect",isPremiumTexture:!1});b&&(f=Object(a.a)(Object(a.a)({},f),{},{fade:(null===n||void 0===n?void 0:n.settings.fade)||0,color_intensity:(null===n||void 0===n?void 0:n.settings.color_intensity)||0,blendMode:(null===n||void 0===n?void 0:n.settings.blendMode)&&"normal"!==(null===n||void 0===n?void 0:n.settings.blendMode)?null===n||void 0===n?void 0:n.settings.blendMode:c.a.blendModeConfigs.rainbow})),Object(s.a)({type:o.l,settings:f,resources:{effectUrl:""},isPremium:null===n||void 0===n?void 0:n.isPremium}),Object(s.a)({type:o.j,id:null===n||void 0===n?void 0:n.id}),Object(s.a)({type:o.n,activeEffect:d})}({settings:n,activeImageLayer:p});case x:!function(e){var t=e.settings,n=e.layerArr,r=e.effectGroup,u=e.activeImageLayer,l=e.fromHistory;if(r){var d=t.src,b=t.effectUrl,f=t.elemName,h=t.isReplace,p=(null===n||void 0===n?void 0:n.find((function(e){return"lut-filter-image"===e.type})))||u;if(Object(s.a)({type:o.n,activeEffect:f}),p){var g=Object(a.a)(Object(a.a)({},c.a.generateLutSettings()),{},{isGroup:!0,effectName:f,activeEffect:f,effectGroupId:"".concat(p.id).concat(i.zh),type:"lut-filter-image",effectId:"image-lut-filter",isPremiumTexture:!1});h&&(g=Object(a.a)(Object(a.a)({},g),{},{fade:(null===u||void 0===u?void 0:u.settings.fade)||0,brightness:(null===u||void 0===u?void 0:u.settings.brightness)||0,saturation:(null===u||void 0===u?void 0:u.settings.saturation)||0,contrast:(null===u||void 0===u?void 0:u.settings.contrast)||0,blendMode:(null===u||void 0===u?void 0:u.settings.blendMode)||"normal"})),l&&(g=Object(a.a)(Object(a.a)({},g),{},{fade:t.fade,brightness:t.brightness,saturation:t.saturation,contrast:t.contrast,blendMode:t.blendMode})),Object(s.a)({type:o.l,isPremium:null===u||void 0===u?void 0:u.isPremium,resources:{effectUrl:b,effect_resource_url:d},settings:g,id:p.id}),Object(s.a)({type:o.j,id:p.id})}}}({settings:n,layerArr:f,effectGroup:h,activeImageLayer:p,fromHistory:O});break;case S:return function(e){var t=e.settings,n=e.activeImageLayer,r=t.name,u=t.images;if(n){var l,d,b,f,h=Object(a.a)(Object(a.a)(Object(a.a)({},c.a.generateOverlaySettings()),{},{isGroup:!0,isDoubleGroup:!0,effectGroupId:"".concat(n.id).concat(i.zh),type:"overlays",effectId:"overlay",effectName:r,activeEffect:r,updateEffect:!1},function(e){var t,n,r,a,i;return{opacity:(null===e||void 0===e||null===(t=e.settings)||void 0===t?void 0:t.opacity)||100,contrast:(null===e||void 0===e||null===(n=e.settings)||void 0===n?void 0:n.contrast)||0,saturation:(null===e||void 0===e||null===(r=e.settings)||void 0===r?void 0:r.saturation)||0,brightness:(null===e||void 0===e||null===(a=e.settings)||void 0===a?void 0:a.brightness)||0,hue:(null===e||void 0===e||null===(i=e.settings)||void 0===i?void 0:i.hue)||0}}(n)),{},{blendMode:(null===(l=n.settings)||void 0===l?void 0:l.blendMode)||"normal",isPremiumTexture:!1}),p={id:"",id2:"",settings:Object(a.a)(Object(a.a)({},h),{},{blendMode:"screen"}),resources:{url1:"",url2:""},type:"overlay",active:!0,isEffectLayer:!0};Object(s.a)({type:o.n,activeEffect:r}),p=(null===u||void 0===u?void 0:u.image2)?Object(a.a)(Object(a.a)({},p),{},{id:"".concat(n.id,"-overlay"),id2:"".concat(n.id,"-overlay2"),resources:{url1:null===u||void 0===u||null===(d=u.image1)||void 0===d?void 0:d.resource_url,url2:null===u||void 0===u||null===(b=u.image2)||void 0===b?void 0:b.resource_url}}):Object(a.a)(Object(a.a)({},p),{},{id:"".concat(n.id,"-overlay"),resources:{url1:null===u||void 0===u||null===(f=u.image1)||void 0===f?void 0:f.resource_url,url2:""}}),Object(s.a)({type:o.l,isPremium:null===n||void 0===n?void 0:n.isPremium,id:n.id,settings:h,effectLayer:p}),Object(s.a)({type:o.j,id:"".concat(n.id,"-overlay")})}}({settings:n,layerArr:f,effectGroup:h,activeImageLayer:p});case w:return function(e){var t=e.settings,n=e.layerArr,r=e.activeImageLayer,u=t.type,l=t.effectUrl,d=t.isReplace,b=t.elemName,f="horizontal"===u,h={degrees:f?90:180,vertOrHorizontal:f?90:0},p=Object(a.a)(Object(a.a)({},c.a.generateRunOutSettings()),{},{offset:500,angle:90,runOutType:u,isGroup:!0,effectGroupId:"",type:"runout-image",effectId:"runout-image",effectName:b,isPremiumTexture:!1},h);d&&(p=Object(a.a)(Object(a.a)(Object(a.a)({},p),null===r||void 0===r?void 0:r.settings),{},{blendMode:(null===r||void 0===r?void 0:r.settings.blendMode)||"normal"})),Object(s.a)({type:o.n,activeEffect:u});var g=(null===n||void 0===n?void 0:n.find((function(e){return"runout-image"===e.type})))||r;g&&(Object(s.a)({type:o.l,isPremium:null===r||void 0===r?void 0:r.isPremium,resources:{effectUrl:l},settings:Object(a.a)(Object(a.a)({},p),{},{effectGroupId:"".concat(g.id).concat(i.zh),activeEffect:u}),id:g.id}),Object(s.a)({type:o.j,id:g.id}))}({settings:n,layerArr:f,activeImageLayer:p});case A:return function(e){var t=e.settings,n=e.layerArr,c=e.activeImageLayer,u=t.type,l=t.effectUrl,b=t.elemName,f=t.isReplace,h=Object(r.a)(t,d),p=Object(a.a)({type:u,effectId:i.id,effectName:b,isPremiumTexture:!1},h);f&&(p=Object(a.a)(Object(a.a)({},null===c||void 0===c?void 0:c.settings),p)),Object(s.a)({type:o.n,activeEffect:b});var g=(null===n||void 0===n?void 0:n.find((function(e){return e.type===u})))||c;g&&(Object(s.a)({type:o.l,isPremium:null===c||void 0===c?void 0:c.isPremium,resources:{effectUrl:l},settings:Object(a.a)(Object(a.a)({},p),{},{effectGroupId:"".concat(g.id).concat(i.zh),activeEffect:b}),id:g.id}),Object(s.a)({type:o.j,id:g.id}))}({settings:n,layerArr:f,activeImageLayer:p});case E:return function(e){var t,n,r,u,l,d=e.settings,b=e.activeImageLayer,f=d.overlayColor,h=d.backgroundColor,p=d.blendModeType,g=d.title,O=d.blendWidthColors,v=d.overlayLayerId,j=d.overlayType,m=d.zoom,y=d.rotate;if(Object(s.a)({type:o.n,activeEffect:g}),b){var x=Object(a.a)(Object(a.a)({},c.a.generateDoubleExposureSettings()),{},{overlayColor:f,backgroundColor:h,blendWidthColors:O,blendMode:p,imageSrc:b.resources.url,overlayImgSrc:b.resources.url,activeEffect:g,isPremiumTexture:!1}),w=Object(a.a)(Object(a.a)({},x),{},{isGroup:!0,isDoubleGroup:!0,effectGroupId:"".concat(b.id).concat(i.zh),effectName:g,type:"double-exposure",effectId:"double-exposure"}),A=Object(a.a)(Object(a.a)({},b.effectLayer),{},{id:"".concat(b.id,"|").concat(v),settings:Object(a.a)(Object(a.a)({},x),{},{effectName:g,isDoubleGroup:!0,zoom:m||(null===b||void 0===b||null===(t=b.effectLayer)||void 0===t||null===(n=t.settings)||void 0===n?void 0:n.zoom),rotate:y||0===y?y:null===b||void 0===b||null===(r=b.effectLayer)||void 0===r||null===(u=r.settings)||void 0===u?void 0:u.rotate}),resources:Object(a.a)(Object(a.a)({},null===(l=b.effectLayer)||void 0===l?void 0:l.resources),b.resources),type:j,active:!0,isEffectLayer:!0});Object(s.a)({type:o.l,isPremium:null===b||void 0===b?void 0:b.isPremium,id:b.id,settings:w,effectLayer:A}),Object(s.a)({type:o.j,id:"".concat(b.id,"|").concat(v)})}}({settings:n,layerArr:f,activeImageLayer:p});case C:return function(e){var t,n=e.settings,u=e.activeImageLayer;if(u){var d=n.title,b=n.canvasEffectSrc,f=n.effect_resource_url,h=n.isReplace,p=n.resetSettings,g=n.effectUrl,O=Object(r.a)(n,l),v=Object(a.a)(Object(a.a)({},O),{},{isGroup:!0,isDoubleGroup:!0,effectGroupId:"".concat(u.id).concat(i.zh),type:"canvas-effect-filter-image",effectId:"canvas-effect",effectName:d,activeEffect:d,isPremiumTexture:!1}),j=null===u||void 0===u||null===(t=u.effectLayer)||void 0===t?void 0:t.settings,m=(null===j||void 0===j?void 0:j.blendMode)||c.a.blendModeConfigs.canvasEffect,y=p?c.a.blendModeConfigs.canvasEffect:m,x={id:"".concat(u.id,"-canvas-effect-id"),maskId:"".concat(u.id,"|image-canvas-mask-filter"),lutId:"".concat(u.id,"|image-canvas-effect-filter"),settings:Object(a.a)(Object(a.a)({},O),{},{blendMode:y,brightness:!p&&(null===j||void 0===j?void 0:j.brightness)?null===j||void 0===j?void 0:j.brightness:0,fade:!p&&(null===j||void 0===j?void 0:j.fade)?null===j||void 0===j?void 0:j.fade:0,saturation:!p&&(null===j||void 0===j?void 0:j.saturation)?null===j||void 0===j?void 0:j.saturation:0,contrast:!p&&(null===j||void 0===j?void 0:j.contrast)?null===j||void 0===j?void 0:j.contrast:0}),resources:Object(a.a)(Object(a.a)({},u.resources),{},{lutUrl:b,maskUrl:n.src,effectUrl:g}),type:"canvas-effect-filter-image",effectName:d};h&&(v=Object(a.a)(Object(a.a)({},v),{},{blendMode:(null===u||void 0===u?void 0:u.settings.blendMode)||c.a.blendModeConfigs.canvasEffect,fade:(null===u||void 0===u?void 0:u.settings.fade)||0,brightness:(null===u||void 0===u?void 0:u.settings.brightness)||0})),Object(s.a)({type:o.l,effectLayer:x,settings:v,id:u.id,resources:{effect_resource_url:f,effectUrl:g},isPremium:null===u||void 0===u?void 0:u.isPremium}),Object(s.a)({type:o.j,id:"".concat(u.id,"-canvas-effect-id")})}}({settings:n,layerArr:f,activeImageLayer:p});case T:return function(e){var t=e.settings,n=e.layerArr,r=e.activeImageLayer,u=t.title,l=t.effectUrl,d=t.preview_url,b=t.maskUrl,f=Object(a.a)(Object(a.a)({},c.a.generateChangeSkySettings()),{},{isGroup:!0,effectGroupId:"",type:"sky",effectId:"sky",cloudType:"cloud",textureId:-1,effectName:u,blendMode:c.a.blendModeConfigs.sky,activeEffect:u,isPremiumTexture:!1});Object(s.a)({type:o.n,activeEffect:u});var h=(null===n||void 0===n?void 0:n.find((function(e){return"sky"===e.type})))||r;h&&(Object(s.a)({type:o.l,isPremium:null===r||void 0===r?void 0:r.isPremium,resources:{effectUrl:l,cloudUrl:d,maskUrl:b||(null===r||void 0===r?void 0:r.resources.maskUrl)},settings:Object(a.a)(Object(a.a)({},f),{},{effectGroupId:"".concat(h.id).concat(i.zh),isPremiumTexture:!1}),id:h.id}),Object(s.a)({type:o.j,id:h.id}))}({settings:n,layerArr:f,activeImageLayer:p});case _:return function(e){var t,n,c,l,d,f,h=e.settings,p=e.activeImageLayer;if(p){var g=h.title,O=h.isReplace,v=h.blendMode,j=Object(r.a)(h,b),m=Object(s.b)(u.td).blobUrl,y={isGroup:!0,isDoubleGroup:!0,effectGroupId:"".concat(p.id).concat(i.zh),effectId:i.qc.sketch,effectName:g,activeEffect:g,svgBlob:m,type:"",isPremiumTexture:!1};Object(s.a)({type:o.n,activeEffect:g});var x={id:"".concat(p.id,"|").concat(i.Of),settings:Object(a.a)(Object(a.a)(Object(a.a)({},null===(t=p.effectLayer)||void 0===t?void 0:t.settings),j),{},{blendMode:O?null===(n=p.effectLayer)||void 0===n||null===(c=n.settings)||void 0===c?void 0:c.blendMode:v,svgBlob:m,type:"",colorRGB1:j.colorRGB1||(null===(l=p.effectLayer)||void 0===l?void 0:l.settings.colorRGB1),colorRGB2:j.colorRGB2||(null===(d=p.effectLayer)||void 0===d?void 0:d.settings.colorRGB2)}),resources:Object(a.a)(Object(a.a)({},null===(f=p.effectLayer)||void 0===f?void 0:f.resources),p.resources),type:i.qc.sketch,active:!0,isEffectLayer:!0};Object(s.a)({type:o.l,effectLayer:x,settings:y,id:p.id,resources:{effectUrl:""},isPremium:null===p||void 0===p?void 0:p.isPremium}),Object(s.a)({type:o.j,id:"".concat(p.id,"|").concat(i.Of)})}}({settings:n,activeImageLayer:p})}},h=n(27),p=n(0),g=function(e){var t=Math.round,n=Object(p.db)(e),r=n.brightness,i=n.saturation,c=n.contrast,o=n.highlights,s=n.clarity,u=n.shadows,l=n.temperature,d=n.hue,b=n.hsl,f=n.globalCompositeOperation,h=n.opacity;return Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)({},r&&{brightness:t(r)}),i&&{saturation:t(i)}),c&&{contrast:t(c)}),o&&{highlights:t(o)}),s&&{clarity:t(s)}),u&&{shadows:t(u)}),l&&{temperature:t(l)}),d&&{hue:t(d)}),b),h&&{opacity:t(h<=1?100*h:h)}),f&&{blendMode:f})},O=function(e){var t=i.qc.duotone,n=i.qc.magic,r=i.qc.colorToning,l=i.qc.rainbow,d=i.qc.lut,b=i.qc.runout,f=i.qc.doubleExposure,O=i.qc.colorTransfer,v=i.qc.canvasEffect,j=i.qc.overlay,m=i.qc.sky,y=i.qc.sketch,x={effectUrl:""},w={};switch(e){case t:w=Object(a.a)({},c.a.generateDuotoneSettings());break;case n:w=Object(a.a)({},c.a.generateMagicSettings());break;case r:case l:w=Object(a.a)(Object(a.a)({},c.a.generateColorToningSettings()),{},{color1:"",color2:"",color3:""});break;case d:w=Object(a.a)({},c.a.generateLutSettings()),x={effectUrl:"",effect_resource_url:""};break;case b:x={effectUrl:""},w=Object(a.a)({},c.a.generateRunOutSettings());break;case f:w=Object(a.a)(Object(a.a)({},c.a.generateDoubleExposureSettings()),{},{overlayColor:null,backgroundColor:null,blendModeWidthColors:"",imageSrc:"",overlayImgSrc:"",effectLayer:{}});break;case O:w=Object(a.a)(Object(a.a)({},c.a.generateColorTransferSettings()),{},{colorTransferEffectId:"",colorTransferEffectUrl:""});break;case v:w={canvasEffectSrc:"",effect_resource_url:"",lutUrl:"",maskUrl:"",effectLayer:{}};break;case j:w={isGroup:!1,isDoubleGroup:!1,effectLayer:{}};break;case m:x={effectUrl:"",cloudUrl:"",maskUrl:""},w=Object(a.a)({},c.a.generateChangeSkySettings());break;case y:w={svgBlob:""}}var A=Object(s.b)(u.c)||{},E=A.node,k=A.layer;E&&k&&Object(h.b)((function(){Object(s.a)({type:o.l,settings:Object(a.a)(Object(a.a)(Object(a.a)({},w),g(E)),{},{effectName:"",isGroup:!1,effectId:"",type:"",activeEffect:i.ge,effectGroupId:"".concat(Object(p.db)(E).id).concat(i.zh)}),resources:Object(a.a)(Object(a.a)({},x),{},{effectUrl:""}),isRemoveEffectLayer:!0,active:!0,id:k.id,isPremium:k.isPremium}),Object(s.a)({type:o.n,activeEffect:i.ge})}))}},,function(e,t,n){"use strict";n.d(t,"h",(function(){return i})),n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return d})),n.d(t,"d",(function(){return f.b})),n.d(t,"e",(function(){return f.c})),n.d(t,"f",(function(){return f.d})),n.d(t,"g",(function(){return f.e})),n.d(t,"i",(function(){return f.f})),n.d(t,"j",(function(){return f.g})),n.d(t,"c",(function(){return f.a}));var r=n(1),a=n(0),i=function(e){Object(a.H)(e,r.m.join(" "))},c=n(218),o=n(17),s=n(6),u=n(49),l=n(313),d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.a;Object(a.i)(e,"mousedown",(function(n){Object(a.H)(e,"click"),Object(u.f)(e)?Object(a.i)(e,"click",(function(n){Object(u.f)(e)&&t(e,n)})):e.attrs.id.includes(r.zh)&&e.children.length?t(e.children[0],n):t(e,n),r.vh.editorOnly&&e.attrs.layerType===r.pg&&(Object(s.a)(o.a.actions.setSelectedCategory(r.Ke)),Object(s.a)(o.a.actions.setTemplateCollageClicked(!0)))}))},b=function(e,t){d(e,t),Object(c.a)(e)},f=n(276)},,function(e,t,n){"use strict";n.d(t,"d",(function(){return O})),n.d(t,"c",(function(){return j})),n.d(t,"f",(function(){return E})),n.d(t,"e",(function(){return S})),n.d(t,"h",(function(){return T.a})),n.d(t,"g",(function(){return L})),n.d(t,"b",(function(){return P})),n.d(t,"a",(function(){return B})),n.d(t,"i",(function(){return H}));var r=n(2),a=n(46),i=n.n(a),c=n(52),o=n(1),s=n(144),u=n(29),l=n(168),d=n(47),b=n(220),f=n(0),h=n(51),p=n(178),g=n(11),O=function(e,t,n){var a={width:null===n||void 0===n?void 0:n.width,height:null===n||void 0===n?void 0:n.height},O=[],v=Object(f.db)(e).gridData,m=new p.a(v,{size:a}).collageCells,y=[];return m.forEach((function(e,t){var r,a,c=(null===n||void 0===n?void 0:n.cellSettings)&&n.cellSettings[t],p=(null===c||void 0===c?void 0:c.id)||j(o.Cc),v=Object(f.r)({id:p,cellData:e,name:o.Cc,is_placeholder_active:!0,clipFunc:function(e){var t=this.findAncestor(".".concat(o.Bc)),n=this.getAttr("cellData");if(n){var r=n.calculateApplyingBorderWidth(t.getAttr("gridBorderSize")||0,t.getAttr("gridThickness")||0),a=n.applyBorder(n.computedVerticesObjects,r+3);Object(s.a)(e,a,{borderRadius:t.getAttr("gridBorderRadius")||0});var i=this.findOne(".".concat(o.Dc));(null===i||void 0===i?void 0:i.getAttr("is_placeholder_active"))&&!c&&(e.fillStyle=Object(g.c)(g.b.paColor71),e.fill())}}}),m=Object(f.y)({cellGroupId:p,name:o.Ec,sceneFunc:function(e,t){var n=e._context,r=t.findAncestor(".".concat(o.Bc));if(r instanceof i.a.Group){var a=r.findOne("#".concat(t.getAttr("cellGroupId"))),c=a.getAttr("cellData");if(c){var u=c.calculateApplyingBorderWidth(r.getAttr("gridBorderSize")||0,r.getAttr("gridThickness")||0);if(a.getAttr("is_cell_active")){var l=c.applyBorder(c.computedVerticesObjects,u);Object(s.a)(n,l),n.lineWidth=2,n.strokeStyle=Object(g.c)(g.b.paColor1),n.stroke(),l=c.applyBorder(c.computedVerticesObjects,u+2),Object(s.a)(n,l),n.lineWidth=2,n.strokeStyle=Object(g.c)(g.b.paColor9),n.stroke()}}}}}),x=Object(f.s)({isReplaceAble:!1,is_settings:!0,is_placeholder_active:!0,name:o.Dc,id:p.replace(o.Cc,o.Dc)}),w=e.getCellComputedSize(),A=w.width,k=w.height,C=e.getCellComputedCenter(),S=C.x,T=C.y,_=e.getCellComputedGeometryCenter(),I=_.x,R=_.y,L=Math.max(Math.abs(I-S),Math.abs(R-T));if((null===c||void 0===c||null===(r=c.settings)||void 0===r?void 0:r.url)&&!(null===c||void 0===c||null===(a=c.settings)||void 0===a?void 0:a.is_placeholder_active)){var P=c.settings,G=P.url,M=P.zoom,B=P.brightness,D=P.contrast,N=P.saturation,z=P.rotate,H=P.highlights,Y=P.hsl,X=c.x,U=c.y,F=c.imageWidth,W=c.imageHeight;O.push(Object(u.a)(G).then((function(e){v.setAttr("is_placeholder_active",!1);var t=Object(l.a)(c.settings,e,x),n=t.scaledWidth,r=t.scaledHeight;x.setAttrs({is_placeholder_active:!1,is_settings:!0,draggable:!0,isErasable:!1,isCropAble:!1,isReplaceAble:!1,image:e,x:X,y:U,width:F,height:W,offsetX:n/2,offsetY:r/2,highlights:H,hsl:Object(b.a)(Y)}),Object(d.h)("zoom",x,M),Object(d.h)("rotate",x,z),x.filters([h.a.IEAdjust,h.a.IEHSL]).contrast(null!==D&&void 0!==D?D:0).saturation(null!==N&&void 0!==N?N:0).brightness(null!==B&&void 0!==B?B:0)})))}else O.push(E(A,k,8*L).then((function(e){var t=e.width/4,n=e.height/4;x.setAttrs({image:e,width:t,height:n,x:S,y:T,offsetX:t/2,offsetY:n/2})})));v.add(x),y.push(m,v)})),Promise.all(O).then((function(){var a=[];e.find(".".concat(o.Cc)).each((function(t,i){var s=n?n.cellSettings&&n.cellSettings[i].settings:{};if(Object(f.tb)(t)){var u=Object(f.db)(t).is_placeholder_active,l=Object(r.a)(Object(r.a)({},c.a.generateFreeGridCellSettings()),{},{is_placeholder_active:u}),d=Object(f.R)(t,".".concat(o.Dc));a.push(c.a.generateNewLayer({id:Object(f.db)(d).id,konva_tagName:t.className,type:o.Cc,id2:Object(f.db)(e).id,resources:{url:Object(f.Qb)(t,{pixelRatio:.5,quality:1})},defaultSettings:Object(r.a)(Object(r.a)({},l),s)}))}})),t(a)})),y},v=n(179),j=function(e){return"".concat(e,"-").concat(Object(v.a)())},m=n(7),y=n.n(m),x=n(10),w=n(214),A=n(219),E=function(e,t,n){return new Promise((function(r,a){var i=Object(w.a)(e,t).phImage;i.onload=Object(x.a)(y.a.mark((function c(){var o;return y.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,Object(A.a)({phImage:i,width:4*e,height:4*t,offsetFromFrame:n});case 3:if(o=c.sent){c.next=6;break}return c.abrupt("return",a(new Error("Could not load placeholder image 1")));case 6:return c.abrupt("return",r(o));case 9:return c.prev=9,c.t0=c.catch(0),c.abrupt("return",a(new Error("Could not load placeholder image 2")));case 12:case"end":return c.stop()}}),c,null,[[0,9]])}))),i.onerror=function(){return a(new Error("Could not load placeholder image 3"))}}))},k=n(16),C=n(133),S=function(e,t){if(Object(f.tb)(e)){var n=Object(f.db)(e);return Object(r.a)(Object(r.a)({},n),{},{cellSettings:Object(C.g)(e),grid:n.gridData,type:k.b.free_grid,index:t})}},T=n(446),_=n(218),I=n(4),R=function(e){var t=Object(f.jb)(e);e.on("mouseover",(function(){Object(f.Lb)(e,Object(I.a)({},o.rd,!0)),Object(f.I)(t)})),e.on("mouseout",(function(){Object(f.Lb)(e,Object(I.a)({},o.rd,!1)),Object(f.I)(t)}))},L={counterUniqueId:0,getBrashedImg:function(e,t,n){return Object(x.a)(y.a.mark((function r(){var a,i,c,o,s,u,l,d,b,f;return y.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=document.createElement("canvas"),r.next=3,T.a.getImageData(e,n);case 3:if(i=r.sent,a.width=i.width,a.height=i.height,c=a.getContext("2d")){r.next=9;break}return r.abrupt("return");case 9:return c.drawImage(i,0,0),c.globalCompositeOperation="destination-in",o=.37,s=-a.width*o/2,u=-a.height*o/2,l=1.37*a.width,d=1.37*a.height,r.next=18,T.a.getImageData(t,n);case 18:return b=r.sent,c.drawImage(b,s,u,l,d),(f=new Image).src=a.toDataURL("image/png"),r.abrupt("return",f);case 23:case"end":return r.stop()}}),r)})))()},horizontalFlippe:function(e){var t=Object(f.db)(e),n=t.scaleX,r=t.x,a=t.width;Object(f.Lb)(e,{scaleX:-n,x:r+a})},verticalFlippe:function(e){var t=Object(f.db)(e),n=t.scaleY,r=t.y,a=t.height;Object(f.Lb)(e,{scaleY:-n,y:r+a})},rotate:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!e||!t.rect)return!1;var r=t.rect,a=r.x,i=r.y,c=r.w,o=r.h,s=c*n/2,u=o*n/2;Object(f.Lb)(e,{x:a*n+s,y:i*n+u,offsetY:u,offsetX:s})},addHoverEffects:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Object(f.db)(e)[o.Ed]===o.pg?R(e):Object(_.a)(e,t)},addId:function(e,t){var n,r=t||(null===(n=e.className)||void 0===n?void 0:n.toLowerCase())||e.nodeType.toLowerCase(),a="".concat(r,"_").concat(o.kg,"_").concat(Date.now().toString(36),"-").concat(this.counterUniqueId++);return Object(f.Lb)(e,{id:a}),e},addDragBorders:function(e,t){t.dragBoundFunc((function(n){var r=.1,a=n.y,i=n.x;return n.y<-t.height()*r?a=-t.height()*r:n.y>e.height()-.9*t.height()&&(a=e.height()-.9*t.height()),n.x<-t.width()*r?i=-t.width()*r:n.x>e.width()-.9*t.width()&&(i=e.width()-.9*t.width()),{x:i,y:a}}))},hexAToRGBA:function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},imageCalculations:function(e,t,n){var r=Math.max(t.width*n.width/e.width,t.height*n.height/e.height);return{imageWidth:e.width*r,imageHeight:e.height*r}},getGridPreviewDataURL:function(e,t){var n=document.createElement("canvas");n.width=2*t.width,n.height=2*t.height;var r=n.getContext("2d");if(!r)return"";var a={width:n.width,height:n.height};return new p.a({paths:e.paths},{size:a}).collageCells.forEach((function(e){var t=e.applyBorder(e.computedVerticesObjects,5);Object(s.a)(r,t,{borderRadius:14}),r.fillStyle=Object(g.c)(g.b.paColor69),r.fill(),r.lineWidth=1,r.strokeStyle=Object(g.c)(g.b.paColor71),r.stroke()})),n.toDataURL("image/png",1)}},P=function(e){var t={};return Object(f.S)(e,".".concat(o.Cc)).each((function(n){var r=j(o.Cc),a=r.replace(o.Cc,o.Dc);if(Object(f.tb)(n)){var i=Object(f.db)(n).id,c=Object(f.R)(n,".".concat(o.Dc)),s=Object(f.R)(e,(function(e){return Object(f.db)(e).cellGroupId===i}));Object(f.Lb)(s,{cellGroupId:r}),t[Object(f.db)(c).id]=a,Object(f.Lb)(c,{id:a}),function(e,t,n){var r=Object(f.R)(e,".".concat(o.Zb));if(Object(f.tb)(r)){var a=Object(f.db)(r).id;Object(f.Lb)(r,{id:null===a||void 0===a?void 0:a.replace(t,n)}),Object(f.fb)(r).forEach((function(e){var r=Object(f.db)(e).id;Object(f.Lb)(e,{id:null===r||void 0===r?void 0:r.replace(t,n)})}))}}(n,i.replace(o.Cc,""),r.replace(o.Cc,""))}Object(f.Lb)(n,{id:r})})),t},G=n(57),M=n(49),B=function(e){Object(G.a)(e,(function(t,n){return function(e,t){var n=Object(M.f)(e)?Object(f.N)(t.target,".".concat(o.Cc),!0)||t.target:e;Object(G.j)(n,t)}(e,n)}))},D=function(e,t){var n=e.find(".".concat(o.Cc)).toArray(),r=e.getAttr("gridData"),a=new p.a(r,{size:t}).collageCells;return n.forEach((function(e,t){var n=a[t];e.setAttr("cellData",n)})),n},N=function(e,t,n,a){var i=Object(f.db)(e).image;Object(f.rb)(e)&&Object(f.n)(e);var c=Number(null===i||void 0===i?void 0:i.width),o=Number(null===i||void 0===i?void 0:i.height);if(c&&o){var s=Math.max(t/c,n/o);Object(f.Lb)(e,Object(r.a)(Object(r.a)({},a),{},{offsetX:c*s/2,offsetY:o*s/2,width:c*s,height:o*s}))}},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,i=e.find((function(e){return e.id===n})),c=null===i||void 0===i?void 0:i.imagesOldAttrs.find((function(e){return e.id===r})),o=(null===c||void 0===c?void 0:c.x)&&(null===t||void 0===t?void 0:t.transformerScaleX)?(c.x||0)*(null===t||void 0===t?void 0:t.transformerScaleX):a.x,s=(null===c||void 0===c?void 0:c.y)&&(null===t||void 0===t?void 0:t.transformerScaleY)?(c.y||0)*(null===t||void 0===t?void 0:t.transformerScaleY):a.y;return{x:o,y:s}},H=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r={};Object.keys(t).forEach((function(e){void 0!==t[e]?r[e]=t[e]:"rotation"===e&&(r[e]=0)})),r.clip={x:0,y:0,width:r.width,height:r.height},Object(f.Lb)(e,r);var a=Object(f.db)(e),i=a.id,c=a.size,s=D(e,c);s.forEach((function(e){if(Object(f.tb)(e)){var r=Object(f.db)(e).cellData,a=r.getCellComputedSize(),c=a.width,s=a.height,u=r.getCellComputedGeometryCenter(),l=Object(f.R)(e,".".concat(o.Dc));if(!Object(f.ub)(l))return;var d=Object(f.db)(l),b=d.estimatedZoomValue,h=void 0===b?0:b,p=d.is_placeholder_active,g=d.width,O=d.height,v=d.id;if(p)N(l,c,s,u);else{var j=z(n,t,i,v,u),m=j.x,y=j.y,x=Math.max(c/g,s/O),w=x+h,A=x+h,E=Object(f.R)(e,".".concat(o.Zb)),k=Object(f.tb)(E)?E:l;Object(f.Lb)(k,{scaleX:w,scaleY:A,x:m,y:y,scaleXTransformer:x,scaleYTransformer:x})}}}))}},,,function(e,t,n){"use strict";n.d(t,"b",(function(){return T})),n.d(t,"c",(function(){return _})),n.d(t,"m",(function(){return I})),n.d(t,"g",(function(){return R})),n.d(t,"i",(function(){return L})),n.d(t,"e",(function(){return P})),n.d(t,"f",(function(){return G})),n.d(t,"d",(function(){return M})),n.d(t,"h",(function(){return B})),n.d(t,"n",(function(){return D})),n.d(t,"l",(function(){return N})),n.d(t,"k",(function(){return z})),n.d(t,"o",(function(){return H})),n.d(t,"j",(function(){return Y})),n.d(t,"a",(function(){return X}));var r=n(40),a=n(42),i=n(7),c=n.n(i),o=n(10),s=n(217),u=n.n(s),l=n(112),d=n(1),b=n(226),f=n(64),h=(n(211),n(515)),p=n(29),g=n(157),O=n(247),v=n(260),j=null,m=null,y=null,x=null,w=null,A={},E=new Set,k=/(?:\.([^.]+))?$/,C=function(e,t){var n=k.exec(e)[0],r=e.replace(n,""),a=u()(r);return"".concat(t).concat(a).concat(n||"")},S=new Map,T=function(){var e=Object(o.a)(c.a.mark((function e(t){var n,r,a,i,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.json,r=t.skipHash,a=void 0!==r&&r,!S.has(n)){e.next=3;break}return e.abrupt("return",S.get(n));case 3:return i=a?"".concat(d.fd,"/effects/").concat(n):C(n,"".concat(d.fd,"/effects/")),e.next=6,O.a.get(i,{includeContentType:!1});case 6:return(o=e.sent).errorMessage||S.set(n,o),e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){if(A[e])return Promise.resolve({resource:A[e],name:e});var t=w.createBuilder(e).requiredResources(),n=new j.fx.resources.VectorResource;return 0===t.size()?Promise.resolve({resource:n,name:e}):new Promise((function(r,a){for(var i=[],c=function(e){var n=t.get(e),r=C(n.fileName,"".concat(d.fd,"/res/")),c=j.fx.resources,o=n.isEncrypted;switch(n.type){case j.fx.resources.ResourceType.File:i.push(Object(f.a)(r).then((function(e){return e.text()})).then((function(e){return new c.FileContentResource(e,n)})));break;case j.fx.resources.ResourceType.Image:switch(n.exactType){case j.ResourceExactType.ARGB:case j.ResourceExactType.LUT_ARGB:i.push(Object(f.a)(r).then((function(e){return e.arrayBuffer()})).then((function(e){return j.createImageARGB(e,o)})).then((function(e){var t=new c.ImageBufferARGB8Resource(e,n);return e.delete(),t})));break;case j.ResourceExactType.Alpha:i.push(Object(f.a)(r).then((function(e){return e.arrayBuffer()})).then((function(e){return j.createImage8(e,o)})).then((function(e){var t=new c.ImageBuffer8Resource(e,n);return e.delete(),t})));break;default:a(new Error("Unsupported image resource type."))}break;default:a(new Error("Unsupported resource type."))}},o=0;o<t.size();++o)c(o);t.delete(),Promise.all(i).then((function(t){t.forEach((function(e){return n.push_back(e)})),r({resource:n,name:e})}))}))}))},I=function(e){null===j&&((j=e).canvas=document.createElement("canvas"),j.canvas.width=200,j.canvas.height=200,(m=new j.GLSession(500)).accessGraph((function(){y=j.graph.value.Image_ARGB_8888(),x=j.graph.undocumented.RXImageView({value:j.graph.value.Image_ARGB_8888(),background:j.graph.value.Image_ARGB_8888(),size:j.graph.value.Point2i(),name:"ImageView"})})),w=j.fx.core.BuilderFactory.factory(),Object(v.a)(["adjust_tools.json","hsl_tool.json"]))},R=function(){return j},L=function(){return m},P=function(){return y},G=function(){return x},M=function(){return w},B=function(e){return A[e]},D=function(e,t){return A[e]=t},N=function(e){return y.setValue(e)},z=function(){m&&m.accessGraph((function(){y=j.graph.value.Image_ARGB_8888()}))},H=function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n;if(l.isSafari){(n=document.createElement("canvas")).width=t.width,n.height=t.height;var r=n.getContext("2d");null===r||void 0===r||r.drawImage(t,0,0)}else n=t;n.toBlob((function(t){e(URL.createObjectURL(t))}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(e,t){!E.has(e)&&t&&(w.registerEffectFromData(JSON.stringify(t),"",""),E.add(e))},X=function(){function e(t){var n=this;Object(r.a)(this,e),this.url=void 0,this.abortController=void 0,this.readyPromise=void 0,this.statusOriginalImage=void 0,this.statusResizeImage=void 0,this.image=null,this.resizedImage=null,this.resizedImageWidth=0,this.resizedImageHeight=0,this.url=t,this.statusOriginalImage=!1,this.statusResizeImage=!1,this.abortController=new AbortController;var a="gif"===Object(h.a)(this.url);this.readyPromise=(a?e.loadGif(this.url):fetch(this.url,{signal:this.abortController.signal})).then((function(e){return e.arrayBuffer()})).then((function(e){return n.image=j.createImageARGB(e),n.statusOriginalImage=!0,n.image}))}return Object(a.a)(e,[{key:"resizeImage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.hh,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.hh;if(!this.statusOriginalImage)throw new Error("resizeImage must be called after promise resolve");var n=Object(g.a)(this.image.width,this.image.height,e,t);return this.resizedImage=j.resizeImageARGB(this.image,n.width,n.height,0,j.InterpolationType.Linear),this.resizedImageWidth=n.width,this.resizedImageHeight=n.height,this.statusResizeImage=!0,this.resizedImage}},{key:"useResizeImage",value:function(){var e=this;if(!this.statusResizeImage)throw new Error("useOriginalImage must be called after promise resolve");m.accessGraph((function(){N(e.resizedImage)}))}},{key:"delete",value:function(){var e,t;this.statusOriginalImage?null===(t=this.image)||void 0===t||t.delete():this.abortController.abort();null===(e=this.resizedImage)||void 0===e||e.delete()}}],[{key:"loadGif",value:function(){var e=Object(o.a)(c.a.mark((function e(t){var n,r,a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=document.createElement("canvas"),r=n.getContext("2d"),e.next=4,Object(p.a)(t);case 4:return a=e.sent,n.width=a.width,n.height=a.height,null===r||void 0===r||r.drawImage(a,0,0,a.width,a.height),e.next=10,Object(b.a)(n);case 10:return i=e.sent,n.remove(),e.abrupt("return",Object(f.a)(i));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}()},function(e,t,n){"use strict";var r=n(7),a=n.n(r),i=n(10),c=n(4),o=n(84),s=n(15),u=n(2),l=n(40),d=n(42),b=n(14),f=n(36),h=n(283),p=n.n(h),g=n(1),O=n(6),v=n(9),j=n(0),m=n(265),y=n(332),x=n(19),w=n(466),A=n(17),E=["template_size"],k=["item_id","item"],C=["sketch","sky_change","canvas","color_toning","style_transfer","color_exposure","duotone_effects","light","magic","rainbow_filters","pixel_stretch","mask"].concat(Object(b.a)(g.jd)),S=["sticker","text","shapes","add_photo"],T=[g.zc],_=["id","align","fontStyle","textDecoration","none","textTransform","500"],I=["lineHeight","letterSpacing","fontSize","fontFamily","textTransform"],R=function(){function e(){Object(l.a)(this,e),this.analyticsService=f.a,this.current="",this.routePushes=[],this.appliedFromSlider={text:[],adjust:[],adjust_hsl:[]},this.pendingEvents=[],this.textSettingsChanged=!1,this.defaultSettings={text:[],adjust:[]},this.oldExportPopupAction=Object(u.a)({},e.oldDefaultPopupAction),this.oldExportPopupIsPremium=[]}return Object(d.a)(e,[{key:"isSpecialSettings",value:function(e,t){return!(["text_align","textTransform"].includes(e)&&["none","left"].includes(t))}},{key:"generateSettings",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"apply",n=Object(y.a)(e),r=this.defaultSettings[n];if(r&&!(r.length<1)){var a=e.settings,i=[],c=[],o=r.filter((function(t){return t.id===e.id}))[0],s=Object(m.a)(a,n);for(var u in s)a[u]!=o[u]&&this.isSpecialSettings(u,a[u])&&(i.push(u),c.push({name:u,value:a[u]}));var l=!!i.length,d=l||["undo","redo"].includes(t)?t:"cancel",b=this.textSettingsChanged&&!l&&"try_cancel",f=b||d;return{item:"text"===n?"font":n,action:f,applied_sub_tools:i,default_settings_changed:!b&&l,is_premium:Boolean(e.isPremium),applied_tools_settings:c,applied_from_slider:this.appliedFromSlider[n]}}}},{key:"getDefaultSettings",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"adjust";return this.defaultSettings[e]}},{key:"generateNewSettings",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"apply",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"adjust",a=this.defaultSettings[r];if(a&&!(a.length<1)){var i=a.filter((function(t){return t.id===e.id})),c=Object(s.a)(i,1),o=c[0];if(o){var u=[],l=[],d=function(e){return!_.includes(e)&&"left"!==t[e]&&t[e]!==o[e]};if(Object(x.w)(e)){var b=e,f=b.fontStyle,h=b.align,p=b.textTransform,g=b.textDecoration;h&&"left"!==h&&u.push(h),f&&f!==o.fontStyle&&u.push(f),g&&"underline"===g&&u.push(g),p&&("none"===p?u.push("default"):u.push(p))}for(var O in t)d(O)&&I.includes(O)&&(u.push(O),l.push({name:O,value:t[O]}));var v=!!u.length,j=v||["undo","redo"].includes(n)?n:"cancel",m=this.textSettingsChanged&&!v&&"try_cancel",y=m||j;return{item:"text"===r?"font":r,action:y,applied_sub_tools:u,default_settings_changed:!m&&v,is_premium:Boolean(e.meta.isPremium),applied_tools_settings:l,applied_from_slider:this.appliedFromSlider[r]}}}}},{key:"setAppliedFromSlider",value:function(e,t){var n=this.appliedFromSlider[t];n.includes(e)||n.push(e)}},{key:"init",value:function(){this.analyticsService.init(g.p,g.q,g.o,g.vh.analytics)}},{key:"sendEvent",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"custom_event"===t?this.analyticsService.sendEvent(e,n):this.analyticsService.sendEventNonInteraction(e,n)}},{key:"pageView",value:function(e){var t,n,r;if((this.routePushes.pop()||"").split("?")[0]!==e.split("?")[0]){this.routePushes.push(e),this.analyticsService.pageView(e);var a=null===e||void 0===e||null===(t=e.split("?"))||void 0===t||null===(n=t[0])||void 0===n||null===(r=n.split("/"))||void 0===r?void 0:r.pop();"string"===typeof a&&a.length&&this.sendEvent("screen_open","custom_event_non_interaction",{screen_name:a})}}},{key:"trigerSettingsAction",value:function(e,t,n){var r=this.generateSettings(e,t);r&&this.triggerPhotoEditAction(r),this.appliedFromSlider[n]=[]}},{key:"setTried",value:function(){this.textSettingsChanged=!0}},{key:"setDefaultettings",value:function(e,t){this.defaultSettings[t].push(e)}},{key:"trigerChooserOpen",value:function(e){var t=e.tool,n=e.source,r=e.license;this.sendEvent("chooser_open","custom_event_non_interaction",{tool:t,source:n,license:r})}},{key:"triggerFontSettings",value:function(e){var t={action:"apply",applied_from_slider:this.appliedFromSlider.text,applied_sub_tools:e.map((function(e){return e.name})),applied_tools_settings:e,default_settings_changed:!0,is_premium:!1,item:"font"};this.triggerPhotoEditAction(t)}},{key:"triggerPhotoEditAction",value:function(e,t){var n=Object(O.b)((function(e){return{newCanvasEnabled:Object(v.jc)(e),templateData:Object(v.U)(e)}})),r=n.templateData,a=r.template_size,i=Object(o.a)(r,E),c=n.newCanvasEnabled,s=e.item_id,l=e.item,d=Object(o.a)(e,k),b=e.size||a,f=s?String(s):"",h=l===g.Vb?g.Ub:l;if(this.sendEvent("photo_edit_item_action","custom_event",Object(u.a)(Object(u.a)(Object(u.a)({},d),{},{item:h,item_id:f,braze:!0},b?{template_size:b}:{}),i.template_id?i:{})),!c){if(e.category_name&&C.includes(e.category_name))return this.oldExportPopupAction["mask"===e.category_name?"mask":"effect"]=!0,void this.oldExportPopupIsPremium.push({id:String(e.item_id),isPremium:e.is_premium,type:e.category_name,subcategory:e.subcategory_name});(null===t||void 0===t?void 0:t.isUnique)&&(this.oldExportPopupIsPremium=this.oldExportPopupIsPremium.filter((function(t){return t.type!==e.item}))),(null===t||void 0===t?void 0:t.clearIsPremium)&&(this.oldExportPopupIsPremium=[]),this.oldExportPopupAction[e.item]=!0,this.oldExportPopupIsPremium.push({id:String(e.item_id),isPremium:e.is_premium,type:e.item,subcategory:e.subcategory_name})}}},{key:"page",get:function(){return this.current},set:function(e){this.current=e}},{key:"addPendingEvent",value:function(e,t,n,r){this.pendingEvents.push({eventAction:e,eventName:t,type:n,data:r})}},{key:"firePendingEvents",value:function(e){var t=this;this.pendingEvents.length&&(this.pendingEvents=this.pendingEvents.filter((function(n){var r=n.type,a=n.eventAction,i=n.data,c=n.eventName,o=r===e;return o&&t.sendEvent(a,c,i),!o})))}},{key:"oldResetExportPopupAction",value:function(){this.oldExportPopupAction=Object(u.a)({},e.oldDefaultPopupAction),this.oldExportPopupIsPremium=[]}},{key:"generateExportPopupAction",value:function(e,t){var n=this,r=Object(O.b)((function(e){return{layers:Object(v.ac)(e),baseGroup:Object(v.ad)(e),newCanvasEnabled:Object(v.jc)(e)}})),a=r.layers,i=r.baseGroup;if(r.newCanvasEnabled)return this.generateNewExportPopupAction(e,t);var o=Object(O.b)(v.ie),s=o.photos.filter((function(e){return"fte"===e.license})),l=o.stickers.filter((function(e){return!e.isPremium})),d=[].concat(Object(b.a)(s),Object(b.a)(l)).map((function(e){return String(e.id)})),f={sticker:!1,add_photo:!1,text:!1,shape:!1,mask:!1,effect:!1,is_remix:!!d.length,is_unsplash:!1},h=[],p=!1,m=!1,y=new Set;a.forEach((function(e){var t=e.id,r=e.settings,a=e.resources,c=void 0===a?{}:a;if(y.add(t),(null===c||void 0===c?void 0:c.id)&&y.add(null===c||void 0===c?void 0:c.id),(t.includes(g.Yf)&&!t.includes(g.kg)||e.elementType===g.rc.SVG_STICKERS)&&(f.sticker=!0),(t.includes(g.Je)||t.includes(g.Hd))&&(f.add_photo=!0),t.includes(g.tg)&&!t.includes(g.kg)){f.text=!0;var o=n.generateSettings(e,"download");o&&(n.triggerPhotoEditAction(o),h=o.applied_sub_tools||[])}if(!t.includes(g.x)&&!t.includes(g.Bc)){var s=n.generateSettings(e,"download");(null===s||void 0===s?void 0:s.default_settings_changed)&&s.default_settings_changed&&n.triggerPhotoEditAction(s)}if(t.includes(g.Af)&&e.elementType!==g.rc.SVG_STICKERS&&(f.shape=!0),r.effectId){var u=i&&Object(j.db)(Object(j.L)(i,"#".concat(t,"-").concat(g.Zb))).effectType;m=m||u!==g.qc.overlay,p=u===g.qc.overlay}c.type!==g.Pg||f.is_unsplash||(f.is_unsplash=!0)})),f.mask=p,f.effect=m;var x=Object(u.a)(Object(u.a)({},this.oldExportPopupAction),f),w=this.oldExportPopupIsPremium.find((function(e){return e.hasOwnProperty("template")})),A=Object.keys(x).filter((function(e){return x[e]})),E=Array.from(y);this.oldExportPopupIsPremium=this.oldExportPopupIsPremium.filter((function(e){return!(!e.subcategory||!T.includes(e.subcategory))||(!S.includes(e.type)||E.includes(e.id))}));var k=this.oldExportPopupIsPremium.reduce((function(e,t){return e.some((function(e){return t.type in e&&g.we.includes(t.type)}))||e.push(Object(c.a)({},t.type,t.isPremium)),e}),[]);return Object(u.a)(Object(u.a)({},x),{},{parent_photos_ids:d,tool_names:A,is_premium:k,font_sub_tools:h},(null===w||void 0===w?void 0:w.hasOwnProperty("template"))?{template_is_premium:w.isPremium}:{})}},{key:"generateNewExportPopupAction",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Object(O.b)((function(e){return{photoStickerIds:Object(v.he)(e),layerParams:Object(v.ge)(e),premiumData:Object(v.Qc)(e)}})),a=r.photoStickerIds,i=r.layerParams,c=i.layers,o=i.adjustments,s=i.params,l=i.textIds,d=r.premiumData,f=[].concat(Object(b.a)(d),Object(b.a)(t)),h=(d.find((function(e){return e.template}))||{}).template,g=[];c.forEach((function(t){if(Object(x.w)(t)&&Object.keys(o.textAdjustments).length){var n=e.generateNewSettings(t,o.textAdjustments,"download","text");n&&(e.triggerPhotoEditAction(n),g=n.applied_sub_tools||[])}}));var j=Object.keys(s).filter((function(e){return s[e]}));return Object(u.a)(Object(u.a)(Object(u.a)({},s),{},{tool_names:[].concat(Object(b.a)(j),Object(b.a)(n)),is_premium:f,font_sub_tools:g,parent_photos_ids:a},p()(h)?{}:{template_is_premium:h}),{},{appsFlyer:!0,text_ids:l})}},{key:"hotKeyAction",value:function(e){var t=Object(O.b)(v.e);this.sendEvent("keyboard_shortcut","custom_event",{screen_name:"editor",hotkey_command:e,item:null===t||void 0===t?void 0:t.type})}},{key:"triggerExportExperimentVariant",value:function(e,t){this.analyticsService.pushDataLayer({event:"experiment_variant_trigger",data:{experimentVersion:"".concat(e,".").concat(t)}})}},{key:"handleTemplateEvent",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i,c,o,s,u=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:null,i=u.length>2&&void 0!==u[2]?u[2]:"personal",e.next=4,Object(w.a)(t);case 4:if(c=e.sent){e.next=7;break}return e.abrupt("return");case 7:o=((null===(n=c.ratios)||void 0===n?void 0:n.filter((function(e){return e!==g.n})))||[])[0]||g.n,s={licenses:i,template_size:o,template_id:c.templateId,template_tag:(c.tags||[]).join(", "),premium_template:c.isPremium},Object(O.a)(A.a.actions.setCurrentTemplateData(s)),this.triggerPhotoEditAction({position:r,item:"template",item_id:t,action:"apply",is_premium:c.isPremium,size:o,screen_name:"photo_editor"},{clearIsPremium:!0});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();R.oldDefaultPopupAction={adjust:!1,adjust_hsl:!1,template:!1,tool_remove:!1,tool_cutout:!1,mask:!1,effect:!1},t.a=new R},function(e,t,n){"use strict";var r=n(2);n(773);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.assign({},t);if(n.signal)throw new Error("Signal not supported in timeoutable fetch");var a=new AbortController,i=a.signal;return fetch(e,Object(r.a)({signal:i},n))}},,,function(e,t,n){"use strict";var r=n(15),a=n(1),i=n(6),c=n(9),o=n(0),s=n(47);t.a=function(e){var t=e.effectType,n=e.isStageBatchDraw,u=void 0!==n&&n,l=Object(i.b)(c.c);if(null===l||void 0===l?void 0:l.node){var d=Object(o.N)(l.node,(function(e){return Object(o.db)(e).id.includes(a.zh)}));if(t&&d){var b=!1,f=a.qc.colorToning,h=a.qc.rainbow,p=a.qc.runout,g=a.qc.magic,O=a.qc.lut,v=a.qc.duotone,j=a.qc.sketch,m=a.qc.doubleExposure,y=a.qc.canvasEffect,x=a.qc.colorTransfer,w=a.qc.overlay,A=a.qc.sky,E=a.qc.imageEngine;switch(t){case f:case h:var k=Object(o.R)(d,(function(e){return Object(o.db)(e).id.includes("rect-effect")}));if(!k)return;Object(o.G)(k);var C=Object(o.R)(d,"Image");if(!C)return;Object(o.Lb)(C,{is_settings:!1}),Object(o.Mb)(C,""),Object(o.H)(C,"mouseenter"),Object(o.H)(C,"mouseleave"),b=!0;break;case x:var S=Object(o.R)(d,(function(e){return Object(o.db)(e).id.includes("color-transfer-img")}));if(!S)return;Object(o.G)(S),b=!0;break;case g:var T=Object(o.R)(d,(function(e){return Object(o.db)(e).id.includes("image-magic-effect")}));if(!T)return;Object(o.G)(T),b=!0;break;case m:var _=Object(o.R)(d,(function(e){return Object(o.db)(e).id.includes(a.wb)}));if(!_)return;Object(o.G)(_);var I=Object(o.R)(d,"Image"),R=Object(i.b)(c.e);Object(o.Lb)(I,{is_settings:!0,filters:[]}),Object.keys(R.settings).forEach((function(e){s.e.hasOwnProperty(e)&&s.e[e](I.filters()||[],I),s.d.hasOwnProperty(e)&&s.d[e](R.settings[e],I)}));break;case v:var L=Object(o.R)(d,(function(e){return Object(o.db)(e).id.includes("duotone-image")}));if(!L)return;Object(o.G)(L),b=!0;break;case j:var P=Object(o.L)(d,(function(e){return Object(o.db)(e).id.includes(a.Of)}));Object(o.G)(P);var G=Object(o.R)(d,(function(e){return Object(o.db)(e).id.includes(a.Qf)}));if(G){Object(o.G)(G);var M=Object(o.R)(d,"Image");M&&Object(o.Lb)(M,{visible:!0})}var B=Object(o.R)(d,"Image");Object(o.Lb)(B,{visible:!0}),b=!0;break;case E:var D=Object(o.fb)(d),N=Object(r.a)(D,2),z=N[0],H=N[1];if(!H)return;Object(o.G)(H),Object(o.Ob)(z);break;case O:var Y=Object(o.R)(d,(function(e){return Object(o.db)(e).id.includes("image-lut-filter")}));if(!Y)return;Object(o.G)(Y),b=!0;break;case y:var X=Object(o.R)(d,(function(e){return Object(o.db)(e).id.includes("image-canvas-effect-filter")})),U=Object(o.R)(d,a.pb);if(Object(o.G)(U),!X)break;Object(o.G)(X);var F=Object(o.R)(d,(function(e){return Object(o.db)(e).id.includes("image-canvas-mask-filter")}));if(!F)break;Object(o.G)(F),b=!0;break;case p:var W=Object(o.R)(d,(function(e){return Object(o.db)(e).id.includes("runout-image")}));if(!W)return;Object(o.G)(W),b=!0;break;case w:var V=Object(o.R)(d,(function(e){return Object(o.db)(e).id.includes("-overlay")})),K=Object(o.R)(d,(function(e){return Object(o.db)(e).id.includes("-overlay2")}));Object(o.G)(V),Object(o.G)(K);break;case A:["-sky","-cloud","-texture","-color-rect"].forEach((function(e){Object(o.G)(Object(o.R)(d,(function(t){return Object(o.db)(t).id.includes(e)})))}))}if(b&&Object(o.G)(Object(o.R)(d,"#mask-img")),Object(o.Lb)(d,{effectType:""}),u){var q=Object(o.mb)(d);q&&Object(o.k)(q)}}}}},function(e,t,n){"use strict";var r=n(15);t.a=function(e,t){var n=Array.isArray(e);if(!n&&!e||n&&!e.length)return"";var a=void 0!==t?"rgba(":"rgb(",i=void 0!==t?",".concat(t,")"):")";if(Array.isArray(e)){var c=Object(r.a)(e,3),o=c[0],s=c[1],u=c[2];return"".concat(a).concat(o,",").concat(s,",").concat(u).concat(i)}var l=e.r,d=e.g,b=e.b;return"".concat(a).concat(l,",").concat(d,",").concat(b).concat(i)}},,,,,function(e,t,n){"use strict";t.a=function(e){return e*Math.PI/180}},function(e,t,n){"use strict";var r=n(4),a=n(2),i=n(75),c=n(136),o=n.n(c),s=n(1),u=n(21),l=o.a.get("".concat(s.Id,"_picsart_editor_sidebar")),d=new URLSearchParams(window.location.search),b={isSidebarOpen:void 0===l||"true"===l,isLayersOpen:!0,effectModal:{isOpen:!1,description:""},successModal:{isOpen:!1,oneTimePayment:!1,description:""},mobileOnlyAssetsModal:{isOpen:!1},isHintsOpen:!1,isWidgetOpen:!1,isWidgetLoading:!1,monetizationOpenedFrom:null,isShortcutModalOpen:!1,isHelpListOpen:!1,isInitialLoading:!1,showUploadModal:!1,authModal:{open:!1,closable:!0},isToolbarDisabled:!1,zoom:s.Sh.find((function(e){return"100%"===e.label})),events:{scrollSidebarToTop:s.uc.done},notificationOneTimeOpen:{sketch:!1},languageSwitcherOpen:!1,fitTabLock:!0,visibilityLayerSettings:!1,contextMenu:{show:!1,top:0,left:0,source:s.eb.canvas,clipBoardElement:[]},isExportModalOpen:!1,selectedFitId:d.get(s.fb.templateSize)||"original"},f=Object(i.c)({name:"ui",initialState:b,reducers:{setIsSidebarOpen:function(e,t){var n=t.payload;e.isSidebarOpen=n},setIsLayersOpen:function(e,t){var n=t.payload;e.isLayersOpen=n},setSuccessModal:function(e,t){var n=t.payload;e.successModal=n},setSelectedFitId:function(e,t){var n=t.payload,r=void 0===n?"original":n;e.selectedFitId=r},setMobileOnlyAssetsModal:function(e,t){var n=t.payload;e.mobileOnlyAssetsModal=n},setEffectModal:function(e,t){var n=t.payload;e.effectModal=n},setIsHintsOpen:function(e,t){var n=t.payload;e.isHintsOpen=n},setIsWidgetOpen:function(e,t){var n=t.payload;e.isWidgetOpen=n},setIsWidgetLoading:function(e,t){var n=t.payload;e.isWidgetLoading=n},setIsShortcutModalOpen:function(e,t){var n=t.payload;e.isShortcutModalOpen=n},setIsHelpListOpen:function(e,t){var n=t.payload;e.isHelpListOpen=n},setIsInitialLoading:function(e,t){var n=t.payload;e.isInitialLoading=n},setIsToolbarDisabled:function(e,t){var n=t.payload;e.isToolbarDisabled=n},setNotificationOneTimeOpen:function(e,t){var n=t.payload;e.notificationOneTimeOpen=n},openMonetizationPopup:function(e,t){var n=t.payload;e.monetizationOpenedFrom=n},closeMonetizationPopup:function(e){e.monetizationOpenedFrom=null},openAuthenticationPopup:function(e,t){var n=t.payload;e.authModal=Object(a.a)(Object(a.a)({},n),{},{open:!0})},resetAuthenticationPopupRedirections:function(e){e.authModal=Object(a.a)(Object(a.a)({},e.authModal),{},{redirectOnFailPath:"",redirectOnSuccessPath:""})},closeAuthenticationPopup:function(e){e.authModal.open=!1,e.authModal.closable=b.authModal.closable},showUploadModal:function(e,t){var n=t.payload;e.showUploadModal=n},triggerScrollSidebarToTop:function(e,t){var n=t.payload;e.events.scrollSidebarToTop=n},setZoom:function(e,t){var n=t.payload;e.zoom=n},resetZoom:function(e){e.zoom=b.zoom},setLanguageSwitcherOpen:function(e,t){var n=t.payload;e.languageSwitcherOpen=n},restoreUiFromHistory:function(e,t){var n=t.payload;Object.assign(e,n)},reset:function(e){return Object(a.a)(Object(a.a)({},b),{},{isSidebarOpen:e.isSidebarOpen,isLayersOpen:e.isLayersOpen,authModal:e.authModal,monetizationOpenedFrom:e.monetizationOpenedFrom})},setFitTabLock:function(e,t){var n=t.payload;e.fitTabLock=n},setVisibilityLayerSettings:function(e,t){var n=t.payload;e.visibilityLayerSettings=n},setContextMenu:function(e,t){var n=t.payload;e.contextMenu=Object(a.a)(Object(a.a)({},e.contextMenu),n)},setContextMenuShow:function(e,t){var n=t.payload;e.contextMenu.show=n},setContextMenuClipBoardElement:function(e,t){var n=t.payload;e.contextMenu.clipBoardElement=n.map((function(e){return Object(a.a)(Object(a.a)({},e),{},{x:e.x+s.Gb,y:e.y+s.Gb})}))},setIsExportModalOpen:function(e,t){var n=t.payload;e.isExportModalOpen=n}},extraReducers:Object(r.a)({},u.a.actions.setArtBoardSizes,(function(e,t){var n=t.payload;e.selectedFitId=n.selectedFitId||e.selectedFitId}))});t.a=f},,function(e,t,n){"use strict";n.d(t,"w",(function(){return J})),n.d(t,"n",(function(){return Q})),n.d(t,"o",(function(){return Z})),n.d(t,"a",(function(){return $})),n.d(t,"m",(function(){return ee})),n.d(t,"c",(function(){return h})),n.d(t,"b",(function(){return p})),n.d(t,"g",(function(){return g})),n.d(t,"E",(function(){return ne})),n.d(t,"K",(function(){return ae})),n.d(t,"r",(function(){return ie})),n.d(t,"L",(function(){return ce})),n.d(t,"u",(function(){return oe})),n.d(t,"t",(function(){return se})),n.d(t,"s",(function(){return ue})),n.d(t,"I",(function(){return le})),n.d(t,"J",(function(){return de})),n.d(t,"F",(function(){return be})),n.d(t,"d",(function(){return fe})),n.d(t,"x",(function(){return he})),n.d(t,"k",(function(){return pe})),n.d(t,"j",(function(){return ge})),n.d(t,"h",(function(){return Oe})),n.d(t,"i",(function(){return ve})),n.d(t,"l",(function(){return je})),n.d(t,"e",(function(){return me})),n.d(t,"f",(function(){return ye})),n.d(t,"q",(function(){return xe})),n.d(t,"H",(function(){return we})),n.d(t,"G",(function(){return Ae})),n.d(t,"D",(function(){return Ee})),n.d(t,"v",(function(){return ke})),n.d(t,"y",(function(){return Ce})),n.d(t,"C",(function(){return Se})),n.d(t,"A",(function(){return Te})),n.d(t,"B",(function(){return _e})),n.d(t,"z",(function(){return Ie})),n.d(t,"p",(function(){return re})),n.d(t,"M",(function(){return Re}));var r=n(4),a=n(395),i=n.n(a),c=n(95),o=n(7),s=n.n(o),u=n(10);function l(){return(l=Object(u.a)(s.a.mark((function e(t,n,r){var a,i,c,o,u,l,d,b,f,h=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]&&h[3],i=h.length>4?h[4]:void 0,c=document.createElement("canvas"),o=c.getContext("2d"),(u=n&&r)?(d=t.width/n,l=t.height/d<r?d:t.height/r):l=n?t.width/n:t.height/r,b=a||!u?t.width/l:n,f=a||!u?t.height/l:r,c.width=u?n:b,c.height=u?r:f,o&&a&&u&&i&&(o.fill(),o.fillStyle=i,o.fillRect(0,0,c.width,c.height)),null===o||void 0===o||o.drawImage(t,0,0,t.width,t.height,u?(n-b)/2:0,u?(r-f)/2:0,b,f),e.abrupt("return",new Promise((function(e){c.toBlob((function(t){return t&&e(t)}))})));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var d,b,f,h,p,g,O=n(15),v=n(3),j=n(87),m=n(33),y=n(195),x=n(83),w=n(161),A=n(44),E=n(53),k=n(1),C=Object(A.b)((function(e){return{resizeItemContainer:{position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",top:0,left:0},resizeItem:{width:function(e){return"".concat(100*(e.isMaxWidth?1:e.scale),"%")},height:function(e){return"".concat(100*(e.isMaxWidth?e.scale:1),"%")},background:function(e){return e.resizeParams.width&&e.resizeParams.height&&e.bgColor?e.bgColor:"url(".concat(k.O,"/64814455576311042242.svg) center center/cover no-repeat")}},titleContainer:{position:"absolute",display:"flex",width:"100%",height:24,alignItems:"center",justifyContent:"center",bottom:0,zIndex:E.a.Base,backgroundColor:"rgb(84, 88, 105, .7)"},sizeTitle:{fontFamily:"Montserrat-SemiBold",fontSize:10,lineHeight:1,color:"rgba(255, 255, 255)"},resizeImg:{objectFit:function(e){return e.resizeParams.usePadding?"contain":"fill"},width:"100%",height:"100%"},arrowRight:{width:16,height:16,"& path":{fill:e.colors.paColor9}}}})),S=n(5),T=function(e){var t=e.imgSrc,n=Object(x.a)(w.a),r=Object(m.c)(),a=Object(y.c)().resizeParams,i=Object(v.useState)([0,0]),c=Object(O.a)(i,2),o=c[0],s=c[1],u=Object(v.useMemo)((function(){return function(e,t,n,r){if(n&&r)return[n,r];var a=n?e/n:t/r;return[Math.round(e/a)||0,Math.round(t/a)||0]}(o[0],o[1],a.width||0,a.height||0)}),[a,o]),l=Object(O.a)(u,2),d=l[0],b=l[1],f=Object(v.useMemo)((function(){return d>b}),[d,b]),h=Object(v.useMemo)((function(){return(f?b/d:d/b)||0}),[f,d,b]),p=C({resizeParams:a,resizedWidth:d,resizedHeight:b,scale:h,isMaxWidth:f,bgColor:n});return Object(v.useEffect)((function(){var e=new Image;e.src=t,e.onload=function(){s([e.width,e.height])}}),[t]),Object(S.jsxs)("div",{className:p.resizeItemContainer,children:[Object(S.jsx)("div",{className:p.resizeItem,children:Object(S.jsx)("img",{src:t,alt:"img",className:p.resizeImg})}),Object(S.jsxs)("div",{className:p.titleContainer,children:[Object(S.jsx)("p",{className:p.sizeTitle,children:r("{{sizeX}} x {{sizeY}}",{sizeX:o[0],sizeY:o[1]})}),Object(S.jsx)(j.a,{name:"arrow-direct-right-gen",className:p.arrowRight}),Object(S.jsx)("p",{className:p.sizeTitle,children:r("{{resizedWidth}} x {{resizedHeight}}",{resizedWidth:d,resizedHeight:b})})]})]})},_=n(177),I=Object(A.b)({gridImageWrap:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:function(e){return null===e||void 0===e?void 0:e.width},height:function(e){return null===e||void 0===e?void 0:e.height}},gridImageBox:{width:"100%",height:"100%",background:function(e){return e.texture?null:e.bgColor||"url(".concat(k.O,"/64814455576311042242.svg) center center/cover no-repeat")}},gridImage:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",height:"100%",objectFit:"cover"}}),R=function(e){var t=e.imgSrc,n=e.boxWidth,r=e.boxHeight,a=Object(x.a)((function(e){return{activeColor:Object(w.a)(e),activeTexture:Object(w.c)(e)}})),i=a.activeColor,c=a.activeTexture,o=Object(v.useRef)(null),s=Object(v.useState)({width:"0",height:"0"}),u=Object(O.a)(s,2),l=u[0],d=l.width,b=l.height,f=u[1],h=Object(v.useCallback)((function(e,t,n){var r=Object(_.a)(e,t,n,o.current);f(r)}),[]),p=I({bgColor:i,texture:null===c||void 0===c?void 0:c.url,width:d,height:b});return Object(S.jsx)("div",{className:p.gridImageWrap,children:Object(S.jsxs)("div",{className:p.gridImageBox,children:[c&&Object(S.jsx)("img",{src:null===c||void 0===c?void 0:c.url,alt:"img",className:p.gridImage}),Object(S.jsx)("img",{ref:o,className:p.gridImage,src:t,onLoad:function(){return h(t,n,r)},alt:"img"})]})})},L=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=document.createElement("canvas")).width=300,n.height=300,(r=n.getContext("2d"))&&(r.fill(),r.fillStyle=t,r.fillRect(0,0,n.width,n.height)),e.abrupt("return",n.toDataURL());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=n(388),G=function(e,t,n){var r=t.find((function(e){return e.key===n}));if(r){var a=e.width/r.initWidth,i=document.createElement("canvas");i.width=r.width*a||r.initWidth,i.height=r.height*a||r.initHeight;var c=i.getContext("2d");return c&&c.drawImage(e,r.x*a,r.y*a,i.width,i.height,0,0,i.width,i.height),new Promise((function(e){i.toBlob((function(t){return t&&e(t)}))}))}},M=n(18),B=n.n(M),D=n(2),N=n(27),z=n(448),H=n(553),Y=n(225),X=n(143),U=Object(A.b)({gridImageWrap:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:function(e){return null===e||void 0===e?void 0:e.width},height:function(e){return null===e||void 0===e?void 0:e.height},background:"url(".concat(k.O,"/64814455576311042242.svg) center center/cover no-repeat")},gridImage:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",height:"100%"},cropActive:{zIndex:E.b},cropWrap:{position:"absolute",top:0,left:0,right:0,bottom:0}}),F=function(e){var t=e.imgSizes,n=e.itemKey,r=Object(N.e)(),a=U(),i=Object(x.a)((function(e){return{cropAlign:Object(w.e)(e),cropOrientation:Object(w.g)(e),cropTemplate:Object(w.h)(e)}})),c=i.cropAlign,o=i.cropOrientation,s=i.cropTemplate,u=Object(O.a)(t,2),l=u[0],d=u[1],b=Object(v.useMemo)((function(){return{x:0,y:0,width:l,height:d}}),[l,d]),f=Object(v.useState)(b),h=Object(O.a)(f,2),p=h[0],g=h[1],j=Object(v.useState)({width:l,height:d}),m=Object(O.a)(j,2),y=m[0],A=m[1],E=Object(v.useCallback)((function(){A({width:l,height:d})}),[l,d]);Object(z.a)(E),Object(v.useEffect)((function(){return E()}),[E]),Object(v.useEffect)((function(){r(Y.a.actions.updateCropAttrs(Object(D.a)(Object(D.a)({key:n},p),{},{initWidth:l,initHeight:d})))}),[p,r,n,l,d]),Object(v.useEffect)((function(){var e=l-p.width,t=d-p.height,n="alignRight"===c?e:"alignHorizontal"===c?e/2:0,r="alignBottom"===c?t:"alignVertical"===c?t/2:0;g((function(e){return Object(D.a)(Object(D.a)({},e),{},{x:["alignRight","alignHorizontal","alignLeft"].includes(c||"")?n:null===e||void 0===e?void 0:e.x,y:["alignBottom","alignVertical","alignTop"].includes(c||"")?r:null===e||void 0===e?void 0:e.y})}))}),[c,null===p||void 0===p?void 0:p.width,null===p||void 0===p?void 0:p.height,l,d]),Object(v.useEffect)((function(){if(s.sizes){var e=o===oe[0],t=Math.min(s.sizes.width,s.sizes.height),n=Math.max(s.sizes.width,s.sizes.height),r=e?t:n,a=e?n:t,i=Object(X.b)(r,a,l,d),c=i.fromX,u=i.fromY,f=i.width,h=i.height;f&&h&&g({x:c,y:u,width:f,height:h})}else g(b)}),[s,l,d,o,b]);var k=Object(v.useCallback)((function(){return r(Y.a.actions.setCropAlign(null)),g}),[r]);return Object(S.jsx)("div",{className:a.cropWrap,children:Object(S.jsx)(H.a,{objectWidth:y.width,objectHeight:y.height,width:p.width,height:p.height,x:p.x,y:p.y,onChange:k,stopClickPropagation:!1})})},W=function(e){var t=e.imgSrc,n=e.boxWidth,r=e.boxHeight,a=e.itemKey,i=Object(v.useState)({width:"0",height:"0"}),c=Object(O.a)(i,2),o=c[0],l=o.width,d=o.height,b=c[1],f=Object(v.useState)([]),h=Object(O.a)(f,2),p=h[0],g=h[1],j=Object(v.useRef)(null),m=U({width:l,height:d}),y=Object(v.useCallback)(function(){var e=Object(u.a)(s.a.mark((function e(t,n,r){var a,i,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(_.a)(t,n,r,j.current),e.next=3,b(c);case 3:j.current&&g([null===(a=j.current)||void 0===a?void 0:a.width,null===(i=j.current)||void 0===i?void 0:i.height]);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),[]);return Object(S.jsxs)("div",{className:B()(m.gridImageWrap,m.cropActive),children:[Object(S.jsx)("img",{ref:j,className:m.gridImage,src:t,onLoad:function(){return y(t,n,r)},alt:"img"}),j.current&&p.length&&Object(S.jsx)(F,{imgSizes:p,itemKey:a})]})},V=n(342),K=n(251),q=function(e){var t=e.imgSrc,n=e.boxWidth,r=e.boxHeight,a=Object(v.useState)({width:"0",height:"0"}),i=Object(O.a)(a,2),c=i[0],o=c.width,s=c.height,u=i[1],l=Object(V.a)({width:o,height:s}),d=Object(v.useRef)(null),b=Object(v.useCallback)((function(e,t,n){var r=Object(_.a)(e,t,n,d.current);u(r)}),[]);return Object(v.useEffect)((function(){K.a.setVisibleSize(n)}),[n]),Object(S.jsx)("div",{className:l.gridImageWrap,children:Object(S.jsx)("img",{ref:d,className:l.gridImage,src:t,onLoad:function(){return b(t,n,r)},alt:"img"})})},J="Picsart_Batch Editor",Q=4096,Z=256,$=50,ee=1e4;!function(e){e.upscale="upscale",e.remove="background_remover",e.resize="resize",e.background="background",e.crop="crop",e.watermark="watermark"}(h||(h={})),function(e){e.bigImage="bigImage",e.bigNumber="bigNumber",e.serverError="serverError",e.smallNumber="smallNumber",e.fileFormat="fileFormat",e.exceededFilesLimit="exceededFilesLimit"}(p||(p={})),function(e){e.width="Width",e.height="Height",e.exactSize="Exact Size",e.socials="Socials"}(g||(g={}));var te,ne=[g.width,g.height,g.exactSize,g.socials];!function(e){e.width="Width",e.height="Height"}(te||(te={}));var re,ae=[te.width,te.height],ie=[{type:h.upscale,name:"Upscale",icon_name:"upscale-editor",dataTest:"upscale-button"},{type:h.remove,name:"Edit Background",icon_name:"texture-editor",dataTest:"editbackgrounid-button"},{type:h.resize,name:"Resize",icon_name:"resize-editor",dataTest:"resize-button"},{type:h.crop,name:"Crop",icon_name:"crop-editor",dataTest:""},{type:h.watermark,name:"Watermark Creator",icon_name:"watermark-editor",dataTest:"watermark-button"}],ce=[{title:"Two Times",value:2},{title:"Four Times",value:4}],oe=["Portrait","Landscape"],se=[{title:"alignLeft",id:0,icon_name:"align-left-editor.svg"},{title:"alignHorizontal",id:1,icon_name:"align-horizontal-centers-editor.svg"},{title:"alignRight",id:2,icon_name:"align-right-editor.svg"},{title:"alignTop",id:3,icon_name:"align-top-editor.svg"},{title:"alignVertical",id:4,icon_name:"align-vertical-centers-editor.svg"},{title:"alignBottom",id:5,icon_name:"align-bottom-editor.svg"}],ue=[{type:"object",title:"Behind Object",dataTest:"behind-object-button"},{type:"person",title:"Behind Person",dataTest:"behind-person-button"}],le={error:(d={},Object(r.a)(d,p.bigImage,{title:"Image Too Large",text:"Your image cannot exceed 4096 px after upscaling."}),Object(r.a)(d,p.bigNumber,{title:"Target Height/Width Too Large",text:"The target height/width number you entered is too large."}),Object(r.a)(d,p.smallNumber,{title:"Target Height/Width Too Small",text:"The target height/width number you entered is too small."}),Object(r.a)(d,p.serverError,{title:"Unexpected Error Occurred",text:"Some images were not processed correctly. Please try again."}),Object(r.a)(d,p.fileFormat,{title:"Format not supported",text:"Some images were not in the right format. Please upload only JPG, JPEG or PNG."}),Object(r.a)(d,p.exceededFilesLimit,{title:"Limit Exceeded",text:"There is limit of ".concat($," images to upload and edit inside Batch Editor.")}),d)},de=(b={},Object(r.a)(b,h.upscale,{getProcess:function(e){var t=e.factor,n=e.size,r=e.side;return function(e){if(t){if(Object(X.c)(e,t))throw new Error(p.bigImage);return i()(c.a.upscale.bind(c.a),t)(e)}return i()(c.a.upscaleAndResize.bind(c.a),n,r)(e)}}}),Object(r.a)(b,h.remove,{getProcess:function(e){return(e.isPerson?c.a.personCutout:c.a.objectBackgroundRemove).bind(c.a)},isMask:!0}),Object(r.a)(b,h.background,{getProcess:function(e){var t=e.texture,n=e.color;return function(){return t||n&&L(n)}},usePending:!0}),Object(r.a)(b,h.resize,{getProcess:function(e){var t=e.width,n=e.height,r=e.usePadding,a=e.bgColor;return function(e){return function(e,t,n){return l.apply(this,arguments)}(e,t,n,r,a)}},isResize:!0}),Object(r.a)(b,h.crop,{getProcess:function(e){return function(t,n){return G(t,e,n)}}}),Object(r.a)(b,h.watermark,{getProcess:K.a.generate.bind(K.a)}),b),be=[800,600],fe=(f={},Object(r.a)(f,h.resize,{component:T,processOnApply:!0}),Object(r.a)(f,h.upscale,{component:P.a}),Object(r.a)(f,h.remove,{component:R}),Object(r.a)(f,h.crop,{component:W}),Object(r.a)(f,h.watermark,{component:q}),Object(r.a)(f,"defaultItem",{component:P.a}),f),he=[{type:g.width,title:"W"},{type:g.height,title:"H"}],pe=106,ge=110,Oe=2,ve=8,je=450,me=260,ye=/^(|\d+)$/,xe=["image/jpeg","image/png"],we=32,Ae=4096,Ee=[{r:255,g:241,b:111},{r:200,g:255,b:111},{r:200,g:109,b:215},{r:96,g:183,b:188},{r:0,g:163,b:255}],ke={r:255,g:255,b:255},Ce=10,Se=80,Te=300,_e=60,Ie=300;!function(e){e.spacing="spacing",e.tileSize="tileSize",e.linePadding="linePadding",e.lineWidth="lineWidth",e.opacity="opacity"}(re||(re={}));var Re=[{type:re.spacing,value:25,min:1,max:100,label:"Spacing"},{type:re.tileSize,value:25,min:1,max:100,label:"Size"},{type:re.opacity,value:25,min:0,max:100,label:"Opacity"},{type:re.linePadding,value:5,min:0,max:Ce,label:"Line Length"},{type:re.lineWidth,value:5,min:0,max:10,label:"Line Width"}]},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"i",(function(){return i})),n.d(t,"h",(function(){return c})),n.d(t,"l",(function(){return o})),n.d(t,"m",(function(){return s})),n.d(t,"g",(function(){return u})),n.d(t,"f",(function(){return l})),n.d(t,"p",(function(){return d})),n.d(t,"q",(function(){return b})),n.d(t,"u",(function(){return f})),n.d(t,"s",(function(){return h})),n.d(t,"r",(function(){return p})),n.d(t,"d",(function(){return g})),n.d(t,"e",(function(){return O})),n.d(t,"n",(function(){return v})),n.d(t,"o",(function(){return j})),n.d(t,"j",(function(){return m})),n.d(t,"t",(function(){return y})),n.d(t,"a",(function(){return x})),n.d(t,"k",(function(){return w})),n.d(t,"v",(function(){return A}));var r="ADD_LAYER",a="ADD_LAYERS",i="REMOVE_LAYER",c="REMOVE_EFFECT_LAYER",o="SELECTED_LAYER",s="SELECTED_LAYERS",u="EMPTY_LAYERS",l="DESELECT_LAYERS",d="SET_ACTIVE_EFFECT",b="SET_ACTIVE_TEXTURE",f="UPDATE_LAYERS",h="SET_SELECTED_TEXT_ID",p="SET_SELECTED_TEXT",g="ADD_TEMPLATE_LAYERS",O="CHANGE_TEXT_IN_LAYER",v="SETTINGS_UPDATE",j="SETTINGS_UPDATE_BATCH",m="RESET_EDITOR_ON_PAGE_CHANGE",y="UPDATE_EFFECTS_DATA",x="ACTIVE_TOOLBAR_UPDATE",w="RESET_STATE",A="UPDATE_UI_META_DATA"},function(e,t,n){"use strict";n.d(t,"b",(function(){return c}));var r=n(15),a=n(31),i=function(e,t){return e.find((function(e){return e.dependencies.some((function(e){return e.layerId===t}))}))},c=function e(t,n,c){var o=i(t,n);if(1===o.dependencies.length)return e(t,o.id,c);if(c){var s=Object(a.f)(t,[n]);return Object(r.a)(s,1)[0]}return o};t.a=i},function(e,t,n){"use strict";n.d(t,"g",(function(){return i})),n.d(t,"f",(function(){return c})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"j",(function(){return u})),n.d(t,"h",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"i",(function(){return b})),n.d(t,"a",(function(){return f})),n.d(t,"e",(function(){return h})),n.d(t,"k",(function(){return p}));var r=n(53),a=n(11),i={left:"50%",top:"50%",position:"absolute",padding:32,borderRadius:16,width:487,height:221,pointerEvents:"auto",display:"flex",flexDirection:"column",backgroundColor:a.b.paColor9},c={fontWeight:600,size:18,lineHeight:"22px",color:a.b.paColor6},o={display:"flex",marginTop:"auto"},s={display:"flex",marginLeft:"auto",alignItems:"center",padding:"10px 24px",height:44,minWidth:70,borderRadius:8,letterSpacing:"normal",cursor:"pointer",fontWeight:600,fontSize:14,fontStyle:"normal",color:a.b.paColor9},u={fontSize:16,color:a.b.paColor10,lineHeight:"24px",maxWidth:418},l={width:"100vw",height:"100vh",overflowX:"hidden",overflowY:"auto",position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:r.V,backgroundColor:a.b.paColor148},d={position:"absolute",top:21,right:21,cursor:"pointer",float:"right",fontSize:12,color:a.b.paColor7,verticalAlign:"top",display:"inline-block",width:24,height:24,"& svg path":{fill:a.b.paColor7}},b={backgroundColor:a.b.paColor18,"&:hover":{backgroundColor:a.b.paColor20}},f={backgroundColor:a.b.paColor37,"&:hover":{backgroundColor:a.b.paColor47}},h={backgroundColor:a.b.paColor1,"@media(hover: hover)":{"&:hover":{backgroundColor:a.b.paColor44}}},p={backgroundColor:a.b.paColor9,color:a.b.paColor10,border:"1px solid ".concat(a.b.paColor2),"&:hover":{border:"1px solid ".concat(a.b.paColor7)}}},function(e,t,n){"use strict";var r=n(0);t.a=function(e){var t=e.node,n=e.fire,a=void 0===n||n,i=e.isAttach,c=void 0===i||i,o=e.isClick,s=Object(r.mb)(t);a&&s&&(c&&Object(r.Y)(s,"mousedown",{target:t}),o&&Object(r.Y)(s,"click",{target:t}),Object(r.Y)(s,"mouseup",{target:t}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return U})),n.d(t,"b",(function(){return be}));var r=n(2),a=n(117),i=n.n(a),c=n(9),o=n(6),s=n(125),u=n(1),l=n(0),d=function(e){var t=e.historyStack,n=e.mergeWithLast,a=void 0!==n&&n,d=Object(o.b)((function(e){return{activeLayers:Object(c.i)(e),baseGroup:Object(c.ad)(e)}})),b=d.baseGroup,f=d.activeLayers,h=t;if(h.settings.selectedId||(h.settings.selectedId={}),h.settings.activeLayers=f,!h.settings.selectedId.newValue&&b){var p=Object(l.X)(b,u.pb);h.settings.selectedId.newValue=Object(l.db)(p)[u.v]}Object(o.a)(s.a.actions.add(Object(r.a)(Object(r.a)({},i()(h)),{},{mergeWithLast:a})))},b=n(7),f=n.n(b),h=n(10),p=n(27),g=n(17),O=n(49),v=n(160),j=n(16),m=n(45),y=n(158),x=n(172),w=j.a.image_added,A=j.a.object_position,E=j.a.blend_mode,k=j.a.overlay_added,C=j.a.text_added,S=j.a.duplicate_layer,T=j.a.remove_layer,_=j.a.replace_image,I=j.a.shape_added,R=j.a.change_adjust,L=j.a.flip_object,P=j.a.change_color,G=j.a.font,M=j.a.change_background_texture,B=j.a.change_text,D=j.a.change_ratio,N=j.a.reorder_layers,z=j.a.bulk_action,H=j.a.draw_placeholder,Y=j.a.free_grid_added,X=function(){var e=Object(h.a)(f.a.mark((function e(t){var n,r,a,i,d,b,h,j,U,F,W,V,K;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.step,r=t.histories,a=t.stage,i=t.transformerProps,d=t.nested,b=Object(o.b)(c.i),!(n<0)){e.next=4;break}return e.abrupt("return");case 4:if(h=Object(l.O)(a,u.A)){e.next=7;break}return e.abrupt("return");case 7:if(Object(p.b)((function(){Object(o.a)(s.a.actions.undoRedoDisabled(!0)),Object(o.a)(g.a.actions.setCanvasLoading(!0))})),j="oldValue",U=r[n],F=r[n].settings.activeLayers,W=!F.includes(u.nd),!U.after){e.next=15;break}return e.next=15,X({step:0,histories:[U.after],stage:a,transformerProps:i,nested:!0});case 15:e.t0=U.historyAction,e.next=e.t0===w?18:e.t0===A?20:e.t0===E?23:e.t0===Y?25:e.t0===C||e.t0===S?27:e.t0===k?29:e.t0===T?33:e.t0===_?36:e.t0===I?39:e.t0===R?42:e.t0===L?44:e.t0===P?46:e.t0===G?49:e.t0===M?51:e.t0===B?54:e.t0===D?56:e.t0===N?58:e.t0===H?60:e.t0===z?64:67;break;case 18:return Object(m.t)({baseGroup:h,settings:U.settings,layerArr:i.layersArr,dispatch:o.a}),e.abrupt("break",68);case 20:return(null===(V=Object(y.a)(m.o)({stage:a,baseGroup:h,settings:U.settings,valueKey:j}))||void 0===V?void 0:V.length)&&Object(x.b)(V,h),e.abrupt("break",68);case 23:return Object(m.l)({baseGroup:h,settings:U.settings,valueKey:j}),e.abrupt("break",68);case 25:case 27:return Object(m.t)({baseGroup:h,settings:U.settings,layerArr:i.layersArr,dispatch:o.a}),e.abrupt("break",68);case 29:return W=!1,e.next=32,Object(m.p)({stage:a,baseGroup:h,layerArr:i.layersArr,settings:U.settings,sendAttrs:!0,valueKey:j});case 32:return e.abrupt("break",68);case 33:return e.next=35,Object(m.b)({stage:a,baseGroup:h,layerArr:i.layersArr,settings:U.settings,valueKey:j,sendAttrs:!0});case 35:return e.abrupt("break",68);case 36:return e.next=38,Object(m.v)({stage:a,baseGroup:h,layerArr:i.layersArr,settings:U.settings,valueKey:j});case 38:return e.abrupt("break",68);case 39:return e.next=41,Object(m.t)({baseGroup:h,settings:U.settings,layerArr:i.layersArr});case 41:return e.abrupt("break",68);case 42:return Object(m.g)({baseGroup:h,layerArr:i.layersArr,settings:U.settings,valueKey:j}),e.abrupt("break",68);case 44:return Object(m.s)({baseGroup:h,settings:U.settings}),e.abrupt("break",68);case 46:return e.next=48,Object(m.m)({baseGroup:h,layerArr:i.layersArr,settings:U.settings,valueKey:j});case 48:return e.abrupt("break",68);case 49:return Object(m.n)({baseGroup:h,settings:U.settings,valueKey:j}),e.abrupt("break",68);case 51:return e.next=53,Object(m.i)({baseGroup:h,layerArr:i.layersArr,settings:U.settings,valueKey:j});case 53:return e.abrupt("break",68);case 54:return Object(m.q)({baseGroup:h,settings:U.settings,valueKey:j}),e.abrupt("break",68);case 56:return Object(m.k)({stage:a,baseGroup:h,settings:U.settings,valueKey:j}),e.abrupt("break",68);case 58:return Object(m.u)({baseGroup:h,layersArr:i.layersArr,settings:U.settings,valueKey:j}),e.abrupt("break",68);case 60:return W=!1,e.next=63,Object(v.a)({stage:a,baseGroup:h,layerArr:i.layersArr,fromHistory:!0,settings:U.settings,valueKey:j});case 63:return e.abrupt("break",68);case 64:return e.next=66,Object(m.f)({stage:a,baseGroup:h,settings:U.settings,layerArr:i.layersArr,valueKey:j});case 66:case 67:return e.abrupt("break",68);case 68:d||(Object(l.k)(h),W&&(K=Object(l.T)(h,F.map((function(e){return"#".concat(e)})).join(", ")),Object(O.h)(K)),Object(x.a)(U.settings.activeSetting,U.settings.selectedCategory),Object(o.a)(s.a.actions.undo(b)),setTimeout((function(){Object(p.b)((function(){Object(o.a)(s.a.actions.undoRedoDisabled(!1)),Object(o.a)(g.a.actions.setCanvasLoading(!1))}))})));case 69:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=X,F=j.a.image_added,W=j.a.object_position,V=j.a.blend_mode,K=j.a.overlay_added,q=j.a.text_added,J=j.a.duplicate_layer,Q=j.a.remove_layer,Z=j.a.replace_image,$=j.a.shape_added,ee=j.a.change_adjust,te=j.a.flip_object,ne=j.a.change_color,re=j.a.font,ae=j.a.change_background_texture,ie=j.a.change_text,ce=j.a.change_ratio,oe=j.a.reorder_layers,se=j.a.bulk_action,ue=j.a.draw_placeholder,le=j.a.free_grid_added,de=function(){var e=Object(h.a)(f.a.mark((function e(t){var n,a,i,d,b,h,w,A,E,k,C,S,T,_;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.step,a=t.histories,i=t.stage,d=t.transformerProps,b=Object(o.b)(c.i),w=a[h=n+1].settings.activeLayers||[],!(h>=a.length)){e.next=6;break}return e.abrupt("return");case 6:if(A=Object(l.L)(i,u.A)){e.next=9;break}return e.abrupt("return");case 9:Object(p.b)((function(){Object(o.a)(s.a.actions.undoRedoDisabled(!0)),Object(o.a)(g.a.actions.setCanvasLoading(!0))})),E="newValue",k=a[h],C=k.settings,S=null,e.t0=k.historyAction,e.next=e.t0===F?17:e.t0===W?21:e.t0===V?24:e.t0===J?26:e.t0===Q?29:e.t0===Z?31:e.t0===$?34:e.t0===ee?38:e.t0===te?40:e.t0===ne?42:e.t0===re?45:e.t0===le?47:e.t0===q?50:e.t0===K?54:e.t0===ae?57:e.t0===ie?60:e.t0===ce?62:e.t0===oe?64:e.t0===ue?66:e.t0===se?69:72;break;case 17:return S=[k.settings.id],e.next=20,Object(m.a)({stage:i,baseGroup:A,layerArr:d.layersArr,settings:C});case 20:return e.abrupt("break",73);case 21:return(null===(T=Object(y.a)(m.o)({stage:i,baseGroup:A,settings:C,valueKey:E}))||void 0===T?void 0:T.length)&&Object(x.b)(T,Object(l.jb)(A)),e.abrupt("break",73);case 24:return Object(m.l)({baseGroup:A,settings:k.settings,valueKey:E}),e.abrupt("break",73);case 26:return S=C.children.map((function(e){return e.id})),Object(m.r)({stage:i,baseGroup:A,layersArr:d.layersArr,settings:C}),e.abrupt("break",73);case 29:return Object(m.t)({baseGroup:A,settings:Object(r.a)(Object(r.a)({},k.settings),{},{withoutCheckIsExist:"overlay"===C.type}),layerArr:d.layersArr}),e.abrupt("break",73);case 31:return e.next=33,Object(m.v)({stage:i,baseGroup:A,layerArr:d.layersArr,settings:k.settings,valueKey:E});case 33:return e.abrupt("break",73);case 34:return S=[k.settings.id],e.next=37,Object(m.d)({stage:i,baseGroup:A,layerArr:d.layersArr,settings:k.settings});case 37:return e.abrupt("break",73);case 38:return Object(m.g)({baseGroup:A,layerArr:d.layersArr,settings:k.settings,valueKey:E}),e.abrupt("break",73);case 40:return Object(m.s)({baseGroup:A,settings:k.settings}),e.abrupt("break",73);case 42:return e.next=44,Object(m.m)({baseGroup:A,layerArr:d.layersArr,settings:k.settings,valueKey:E});case 44:return e.abrupt("break",73);case 45:return Object(m.n)({baseGroup:A,settings:k.settings,valueKey:E}),e.abrupt("break",73);case 47:return e.next=49,Object(m.b)({stage:i,baseGroup:A,layerArr:d.layersArr,settings:Object(r.a)(Object(r.a)({},k.settings),{},{type:j.b.free_grid}),valueKey:E,sendAttrs:!0});case 49:return e.abrupt("break",73);case 50:return S=k.settings.activeLayers,e.next=53,Object(m.b)({stage:i,baseGroup:A,layerArr:d.layersArr,settings:k.settings,valueKey:E,sendAttrs:!0});case 53:return e.abrupt("break",73);case 54:return e.next=56,Object(m.p)({stage:i,baseGroup:A,layerArr:d.layersArr,settings:k.settings});case 56:return e.abrupt("break",73);case 57:return e.next=59,Object(m.i)({baseGroup:A,layerArr:d.layersArr,settings:k.settings,valueKey:E});case 59:return e.abrupt("break",73);case 60:return Object(m.q)({baseGroup:A,settings:k.settings,valueKey:E}),e.abrupt("break",73);case 62:return Object(m.k)({stage:i,baseGroup:A,settings:k.settings,valueKey:E}),e.abrupt("break",73);case 64:return Object(m.u)({baseGroup:A,layersArr:d.layersArr,settings:k.settings,valueKey:E}),e.abrupt("break",73);case 66:return e.next=68,Object(v.a)({stage:i,baseGroup:A,layerArr:d.layersArr,fromHistory:!0,settings:k.settings,valueKey:E});case 68:return e.abrupt("break",73);case 69:return e.next=71,Object(m.f)({stage:i,baseGroup:A,settings:k.settings,layerArr:d.layersArr,valueKey:E});case 71:case 72:return e.abrupt("break",73);case 73:if(!k.after){e.next=78;break}return e.next=76,de({step:-1,histories:[k.after],transformerProps:d,stage:i});case 76:e.next=84;break;case 78:Object(l.k)(A),_=Object(l.T)(A,(S||w).map((function(e){return"#".concat(e)})).join(", ")),Object(O.h)(_),Object(x.a)(k.settings.activeSetting,k.settings.selectedCategory),Object(o.a)(s.a.actions.redo(b)),setTimeout((function(){Object(p.b)((function(){Object(o.a)(s.a.actions.undoRedoDisabled(!1)),Object(o.a)(g.a.actions.setCanvasLoading(!1))}))}));case 84:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=de},,function(e,t,n){"use strict";var r=n(114),a=n.n(r),i=n(333);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.a;return Object(i.b)(e,t)}},,function(e,t,n){"use strict";var r=n(14),a=n(4),i=n(40),c=n(42),o=n(30),s=n(2),u=n(101),l=n(100),d=n(41),b=n.n(d),f=n(0),h=n(68),p=n(21),g=n(6),O=n(9),v=function(e){Object(f.i)(e.renderable,"click",(function(){Object(g.b)(O.X)||Object(g.b)(O.Eb)||Object(g.a)(p.a.actions.selectLayers([e.id]))}))},j=n(1),m=n(74),y=function(e){var t=e.renderable;Object(f.i)(t,"contextmenu",(function(e){e.evt.preventDefault();var t=e.evt,n=t.pageY,r=t.pageX;Object(g.a)(m.a.actions.setContextMenu({show:!0,top:n,left:r,source:j.eb.canvas}))}))},x=n(7),w=n.n(x),A=n(10),E=n(561),k=n.n(E),C=n(19),S=function(e,t){Object(g.a)(t?p.a.actions.toggleSelection(e):p.a.actions.selectLayers([e])),Object(g.a)(m.a.actions.setContextMenuShow(!1))},T=function(e){var t=e.renderable,n=!1;return[Object(f.i)(t,"click",(function(t){if(!Object(g.b)(O.Eb)&&!Object(g.b)(O.X)){var r=Object(g.b)(O.Bc);!n&&(r.length>1||r[0]!==e.id)&&S(e.id,t.evt.shiftKey)}})),Object(f.i)(t,"mousedown",(function(t){n=!1,Object(g.b)(O.Eb)||Object(C.d)(e.toJSON())||(t.evt.stopPropagation(),Object(g.b)(O.Bc).includes(e.id)||Object(g.b)(O.ab)===e.id||(n=t.evt.shiftKey,S(e.id,t.evt.shiftKey)))}))]},_=function(e){if(function(e){if(!e.selectable||!e.interactable)return!1;var t=e.toJSON();return!Object(C.l)(t)}(e)){var t=e.renderable;return[Object(f.i)(t,"mouseover mouseenter",(function(){document.body.style.cursor="pointer",Object(g.a)(p.a.actions.mouseoverToLayers([e.id]))})),Object(f.i)(t,"mouseout mouseleave",(function(){document.body.style.cursor="default",Object(g.a)(p.a.actions.mouseoutFromLayers([e.id]))}))]}return[]},I=Math.abs,R=function(e){var t=e.renderable,n=null;Object(f.i)(t,"dragstart",(function(r){var a=r.evt;if(a){if(a.shiftKey){var i=I(a.movementY)>I(a.movementX);t.dragBoundFunc((function(e){var n=e.x,r=e.y,a=Object(f.db)(t).absolutePosition,c=a.x,o=a.y;return i?{x:c,y:r}:{x:n,y:o}}))}else t.dragBoundFunc((function(e){return e}));a.altKey&&(n=Fe.createLayer(e.type,Object(s.a)(Object(s.a)({},e.toJSON()),{},{id:void 0})),Fe.layerRegistry[j.z].layer.renderable.add(n.renderable))}})),Object(f.i)(t,"dragend",(function(){n&&Object(g.a)(p.a.actions.addLayers({layers:[{layerId:j.z,layers:[n.toJSON()]}],over:!0})),n=null}))},L=function(e){var t;e.selectable&&(t=e.selectionEventsDetach).push.apply(t,Object(r.a)(T(e)));return R(e),_(e)},P=n(15),G=n(154);function M(e){try{new e}catch(t){return!1}return!0}"function"===typeof window.Event&&M(window.Event)||(window.Event=function(e,t){this.bubbles=!!t&&!!t.bubbles,this.cancelable=!!t&&!!t.cancelable,this.composed=!!t&&!!t.composed,this.type=e});var B=window.navigator.userAgent.split("Version")[1]||"";!(B.includes("13.1")&&B.includes("Safari"))&&"function"===typeof window.EventTarget&&M(window.EventTarget)||(window.EventTarget=function(){function e(){this.__listeners=new Map}return e.prototype=Object.create(Object.prototype),e.prototype.addEventListener=function(e,t,n){if(arguments.length<2)throw new TypeError("TypeError: Failed to execute 'addEventListener' on 'EventTarget': 2 arguments required, but only ".concat(arguments.length," present."));var r=this.__listeners,a=e.toString();r.has(a)||r.set(a,new Map);var i=r.get(a);i.has(t)||i.set(t,n)},e.prototype.removeEventListener=function(e,t){if(arguments.length<2)throw new TypeError("TypeError: Failed to execute 'addEventListener' on 'EventTarget': 2 arguments required, but only ".concat(arguments.length," present."));var n=this.__listeners,r=e.toString();if(n.has(r)){var a=n.get(r);a.has(t)&&a.delete(t)}},e.prototype.dispatchEvent=function(e){if(!(e instanceof Event||e instanceof CustomEvent))throw new TypeError("Failed to execute 'dispatchEvent' on 'EventTarget': parameter 1 is not of type 'Event'.");var t=e.type,n=this.__listeners.get(t);if(n){var r,a=Object(G.a)(n.entries());try{for(a.s();!(r=a.n()).done;){var i=Object(P.a)(r.value,2),c=i[0],o=i[1];try{"function"===typeof c?c.call(this,e):c&&"function"===typeof c.handleEvent&&c.handleEvent(e)}catch(s){setTimeout((function(){throw s}))}o&&o.once&&n.delete(c)}}catch(s){a.e(s)}finally{a.f()}}return!0},e}());var D=n(139),N=n(150),z=n.n(N),H=n(117),Y=n.n(H),X=["x","y","id","type","width","meta","scaleX","scaleY","height","zIndex","visible","rotation","opacity","draggable","selectable","interactable","dependencies","transformable","globalCompositeOperation"],U=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(i.a)(this,e),this.serializableKeys=void 0,this.eventTarget=new EventTarget,this.readyEvent=new CustomEvent(o.c.READY),this.updateEvent=new CustomEvent(o.c.UPDATE),this.renderable=void 0,this.meta=void 0,this.dependencies=void 0,this.readyToRender=!1,this.visible=void 0,this.draggable=void 0,this.interactable=void 0,this.transformable=void 0,this.id=void 0,this.type=void 0,this.x=void 0,this.y=void 0,this.width=void 0,this.height=void 0,this.rotation=void 0,this.scaleX=void 0,this.scaleY=void 0,this.selectable=void 0,this.listening=void 0,this.opacity=void 0,this.zIndex=void 0,this.globalCompositeOperation=void 0,this.selectionEventsDetach=void 0,this.interactionEventsDetach=void 0;var a=t.id,c=void 0===a?Object(D.a)():a,u=t.type,l=t.x,d=void 0===l?0:l,b=t.y,f=void 0===b?0:b,h=t.width,p=void 0===h?0:h,g=t.height,O=void 0===g?0:g,v=t.rotation,j=void 0===v?0:v,m=t.scaleX,y=void 0===m?1:m,x=t.scaleY,w=void 0===x?1:x,A=t.dependencies,E=void 0===A?[]:A,k=t.draggable,C=void 0===k||k,S=t.transformable,T=void 0===S||S,_=t.visible,I=void 0===_||_,R=t.selectable,L=void 0===R||R,P=t.listening,G=void 0===P||P,M=t.interactable,B=void 0===M||M,N=t.meta,z=void 0===N?{}:N,H=t.zIndex,Y=t.globalCompositeOperation,U=t.opacity,F=void 0===U?1:U;this.selectionEventsDetach=[],this.interactionEventsDetach=[],this.id=c,this.meta=Object(s.a)({},z),this.type=u,this.x=d,this.y=f,this.zIndex=H,this.width=p,this.height=O,this.rotation=j,this.scaleX=y,this.scaleY=w,this.draggable=C,this.transformable=T,this.visible=I,this.opacity=F,this.selectable=L,this.interactable=B,this.listening=G,this.globalCompositeOperation=Y,this.dependencies=E.map((function(e){return{id:e.id||Object(D.a)(),layerId:e.layerId,type:e.type||o.a.UNSENT}})),this.serializableKeys=[].concat(Object(r.a)(X),Object(r.a)(n))}return Object(c.a)(e,[{key:"onReady",value:function(e){var t=this,n=function(){return e(t.toJSON())};return this.readyToRender&&n(),this.eventTarget.addEventListener(o.c.READY,n),function(){return t.eventTarget.removeEventListener(o.c.READY,n)}}},{key:"onUpdate",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,a=function(r){n.length&&0===k()(r.detail.keys,n).length||e(t.toJSON())};return this.eventTarget.addEventListener(o.c.UPDATE,a,r),function(){return t.eventTarget.removeEventListener(o.c.UPDATE,a)}}},{key:"toJSON",value:function(){return e=this,this.serializableKeys.reduce((function(t,n){return t[n]=Y()(e[n]),t}),{});var e}},{key:"fromJSON",value:function(e){var t,n,r=(n=e,(t=this).serializableKeys.filter((function(e){return!z()(t[e],n[e])})));!function(e,t,n){e.forEach((function(e){t[e]=n[e]}))}(r,this,e),this.update(r)}},{key:"setupInteractions",value:function(){}},{key:"generate",value:function(){this.generateRenderable.apply(this,arguments),this.setupInteractions()}},{key:"clearCache",value:function(){}},{key:"update",value:function(){var e=Object(A.a)(w.a.mark((function e(t){var n,a,i;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return");case 2:return t.includes("selectable")&&(this.selectable?(n=this.selectionEventsDetach).push.apply(n,Object(r.a)(T(this))):this.selectionEventsDetach.forEach((function(e){return e()}))),t.includes("interactable")&&(this.interactable?(a=this.interactionEventsDetach).push.apply(a,Object(r.a)(L(this))):this.interactionEventsDetach.forEach((function(e){return e()}))),e.next=6,this.updateRenderable(t);case 6:i=new CustomEvent(o.c.UPDATE,{detail:{keys:t}}),this.eventTarget.dispatchEvent(i);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),F=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;Object(i.a)(this,n),(r=t.call(this,Object(s.a)({type:o.d.COLOR_LAYER},e),["colorRGB1","colorRGB2","colorTransparent"])).colorRGB1=void 0,r.colorRGB2=void 0,r.renderable=void 0,r.colorTransparent=void 0;var a=e.colorRGB1,c=e.colorRGB2,u=e.colorTransparent,l=void 0!==u&&u;return r.colorRGB1=a,r.colorRGB2=c,r.colorTransparent=l,r.generate(),r}return Object(c.a)(n,[{key:"generateRenderable",value:function(){this.renderable=Object(f.x)({x:this.x,Y:this.y,fill:this.getFill(),width:this.width,scaleX:this.scaleX,scaleY:this.scaleY,height:this.height,rotation:this.rotation,listening:this.interactable,fillLinearGradientStartPoint:{x:0,y:0},fillLinearGradientEndPoint:{x:this.width,y:this.height},fillLinearGradientColorStops:this.hasGradient()?[0,Object(h.a)(this.colorRGB1),1,Object(h.a)(this.colorRGB2)]:void 0,fillEnabled:!0,fillPriority:"linear-gradient"}),this.readyToRender=!0,this.eventTarget.dispatchEvent(this.readyEvent)}},{key:"setupInteractions",value:function(){v(this),y(this)}},{key:"hasGradient",value:function(){return!this.colorTransparent&&!!this.colorRGB2}},{key:"getFill",value:function(){var e=b()(this.colorRGB1);return this.colorTransparent&&e.setAlpha(0),e.toRgbString()}},{key:"updateRenderable",value:function(){Object(f.Lb)(this.renderable,{x:this.x,y:this.y,fill:this.getFill(),width:this.width,height:this.height,scaleX:this.scaleX,scaleY:this.scaleY,rotation:this.rotation,listening:this.interactable,fillLinearGradientStartPoint:{x:0,y:0},fillLinearGradientEndPoint:{x:this.width,y:this.height},fillLinearGradientColorStops:this.hasGradient()&&[0,Object(h.a)(this.colorRGB1),1,Object(h.a)(this.colorRGB2)],fillEnabled:!0,fillPriority:"linear-gradient"})}}]),n}(U),W=n(59),V=n(11),K=n(124),q=n(104),J=n(43),Q=function(e){Object(f.i)(e.renderable,"dblclick",(function(){Object(g.a)(p.a.actions.setEditingText(e.id))})),Object(f.i)(e.renderable,"mousedown",(function(){var t=Object(g.b)(O.Bc);1===t.length&&t[0]===e.id&&Object(f.j)(e.renderable,"click",(function(){Object(g.a)(p.a.actions.setEditingText(e.id))}))}))},Z=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;Object(i.a)(this,n),(r=t.call(this,Object(s.a)({type:o.d.TEXT_LAYER},e),["text","fontFamily","fontSrc","fontSize","fontStyle","textDecoration","fill","width","letterSpacing","lineHeight","padding","align","verticalAlign","wrap","colorRGB1","colorRGB2","shadowTransparent","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","shadowOpacity","outlineColor","sizeOutline","opacityOutline","outlineTransparent","textTransform","colorTransparent","colorOpacity","isPlaceholder"])).renderable=void 0,r.text=void 0,r.textTransform=void 0,r.fontFamily=void 0,r.fontSrc=void 0,r.fontSize=void 0,r.fontStyle=void 0,r.textDecoration=void 0,r.align=void 0,r.verticalAlign=void 0,r.padding=void 0,r.lineHeight=void 0,r.letterSpacing=void 0,r.wrap="word",r.colorRGB1=void 0,r.colorRGB2=void 0,r.colorTransparent=void 0,r.colorOpacity=void 0,r.shadowTransparent=void 0,r.shadowColor=void 0,r.shadowBlur=void 0,r.shadowOffsetX=void 0,r.shadowOffsetY=void 0,r.shadowOpacity=void 0,r.outlineColor=void 0,r.sizeOutline=void 0,r.opacityOutline=void 0,r.outlineTransparent=void 0,r.isPlaceholder=void 0;var a=e.text,c=e.fontFamily,u=void 0===c?"Picsart-Fonts":c,l=e.fontSize,d=e.fontStyle,f=void 0===d?"normal":d,h=e.textDecoration,p=void 0===h?"":h,g=e.width,O=e.letterSpacing,v=void 0===O?0:O,j=e.lineHeight,m=void 0===j?1:j,y=e.padding,x=e.align,w=void 0===x?"left":x,A=e.verticalAlign,E=e.wrap,k=void 0===E?"word":E,C=e.fontSrc,S=e.colorRGB1,T=e.colorRGB2,_=e.shadowTransparent,I=void 0===_||_,R=e.shadowColor,L=e.shadowBlur,P=void 0===L?20:L,G=e.shadowOffsetX,M=void 0===G?5:G,B=e.shadowOffsetY,D=void 0===B?5:B,N=e.shadowOpacity,z=void 0===N?100:N,H=e.outlineColor,Y=e.sizeOutline,X=void 0===Y?30:Y,U=e.opacityOutline,F=void 0===U?100:U,W=e.outlineTransparent,K=void 0===W||W,q=e.textTransform,J=e.colorTransparent,Q=void 0!==J&&J,Z=e.colorOpacity,$=void 0===Z?100:Z,ee=e.isPlaceholder,te=void 0!==ee&&ee;return r.text=a,r.fontFamily=u,r.fontSrc=C,r.fontSize=l,r.fontStyle=f,r.textDecoration=p,r.width=g,r.letterSpacing=v,r.lineHeight=m,r.padding=y,r.align=w,r.verticalAlign=A,r.wrap=k,r.colorRGB1=S||b()(Object(V.c)(V.b.paColor3)).toRgb(),r.colorRGB2=T||b()(Object(V.c)(V.b.paColor3)).toRgb(),r.shadowColor=R,r.shadowBlur=P,r.shadowOffsetX=M,r.shadowOffsetY=D,r.shadowOpacity=z,r.outlineColor=H,r.sizeOutline=X||0,r.opacityOutline=F,r.outlineTransparent=K,r.textTransform=q,r.colorTransparent=Q,r.shadowTransparent=I,r.colorOpacity=$,r.scaleX=1,r.scaleY=1,r.isPlaceholder=te,r.generate(),r}return Object(c.a)(n,[{key:"getFill",value:function(){return Object(h.a)(this.colorRGB1,this.colorTransparent?0:void 0!==this.colorOpacity?this.colorOpacity/100:this.colorRGB1.a)}},{key:"getOutLine",value:function(){if(this.outlineColor)return Object(h.a)(this.outlineColor,this.outlineTransparent?0:void 0!==this.opacityOutline?this.opacityOutline/100:this.outlineColor.a)}},{key:"getOutlineSize",value:function(){return this.sizeOutline&&this.sizeOutline*this.fontSize*j.Gg/100}},{key:"getShadowColor",value:function(){return!this.shadowColor||this.shadowTransparent?Object(h.a)([1,1,1,1],0):Object(h.a)(this.shadowColor)}},{key:"getShadowBlur",value:function(){return this.shadowBlur&&this.shadowBlur/5}},{key:"generateRenderable",value:function(){var e=this;this.renderable=Object(f.B)({x:this.x,y:this.y,id:this.id,fill:this.getFill(),text:Object(K.d)(this.textTransform,this.text),wrap:this.wrap,align:this.align,rotation:this.rotation,padding:this.padding,fontSize:this.fontSize,fontStyle:this.fontStyle,lineHeight:this.lineHeight,fontFamily:this.fontFamily,draggable:this.draggable,listening:this.interactable,width:this.width||void 0,verticalAlign:this.verticalAlign,letterSpacing:this.letterSpacing,stroke:this.getOutLine(),strokeWidth:this.getOutlineSize(),shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,shadowBlur:this.getShadowBlur(),shadowOpacity:void 0!==this.shadowOpacity?this.shadowOpacity/100:void 0,shadowColor:this.getShadowColor(),fillAfterStrokeEnabled:!0,lineJoin:"round"}),this.width=this.width||Object(f.db)(this.renderable).width,Object(f.Lb)(this.renderable,{width:this.width}),this.height=Object(f.db)(this.renderable).height,this.readyToRender=!0,this.fontSrc?W.h.loadFont(this.fontFamily,this.fontSrc).then((function(){e.eventTarget.dispatchEvent(e.readyEvent)})):this.eventTarget.dispatchEvent(this.readyEvent)}},{key:"setupInteractions",value:function(){y(this),Q(this),L(this)}},{key:"updateRenderable",value:function(){Object(f.Lb)(this.renderable,{x:this.x,y:this.y,align:this.align,visible:this.visible,rotation:this.rotation,padding:this.padding,fontSize:this.fontSize,fontStyle:this.fontStyle,lineHeight:this.lineHeight,fontFamily:this.fontFamily,draggable:this.draggable,letterSpacing:this.letterSpacing,interactable:this.interactable,textDecoration:this.textDecoration,fill:this.getFill(),stroke:this.getOutLine(),strokeWidth:this.getOutlineSize(),shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,shadowBlur:this.getShadowBlur(),shadowOpacity:void 0!==this.shadowOpacity?this.shadowOpacity/100:void 0,shadowColor:this.getShadowColor(),width:this.width||void 0}),this.renderable.text(Object(K.d)(this.textTransform,this.text)),q.a.transformer&&Object(J.h)(q.a.transformer),Object(g.a)(p.a.actions.patchLayerWithoutHistory({id:this.id,patch:{height:this.renderable.height()}}))}}]),n}(U),$=n(346),ee=n(167),te=n(29),ne=n(34),re=n(17),ae=function(e){var t=e.renderable;Object(f.i)(t,"dblclick",(function(){Object(C.m)(e.toJSON())||Object(C.d)(e.toJSON())||setTimeout((function(){Object(g.a)(p.a.actions.setActiveCropMode()),Object(g.a)(re.a.actions.setActiveCropMode(!0))}),0)}))},ie=n(24),ce=function(e,t){var n=[],r=new Array(t).fill(void 0).map((function(){var e=ie.a;return n.push(new Promise((function(t){return e=t}))),e}));return Promise.all(n).then(e),r},oe=function(e,t){e.complete&&0!==e.naturalHeight?t():e.onload=function(){t()}},se=n(341),ue=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;Object(i.a)(this,n),(r=t.call(this,Object(s.a)({type:o.d.IMAGE_LAYER},e),["url","effect","adjust","maskUrl"])).renderable=void 0,r.url=void 0,r.mutex=void 0,r.originalImage=void 0,r.image=void 0,r.imageWithoutMask=void 0,r.effect=void 0,r.adjust=void 0,r.maskUrl=void 0,r.imageWithoutEffect=void 0,r.maskImage=void 0;var a=e.url,c=e.image,u=void 0===c?new Image:c,l=e.maskUrl,d=e.maskImage,b=e.adjust,f=e.effect,h=e.visible,p=void 0===h||h;return r.adjust=b||{name:"adjust",settings:[]},r.meta.adjustGroups={light:!0},r.effect=f,d?(r.maskUrl=d.src,r.maskImage=d):l&&(r.maskImage=new Image,r.maskImage.crossOrigin="anonymous",r.maskImage.src=l,r.maskUrl=l),u.crossOrigin="anonymous",u.src||(a?u.src=a:ne.a.trigger("You should provide either url or image to create ImageLayer","error")),r.url=u.src,r.mutex=r.url,r.originalImage=u,r.image=u,r.visible=p,r.generate(u),r}return Object(c.a)(n,[{key:"checkMutexAvailability",value:function(e){return this.mutex===e}},{key:"setupInteractions",value:function(){ae(this),L(this),y(this)}},{key:"readyHelper",value:function(){this.readyToRender=!0,this.visible=!0,this.eventTarget.dispatchEvent(this.readyEvent)}},{key:"generateRenderable",value:function(){var e=this;this.renderable=Object(f.s)({x:this.x,y:this.y,id:this.id,width:this.width,image:this.image,height:this.height,scaleX:this.scaleX,scaleY:this.scaleY,zIndex:this.zIndex,opacity:this.opacity,visible:this.visible,rotation:this.rotation,draggable:this.draggable,listening:this.interactable,globalCompositeOperation:this.globalCompositeOperation});var t=ce(Object(A.a)(w.a.mark((function t(){var n,r,a;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(se.d)({isOriginalImageChange:!0,isEffectChange:!0,isEffectMaskChange:!0,isAdjustChange:!0,isMaskChange:!0},e,e.url);case 2:n=t.sent,r=n.image,a=n.imageWithoutMask,e.image=r,e.imageWithoutMask=a,e.renderable.image(e.image),e.readyHelper();case 9:case"end":return t.stop()}}),t)}))),2),n=Object(P.a)(t,2),r=n[0],a=n[1];this.maskImage instanceof HTMLImageElement?oe(this.maskImage,r):r(),this.image instanceof HTMLImageElement?oe(this.image,a):a()}},{key:"updateRenderable",value:function(){var e=Object(A.a)(w.a.mark((function e(t){var n,r,a,i,c,o,s,u,l,d,b,h,p;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.readyToRender){e.next=2;break}return e.abrupt("return");case 2:if(a=t.includes("effect"),i=t.includes("url"),c=t.includes("maskUrl"),o=t.includes("adjust"),s=!(!(null===(n=this.effect)||void 0===n?void 0:n.name)||!t.includes("globalCompositeOperation")),this.mutex=this.url,u=this.url,!i){e.next=16;break}return e.next=12,Object(te.a)(u);case 12:if(l=e.sent,this.checkMutexAvailability(u)){e.next=15;break}return e.abrupt("return");case 15:this.originalImage=l;case 16:if(Object(f.Lb)(this.renderable,{x:this.x,y:this.y,width:this.width,scaleY:this.scaleY,height:this.height,scaleX:this.scaleX,zIndex:this.zIndex||Object(f.db)(this.renderable).zIndex,opacity:this.opacity,visible:this.visible,rotation:this.rotation,draggable:this.draggable,listening:this.interactable,globalCompositeOperation:(null===(r=this.effect)||void 0===r?void 0:r.name)?"source-over":this.globalCompositeOperation}),!c){e.next=31;break}if(this.checkMutexAvailability(u)){e.next=20;break}return e.abrupt("return");case 20:if(!this.maskUrl){e.next=26;break}return e.next=23,Object(te.a)(this.maskUrl);case 23:e.t0=e.sent,e.next=27;break;case 26:e.t0=void 0;case 27:if(d=e.t0,this.checkMutexAvailability(u)){e.next=30;break}return e.abrupt("return");case 30:this.maskImage=d;case 31:if(!(i||a||s||o||c)){e.next=44;break}if(this.checkMutexAvailability(u)){e.next=34;break}return e.abrupt("return");case 34:return e.next=36,Object(se.d)({isOriginalImageChange:i,isEffectChange:a,isEffectMaskChange:!1,isAdjustChange:o,isMaskChange:c,isBlendChangeWithEffect:s},this,u);case 36:if(b=e.sent,h=b.image,p=b.imageWithoutMask,this.checkMutexAvailability(u)){e.next=41;break}return e.abrupt("return");case 41:this.image=h,this.imageWithoutMask=p,this.renderable.image(this.image);case 44:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearCache",value:function(){Object($.a)(Object(ee.a)(n.prototype),"clearCache",this).call(this),delete se.c[this.id]}},{key:"applyMutations",value:function(){return this.originalImage=this.image,this.originalImage instanceof Image?this.originalImage.src:this.url}}]),n}(U),le=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,Object(s.a)({type:o.d.GROUP_LAYER},e),["draggable","clip"])).renderable=void 0,r.clip=void 0,r.clip=e.clip||{},r.generate(),r}return Object(c.a)(n,[{key:"generateRenderable",value:function(){var e=Object(A.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.renderable=Object(f.r)({x:this.x,y:this.y,id:this.id,clip:this.clip,width:this.width,height:this.height,scaleX:this.scaleX,scaleY:this.scaleY,rotation:this.rotation,draggable:this.draggable,listening:this.interactable}),this.clip&&this.renderable.clip(this.clip),this.readyToRender=!0,this.visible=!0,this.eventTarget.dispatchEvent(this.readyEvent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setupInteractions",value:function(){y(this)}},{key:"updateRenderable",value:function(){this.readyToRender&&Object(f.Lb)(this.renderable,{x:this.x,y:this.y,clip:this.clip,width:this.width,scaleX:this.scaleX,scaleY:this.scaleY,height:this.height,rotation:this.rotation,draggable:this.draggable,listening:this.interactable})}}]),n}(U),de=n(23),be=Math.min,fe=Math.max,he=function(e,t){var n=b()(e).toRgb();return de.d.forEach((function(e){n[e]/=255,n[e]-=.5,n[e]*=t,n[e]+=.5,n[e]*=255,n[e]=be(fe(0,n[e]),255)})),b()(n).toHexString()},pe=Math.min,ge=Math.max,Oe=function(e,t){var n=b()(e).toRgb();return de.d.forEach((function(e){n[e]+=t,n[e]=pe(ge(0,n[e]),255)})),b()(n).toHexString()},ve=(n(566),n(567),de.q.L),je=de.q.C,me=de.q.Z,ye=de.s.z,xe=function(e,t,n){return{x:e.x+(t.x-e.x)*n,y:e.y+(t.y-e.y)*n}};function we(e,t){e.length>2&&(e[e.length-2]=t.x,e[e.length-1]=t.y)}var Ae=function(e){return{x:parseFloat(e[e.length-2]),y:parseFloat(e[e.length-1])}};var Ee=function(e,t){var n=e.split(" ").reduce((function(e,t){return[].concat(Object(r.a)(e),[t])}),[]).filter((function(e){return e})).reduce((function(e,t){return!t.match(de.l)&&e.length?e[e.length-1].push(t):e.push([t]),e}),[]),a=[];if(n.length>1){var i=null,c=n.length-1,o=Ae(n[0]);[me,ye].includes(n[c][0])&&n[0].length>2&&(i=[ve,o.x,o.y],n[c]=i),a.push(n[0]);for(var s=1;s<n.length;s++){var u=n[s],l=a[a.length-1],d=z()(u,i)?n[1]:n[s+1];if(d&&l&&l.length>2&&d.length>2&&[u[0],d[0]].includes(ve)){var b=Ae(l),f=Ae(u),h=Ae(d),p=xe(f,l.origPoint||b,t),g=xe(f,d.origPoint||h,t);we(u,p),u.origPoint=f,a.push(u);var O=xe(p,f,.5),v=xe(f,g,.5),j=[je,O.x,O.y,v.x,v.y,g.x,g.y];j.origPoint=f,a.push(j)}else a.push(u)}if(i){var m=Ae(a[a.length-1]);a.push([me]),we(a[0],m)}}else a=n;return a.reduce((function(e,t){return"".concat(e+t.join(" ")," ")}),"")},ke=n(406),Ce=de.s.z,Se=de.s.h,Te=de.s.v,_e=de.s.l,Ie=de.s.c,Re=de.s.a,Le=de.s.s,Pe=de.s.t,Ge=de.s.q,Me=de.q.L,Be=de.q.V,De=de.q.H,Ne=de.q.Z,ze=function(e,t,n){return(e-de.o)/(de.n-de.o)*(n-t)+t};var He=function(e,t){var n=t.newWidth,r=void 0===n?1:n,a=t.newHeight,i=void 0===a?1:a,c=t.moveX,o=void 0===c?0:c,s=t.moveY,u=void 0===s?0:s;return e.map((function(e,t){return e*(t%2?i:r)+(t%2?u:o)}))};function Ye(e,t){var n=t.width,a=t.height,i=t.settings,c=t.cornerRadius,o=t.colorRGB1,u=t.outlineColor,l=t.sizeOutline,d=t.colorTransparent,f=t.shadowColor,h=t.shadowOpacity,p=t.shadowOffsetX,g=t.shadowOffsetY,O=t.shadowBlur,v=t.opacity,m=function(e){return e.reduce((function(e,t){return e[t.name]=t.value,e}),{})}(i),y=m.blur,x=void 0===y?0:y,w=m.sepia,A=void 0===w?0:w,E=m.invert,k=void 0===E?0:E,C=m.grayscale,S=void 0===C?0:C,T=m.hueRotation,_=void 0===T?0:T,I=m.contrast,R=void 0===I?0:I,L=m.thickness,G=void 0===L?0:L,M=m.saturation,B=void 0===M?0:M,D=m.brightness,N=void 0===D?0:D,H=m.cornerRadius,Y=void 0===H?c:H,X=m.opacity,U=n-n*G/(2*de.k),F=a-a*G/(2*de.k),W=(n-U)/2,V=(a-F)/2,K=e.length>1;return e.map((function(e){var t,i,c,m,y,w=(c=e.path).includes("c")||c.includes("C")||c.includes("A")||c.includes("a"),E=null!==(t=(!!v&&(v>1?v/de.k:v)||e.opacity||1)*de.k)&&void 0!==t?t:de.k,C=null!==X&&void 0!==X?X:E,T=d?de.t:b()(o||e.fill||de.g).setAlpha(C/de.k).toRgbString(),I=b()(f).setAlpha(h/de.k).toRgbString(),L="".concat(p,"px ").concat(g,"px ").concat(O,"px  ").concat(I),G={saturation:B,contrast:ze(R,de.f,de.e)/de.k,brightness:N},M="\n      ".concat(x?"blur(".concat(x,"px)"):"","\n      ").concat(f?"drop-shadow(".concat(L,")"):"","\n      ").concat(A?"sepia(".concat(A/de.k,")"):"","\n      ").concat(k?"invert(".concat(k/de.k,")"):"","\n      ").concat(S?"grayscale(".concat(S/de.k,")"):"","\n      ").concat(_?"hue-rotate(".concat("".concat(_/de.k,"turn"),")"):"","\n      ").concat(B?"saturate(".concat((B+de.k)/de.k,")"):"","\n      ").concat(R?"contrast(".concat(ze(R,de.f,de.e),"%)"):"","\n      ").concat(N?"brightness(".concat(ze(N,de.c,de.b),"%)"):"","\n    ").trim(),D=Object.values(de.p).find((function(t){return t.path===e.path})),H={fillStyle:T,filtersToApply:M,adjustmentFilters:G,calcedOpacity:C/de.k,strokeWidth:null!==l&&void 0!==l?l:e.strokeWidth,opacity:d?0:(null!==(i=null!==X&&void 0!==X?X:e.opacity)&&void 0!==i?i:100)/de.k,strokeColor:b()((null!==u&&void 0!==u?u:e.stroke)||j.Cf).toRgb()};if(K||w||D){var q=(m=e.path,y=function(e){return Object(ke.c)(e,U,F,{moveX:D?D.movePoints.moveX:(n-U)/2,moveY:D?D.movePoints.moveY:(a-F)/2})},m.replace(de.r,y));return Object(s.a)(Object(s.a)(Object(s.a)({},e),H),{},{path:new Path2D(q)})}var J=function(e,t){var n=t.moveX,a=void 0===n?0:n,i=t.moveY,c=void 0===i?0:i,o=t.newWidth,u=void 0===o?1:o,l=t.newHeight,d=void 0===l?1:l;return e.reduce((function(e,n,i){var o,l=Object(s.a)(Object(s.a)({},n),{},{values:Object(r.a)(n.values)}),b=e[i-1],f=null===b||void 0===b?void 0:b.values.length,h=(f>2?[null===b||void 0===b?void 0:b.values[f-2],null===b||void 0===b?void 0:b.values[f-1]]:null===b||void 0===b?void 0:b.values)||[0,0],p=Object(P.a)(h,2),g=p[0],O=p[1];if(n.marker===Me&&z()(He(null===n||void 0===n?void 0:n.values,t),null===(o=e[0])||void 0===o?void 0:o.values))return e;if(de.s[n.marker])switch(n.marker){case Se:return l.marker=Me,l.values=[n.values[0]*u+g,O],e.push(l),e;case Te:return l.marker=Me,l.values=[g,n.values[0]*d+O],e.push(l),e;case _e:return l.marker=n.marker.toUpperCase(),l.values=He(n.values,t).map((function(e,t){return e+(t%2?g:O)})),e.push(l),e;case Ie:case Re:case Ce:case Le:case Pe:case Ge:return l.marker=n.marker.toUpperCase(),l.values=He(n.values,t).map((function(e,t){return e+(e<0?-1:1)*(t%2?g:O)})),e.push(l),e}return n.marker===De?(l.marker=Me,l.values=[n.values[0]*u+a,O],e.push(l),e):n.marker===Be?(l.marker=Me,l.values=[g,n.values[0]*d+c],e.push(l),e):(l.values=He(l.values,t),e.push(l),e)}),[])}(e.path.match(de.r).map((function(e){var t,n=e.match(de.l)[0];return{marker:n,values:![Ce,Ne].includes(n)&&(null===(t=e.match(de.j))||void 0===t?void 0:t.map(parseFloat))||[]}})),{newWidth:U,newHeight:F,moveX:W,moveY:V}).reduce((function(e,t){return"".concat(e," ").concat(t.marker," ").concat(t.values.join(" "))}),"");return Y?Object(s.a)(Object(s.a)(Object(s.a)({},e),H),{},{path:new Path2D(Ee(J,Y/(2*de.k)))}):Object(s.a)(Object(s.a)(Object(s.a)({},e),H),{},{path:new Path2D(J)})}))}var Xe=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;Object(i.a)(this,n),(r=t.call(this,Object(s.a)({type:o.d.VECTOR_LAYER},e),["paths","adjust","colorRGB1","shadowBlur","shadowColor","sizeOutline","cornerRadius","outlineColor","shadowOffsetX","shadowOffsetY","shadowOpacity","opacityOutline","colorTransparent","outlineTransparent"])).renderable=void 0,r.shape=void 0,r.hiddenRect=void 0,r.paths=void 0,r.method=void 0,r.pointerPath=void 0,r.defaultClipFunc=void 0,r.promise=void 0,r.adjust=void 0,r.cornerRadius=void 0,r.sizeOutline=void 0,r.opacityOutline=void 0,r.colorRGB1=void 0,r.outlineColor=void 0,r.shadowOffsetX=void 0,r.shadowOffsetY=void 0,r.shadowBlur=void 0,r.shadowColor=void 0,r.shadowOpacity=void 0,r.colorTransparent=void 0,r.outlineTransparent=void 0,r.initialRectX=void 0,r.initialRectY=void 0,r.isPlaceholder=void 0,r.method="fill";var a=e.promise,c=e.paths,u=void 0===c?[]:c,l=e.colorRGB1,d=e.outlineColor,b=e.cornerRadius,f=void 0===b?0:b,h=e.colorTransparent,p=void 0!==h&&h,g=e.outlineTransparent,O=void 0===g||g,v=e.sizeOutline,j=void 0===v?de.h:v,m=e.shadowColor,y=e.shadowBlur,x=void 0===y?0:y,w=e.shadowOffsetX,A=void 0===w?0:w,E=e.shadowOffsetY,k=void 0===E?0:E,C=e.shadowOpacity,S=void 0===C?de.k:C,T=e.opacityOutline,_=void 0===T?de.k:T,I=e.adjust;return r.adjust=I||{name:"adjust",settings:[]},r.paths=u,r.colorRGB1=l,r.sizeOutline=j,r.outlineColor=d,r.opacityOutline=_,r.shadowBlur=x,r.shadowColor=m,r.shadowOpacity=S,r.shadowOffsetX=A,r.shadowOffsetY=k,r.colorTransparent=p,r.outlineTransparent=O,r.initialRectX=null,r.initialRectY=null,r.cornerRadius=f,r.promise=a,r.pointerPath=[],r.isPlaceholder=!1,r.generate(),r}return Object(c.a)(n,[{key:"isCollage",value:function(){return this.dependencies.length>0}},{key:"setupCollage",value:function(){var e=this;this.renderable.clipFunc((function(t){return e.renderFunc(t,"clip")}))}},{key:"generateRenderable",value:function(){var e=this;if(!this.paths.length)throw new Error("Please provide paths");if(this.paths.length>de.m)throw new Error("Please use Image layer");this.shape=Object(f.y)({id:"".concat(this.id,"shape"),draggable:this.draggable,listening:this.interactable,sceneFunc:function(t){return e.renderFunc(t,"fill")},globalCompositeOperation:this.globalCompositeOperation}),this.renderable=Object(f.E)({id:this.id,x:this.x,y:this.y,width:this.width,height:this.height,scaleX:this.scaleX,scaleY:this.scaleY,rotation:this.rotation,draggable:this.draggable,listening:this.interactable}),this.defaultClipFunc=this.renderable.clipFunc,this.hiddenRect=Object(f.x)({draggable:!1,width:this.width,height:this.height,opacity:1,id:Object(D.a)()}),Object(f.h)(this.renderable,this.shape),this.isCollage()?this.setupCollage():Object(f.h)(this.renderable,this.hiddenRect),this.promise?this.promise.then((function(t){e.width=t.width,e.height=t.height,e.paths=t.paths,e.readyHelper()})):this.readyHelper()}},{key:"setupInteractions",value:function(){L(this),y(this)}},{key:"updateHiddenRect",value:function(){var e=Object(f.db)(this.hiddenRect),t=e.x,n=e.y,r=Object(f.db)(this.renderable).strokeWidth,a=void 0===r?0:r;Object(f.Lb)(this.hiddenRect,{x:t-(this.sizeOutline-a)/2,y:n-(this.sizeOutline-a)/2,width:this.width+this.sizeOutline,height:this.height+this.sizeOutline})}},{key:"updateRenderable",value:function(){this.readyToRender&&(this.updateHiddenRect(),this.pointerPath=Ye(this.paths,{width:this.width,height:this.height,cornerRadius:this.cornerRadius,settings:this.adjust.settings,colorRGB1:this.colorRGB1,sizeOutline:this.sizeOutline,outlineColor:this.outlineColor,colorTransparent:this.colorTransparent,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,shadowOpacity:this.shadowOpacity,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,opacity:this.opacity}),this.isCollage()?(this.setupCollage(),Object(f.Ib)(this.hiddenRect)):this.defaultClipFunc&&(Object(f.N)(this.renderable,"#".concat(this.hiddenRect.id()))||Object(f.h)(this.renderable,this.hiddenRect),this.renderable.clipFunc=this.defaultClipFunc),Object(f.Lb)(this.renderable,{x:this.x,y:this.y,scaleX:this.scaleX,scaleY:this.scaleY,rotation:this.rotation,draggable:this.draggable,listening:this.interactable,strokeWidth:this.sizeOutline}),Object(f.Lb)(this.shape,{globalCompositeOperation:this.globalCompositeOperation}))}},{key:"readyHelper",value:function(){this.pointerPath=Ye(this.paths,{width:this.width,height:this.height,cornerRadius:this.cornerRadius,settings:this.adjust.settings,colorRGB1:this.colorRGB1,sizeOutline:this.sizeOutline,outlineColor:this.outlineColor,colorTransparent:this.colorTransparent,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,shadowOpacity:this.shadowOpacity,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,opacity:this.opacity}),this.readyToRender=!0,this.visible=!0,this.eventTarget.dispatchEvent(this.readyEvent)}},{key:"renderFunc",value:function(e,t){var n=this,r=e._context,a="clip"===t;a&&(null===r||void 0===r||r.rect(de.a.x,de.a.y,de.a.width,de.a.height)),this.pointerPath.forEach((function(e){var i=e.adjustmentFilters,c=i.saturation,o=i.contrast,s=i.brightness,u=b()(a?de.t:e.fillStyle).toHexString(),l=b()(Oe(he(u,o),s)).saturate(c).toHslString();if(r.fillStyle=b()(l).setAlpha(e.calcedOpacity).toHex8String(),e.lineCap&&(r.lineCap=e.lineCap),e.lineJoin&&(r.lineJoin=e.lineJoin),e.strokeColor&&e.strokeWidth){var d,f=n.outlineTransparent?0:(null!==(d=n.opacityOutline)&&void 0!==d?d:de.k)/de.k;r.strokeStyle=b()(e.strokeColor).setAlpha(f).toRgbString(),r.lineWidth=e.strokeWidth,a&&r.fill(e.path),r.stroke(e.path)}r[t](e.path),e.dashedPath&&(r.globalCompositeOperation="destination-atop",r.strokeStyle="white",r.lineWidth=10,r.setLineDash([10]),r.stroke(e.dashedPath))}))}}]),n}(U),Ue=new(function(){function e(){var t,n=this;Object(i.a)(this,e),this.layerRegistry={},this.layerClassMap=(t={},Object(a.a)(t,o.d.IMAGE_LAYER,ue),Object(a.a)(t,o.d.COLOR_LAYER,F),Object(a.a)(t,o.d.TEXT_LAYER,Z),Object(a.a)(t,o.d.GROUP_LAYER,le),Object(a.a)(t,o.d.VECTOR_LAYER,Xe),t),this.createOrUpdateLayer=function(e){var t=n.layerRegistry[e.id],r=t?t.layer:n.createLayer(e.type,e);return e.addWithLoader&&!t&&(q.a.showLoader(),r.renderable.hide(),r.onReady((function(){r.renderable.show(),q.a.hideLoader(),Object(g.a)(p.a.actions.patchLayerWithoutHistory({id:r.id,patch:{transformable:!0}}))}))),t&&r.fromJSON(e),r}}return Object(c.a)(e,[{key:"syncLayers",value:function(e,t){var n=e.map(this.createOrUpdateLayer);return this.checkAndAttachEvents(t),n}},{key:"createLayer",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.layerClassMap[e],a=new r(t);return n&&this.addLayerToRegistry(a),a}},{key:"getLayer",value:function(e){var t;if(e)return null===(t=this.layerRegistry[e])||void 0===t?void 0:t.layer}},{key:"checkAndAttachEvents",value:function(e){var t=this;Object.values(this.layerRegistry).forEach((function(n){n.eventsAttached||t.setupListeners(n.layer,e)}))}},{key:"addLayerToRegistry",value:function(e){this.layerRegistry[e.id]={layer:e,eventsAttached:!1}}},{key:"setupListeners",value:function(e,t){var n=this,a=[].concat(Object(r.a)(e.dependencies.map((function(e){return n.layerRegistry[e.layerId].layer}))),[e]),i=ce((function(){t(e)}),a.length);a.forEach((function(e,t){if(e.readyToRender)return i[t]();e.onReady(i[t])})),e.onUpdate((function(){return t(e)})),this.layerRegistry[e.id].eventsAttached=!0}}]),e}()),Fe=t.a=Ue},function(e,t,n){"use strict";n.d(t,"d",(function(){return G})),n.d(t,"a",(function(){return M})),n.d(t,"c",(function(){return N})),n.d(t,"f",(function(){return U})),n.d(t,"b",(function(){return F})),n.d(t,"e",(function(){return W})),n.d(t,"g",(function(){return V}));var r=n(14),a=n(2),i=n(4),c=n(114),o=n.n(c),s=n(46),u=n.n(s),l=n(27),d=n(59),b=n(12),f=n(6),h=n(9),p=n(17),g=n(63),O=(n(255),n(437)),v=n(338),j=n(145),m=n(81),y=n(16),x=n(1),w=n(11),A=n(153),E=n(73),k=n(0),C=n(133),S="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAQAAAD9CzEMAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfkBxgGLhx9B3mFAAADeklEQVRYw+2WzWtUVxjGf/djPjJDDJNxAsZiC4kITQ1VaCHblnbjsmCpEIsUwUXrn+Cif4ILd4VOYikI0ZWbltSFkEhCa6kNIqaYaieBSUxMhmZmMveep4u5NzN3PpLSLp3nhfm45z3vc59z3vO+B3rooYceXgNYLd916H9Ga4piNw1Y3qdYWG2OVpPZ2JH/reGtIEoLnYWNgyuvfAEXpyWIXR/FxSVGLPjltJHZOLjlC/L2YwBuE4mDk5zatgdu4QcCLSysMXv2zJEJ94z9lnXMSoF2tWZWvIc78x8+XDII7fs62+eT3+Lg4EeX2cIhQVqS5G1cJIGLg0ts5WzlhllTF5jVyo2Vs8QC78TGRXmSRJoETl1BfZ1sbFzi2gbAX/9i6BZm9b3cNfcjgL21X5//pIX08sBOEo5URrff//sD690T8WMA3o/rXw8vYhfP577BAbAG2MPDYEIFNjFSZCTpuzlJXvFqOS8jmdK9uYmnwTK02cTTe3OmJMmU88Wr8oLZIkOKWJBA+wRpspKEbs4HC1Cdmcu+6hY8tOyrmTlTrc+4OY8kiSzpTgRH6wRo+oFUfPz2i8OChzb2ovhYmn6AAoKjDYJwDxzi9Gk9fDD52/djntOcB4Olj5+PVN8w8Jf9R+KHE5v9zaOu/9nS9Hh4uqwcZfbwo3vQpCBqgzvXF18+kx9JIP/ls+uLgzvt3gcpSKnYeoj7qvlHn7xjJ0HV0qPdP8tb0JdJvdl/2kqAqcz8/vnpcqK1PlhD7HZSkGtVcHyjtCrJbN6/e+XUOCcZZYQRRjl5avzulc37MlJp9fhGm4JcQ4HNAShkbxdAWrpzbvZJiSrlwKpPSudml+5IcLtQyB5eBbsoQCi/KMn7+UuGGSJLhgxZhhj+5St5Un6x4x7kOqdprvMmTy1I8pYvk6GfNGn6ySxflidNLXTZ5NwB56ArvMIlUiRIkCpcqtecbmjOouZSkdXB8LYmiRPfmjw4vES2USrC1uAQI0GSJLGwkgdZJwweHlX2qOEDDjHiJHBxg47Q8DbUqFChSq1est2mIZ8a4EUIGhQmqPvhkxrCb+lqdc8aPibsB26EG3yclndq0IfTDD5g8NpaoxA+PrXOBKAWydF3UzDNwsNv0RnVaxoEVuTT6hI+nBo2Ug7xayxmh2tLt4nRy8y/8fqvl58eeujh9cM/bu/RT6Yi9OwAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjAtMDctMjRUMDY6NDY6MjIrMDA6MDCON/u1AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIwLTA3LTI0VDA2OjQ2OjIyKzAwOjAw/2pDCQAAAABJRU5ErkJggg==",T=n(43),_=n(49),I=(n(250),n(15)),R=n(387),L=n(276),P=function(e){var t=Object(k.V)(e,".back");Object(k.i)(t,"click mousemove",R.a),Object(k.i)(t,"mouseup",(function(e){Object(f.b)(h.Y)&&Object(R.a)(e)})),Object(k.i)(t,"dblclick",(function(t){var n=Object(k.ob)(e),r=Object(I.a)(n,1)[0];if(1===n.length)return Object(k.Ab)(r)?Object(L.e)(Object(a.a)(Object(a.a)({},t),{},{target:r})):Object(k.ub)(r)?Object(k.Y)(r,"dblclick",{target:r}):void 0}))},G=function(e){var t=Object(k.mb)(e),n=Object(f.b)(h.jc),r=x.Lg*(n?1:Object(k.db)(t).scaleX);if(t){e.update=function(){var a,i=n?{x:1,y:1}:Object(k.db)(t).scale;!function(e){var t=e?Object(k.jb)(e):null;if(t){var n=Object(k.ob)(e).find((function(e){return Object(k.db)(e).name===x.Bc}));return!!n&&!!Object(C.f)(Object(k.R)(t,"#".concat(Object(k.db)(n).id)))}}(e)?Object(k.Lb)(e,{borderDash:void 0}):(Object(k.Lb)(e,{borderDash:[6]}),a="#0000"),u.a.Transformer.prototype.update.apply(e),Object(_.c)(e,["top-center","bottom-center","middle-right","middle-left"],i,r),Object(_.d)(e,{offset:r,color:a}),Object(_.b)(e,i),Object(_.a)(e,i),function(e,t,n){var r=(n?{scaleX:1}:Object(k.db)(Object(k.mb)(e))).scaleX,a=42*(r>1?r:1),i=Object(k.db)(e).width,c=Object(k.db)(e).height,o=Math.abs(i)<a||Math.abs(c)<a;t.forEach((function(t){var n=Object(k.V)(e,".".concat(t));o?Object(k.qb)(n):Object(k.Ob)(n)}))}(e,["top-center","top-right","middle-left","bottom-left","bottom-center","bottom-right"],n)};var a=Object(k.U)(e,".rotater");Object(k.H)(a,"mouseenter"),Object(k.Lb)(a,{fill:Object(w.c)(w.b.paColor9)}),Object(k.Lb)(a,{stroke:Object(w.c)(w.b.paColor9)}),Object(k.i)(a,"mouseover",(function(){Object(k.hb)(t).style.setProperty("cursor","-webkit-image-set(url(".concat(S,") 2x,url(").concat(S,") 3x) 12 12,auto"))})),Object(k.i)(a,"mouseout",(function(){Object(k.hb)(t).style.setProperty("cursor","default")})),e.update()}},M={text:["top-left","top-right","bottom-left","bottom-right","middle-right"],textWithGroup:["top-left","top-right","bottom-left","bottom-right"],default:["top-left","top-right","bottom-left","bottom-right","middle-left","middle-right","bottom-center","top-center"]},B=function(e,t){var n=!1,r=!1;return!t&&Object(k.Ab)(e)?M.text:(t&&Object(k.ob)(t).forEach((function(e){Object(k.Ab)(e)&&(n=!0),Object(k.Ab)(e)||(r=!0)})),n&&!r?M.text:n&&r?M.textWithGroup:M.default)},D=20,N=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=B(t);return Object(k.D)({id:x.ob,anchorStroke:Object(w.c)(w.b.paColor1),anchorFill:Object(w.c)(w.b.paColor9),anchorSize:x.s*e,borderStroke:Object(w.c)(w.b.paColor1),anchorCornerRadius:50,resizeEnabled:!0,rotateEnabled:!0,borderStrokeWidth:2*e,anchorStrokeWidth:2*e,rotateAnchorOffset:20*e,rotationSnaps:[0,90,180,270,45,-45,135,225],rotationSnapTolerance:5,enabledAnchors:r,shouldOverdrawWholeArea:n,boundBoxFunc:function(e,n){var r=t&&Object(k.db)(t).name===x.zg||Object(k.Ab)(t),a=n.height<D&&n.height<e.height||n.width<D&&n.width<e.width;return r&&a?e:n}})},z=function(e,t){var n,r=e?Object(k.jb)(e):null;if(r&&!Object(k.vb)(e)&&t){var a=Object(k.db)(e).id;!Object(k.db)(t).visible&&Object(k.Ob)(t),!Object(k.jb)(t)&&Object(k.f)(r,t);var c=e;"image-canvas-effect-filter"!==a?(Object(k.tb)(Object(k.kb)(e))&&Object(k.lb)(e).id!==x.z&&(c=Object(k.kb)(e)),Object(k.Lb)(t,(n={},Object(i.a)(n,x.v,Object(k.db)(c).id),Object(i.a)(n,"nodes",[c]),n))):Object(k.qb)(t)}},H=[],Y=function(e){var t=Object(k.ob)(e).map((function(e){var t=Object(k.a)(e);return t.name===x.Bc&&Object(k.tb)(e)&&(t.imagesOldAttrs=Object(k.T)(e,".".concat(x.Dc)).map((function(e){return Object(k.a)(e)}))),Object(a.a)({},t)}));H=Object(r.a)(t)},X=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Object(k.ob)(e),i=r.map((function(e){return Object(a.a)({},Object(k.a)(e))}));if(!o()(i,H)){var c={name:Object(k.db)(e).name,children:r.map((function(e){var n=Object(k.db)(e),r=n.id,a=n.name,i=H.find((function(e){return e.id===r}));if(!i||o()(H,i))return e;if(t){var c=Object(k.db)(e),s=c.fontSize,u=c.scaleX,d=c.scaleY,h=c.rotation,p={zoom:0,rotate:h?h<180?Math.floor(h):Math.floor(h-360):0,fontSize:s,scaleXTransformer:u,scaleYTransformer:d};Object(l.b)((function(){Object(f.a)({type:b.l,settings:p}),a===x.Bc&&Object(k.tb)(e)&&Object(k.T)(e,".".concat(x.Dc)).forEach((function(e){var t=Object(k.db)(e),n=t.scaleX,r=t.scaleY,a=t.x,i=t.y,c=t.id,o={scaleX:n,scaleY:r,x:a,y:i};Object(f.a)({type:b.l,settings:o,id:c})}))}))}var g=Object(k.db)(e),O=g.x,v=g.y,j=g.width,m=g.height,y=g.padding,w=g.fontSize,A=g.strokeWidth,E=g.letterSpacing,C=g.scaleX,S=g.scaleY,T=g.rotation,_=g.skewX,I=g.skewY;return{id:r,x:{oldValue:i.x,newValue:O},y:{oldValue:i.y,newValue:v},padding:{oldValue:null===i||void 0===i?void 0:i.padding,newValue:y},fontSize:{oldValue:i.fontSize,newValue:w},strokeWidth:{oldValue:i.strokeWidth,newValue:A},letterSpacing:{oldValue:i.letterSpacing,newValue:E},width:{oldValue:i.width,newValue:j},height:{oldValue:i.height,newValue:m},scaleX:{oldValue:i.scaleX,newValue:C},scaleY:{oldValue:i.scaleY,newValue:S},rotation:{oldValue:i.rotation,newValue:T},skewX:{oldValue:i.skewX,newValue:_},skewY:{oldValue:i.skewY,newValue:I}}})),type:y.b.transformend};Object(m.a)({historyStack:{historyAction:y.a.object_position,settings:Object(a.a)({},c)},mergeWithLast:!n})}},U=function(e){var t=e.layer,n=e.contextMenuRef,r={x:0,y:0},a=Object(k.mb)(t),i=Object(k.X)(t,x.pb);if(i){Object(k.i)(i,"mousedown",(function(){return Y(i)})),Object(k.i)(i,"dragstart",(function(e){if(Object(k.qb)(i),Object(k.Gb)(i),e.evt.cancelBubble=!0,e.evt.shiftKey&&g.a.hotKeyAction(e.evt.altKey?"option + shift + drag":"shift + drag"),e.evt.altKey){var t,n=Object(O.a)({type:"duplicate",movePixels:0});if(n)null===(t=Object(k.ob)(i))||void 0===t||t.forEach((function(e){e.stopDrag()})),n.newKonvaElements[0].startDrag(e)}Y(i)}));var c=Object(f.b)(h.A);Object(j.b)(c,4,!0),Object(k.i)(i,"transformstart",(function(){Object(k.ob)(i).forEach((function(e){return Object(k.Lb)(e,{storedXScale:e.scaleX(),storedRotation:e.rotation()})})),r=Object(k.pb)(a),Object(k.Lb)(i,{centeredScaling:!1})})),Object(k.i)(i,"transform",(function(e){var c,o,s=e.evt,u=Object(f.b)(h.Sd);t&&u&&(Object(k.Ob)(Object(k.ab)(i)),Object(k.I)(t),Object(f.a)(p.a.actions.setVisibilityTextarea(!1))),"flex"===(null===n||void 0===n||null===(c=n.current)||void 0===c||null===(o=c.style)||void 0===o?void 0:o.display)&&n.current.style.setProperty("display","none");var l=Object(k.pb)(a),b=Object(k.ob)(i),g=b.some((function(e){return Object(k.db)(e).name===x.Bc})),O=b.some((function(e){return Object(k.db)(e).name===x.tg}));b.forEach((function(e){if(Object(k.db)(e).name===x.Bc){i.boundBoxFunc((function(e,t){return t.height<40&&t.height<e.height||t.width<40&&t.width<e.width?e:t}));var t=Object(k.db)(e),n=t.scaleX,a=t.scaleY,c=t.x,o=t.y,u=t.rotation,b={width:t.width*n,height:t.height*a,x:c,y:o,transformerScaleX:n,transformerScaleY:a,scaleX:1,scaleY:1,rotation:u};Object(k.tb)(e)&&Object(d.i)(e,b,H)}else if(Object(k.Ab)(e))if(["middle-right","middle-left"].includes(i.getActiveAnchor())){Object(k.Lb)(e,{wrap:"word"}),i.boundBoxFunc((function(e){return e}));var f=function(e,t,n){var r=Object(E.a)(Object(k.db)(e).rotation),a=Object(k.db)(e).width;if(t&&n){var i=Math.sign((t.x-n.x||t.y-n.y)*Math.cos(r)),c=Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2));return Math.abs(Math.sin(r))<.5?(i=Math.sign(Math.cos(r)),c=t.x-n.x):Math.abs(Math.cos(r))<.5&&(i=Math.sign(Math.sin(r)),c=t.y-n.y),a+c*i/Object(k.db)(e).storedXScale}return a}(e,l,r),h=Object(k.db)(e).storedXScale;Object(k.Lb)(e,{width:40<f*h?f:40/h,scaleX:h})}else i.boundBoxFunc((function(e,t){return t.height<1&&t.height<e.height||t.width<1&&t.width<e.width?e:t}));else{Object(k.Lb)(i,{centeredScaling:s.shiftKey}),!g&&!O&&i.boundBoxFunc((function(e,t){return t}));var p=Object(k.db)(e),v=p.storedRotation,j=p.storedXScale,m=p.rotation,y=p.scaleX,w=p.scaleY;if(!Object(k.Ab)(e)&&Math.abs(y-j)>.001&&m!==v){var A=m<0?m+180:m-180,C={rotation:A,scaleX:-y,scaleY:-w,storedXScale:-y,storedRotation:A};Object(k.Lb)(e,C)}}})),r=l})),Object(k.i)(i,"dragend",(function(){Object(k.Ob)(i),Object(T.g)(i),X(i)})),Object(k.i)(i,"transformend",(function(){Object(k.ob)(i).forEach((function(e){if(Object(k.Ab)(e)){var t=Object(A.a)(Object(k.db)(e));Object(k.Lb)(e,t);var n=Math.pow(10,11),r=Object(k.db)(e).width,a=Math.ceil(r*n)/n;Object(k.Lb)(e,{width:a}),Object(T.g)(i)}}));var e=Object(k.R)(i,"#transform-badge");Object(k.G)(e),Object(k.Lb)(i,{name:x.td}),X(i,!0),Object(k.k)(t)})),P(i)}},F=function(e){var t=e.layer,n=e.node,r=e.isAttach,a=void 0===r||r,i=Object(f.b)(h.jc)?{x:1,y:1}:Object(k.db)(Object(k.mb)(t)).scale,c=Object(k.X)(t,x.pb);c&&(a&&z(n,c),Object(k.Lb)(c,{anchorSize:12*i.x,borderStrokeWidth:2*i.x,anchorStrokeWidth:2*i.x,rotateAnchorOffset:20*i.x,enabledAnchors:B(n,c),boundBoxFunc:function(e,t){var r=Object(k.db)(n).name===x.zg||Object(k.Ab)(n),a=t.height<D&&t.height<e.height||t.width<D&&t.width<e.width;return r&&a?e:t}}),G(c),Object(v.a)(t),Object(k.I)(t))},W=function(e){var t=Object(k.N)(e,".".concat(x.Bc),!0);if(Object(C.c)(),t&&Object(k.tb)(t)){Object(k.db)(e).name===x.Bc&&Object(k.tb)(t)&&Object(C.d)(t);var n=Object(_.f)(t),r=Object(k.N)(e,".".concat(x.Cc),!0);n&&Object(k.tb)(r)&&!Object(k.db)(r).is_cell_active?Object(C.i)(r):!n&&Object(k.tb)(t)&&Object(C.d)(t)}},V=function(e){var t,n=null===(t=Object(f.b)(h.e))||void 0===t?void 0:t.type;return e.length>0&&n!==x.Cc}},,,function(e,t,n){"use strict";var r=n(0);t.a=function(e){var t;Object(r.tb)(e)||(Object(r.S)(e,"Image").each((function(e){e.attrs.mask&&(t=e)})),t&&Object(r.Gb)(t))}},function(e,t,n){"use strict";var r=n(40),a=n(42),i=n(101),c=n(100),o=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).POINT_ZERO={x:0,y:0},e.POINT_NAN={x:NaN,y:NaN},e}return Object(a.a)(n,[{key:"intersectionPointOfTwoSegments",value:function(e,t,r,a,i){var c=(e.x-t.x)*(r.y-a.y)-(e.y-t.y)*(r.x-a.x);if(0===c)return this.POINT_NAN;if(n.pointIsEquavivalentToPoint(e,r)||n.pointIsEquavivalentToPoint(e,a))return e;if(n.pointIsEquavivalentToPoint(t,r)||n.pointIsEquavivalentToPoint(t,a))return t;var o=((r.x-a.x)*(e.x*t.y-e.y*t.x)-(e.x-t.x)*(r.x*a.y-r.y*a.x))/c,s=((r.y-a.y)*(e.x*t.y-e.y*t.x)-(e.y-t.y)*(r.x*a.y-r.y*a.x))/c;if(i){if(o<Math.min(e.x,t.x)||o>Math.max(e.x,t.x))return this.POINT_NAN;if(o<Math.min(r.x,a.x)||o>Math.max(r.x,a.x))return this.POINT_NAN}return n.makePoint(o,s)}}],[{key:"getArrow",value:function(e,t){return{X:t.x-e.x,Y:t.y-e.y}}},{key:"getArrowLength",value:function(e){return Math.sqrt(Math.pow(e.X,2)+Math.pow(e.Y,2))}},{key:"getDotProduct",value:function(e,t){return e.X*t.X+e.Y*t.Y}},{key:"getPointAngle",value:function(e){return Math.atan2(e.y,e.x)}},{key:"getDistanceBetweenPoints",value:function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}},{key:"pointSquaredLength",value:function(e){return Math.pow(e.X,2)+Math.pow(e.Y,2)}},{key:"getAngleOfArrows",value:function(e,t){var r=n.getDotProduct(e,t)/Math.sqrt(n.pointSquaredLength(e)*n.pointSquaredLength(t));return Math.abs(r)<1?Math.acos(r):r>=1?0:Math.PI}},{key:"pointScale",value:function(e,t){return this.makePoint(e.x*t,e.y*t)}},{key:"subtractPointFromPoint",value:function(e,t){return this.makePoint(t.x-e.x,t.y-e.y)}},{key:"getPointRotate",value:function(e,t){var n=Math.sin(t),r=Math.cos(t);return this.makePoint(e.x*r-e.y*n,e.x*n+e.y*r)}},{key:"pointMakeInvert",value:function(e){return this.makePoint(-e.x,-e.y)}},{key:"pointIsEquavivalentToPoint",value:function(e,t){return this.IS_EQUAL_FLOATS(e.x,t.x)&&this.IS_EQUAL_FLOATS(e.y,t.y)}},{key:"areaOfTriangle",value:function(e,t,r){var a=n.subtractPointFromPoint(t,e),i=n.subtractPointFromPoint(t,r),c=(a.x*i.y-a.y*i.x)/2;return Math.abs(c)}},{key:"computeAngles",value:function(e){for(var t=[],r=0;r<e.length;++r){var a=this.getPointArrayPointAtCycleIndex(e,r-1),i=this.getPointArrayPointAtCycleIndex(e,r),c=this.getPointArrayPointAtCycleIndex(e,r+1),o=n.getArrow(this.getPointXY(i),this.getPointXY(a)),s=n.getArrow(this.getPointXY(i),this.getPointXY(c)),u=n.getAngleOfArrows(o,s);t.push(u)}return t}},{key:"centerOfTrinagle",value:function(e,t,n){return this.makePoint((e.x+t.x+n.x)/3,(e.y+t.y+n.y)/3)}},{key:"drawRoundedPoly",value:function(e,t,n){for(var r,a,i,c,o,s,u={nx:NaN,ny:NaN,len:NaN,ang:NaN},l={nx:NaN,ny:NaN,len:NaN,ang:NaN},d=function(e,t){var n=t.x-e.x,r=t.y-e.y,a=Math.sqrt(n*n+r*r),i=n/a,c=r/a;return{x:n,y:r,len:a,nx:i,ny:c,ang:Math.atan2(c,i)}},b=e.length,f=e[b-1],h=0;h<b;h++){var p=t,g=e[h%b],O=e[(h+1)%b];u=d(g,f),l=d(g,O);var v=u.nx*l.ny-u.ny*l.nx,j=u.nx*l.nx-u.ny*-l.ny;r=Math.asin(v),o=1,s=!1,j<0?r<0?r=Math.PI+r:(r=Math.PI-r,o=-1,s=!0):r>0&&(o=-1,s=!0),c=r/2,(a=Math.abs(Math.cos(c)*p/Math.sin(c)))>Math.min(u.len/2,l.len/2)?(a=Math.min(u.len/2,l.len/2),i=Math.abs(a*Math.sin(c)/Math.cos(c))):i=p;var m=g.x+l.nx*a,y=g.y+l.ny*a;m+=-l.ny*i*o,y+=l.nx*i*o,n.arc(m,y,i,u.ang+Math.PI/2*o,l.ang-Math.PI/2*o,s),f=g,g=O}}}]),n}(n(106).a);t.a=o},,,,,function(e,t,n){"use strict";var r=n(15),a=n(7),i=n.n(a),c=n(10),o=n(40),s=n(42),u=n(273),l=n.n(u),d=n(179),b=n(98),f=n(1),h=n(29),p=n(315),g=function(e,t,n,r){var a=Math.min(n/e,r/t,1);return[Math.round(e*a),Math.round(t*a)]},O=n(149),v=n(180),j=n(34),m=n(190),y=n(64),x=function(){function e(){Object(o.a)(this,e),this.downScaleImageSize=1024,this.cachedFiles={}}return Object(s.a)(e,[{key:"clearCache",value:function(){this.cachedFiles={}}},{key:"uploadPhoto",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n,r,a,c,o,s,u,d=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:this.downScaleImageSize,r=d.length>2?d[2]:void 0,a=d.length>3&&void 0!==d[3]&&d[3],c=d.length>4&&void 0!==d[4]&&d[4],e.next=6,this.cacheFile(t);case 6:if(o=this.cachedFiles[t.name],!(!r&&!c&&o.width<=n&&o.height<=n)){e.next=9;break}return e.abrupt("return",t);case 9:return s=r||l.a.getType(t.name),e.next=12,this.resizeImage(o,n,a,s);case 12:if(u=e.sent){e.next=15;break}return e.abrupt("return",t);case 15:return e.abrupt("return",new File([u],t.name));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"backgroundRemove",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n,r,a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(y.a)(t.src);case 3:return n=e.sent,e.next=6,n.blob();case 6:return r=e.sent,(a=new FormData).append("image",r),a.append("output_type","cutout"),e.next=12,b.a.removeBg({body:a,isFormData:!0});case 12:return c=e.sent,e.abrupt("return",c.url);case 16:throw e.prev=16,e.t0=e.catch(0),j.a.trigger(e.t0,"error"),new Error((null===e.t0||void 0===e.t0?void 0:e.t0.errorMessage)||e.t0.message);case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}()},{key:"personCutout",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n,r,a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=f.nh.personCutout.size,!(t instanceof File)){e.next=7;break}return e.next=4,this.uploadPhoto(t,n);case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,this.resizeImage(t,n);case 9:e.t0=e.sent;case 10:if(r=e.t0){e.next=13;break}throw new Error("Can not resize image");case 13:return(a=new FormData).append("image",r),e.prev=15,e.next=18,b.a.matting({body:a,isFormData:!0});case 18:if(!(c=e.sent).errorMessage){e.next=21;break}throw new Error(c.errorMessage);case 21:return e.abrupt("return",c.data.url);case 24:throw e.prev=24,e.t1=e.catch(15),j.a.trigger(e.t1,"error"),new Error((null===e.t1||void 0===e.t1?void 0:e.t1.errorMessage)||e.t1.message);case 28:case"end":return e.stop()}}),e,this,[[15,24]])})));return function(t){return e.apply(this,arguments)}}()},{key:"objectBackgroundRemove",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n,a,c,o,s,u,l,d,h,p,O,v,m;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.nh.removeObjectBackground,a=n.size,c=n.max_width,o=n.max_height,e.next=3,this.resizeImage(t,a,!0);case 3:if(s=e.sent){e.next=6;break}throw new Error("Can not resize image");case 6:return(u=new FormData).append("image",s),e.prev=8,e.next=11,b.a.uploadImage({body:u});case 11:if(!(l=e.sent).errorMessage){e.next=14;break}throw new Error(l.errorMessage);case 14:return d=(l.data||{}).url.split("picsart.com/")[1]||"",h=g(t.naturalWidth||t.width,t.naturalHeight||t.height,c,o),p=Object(r.a)(h,2),O=p[0],v=p[1],e.next=18,b.a.sod({photo_id:d,output_width:O,output_height:v});case 18:if(!(m=e.sent).errorMessage){e.next=21;break}throw new Error(l.errorMessage);case 21:return e.abrupt("return",m.data.url);case 24:throw e.prev=24,e.t0=e.catch(8),j.a.trigger(e.t0,"error"),new Error(e.t0.errorMessage);case 28:case"end":return e.stop()}}),e,this,[[8,24]])})));return function(t){return e.apply(this,arguments)}}()},{key:"upscaleAndResize",value:function(){var t=Object(c.a)(i.a.mark((function t(n,r,a){var c,o,s,u,l,d,b,f,p;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=n/a[r],o=a.width,s=a.height,u=[c*o,c*s],l=a,!(c>1)){t.next=13;break}return d=c>=4?4:2,t.next=8,this.upscale(d,a);case 8:return b=t.sent,f=Object(v.a)(b,u.join("x"),"fixed",!0),t.next=12,Object(h.a)(f);case 12:l=t.sent;case 13:return t.next=15,e.downloadImage(l,u[0],u[1]);case 15:return p=t.sent,t.abrupt("return",URL.createObjectURL(p));case 17:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"uploadUpscaleImageToCdn",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=new File([t],Object(d.a)(),{type:t.type,lastModified:Date.now()}),Object(m.a)(r,f.Vg,"original"),e.next=5,Object(O.a)(n);case 5:if(a=e.sent){e.next=8;break}return e.abrupt("return");case 8:Object(m.a)(a,f.Vg,"result"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),j.a.trigger(e.t0.message,"error");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"upscale",value:function(){var t=Object(c.a)(i.a.mark((function t(n,r){var a,c,o,s,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.downloadImage(r,r.width,r.height);case 2:if(a=t.sent){t.next=5;break}throw new Error("Can not resize image");case 5:return(c=new FormData).append("image",a),t.prev=7,t.next=10,b.a.uploadImage({body:c});case 10:if(!(o=t.sent).errorMessage){t.next=13;break}throw o.errorMessage;case 13:return s=(o.data||{}).url.split("picsart.com/")[1]||"",t.next=16,b.a.upscale({upscale_factor:"x".concat(n),photo_id:s});case 16:if(!(u=t.sent).errorMessage){t.next=19;break}throw o.errorMessage;case 19:return this.uploadUpscaleImageToCdn(a,u.data.url),t.abrupt("return",u.data.url);case 23:throw t.prev=23,t.t0=t.catch(7),j.a.trigger(t.t0,"error"),new Error(t.t0.errorMessage);case 27:case"end":return t.stop()}}),t,this,[[7,23]])})));return function(e,n){return t.apply(this,arguments)}}()},{key:"cacheFile",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.cachedFiles[t.name]){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(p.a)(t);case 4:return n=e.sent,e.next=7,Object(h.a)(n);case 7:this.cachedFiles[t.name]=e.sent;case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"resizeImage",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.downScaleImageSize,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3?arguments[3]:void 0,i=t.width,c=t.height;return r?(i=n,c=n):(t.width>n&&(c*=n/t.width,i=n),c>n&&(i*=n/c,c=n)),e.downloadImage(t,i,c,a)}}],[{key:"downloadImage",value:function(t,n,r,a){var i=document.createElement("canvas");i.width=n,i.height=r;var c=i.getContext("2d");return c?(c.imageSmoothingEnabled=!1,c.msImageSmoothingEnabled=!1,c.mozImageSmoothingEnabled=!1,c.webkitImageSmoothingEnabled=!1,c.drawImage(t,0,0,t.width,t.height,0,0,n,r),e.convertToBlob(c,a)):null}},{key:"convertToBlob",value:function(e,t){return new Promise((function(n){e.canvas.toBlob((function(e){return n(e)}),t,1)}))}}]),e}();t.a=new x},,function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"f",(function(){return c})),n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return s}));var r=1,a=30,i=10,c=50,o=80,s=/[^A-Za-z0-9]/},function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(2),a=n(7),i=n.n(a),c=n(10),o=n(40),s=n(42),u=n(179),l=function(e){var t=[];for(var n in e)e[n]&&t.push("".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(e[n])));return t.join("&")},d=n(1),b=n(34),f=n(64);function h(e){for(var t="",n=new DataView(e),r=0;r<n.byteLength;r+=4){var a="00000000";t+=(a+n.getUint32(r).toString(16)).slice(-a.length)}return t}function p(){return(p=Object(c.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(new TextEncoder).encode(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,e.abrupt("return",h(r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=function(e){return p.apply(this,arguments)},O={},v=function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,null,[{key:"genT",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(u.a)(),e.next=3,g(t+d.jg);case 3:return n=e.sent,e.abrupt("return",{t:n,sid:t});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"fetch",value:function(){var t=Object(c.a)(i.a.mark((function t(n,a){var c,o,s,u,l,h,p,g,v,j,m,y,x,w,A,E,k,C,S=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=S.length>2&&void 0!==S[2]?S[2]:d.ph,s=(o=a).headers,u=o.method,l=o.body,h=o.isFormData,p=o.isCache,g=void 0!==p&&p,v=o.timeout,j=void 0===v?15e3:v,m=d.hc.SERVER_ERROR,t.next=5,e.genT();case 5:if(y=t.sent,x=y.sid,w=y.t,A={headers:Object(r.a)({sid:x,Authorization:"Bearer ".concat(w),Accept:"application/json","Content-Type":"application/json"},s),method:u,timeout:j},h&&delete A.headers["Content-Type"],(null===s||void 0===s?void 0:s.apikey)&&(delete A.headers.Authorization,delete A.headers.sid),l&&(A.body=h?l:JSON.stringify(l)),!g||!Object.prototype.hasOwnProperty.call(O,"".concat(c).concat(n).concat(g))){t.next=14;break}return t.abrupt("return",O["".concat(c).concat(n).concat(g)]);case 14:return t.next=16,Object(f.a)("".concat(c).concat(n),A);case 16:if(!((E=t.sent).status>=200&&E.status<300)){t.next=32;break}return t.prev=18,t.next=21,E.json();case 21:return k=t.sent,g&&(O["".concat(d.ph).concat(n).concat(g)]=Object(r.a)(Object(r.a)({},k),{},{cached:!0})),t.abrupt("return",k);case 26:return t.prev=26,t.t0=t.catch(18),b.a.trigger(t.t0,"error"),t.abrupt("return",{errorMessage:m,status:E.status});case 30:t.next=43;break;case 32:if(401!==E.status){t.next=36;break}return t.abrupt("return",{});case 36:return t.next=38,E.text();case 38:if(t.t1=t.sent,t.t1){t.next=41;break}t.t1=m;case 41:return C=t.t1,t.abrupt("return",{errorMessage:C,status:E.status});case 43:case"end":return t.stop()}}),t,null,[[18,26]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();v.uploadImage=function(){var e=Object(c.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Object(r.a)({},t)).headers=n.headers||{},n.isFormData=!0,n.timeout=12e4,a=Object(u.a)(),e.abrupt("return",v.fetch("/photos/".concat(a),Object(r.a)(Object(r.a)({},n),{},{method:"POST"})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v.sketch=function(){var e=Object(c.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Object(r.a)({},t)).headers=n.headers||{},a=Object(u.a)(),e.abrupt("return",v.fetch("/sketch/".concat(a),Object(r.a)(Object(r.a)({},n),{},{method:"POST"})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v.matting=function(){var e=Object(c.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Object(r.a)({},t)).headers=n.headers||{},a=Object(u.a)(),e.abrupt("return",v.fetch("/matting/".concat(a),Object(r.a)(Object(r.a)({},n),{},{method:"POST"})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v.sod=function(){var e=Object(c.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n={body:null}).headers={},e.abrupt("return",v.fetch("/sod/v3?".concat(l(t)),Object(r.a)(Object(r.a)({},n),{},{method:"GET"})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v.removeBg=function(){var e=Object(c.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Object(r.a)({},t)).headers=n.headers||{},n.headers.apikey=d.vh.apiKey,e.abrupt("return",v.fetch("/tools/demo/removebg",Object(r.a)(Object(r.a)({},n),{},{method:"POST"}),d.rf));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v.upscale=function(e){var t={body:null};return t.headers=t.headers||{},t.isCache=!0,v.fetch("/upscale/?".concat(l(e)),Object(r.a)(Object(r.a)({},t),{},{method:"GET",timeout:5e4}))},v.magicEffect=function(e){var t=Object(r.a)({},e);return t.headers=t.headers||{},v.fetch("/effects/".concat(t.body.effect,"/").concat(t.body.sid),Object(r.a)(Object(r.a)({},t),{},{method:"POST"}))},v.canvasEffectLandmark=function(e,t){var n=Object(r.a)({},e);return n.headers=n.headers||{},v.fetch("/face-landmarks/?photo_id=".concat(t.sid),Object(r.a)(Object(r.a)({},n),{},{method:"GET"}))},v.canvasEffect=function(e,t){var n=Object(r.a)({},e);return n.headers=n.headers||{},v.fetch("/face-collage/".concat(t),Object(r.a)(Object(r.a)({},n),{},{method:"POST"}))},v.styleTransfer=function(e,t){var n=Object(r.a)({},e);n.headers=n.headers||{},n.isCache=!0;var a="original_photo_id=".concat(t.sid,"&skip_upsample=false&").concat(t.effectSid?"style_photo_id=".concat(t.effectSid):"style_photo_url=".concat(t.effectUrl));return v.fetch("/styleTransfer/?".concat(a),Object(r.a)(Object(r.a)({},n),{},{method:"POST"}))},v.skyChange=function(e,t){var n=Object(r.a)({},e);return n.headers=n.headers||{},v.fetch("/skySegmentation/?original_photo_id=".concat(t),Object(r.a)(Object(r.a)({},n),{},{method:"GET"}))},v.objRemoval=function(e,t){var n=Object(r.a)({},e);return n.headers=e.headers||{},n.isFormData=!0,n.timeout=12e4,v.fetch("/objRemoval/apply/".concat(t),Object(r.a)(Object(r.a)({},n),{},{method:"POST"}))},v.clearCache=function(){return Object.keys(O).forEach((function(e){return delete O[e]}))}},,,,,function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return o}));var r=n(1),a=function(e,t){var n,a,i,c=e.find((function(e){var n,r;return e.id===t||(null===(n=e.effectLayer)||void 0===n?void 0:n.id)===t||(null===(r=e.cellsLayers)||void 0===r?void 0:r.find((function(e){var n;return e.id===t||(null===(n=e.effectLayer)||void 0===n?void 0:n.id)===t})))}));(null===(n=c)||void 0===n?void 0:n.id)!==t&&(null===(a=c)||void 0===a?void 0:a.type)===r.Bc&&(c=null===(i=c.cellsLayers)||void 0===i?void 0:i.find((function(e){var n;return e.id===t||(null===(n=e.effectLayer)||void 0===n?void 0:n.id)===t})));return c},i=function(e){var t,n,a,i=e.find((function(e){var t,n;return e.active||(null===(t=e.effectLayer)||void 0===t?void 0:t.active)||(null===(n=e.cellsLayers)||void 0===n?void 0:n.find((function(e){var t;return e.active||(null===(t=e.effectLayer)||void 0===t?void 0:t.active)})))}));(null===(t=i)||void 0===t?void 0:t.active)||(null===(n=i)||void 0===n?void 0:n.type)!==r.Bc||(i=null===(a=i.cellsLayers)||void 0===a?void 0:a.find((function(e){var t;return e.active||(null===(t=e.effectLayer)||void 0===t?void 0:t.active)})));return i},c=function(e){return e.reduce((function(e,t){var n;if(t.active||(null===(n=t.effectLayer)||void 0===n?void 0:n.active))e.push(t);else if(t.type===r.Bc){var a,i=null===(a=t.cellsLayers)||void 0===a?void 0:a.find((function(e){var t;return e.active||(null===(t=e.effectLayer)||void 0===t?void 0:t.active)}));i&&e.push(i)}return e}),[])},o=function(e){var t,n,a="";if(null===e||void 0===e?void 0:e.active)a=(null===e||void 0===e||null===(n=e.settings)||void 0===n?void 0:n.type)||e.type;else if(null===e||void 0===e||null===(t=e.effectLayer)||void 0===t?void 0:t.type){var i;a=null===e||void 0===e||null===(i=e.effectLayer)||void 0===i?void 0:i.type}return a===r.Af?(null===e||void 0===e?void 0:e.elementType)||"":a||(null===e||void 0===e?void 0:e.type)!==r.Bc?a:r.Cc}},function(e,t,n){"use strict";var r=n(40),a=n(42),i=n(27),c=n(53),o=n(0),s=n(2),u=n(525),l=n(6),d=n(9),b=function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)},f=n(11),h=Object(f.c)(f.b.paColor72),p=Object(f.c)(f.b.paColor1),g=function(e){return e.join(" ")},O=function(e,t,n){var r=b("svg");r.style.position="absolute",r.style.pointerEvents="none",r.style.zIndex=c.u.toString();var a=b("rect");a.setAttribute("fill",h),a.setAttribute("stroke",p),r.appendChild(a),e.prepend(r);var i=[],o="",f={rectStartCoordsY:0,rectStartCoordsX:0},O=e.getBoundingClientRect(),v=O.x,j=O.y,m=function(e){var n=f.rectStartCoordsX,r=f.rectStartCoordsY,c=e.clientX,s=e.clientY,l=Math.abs(c-n),d=Math.abs(s-r),b=Math.min(n,c)-v,h=Math.min(r,s)-j;a.setAttribute("x","".concat(b,"px")),a.setAttribute("y","".concat(h,"px")),a.setAttribute("width","".concat(l,"px")),a.setAttribute("height","".concat(d,"px"));var p=i.filter((function(e){return Object(u.a)(e,{width:l,height:d,x:b,y:h})})).map((function(e){return e.id})),O=g(p);o!==O&&(o=O,t(p))},y=function(){n(!0)};e.addEventListener("mousedown",(function(t){var c=e.getBoundingClientRect();v=c.x,j=c.y,r.setAttribute("width","".concat(e.offsetWidth,"px")),r.setAttribute("height","".concat(e.offsetHeight,"px"));var u=Object(l.b)(d.bc);i=Object(l.b)(d.dd).map((function(e){return Object(s.a)(Object(s.a)({},e),{},{id:u[e.id]})})),o=g(Object(l.b)(d.yc).map((function(e){return e.id}))),a.setAttribute("x","".concat(t.pageX-v,"px")),a.setAttribute("y","".concat(t.pageY-j,"px")),f.rectStartCoordsX=t.pageX,f.rectStartCoordsY=t.pageY,e.addEventListener("mousemove",m),e.addEventListener("mousemove",y,{once:!0}),document.addEventListener("mouseup",(function(){n(!1),a.setAttribute("width","0px"),a.setAttribute("height","0px"),e.removeEventListener("mousemove",m),e.removeEventListener("mousemove",y)}),{once:!0})}))},v=n(21),j=n(1),m=[0,1],y=function(e,t){var n=b("g");return m.forEach((function(r){var a=b("line");a.setAttribute("stroke",j.Oc),a.setAttribute("fill",j.Oc),a.setAttribute("x1","".concat(e-3+6*r)),a.setAttribute("y1","".concat(t-3)),a.setAttribute("x2","".concat(e+3-6*r)),a.setAttribute("y2","".concat(t+3)),n.appendChild(a)})),n},x=function(e,t,n,r){var a=r,i=r;return e.reduce((function(e,r){var c=Math.abs(r.x-(t.x+n.x));c<=a&&(c<a&&(e=e.filter((function(e){return e.direction!==j.tb.horizontal}))),a=c,e.push({point:r,direction:j.tb.horizontal}));var o=Math.abs(r.y-(t.y+n.y));return o<=i&&(o<i&&(e=e.filter((function(e){return e.direction!==j.tb.vertical}))),i=o,e.push({point:r,direction:j.tb.vertical})),e}),[])},w=function(e){var t=[],n=b("svg");n.style.position="absolute",n.style.pointerEvents="none",n.style.zIndex=c.A.toString(),e.prepend(n);var r=function(){for(;n.firstChild;)n.lastChild&&n.removeChild(n.lastChild)};return{checkAndDraw:function(e,a,i){return r(),e.reduce((function(e,r){var c={x:a.x+r.x,y:a.y+r.y},o={};return x(t,r,a,i).forEach((function(e){var t=e.direction,a=e.point;t===j.tb.horizontal?(c.x=a.x,o.x=a.x-r.x):(c.y=a.y,o.y=a.y-r.y),function(e,t,r){var a=b("path");if(n.appendChild(a),t.w&&t.h){var i=r===j.tb.horizontal?t.x:t.w,c=r===j.tb.vertical?t.y:t.h;n.appendChild(y(i,c))}n.appendChild(y(t.x,t.y)),a.setAttribute("stroke",j.Oc),a.setAttribute("stroke-width","1px"),a.setAttribute("d","M".concat(e.x,", ").concat(e.y," L").concat(t.x,", ").concat(t.y))}(c,a,t)})),Object(s.a)(Object(s.a)({},e),o)}),{})},onChangePoints:function(r){n.setAttribute("width","".concat(j.kh*e.offsetWidth,"px")),n.setAttribute("height","".concat(j.kh*e.offsetHeight,"px")),t=r},remove:r}},A=n(86),E=n(85),k=n(257),C=n(43),S=n(142),T=n(153),_=function(e){var t=Object(o.db)(e),n=t.rotation,r={scaleX:-t.scaleX,scaleY:-t.scaleY,rotation:n<0?n+180:n-180};return Object(o.Lb)(e,r),r},I=n(74),R=n(340),L=function(e,t){var n=Object(o.db)(e),r=n.x,a=n.y,i=n.width,c=n.height,s=n.rotation,u=void 0===s?0:s,l=r-t.x,d=a-t.y;return{points:Object(R.a)({x:l,y:d,width:i,height:c,rotation:u},!0),initialCoords:{x:l,y:d}}},P=function(e){var t={x:0,y:0};["dragstart","transformstart"].forEach((function(n){return Object(o.i)(e,n,(function(){var e;t=Object(S.a)((function(e){return e>1})),null===(e=F.onMoveStart)||void 0===e||e.call(F,Object(l.b)(d.pb))}))})),["dragend","transformend"].forEach((function(t){return Object(o.i)(e,t,(function(){var e;null===(e=F.onMoveEnd)||void 0===e||e.call(F)}))})),["dragmove","transform"].forEach((function(n){return Object(o.i)(e,n,(function(r){var a,i="transform"!==n,c=L(r.currentTarget,t),s=c.points,u=c.initialCoords,l=u.x,d=u.y,b=(null===(a=F.onElementMove)||void 0===a?void 0:a.call(F,s,{x:l,y:d},i?j.Pc:1))||{};if(i&&(b.x||b.y)){var f=b.x?l-b.x:0,h=b.y?d-b.y:0;Object(o.ob)(e).forEach((function(e){return Object(o.Lb)(e,{absolutePosition:{x:e.getAbsolutePosition().x-f,y:e.getAbsolutePosition().y-h}})})),e.forceUpdate()}}))}))},G=["mousedown","click","mouseup","dblclick","contextmenu"],M=function(e,t){return Math.fround(e*t)},B=function(e){!function(e){var t=Object(o.V)(e,".back");G.forEach((function(n){return Object(o.i)(t,n,(function(t){var r=Object(l.b)(d.Mc)({rootId:j.z}),a=Object(l.b)(d.bc),i=Object(o.ob)(e).map((function(e){return a[Object(o.db)(e).id]})),c=function(e){return Number(i.includes(e))},u=Object(S.a)((function(e){return e>1})),b=Object(o.pb)(Object(o.mb)(e))||{x:0,y:0},f={x:b.x-u.x,y:b.y-u.y},h=Object(l.b)(d.dd).reverse().reduce((function(e,t){var i=E.a.layerRegistry[a[t.id]].layer.renderable;if(Object(k.a)(t,f||{x:0,y:0})){if(!e)return i;var s=Object(o.db)(i).id,u=Object(o.db)(e).id,l=c(s),d=c(u);return l===d||"click"===n?r.indexOf(s)<r.indexOf(u)?i:e:l>d?i:e}return e}),null);h&&Object(o.Y)(h,n,Object(s.a)(Object(s.a)({},t),{},{target:h}))}))}))}(e),P(e),e.on("mousedown",(function(e){e.evt.stopPropagation(),Object(l.a)(I.a.actions.setContextMenuShow(!1))})),e.on("dragstart",(function(){Object(l.a)(v.a.actions.setDragInProgress(!0))})),e.on("transformstart",(function(){e.nodes().find(o.Ab)?e.boundBoxFunc((function(e,t){return t.height<1&&t.height<e.height||t.width<1&&t.width<e.width?e:t})):e.boundBoxFunc((function(e,t){return t}))})),e.on("transform",(function(){e.nodes().forEach((function(t){if(Object(o.Ab)(t)){var n=Object(o.db)(t).scaleX;["middle-right","middle-left"].includes(e.getActiveAnchor())&&Object(o.Lb)(t,{width:M(t.width(),n),scaleX:1})}}))})),e.on("dragend transformend",(function(){Object(C.g)(e),Object(i.b)((function(){Object(l.a)(v.a.actions.setDragInProgress(!1));var t=Object(o.ob)(e).map((function(e){var t=Object(o.db)(e),n=t.id,r=t.x,a=t.y,i=t.width,c=t.height,u=t.scaleX,b=t.scaleY,f=t.rotation,h=Object(l.b)(d.uc).find((function(e){return e.id===n})),p=h.scaleX,g=h.rotation,O={id:n,x:r,y:a,width:i,height:c,rotation:f},v=Object(l.b)(d.jd).find((function(e){return e.id===n}));if(v){var j=Object(T.b)(Object(s.a)(Object(s.a)(Object(s.a)({},v),O),{},{scaleX:u,width:i}));return Object(o.Lb)(e,{scaleX:1,scaleY:1}),Object(s.a)(Object(s.a)({},O),j)}var m=Math.abs(u-Number(p))>.001,y=Math.abs(f-Number(g))>.001;if(m&&y){var x=_(e);return Object(s.a)(Object(s.a)({},O),x)}return Object(s.a)(Object(s.a)({},O),{},{scaleX:u,scaleY:b})})).map((function(e){return v.a.actions.patchLayer({id:e.id,patch:e})}));Object(l.a)(v.a.actions.batchUpdate(t))}))}))},D=n(15),N=n(433),z=function(e,t){var n=new N.a((function(e){var n=Object(D.a)(e,1)[0].contentRect,r=n.width,a=n.height;t({width:r,height:a})}));return n.observe(e),function(){return n.unobserve(e)}},H=n(349),Y=function(e,t,n){var r;document.addEventListener("keydown",(function(a){if(Object(H.a)(a)&&!Object(H.p)(a)){if(a.preventDefault(),!r){if(e(),!(r=Object(l.b)(d.Bc)).length)return;document.addEventListener("keyup",(function(){r=void 0,n(),Object(l.a)(v.a.actions.takeHistorySnapshot())}),{once:!0})}t();var i=a.shiftKey,c=a.code,o=i?10:1,s=j.yd.arrowLeft,u=j.yd.arrowUp,b=j.yd.arrowRight,f=j.yd.arrowDown,h={x:0,y:0};switch(c){case s:h.x=-o;break;case b:h.x=o;break;case u:h.y=-o;break;case f:h.y=o}Object(l.a)(v.a.actions.changePositionBy(h))}}))},X=n(17),U=function(){function e(){Object(r.a)(this,e),this.stage=null,this.transformer=null,this.layer=null,this.baseGroup=null,this.onElementMove=void 0,this.onMoveStart=void 0,this.onMoveEnd=void 0,this.showLoader=void 0,this.hideLoader=void 0,this.isSetupStage=!1}return Object(a.a)(e,[{key:"setupStage",value:function(e,t){var n=this;this.restore();var r=document.getElementById(e),a=document.createElement("div");r.appendChild(a),a.style.zIndex=c.m.toString();var s=document.getElementById(t);if(this.stage=Object(o.z)({container:a,width:r.offsetWidth||0,height:r.offsetHeight||0}),Object(o.i)(this.stage,"click",(function(e){e.target!==n.stage||Object(l.b)(d.X)||Object(l.a)(v.a.actions.deselect())})),this.showLoader=function(){Object(l.a)(X.a.actions.setCanvasLoading(!0))},this.hideLoader=function(){Object(l.a)(X.a.actions.setCanvasLoading(!1))},r){r.tabIndex=r.tabIndex||1,O(r,(function(e){e.length?Object(i.b)((function(){Object(l.a)(v.a.actions.selectLayers(e)),Object(l.a)(v.a.actions.takeHistorySnapshot())})):Object(l.a)(v.a.actions.deselect())}),(function(e){return Object(l.a)(v.a.actions.setDragSelectionInProgress(e))})),z(r,(function(e){e.width&&e.height&&(n.stage.setAttrs({width:e.width,height:e.height}),Object(i.b)((function(){Object(l.a)(v.a.actions.setCanvasCSSSizes(e)),n.isSetupStage||(n.isSetupStage=!0,Object(l.a)(v.a.actions.setSetupStage(!0)),Object(l.a)(v.a.actions.takeHistorySnapshot()))}))),Y((function(){var e;null===(e=n.onMoveStart)||void 0===e||e.call(n,Object(l.b)(d.pb)),Object(l.a)(I.a.actions.setContextMenuShow(!1))}),(function(){var e,t=L(n.transformer,Object(S.a)((function(e){return e>=1}))),r=t.points,a=t.initialCoords;null===(e=n.onElementMove)||void 0===e||e.call(n,r,a,1)}),(function(){var e;return null===(e=n.onMoveEnd)||void 0===e?void 0:e.call(n)}))}));var u=w(s),b=u.checkAndDraw,f=u.onChangePoints,h=u.remove;this.onElementMove=b,this.onMoveStart=f,this.onMoveEnd=h}return this.layer=Object(o.u)(),this.stage.add(this.layer),this.setupTransformer(),this.stage}},{key:"restore",value:function(){this.stage&&(this.stage.destroy(),this.stage=null,this.layer=null,this.transformer=null,this.isSetupStage=!1,E.a.layerRegistry={})}},{key:"setupTransformer",value:function(){this.layer&&this.stage&&(this.transformer=Object(A.c)(1,void 0,!0),this.layer.add(this.transformer),B(this.transformer))}},{key:"setBaseGroup",value:function(e){this.baseGroup=e}}]),e}(),F=t.a=new U},function(e,t,n){"use strict";var r,a;n.d(t,"a",(function(){return r})),function(e){e.UPDATE_STATUSES="UPDATE_STATUSES",e.ADD_DATA="ADD_DATA",e.SET_DATA="SET_DATA",e.PUT_DATA="PUT_DATA",e.DELETE_DATA="DELETE_DATA",e.RESET_DATA="RESET_DATA",e.APPLY_PENDING="APPLY_PENDING",e.DISCARD_PENDING="DISCARD_PENDING",e.DELETE_ALL_DATA="DELETE_ALL_DATA",e.SET_RESIZE_PARAMS="SET_RESIZE_PARAMS"}(r||(r={})),function(e){e.width="Width",e.height="Height"}(a||(a={}))},function(e,t,n){"use strict";var r=n(40),a=n(42),i=function(){function e(){Object(r.a)(this,e)}return Object(a.a)(e,null,[{key:"getPointXY",value:function(e){var t=e.split(",").map((function(e){return parseFloat(e)}));return{x:t[0],y:t[1]}}},{key:"getPointArrayPointAtCycleIndex",value:function(e,t){var n=e.length,r=t%n;return e[r=r>=0?r:n+r]}},{key:"IS_EQUAL_FLOATS",value:function(e,t){return Math.abs(e-t)<Number.EPSILON}},{key:"makePoint",value:function(e,t){return{x:e,y:t}}},{key:"getPointAddPointToPoint",value:function(t,n){return e.makePoint(t.x+n.x,t.y+n.y)}},{key:"getPointMakeWithLengthAngle",value:function(t,n){return e.makePoint(Math.cos(n)*t,Math.sin(n)*t)}}]),e}();t.a=i},,,,,,,,,,function(e,t,n){"use strict";var r=n(73);t.a=function(e,t,n){var a=Math.sin,i=Math.cos,c=Object(r.a)(e);return{x:t*i(c)-n*a(c),y:t*a(c)+n*i(c)}}},,,function(e,t,n){"use strict";var r=n(2),a=n(7),i=n.n(a),c=n(10),o=n(3),s=n(136),u=n.n(s),l=n(27),d=n(543),b=n(9),f=n(17),h=n(34),p=n(64),g=n(83),O=n(1),v=n(400),j=["US","CA","GB","AU","NZ"];t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(l.e)(),n=Object(g.a)((function(e){return{user:Object(b.Ld)(e),waitingUser:Object(b.Ud)(e),userStorage:Object(b.Pd)(e),userSubscription:Object(b.Qd)(e)}})),a=n.user,s=n.waitingUser,m=n.userStorage,y=n.userSubscription,x=Object(o.useCallback)(function(){var e=Object(c.a)(i.a.mark((function e(n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(p.a)(O.Zg,{headers:Object(v.a)({userKey:n}),method:"GET"});case 3:return r=e.sent,e.next=6,r.json();case 6:a=e.sent,t(f.a.actions.setUserStorage(a.response)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),h.a.trigger(e.t0,"error");case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),[t]),w=Object(o.useCallback)(function(){var e=Object(c.a)(i.a.mark((function e(n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.fetchUserSubscription(n,!0);case 2:"success"===(r=e.sent).status&&r.data&&t(f.a.actions.setUserSubscription(r.data));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),A=Object(o.useCallback)(Object(c.a)(i.a.mark((function e(){var n,a,c,o,s,l,d,b;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=u.a.get(O.Wg)){e.next=4;break}return e.abrupt("return",t(f.a.actions.setUser(null)));case 4:return e.next=6,Object(p.a)("".concat(O.cb,"?key=").concat(n,"&email_encoded=1"));case 6:if(401!==(a=e.sent).status){e.next=10;break}return window.location.href="/logout",e.abrupt("return");case 10:return e.next=12,a.json();case 12:if((c=e.sent)&&c.key&&c.id){e.next=15;break}return e.abrupt("return",t(f.a.actions.setUser(null)));case 15:return e.prev=15,e.next=18,Object(p.a)(O.bb);case 18:return l=e.sent,e.next=21,l.json();case 21:d=e.sent,b=(null===d||void 0===d||null===(o=d.response)||void 0===o||null===(s=o.resolved_location)||void 0===s?void 0:s.country_code)||"",c.surveyParticipant=c.subscription.granted&&j.includes(b),e.next=29;break;case 26:e.prev=26,e.t0=e.catch(15),h.a.trigger(e.t0,"error");case 29:h.a.setUser(c),t(f.a.actions.setUser(Object(r.a)(Object(r.a)({},c),{},{subscribed:c.subscription.granted,isTrialUsed:c.subscription.is_trial_used}))),e.next=37;break;case 33:e.prev=33,e.t1=e.catch(0),h.a.trigger(e.t1,"error"),t(f.a.actions.setUser(null));case 37:case"end":return e.stop()}}),e,null,[[0,33],[15,26]])}))),[t]),E=Object(o.useCallback)(function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x(t);case 3:return e.next=5,w(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),h.a.trigger(e.t0,"error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),[x,w]);Object(o.useEffect)((function(){e&&function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(f.a.actions.setWaitingUser(!0)),e.next=3,A();case 3:t(f.a.actions.setWaitingUser(!1)),(null===a||void 0===a?void 0:a.key)&&O.qd&&E(a.key);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[A,e,t,null===a||void 0===a?void 0:a.key,E]);var k=Object(o.useCallback)((function(e){a&&t(f.a.actions.setUser(Object(r.a)(Object(r.a)({},a),{},{subscription:Object(r.a)(Object(r.a)({},a.subscription),{},{granted:e}),subscribed:e})))}),[t,a]);return{user:a,userStorage:m,userSubscription:y,waitingUser:s,subscribed:!!(null===a||void 0===a?void 0:a.subscription.granted),updateUser:A,hardUpdateSubscribed:k,getUserStorageCount:x,getUserSubscriptionData:w}}},,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return f}));var r=n(2),a=n(1),i=n(443),c=n(189),o=n(49),s=n(0),u=n(57),l=function(e){Object(u.a)(e,(function(t,n){return function(e,t){Object(o.e)(e)?Object(u.g)(t):Object(u.j)(e,t)}(e,n)}))},d=n(97),b=function(e,t,n){var r=e.x,i=e.y,c=e.text,o=e.color,s=e.align,u=e.opacity,l=e.padding,d=e.fontStyle,b=e.font_bold,f=e.emptyText,h=e.isPremium,p=e.fontFamily,g=e.font_family,O=e.font_semiBold;return{id:t,text:c,fontSize:n,emptyText:f,x:r||a.rb,y:i||a.sb,name:"text",wrap:"word",cursor:"pointer",fill:o,initialWidth:0,initialHeight:0,draggable:!0,is_settings:!0,defaultText:c,opacity:u||1,isPremium:!!h,align:s||"left",fontFamily:g||p,padding:void 0!==l?l:5,fontStyle:d||b||O||"normal"}},f=function(e,t){switch(e){case"capitalize":return t.split(" ").map((function(e){return e&&e.split("\n").map((function(e){return e&&function(e){var t,n,r,a=e[0];return(null===a||void 0===a?void 0:a.match(d.e))?a+((null===(n=e[1])||void 0===n?void 0:n.toUpperCase())||"")+((null===(r=e.slice(2))||void 0===r?void 0:r.toLowerCase())||""):((null===a||void 0===a?void 0:a.toUpperCase())||"")+((null===(t=e.slice(1))||void 0===t?void 0:t.toLowerCase())||"")}(e)})).join("\n")})).join(" ");case"lowercase":return t.toLowerCase();case"uppercase":return t.toUpperCase();default:return t}},h=function(e){var t=e.font,n=e.id,u=e.baseGroup,f=e.fireClick,h=e.fromHistory;if(!u)return null;var p=t.scaleX||d.d,g=h?t.font_size:Object(c.a)(p,t.font_size),O=Object(r.a)(Object(r.a)(Object(r.a)({},b(t,n,g)),t.width&&{width:t.width*p}),h&&Object(r.a)(Object(r.a)({},t),{},{id:n})),v=t.bend?Object(s.C)(O):Object(s.B)(O),j=Object(s.db)(v),m=j.width,y=j.height,x=Object(r.a)(Object(r.a)({},t.isPlaceholder&&{isPlaceholder:t.isPlaceholder}),{},{initialWidth:m,initialHeight:y,lineJoin:"round",fillAfterStrokeEnabled:!0});if(Object(s.Ab)(v)&&v.textArr.length>1&&(x.initialWidth=v.textArr.reduce((function(e,t){return e+t.width}),0)),Object(s.Lb)(v,x),!h){var w=t.width||m;w>=a.Db&&Object(s.Lb)(v,{width:w*p});var A=Object(i.a)(t.text),E=d.b+("body"===A?10:t.font_size),k=(A!==a.Dg||t.emptyText?E:d.a)/100,C=Object(s.db)(u),S=C.width,T=C.height,_=k*Math.min(S,T)/m,I={scale:{x:_,y:_}},R=Object(s.gb)(v),L=function(e,t,n){var r=Object(s.S)(e,"Text"),a=Object(s.db)(e),i=a.clipWidth,c=a.clipHeight,o=(i-t)/2,u=(c-n)/2;if(!r.length)return{x:o,y:u};var l=r[r.length-1],b=Math.floor,f=Object(s.db)(l),h=f.x,p=f.y,g=b(f.width*f.scaleX)===b(t),O=(h-o)/d.c,v=O===(p-u)/d.c&&O===b(O),j=g&&v,m=i-h-d.c<t*d.f/100||c-p-d.c<n*d.f/100;return{x:j&&!m?h+d.c:o,y:j&&!m?p+d.c:u}}(u,R.width,R.height),P=L.x,G=L.y;Object(s.Lb)(v,{x:P,y:G,scale:I})}return Object(s.f)(u,v),l(v),f&&Object(o.h)([v]),v},p=n(14),g=n(86),O=n(11),v=n(43),j=[],m=function(e){var t=e.id,n=e.baseGroup,i=e.groupId,o=e.textAttrs,u=e.fireClick,f=e.fromHistory;if(!n)return null;if(f)return Object(s.B)(Object(r.a)({id:t},o));var h=Object(s.db)(n),m=h.clipWidth,y=h.clipHeight,x=d.a/100*Math.min(m,y)/(o.maxWidthTempText||1),w=((o.x||a.rb)-(o.offsetX||0))*x,A=((o.y||a.sb)-(o.offsetY||0))*x,E=o.scaleX||d.d,k=Object(c.a)(E,o.fontSize),C=Object(r.a)(Object(r.a)({},b(o,t,k)),{},{x:w,y:A,groupId:i,stroke:Object(O.c)(O.b.paColor3),scaleX:x,scaleY:x,strokeWidth:0,rotation:o.rotation,width:o.width*E}),S=Object(s.B)(C);j.push(S);var T=Object(s.db)(S),_=T.clipWidth,I=T.clipHeight,R=j.filter((function(e){return Object(s.db)(e).defaultText===C.defaultText})),L=Object(s.X)(n,a.pb),P=Object(r.a)({initialWidth:_,initialHeight:I,lineJoin:"round",fillAfterStrokeEnabled:!0},R.length>1&&Object(r.a)({},function(e,t){var n=Object(s.db)(e[e.length-1]),r=n.defXAtt,a=n.defYAtt,i=n.defXOffset,c=n.defYOffset,o=Math.floor,u=Math.max,l={tempX:u.apply(void 0,Object(p.a)(e.map((function(e){return Object(s.db)(e).x})))),tempY:u.apply(void 0,Object(p.a)(e.map((function(e){return Object(s.db)(e).y}))))},b=l.tempX,f=l.tempY,h=Object(s.db)(t),g=h.x,O=h.y,v=o(g)+o(i)||(o(b)&&o(O))+o(c)===o(f);return{x:v?r:b+d.c,y:v?a:f+d.c}}(R,L)));Object(s.Lb)(S,P);var G=Object(s.jb)(n);if(u){if(L?Object(s.Lb)(L,{attachedId:null,visible:!0,nodes:[].concat(j),name:a.df}):(L=function(e,t){var n=Object(g.c)(Object(s.db)(Object(s.mb)(e)).scaleX,t);return Object(s.h)(e,n),Object(g.d)(n),Object(s.Lb)(n,{nodes:[].concat(j),shouldOverdrawWholeArea:Object(g.g)(j)}),n}(G,S),Object(g.f)({layer:G})),1===R.length)return function(e,t){var n=Object(s.db)(e),r=n.clipWidth,a=n.clipHeight,i=Object(s.db)(t),c=i.x,o=i.y,u=i.width,d=i.height,b=c-(r-u)/2,f=o-(a-d)/2;j.forEach((function(t){var n=Object(s.db)(t),r=n.x,a=n.y;Object(s.Lb)(t,{x:r-b,y:a-f,defaultX:r,defaultY:a,defXOffset:r-c,defYOffset:a-o}),Object(s.f)(e,t),l(t)})),j.splice(0,j.length),t&&Object(v.g)(t)}(n,L),Object(s.I)(G),S;j.forEach((function(e){Object(s.f)(n,e),l(e)})),j.splice(0,j.length),Object(s.I)(G)}return S}},function(e,t,n){"use strict";var r=n(2),a=n(75),i=n(16),c={appHistory:[],appHistoryStep:-1,undoRedoDisabled:!1},o=Object(a.c)({name:"history",initialState:c,reducers:{add:function(e,t){var n=t.payload,a=e.appHistoryStep+1,c=e.appHistory.slice(0,a),o={};n.historyAction===i.a.font&&c.length&&(o={activeSetting:n.settings.activeSetting||c[c.length-1].settings.activeSetting});var s=Object(r.a)(Object(r.a)({},n),{},{settings:Object(r.a)(Object(r.a)({},n.settings),o)});n.mergeWithLast&&c.length?(a--,c[c.length-1].after=s):c.push(s),e.appHistoryStep=a,e.appHistory=c},undo:function(e,t){var n=t.payload;e.appHistory[e.appHistoryStep].activeLayers=n,e.appHistoryStep--},redo:function(e,t){var n=t.payload;e.appHistoryStep++,e.appHistory[e.appHistoryStep].activeLayers=n},updateKeyUp:function(e,t){var n=t.payload,r=e.appHistory,a=r[r.length-1];Object.keys(n).forEach((function(e){a.settings[e]=a.settings[e]||{},a.settings[e].newValue=n[e]})),a.draft=!1},undoRedoDisabled:function(e,t){var n=t.payload;e.undoRedoDisabled=null!==n&&void 0!==n?n:e.undoRedoDisabled},reset:function(){return c}}});t.a=o},,,,,,function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"e",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return o}));var r=n(1),a=function(e){return e.map((function(e){return e.meta.usedTools}))},i=function(e){var t;return null===(t=e.meta.usedTools)||void 0===t?void 0:t.some((function(e){return r.Nh.includes(e)}))},c=function(e){var t=e.effect;return!!t&&t.isPremium},o=function(e){var t=e.adjust,n=(t=void 0===t?{}:t).settings;return null===n||void 0===n?void 0:n.some((function(e){return e.isPremium}))};t.b=function(e,t){return function(e,t){var n=e.id,a=e.meta,i=a.isPremium;return a.source===r.Jf?i&&!t.includes(Number(n)):i}(e,t)||i(e)||c(e)||o(e)}},function(e,t,n){"use strict";t.a=function(e,t){return t.reduce((function(t,n){return t.push(e.find((function(e){return e.id===n}))),t}),[])}},function(e,t,n){"use strict";n.d(t,"h",(function(){return F})),n.d(t,"f",(function(){return W})),n.d(t,"g",(function(){return V})),n.d(t,"d",(function(){return q})),n.d(t,"c",(function(){return J})),n.d(t,"i",(function(){return Q})),n.d(t,"e",(function(){return Z})),n.d(t,"a",(function(){return $}));var r=n(154),a=n(7),i=n.n(a),c=n(10),o=n(14),s=n(565),u=n(2),l=n(41),d=n.n(l),b=n(46),f=n.n(b),h=n(117),p=n.n(h),g=n(12),O=n(6),v=n(9),j=n(17),m=n(34),y=n(221);var x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return parseInt(e.split(t).pop()||"0",10)},w=n(153),A=n(144),E=n(431),k=n(222),C=n(310),S=n(307),T=n(335),_=n(411),I=n(1),R=n(0),L=n(57),P=n(124),G=n(43),M=n(74),B="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOgAAADACAYAAAAOVi8jAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAA4XSURBVHgB7d1djFTlHcfx/8wA5WVdWHxlibG1CrFgY3FJta2w7UVpExZIbCtgbOmNVu+6ize1rRiLvdClF01UtInGVsWmXvDSGmkTQZOahpc2KdCAL7VFwGqLyOviMnN6fufZs3t2dmZ3YXeW/+L3k4zsvJxzZtbzm/9znvM8Z3M3tnVGBsCjKG8A3CKggGMEFHCMgAKOEVDAMQIKOEZAAccIKOAYAQUcI6CAYwQUcIyAAo4RUMAxAgo4RkABxwgo4BgBBRwjoIBjBBRwjIACjhFQwDECCjhGQAHHCCjgGAEFHCOggGMEFHCMgAKOEVDAMQIKOEZAAccIKOAYAQUcI6CAYwQUcIyAAo4RUMAxAgo4RkABxwgo4BgBBRwjoIBjBBRwjIACjhFQwDECCjhGQAHHCCjgGAEFHCOggGMEFHCMgAKOEVDAMQIKOEZAAccIKODYGMOocPFFZpMnmp08bdZZNPvopNmZYv/LjB9rNqXO7IopZh0fm73zfvxvp2EUIaDOjSmYffm6nF17RdTnuc4zcVBPxaGNw9cRB3fS+JxNmRQHsiEO5qRcEtCUwvzB0Zxt2VWyv/0zMowOBNSxiZ8yu2O+WfPswQYqqvKz2bg46blcZEu+mLcjJ0pxNSWkowEBdUiVr3l23r4xJ7LLJw9PkCaMM/vclTnbsz+yBV/I2V/2mb39n8iOnjQ4RkCdURN1xdcKdmn98IUzNX5szmY2mp3ujOzKSyy+5WzfQbO9B6imXtGL64wqp0Kq5m0t6Dj181flbGzXV/OMxtABBZ8IqDM3fCZntaaQtjT1hFSdSvCJgI4yJ+Le2j37bcimNeRtwQ3hy2BsweAUx6DOHDkRJadIKnlpp9nvXg/nQi+tN2tdZPbpy2xQTpwu9XmsIW5Kz2yM4mNQg1NUUGfe+7Dy4wrlM1vCv/LBUbNfb7FBO1OM+tyKpSg+/WJ29JTBKQLqTEdn5R7VE6f7PqaQDoeTpw1OEVBn3jtS+XE1aXXLuu5KGzJ9HXAu1C8C6syR49Wf+8l3QigviYN6681m3222ISOcvtFJ5Mx7R6oPGlAF/em3bVgNNOAe5xcV1BnNOhlJH1FBXSOgzmg6mE61jJROKqhrBNShaqda8MnDMahD4VTL0Ib86RTMSzvCz7d+yWxSjcb2orYIqEP/O2ZDonA++Nue86T/+iD0AGP0oYnrUGmIh6Av/rn3IIY975o984phFCKgDg1l8PrW3fFtT9/HX/prGMuL0YWAOpQ7x8NPVU2N161Gzw3HTBiMHALqUN34cNWDchqP++LroUpWGpur486BxtW2bxi+MbyoPTqJnKmfGP4tls0OK+/4uSpurrYt7hmfq+AOJngK8M/i9Tx0R+jZzV75D/4QUGcmjgv/ZitheThFPbN6bN6s8PP2N23Q3j8aXj9/VrgGEvwioM6kFfTUx6GJq6Zs+/rK1VGPqXIOxeUNOuDlomFecQzqzOSJoYcobeKq51UVslaooL4RUGfOx/WBCKlfBNSZ+vMQlisaan8lQZwbAuqIqudIV1BFc8pEg1ME1JGxFbrsajXIPXv5lPHjDE4RUEd0auVU2UADnQoZ7qvMX1avv9PSc19/lhA+EVBndv07nPI43hGOCxXOb91sw0bra13cc3/vu8ZfOnOM86DO6Kp+296IbMZ0s5tmmtXFgfrmHLOma8Ipl3fO8ZSLmspq1mpdafNW51F/9SfC6VnuxrZO/g85pSCtvt3sogk27DQAQiORanmOFUMWUUEdU4X75R/Mlt+St8kTI8sXKn+X6lKdutiYZsGMGaAXWJPB/7E/TEnjgtX+UUFHAQ0kuGlG3qbUhSDq0pzhX4UzSi40llJPcP2EcLpGwwYnTww/6+Jgev3+/xpGj4iAAn5F9OICjhFQwDECCjhGQAHHCCjgGAEFHCOggGMEFHCMgA5CrsJtNJnRaLZwbq4mY3pRW4zFHcCyW3LWPLvv99i+A5Gte61kB0bBnwrU+7/z63m763DRdrw1tIFjF43X4P2cHfyQAWgjgQo6gJnT83bjZ3NWNyFcnFI3Xfl96by8rb9vTLLjf5Isiz/3hvsKye8EtUcFHaR7nyr1qhqNDWaP3xMCqqqkmx5bODdvW3ZFyYD1OfFO/MTmcP3M+jjU86/P2bSuC3TtjF+/PVPNtMPr9vttJZs3O5dUqWOnIns1Xld/VVrb33cwil9r3aHRfb2HSprjdc9oDK/btE2fqffzqpChORy2vzVeT/qasGzPz9OmWvK8tp1+Bj2vZQ8dDr+T7Pqz65b094bqGCw/gFVLC7awKWeLVhf7NOu0Q669u5DsZHc9Vuy+r+bvtdPDTjh35ZkkuHp82tScHT0V5nfq2edfLVn7hhBgBU23g/GOrdcdy7zugXUl27i9VPH9bX9kTBKkJFAdIQSikOo9aT3putN1Zuk1aUiaZ+Xs/qX5ELD4s6ZfJu3rS/Z83JzXZyivnOny6TYkfR8H4s9y79Ol5L00xcs9vCKfzIk7Hr/fungbaoksXn2mz5cEujEfdCi0Y2qnTytSakYcTu24hw6H+/cvDeFMg6bA3rkgnzQXtfNu3N4T/CjegdOdVq97tnWMtS6Oq/LuUnelKqdAqVKn1botfv2yW8ItfUwUnNvXhHXr2LptcSEcm8bvVdvScsc6crby6WJ3i2Bt3ErQ41t3lZLXpUHMBltfYGlLYuVTxWQ7qrD331awh7+XtyU/L9rS+L0olNlAKuyEs38cg9bAxrjpGJp3UVKxtCPqfloFtVOqKsn8sg6oX6wvdu+0+leVS+vQDl+N1p0Non5WmBWcrCdf7ln3869FXVUy3NeXir5EVNXT4IX3Waz4PrPSTjR9JoVT1MTepC+ji3N2bWOoyHo3rfGXgr4c0t8J+kcFHYLpDaHJWL6jHcpUhbquJufBw72XTatheZOzvEoOpre0fBndP97Rd7n+qlVd1/soX67a+6zk0IfVl9WXhpq9+iJonh0u+5BtAqMyKug5UqfPwyvCjqbOlmoUVu2oqoD1mZ08rYg65szScWBW09Xp66wqVaNsgNQ01fHjobNoPqbN8TlX995++j4PHa4eojRg5cenLU09y+p3sOqFki1fU7Sv/vhMUpmnxxVbTV9URwUdpGXz1HETdjjt/M2zLTmmeu61Uq9jyEqe2FxMjvd+88NCV5M1lzTzjsbNwSc3l8q2k0+q2Y63oySc6hVW5euvOahwPlu27rDdkg1W2qPaMjcEpnz76WdMq6KOb6dNjavfgdAM13KPxF9YSfM+XralKZ80mfX70fKrbgvHoDveCs3gxqnhPb5B9ewXAR1Acu4z/s/Sr/R802sH2xvvWE9u7nviP6qwv+l4z6wY79QFa10Uqq524jXr+/ZgamfXMV3L3HB/S9w5o86l/qiCqcLqSyC9/8C6sx+UoM6htkV5a74+bF+fU+vQulI6rlSlVGVVU1Xvt3193GP86JmkM0xBTZfNdlzpc7Zc09O8TZ/X8qiO0ywjLD0NknampMp7RxsbwnnI8teV02mW9DRPtXWfC22/v+PfatsaaKQRI5HOCqdZRtpgw3MuO/BwBHOw26+2LT1+rCPqd7n+nkdvHKE7cbBr5E21c53VaBkdB+LCRBMX8IvLbgKeEdBPiEb+ivaoREBHQNJzOd7Oq7X35JkiNgoR0BHQtqSQDEAgHjhbnGapMc1E0V/J1sSxhU0F+8FjYV6pRuIsnxemle09ENmaDX1nq2hEkEbcaLaMprBpapqqoM6XNk6Nz4G+GSUjkTQIQAMH5s/KJ+NhW+aG9Wrge6VRTlq+eXYYHrg37gFekxmgr6GG+jIpX7/meWogRPnjqC0qaI2tWV+yrbvDaKJFD4U5pQqIRtzc9WgpmZ51PD43+MiKvn83MAzbyydB06gbjbHVaB393LK6mIy11X3R8EAFU5a3F23VupLduaDylQ90SmflU6XkdQp0a9cIJIWzdUnP+jUiSctru6uW9n788bsLhtojoOeBqteqdSGsqkLa8csHvKc0bWvL7jCiKJk/eqCUXMlAVybQ8qquaQdQOu1Mr1WInouDvbCp7/9iXQVBf8FbV3jQaKX0Kgkad5udbqYvFVXgdKpZul2tX1ssnweL4UdAzwMF8XimOdvf4ITsc+mlQrLaNxS7R+ZUCnj5Y7r/XGuhO1zl6zxeZZRP+Xtc+8dScmUE1BYBHSHZoGzcFnXPOJHsdYX6o5kiCtbO+BhwU7yOrX+Pkmli6XJ6rjt44/WXuXPJlRCyNEFbsVKl1Tqy09g0MF9N6sauSdzpoHi9t0rb5Ri09ugkGgFqarZ/v5Ds7E+8HGZwaNbIKw+ms08sORYdiJqem+Impy5DEmKmdfdceEtB0uVJ1JGTPlfeSaRtbY2bzBt+VEiOfbOTpbXuxqmRPds2JqmOyRzOdcVkmQdeKFbdLmqHoX4jSFWt0uyP4RjkrmNDzcFMZ7UM58D5rFquG30w1G8kVdqxa7Gz1zJAhHNk0cS9QOi4cOebTH6+0BDQCwTzLC9MNHEBxwgo4BgBBRwjoIBjBBRwjIACjhFQwDECCjhGQAHHCCjgGAEFHCOggGMEFHCMgAKOEVDAMQIKOEZAAccIKOAYAQUcI6CAYwQUcIyAAo4RUMAxAgo4RkABxwgo4BgBBRwjoIBjBBRwjIACjhFQwDECCjhGQAHHCCjgGAEFHCOggGMEFHCMgAKOEVDAMQIKOEZAAccIKOAYAQUcI6CAYwQUcIyAAo4RUMAxAgo4RkABxwgo4BgBBRwjoIBjBBRwjIACjhFQwDECCjhGQAHHCCjgGAEFHBsT3yI7f3IGoKr/A0i3eerwulTxAAAAAElFTkSuQmCC",D=n(49),N=n(432),z=n(45),H=n(11),Y=n(178),X=n(464),U=n(59),F=function(e){return Object(R.Qb)(e,Object(u.a)({pixelRatio:.5,quality:1},Object(R.gb)(e)))},W=function(e){return e.findOne((function(e){return e.name()===I.Cc&&e.getAttr("is_cell_active")}))},V=function(e){var t=Object(O.b)(v.ac).find((function(t){return t.id===e.id()}));return e.find(".".concat(I.Cc)).toArray().map((function(n){if(n instanceof f.a.Container){var r,a=n.findOne(".".concat(I.Dc)),i=null===t||void 0===t||null===(r=t.cellsLayers)||void 0===r?void 0:r.find((function(e){return e.id===Object(R.db)(a).id}));return{settings:(null===i||void 0===i?void 0:i.settings)||n.getAttr("settings"),x:a.x(),y:a.y(),scaleX:a.scaleX(),scaleY:a.scaleY(),imageWidth:a.width(),imageHeight:a.height(),id:n.id(),id2:e.id(),is_placeholder_active:a.getAttr("is_placeholder_active")}}return{}}))},K=function(e){var t=Object(O.b)(v.ad),n=Object(G.c)(t);Object(R.Lb)(n,{shouldOverdrawWholeArea:e})},q=function(e){e.find(".".concat(I.Cc)).each((function(e){if(e.setAttr("is_cell_active",!1),e instanceof f.a.Group){var t,n=Object(R.R)(e,".".concat(I.Dc));Object(R.Lb)(n,{draggable:!1});var r=Object(R.kb)(n);(null===(t=Object(R.db)(r).id)||void 0===t?void 0:t.includes(I.Zb))&&Object(R.Lb)(r,{draggable:!1})}})),K(!0)},J=function(){var e=Object(O.b)(v.F),t=null===e||void 0===e?void 0:e.find(".".concat(I.Bc));null===t||void 0===t||t.each((function(e){e instanceof f.a.Group&&q(e)})),K(!0)},Q=function(e){var t=e.findAncestor(".".concat(I.Bc)),n=e.findOne(".".concat(I.Dc)),r=n.getAttr("is_placeholder_active");if(t instanceof f.a.Group&&q(t),e.setAttr("is_cell_active",!0),Object(O.a)({type:g.k,layersIds:[{id:Object(R.db)(n).id}]}),r)Object(O.a)(j.a.actions.setActiveSettings(""));else{var a,i=Object(R.kb)(n),c=null===(a=Object(R.db)(i).id)||void 0===a?void 0:a.includes(I.Zb);Object(R.Lb)(i,{draggable:c}),Object(R.Lb)(n,{draggable:!c})}K(!1)},Z=function(e){var t=e.data,n=e.baseGroup,r=e.onCellImagesLoaded,a=e.settings,i=a.x,c=a.y,u=a.width,l=a.height,d=Object(R.r)({width:u,height:l,x:i,y:c,id:a.id||Object(U.c)(I.Bc),gridData:t,layerType:I.Bc,name:I.Bc,gridBorderRadius:a.gridBorderRadius||0,gridThickness:a.gridThickness||0,clip:{x:0,y:0,width:u,height:l},draggable:!0});Object(R.f)(n,d);var b=Object(U.d)(d,(function(e){Object(U.a)(d),Object(D.h)([d]),r(d,e)}),a),f=Object(s.a)(b),h=f[0],p=f.slice(1);return R.h.apply(void 0,[d,h].concat(Object(o.a)(p))),d},$={getCollageObjects:function(e,t,n,r,a){var o=this;return Object(c.a)(i.a.mark((function c(){var s,u,l,d,b,f,h,p,O,v,j,m,y,x,w,A,E,C,S;return i.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(l=[],!e.background){i.next=25;break}return i.next=4,o.getCollageBgKonva(e.background,t,n);case 4:if(!(b=i.sent)){i.next=25;break}if(Object(L.b)(b),f=b.fill(),h=f?U.g.hexAToRGBA(f):{r:255,g:255,b:255},p=b.attrs.layerUrl?I.og:I.x,Object(R.Lb)(b,{id:p,is_settings:!0}),Object(R.h)(n,b),O=Object(R.db)(b),v=O.x,j=O.y,m=O.width,y=O.height,x=O.layerUrl,b.attrs.layerUrl){i.next=17;break}d={type:g.l,id:I.x,settings:{colorRGB1:h,colorRGB2:h,settingType:x?"texture":"color",isImage:Object(R.ub)(b),width:m,height:y,x:v,y:j},resources:{url:x}},i.next=25;break;case 17:if(w=Object(R.mb)(n)){i.next=20;break}return i.abrupt("return");case 20:Object(k.a)({stage:w,baseGroup:n,canvasSizes:t}),U.g.addId(b),A=Object(R.db)(b),E=A.id,C={colorRGB1:h,colorRGB2:h,type:p,settingType:x?"texture":"color",isImage:Object(R.ub)(b),width:m,height:y,x:v,y:j},l.push({type:p,konva_tagName:p,id:E,defaultSettings:C,resources:{url:x,templateId:r}});case 25:return(null===(s=e.collage_layout)||void 0===s||null===(u=s.paths)||void 0===u?void 0:u.length)?(S=o.drawTemplateCollage(e,t,n,(function(){Object(R.I)(n),a()})))&&S.forEach((function(e){Object(R.Lb)(e,{is_settings:!0}),Object(R.h)(n,e),Object(R.I)(n);var t=Object(R.db)(e.children[0]).id,a={type:e.attrs.layerType||e.className.toLowerCase(),id:t,konva_tagName:e.className,resources:{url:e.attrs.layerUrl,templateId:r},defaultSettings:{collageGroupId:Object(R.db)(e).id,is_placeholder_active:Object(R.db)(e.children[0]).is_placeholder_active}};l.unshift(a)})):a(),i.abrupt("return",{collageImages:l,bgLayerAction:d});case 27:case"end":return i.stop()}}),c)})))()},getCollageBgKonva:function(e,t,n){return Object(c.a)(i.a.mark((function r(){var a,c,o,s,u,l;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!e.result_image){r.next=15;break}return a=Object(R.s)({name:"template-background"}),r.next=4,U.h.getImageData(e.result_image,{},(function(e){if("undefined"!==typeof e&&t){var r=Math.min(e.width/t.width,e.height/t.height),i={width:e.width/r,height:e.height/r},c={x:(t.width-i.width)/2,y:(t.height-i.height)/2};Object(R.Lb)(a,{image:e,width:i.width,height:i.height,x:c.x,y:c.y,initialWidth:i.width,initialHeight:i.height}),Object(R.I)(n)}}));case 4:if("undefined"!==typeof(c=r.sent)&&t){r.next=7;break}return r.abrupt("return");case 7:return o=Math.min(c.width/t.width,c.height/t.height),s={width:c.width/o,height:c.height/o},u={x:(t.width-s.width)/2,y:(t.height-s.height)/2},l=Math.min(s.width/c.width,s.height/c.height),Object(R.Lb)(a,{image:c,width:s.width,height:s.height,x:u.x,y:u.y,name:I.og,is_settings:!0,draggable:!0,isCropAble:!0,isReplaceAble:!0,isErasable:!0,hasPatch:!0,imgRatio:l,originalWidth:c.width,originalHeight:c.height,initialWidth:s.width*o,initialHeight:s.height*o}),Object(R.I)(n),Object(R.Lb)(a,{layerUrl:e.result_image}),r.abrupt("return",a);case 15:if(!e.color){r.next=17;break}return r.abrupt("return",Object(R.x)({fill:"#".concat(e.color),width:t.width,height:t.height,name:I.x}));case 17:case"end":return r.stop()}}),r)})))()},drawTemplateCollage:function(e,t,n,r){for(var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=[],c=[],o=e.collage_images,s=2*e.background.border_size+e.background.border_thickness,u={width:t.width-s,height:t.height-s},l=new Y.a(e.collage_layout,{size:u}),d=function(t){var r=o[t],d=l.collageCells[t],b=d.gravityCenter,f=d.calculateApplyingBorderWidth(e.background.border_size,e.background.border_thickness),h=d.applyBorder(d.computedVerticesObjects,f),p=d.maxCornerRadius*e.background.border_radius/100,g=a&&0===t,O=Object(R.r)({cellData:d,paPath:e.collage_layout.paths[t],x:s/2,y:s/2,name:"photos",layerType:I.pg,collageOutline:g,clipFunc:function(e){Object(A.a)(e,h,{borderRadius:p})}});Object(L.a)(O);var v=Object(R.y)({sceneFunc:function(e,t){var n=e._context,r=Object(R.kb)(t),a=Object(R.R)(r,(function(e){return Object(R.db)(e).is_placeholder_active})),i=Object(R.db)(r).collageOutline;if(a){var c=Object(R.db)(a).phPadding,o=d.applyBorder(h,c);Object(A.a)(n,o,{borderRadius:p}),n.strokeStyle=Object(H.c)(H.b.paColor210),n.lineWidth=1,n.setLineDash([4]),n.stroke()}else r&&i&&(Object(A.a)(n,h,{borderRadius:p}),n.lineWidth=4,n.strokeStyle=Object(H.c)(H.b.paColor9),n.stroke(),Object(A.a)(n,h,{borderRadius:p}),n.lineWidth=2,n.strokeStyle=Object(H.c)(H.b.paColor1),n.stroke());r.getAttr(I.rd)&&!i&&(Object(A.a)(n,h,{borderRadius:p}),n.fillStyle=Object(H.c)(H.b.paColor69),n.strokeStyle=Object(H.c)(H.b.paColor70),n.lineWidth=2,n.fill(),n.stroke(),null===t||void 0===t||t.listening(!1)),Object(R.Gb)(t)}}),j=d.size,m=d.getCellComputedSize(),y=m.width,x=m.height;if(b&&j){var w,E=Object(R.s)({draggable:!0,collageImageJson:r,is_settings:!0,name:I.qg});Object(R.i)(E,"dblclick",(function(){return Object(L.d)(E)})),Object(L.a)(E);var k=(null===r||void 0===r?void 0:r.result_image)||(null===r||void 0===r||null===(w=r.resource)||void 0===w?void 0:w.resource_url)||"";E.setAttrs({rotation:null===r||void 0===r?void 0:r.rotation,x:b.x*u.width,y:b.y*u.height,scale:{x:(null===r||void 0===r?void 0:r.scale)||1,y:(null===r||void 0===r?void 0:r.scale)||1},draggable:!!r,isErasable:!!r,hasPatch:!1,is_settings:!!r,isReplaceAble:!!r,is_placeholder_active:!r}),Object(R.Lb)(O,{layerUrl:r?k:I.vh.editorOnly?I.lb:B});var C=r?U.h.loadImage(k,{},(function(e){var t=U.g.imageCalculations(e,j,u),r=t.imageWidth,a=t.imageHeight;Object(R.Lb)(E,{image:e,width:r,height:a,offsetX:r/2,offsetY:a/2}),Object(R.I)(n)})):U.h.getPlaceholder(y,x,100);c.push(C.then((function(e){var t;if(e){var n=d.getCellComputedCenter(),a=n.x,i=n.y,c=null===(t=e.getAttribute)||void 0===t?void 0:t.call(e,"padding"),o=U.g.imageCalculations(e,j,u),s=o.imageWidth,l=o.imageHeight;Object(R.Lb)(E,{x:a,y:i,image:e,phPadding:c,width:s,height:l,originalWidth:e.width,originalHeight:e.height,offsetX:s/2,offsetY:l/2,draggable:!!r})}}))),U.g.addId(E),Object(R.h)(O,E,v),U.g.addId(O,"pa-grid"),Object(R.Lb)(O,{childId:Object(R.db)(E).id}),i.push(O)}},b=0;b<e.collage_layout.paths.length;b++)d(b);return Promise.all(c).then(r),i}},ee={getAddedObjectsKonvas:function(e,t,n,a,i){var c=this;function o(e){return function(t){if(t)return e.horizontal_flipped&&U.g.horizontalFlippe(t),e.vertical_flipped&&U.g.verticalFlippe(t),e.rotation&&Object(T.a)(t,e.rotation),e.blendmode&&Object(z.l)({baseGroup:n,settings:{id:t.id(),modeName:{value:e.blendmode}},valueKey:"value"}),t}}var s,u=[],l=Object(r.a)(e);try{var d=function(){var e=s.value,t=void 0;switch(e.type){case I.Je:case I.Yf:case"elements":t=Object(R.s)(),Object(R.i)(t,"dblclick",(function(){return Object(L.d)(t)})),Object(L.a)(t);break;case"text":t=Object(R.B)(),Object(P.a)(t)}t&&U.g.addId(t,e.type),e.konvaObj=t};for(l.s();!(s=l.n()).done;)d()}catch(p){l.e(p)}finally{l.f()}var b,f=Object(r.a)(e);try{var h=function(){var e=b.value;switch(e.type){case I.Je:u.push(c.getAddedPhoto(e,t,n).then((function(e){if(e)return Object(R.Lb)(e,{layerType:I.Je}),e})).then(o(e)));break;case I.Yf:case"elements":u.push(c.getAddedSticker(e,t,n).then((function(t){t&&(Object(R.db)(t).layerType===I.Af&&(e.konvaObj=t));return t})).then(o(e)));break;case"text":u.push(c.getAddedText(e,n,t).then((function(e){return e&&Object(R.Lb)(e,{layerType:"text"}),e})).then(o(e)))}};for(f.s();!(b=f.n()).done;)h()}catch(p){f.e(p)}finally{f.f()}return Promise.all(u.map((function(e){return e.then(a)}))).then(i).catch((function(e){m.a.trigger(e,"error")})),e.map((function(e){return e.konvaObj}))},getAddedSvg:function(e,t,n,r,a){if(!e.konvaObj)return null;var i=Object(R.db)(e.konvaObj),c=i.zIndex,o=i.id;Object(R.G)(e.konvaObj);var s=e.rect,l=s.x,d=s.y,b=s.w,f=s.h,h=r.svgDoc,p=r.svgWidth,g=r.svgHeight,O=Object(C.a)({baseGroup:t,settings:{id:o,childId:o,shapeType:I.bd,svgDoc:h,svgWidth:p,svgHeight:g,stroke:e.stroke},fireClick:!1,isFromTemplate:!0});if(!O.pathsGroup)return null;var v=b*n,j=f*n,m=Object(u.a)(Object(u.a)({childrenAttrs:O.childrenAttrs,draggable:!0,is_settings:!0,zIndex:c,opacity:e.opacity/100,layerUrl:a},s&&{x:l*n,y:d*n,width:v<1?1:v,height:j<1?1:j,scaleX:p&&v/p,scaleY:g&&j/g,initialScaleX:p&&v/p,initialScaleY:g&&j/g}),{},{layerType:I.Af});return Object(R.Lb)(O.pathsGroup,m),O.pathsGroup},getAddedPhoto:function(e,t,n){return Object(c.a)(i.a.mark((function r(){var a,c,o,s,u,l,d,b,f,h,p;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a="",a=e.image_resource&&e.image_resource.resource_url?e.image_resource.resource_url:e.result_image,c=e.konvaObj,o=e.rect,s=e.opacity,u=e.scale,!a){r.next=14;break}if(c){r.next=6;break}return r.abrupt("return");case 6:return l=o.x,d=o.y,b=o.w,f=o.h,r.next=9,U.h.loadImage(a,{},(function(e){var r=Math.min(b*t/e.width,f*t/e.height);Object(R.Lb)(c,{image:e,x:l*t,y:d*t,width:b*t,height:f*t,opacity:s/100,name:"image",draggable:!0,isReplaceAble:!0,isCropAble:!0,isErasable:!0,hasPatch:!0,originalWidth:e.width,originalHeight:e.height,imgRatio:r,initialWidth:b*t,initialHeight:f*t}),u&&Object(R.Lb)(c,{scale:u}),Object(R.I)(n)}));case 9:h=r.sent,p=Math.min(b*t/h.width,f*t/h.height),Object(R.Lb)(c,{image:h,x:l*t,y:d*t,width:b*t,height:f*t,opacity:s/100,name:"image",draggable:!0,isReplaceAble:!0,isCropAble:!0,isErasable:!0,hasPatch:!0,originalWidth:h.width,originalHeight:h.height,imgRatio:p,initialWidth:b*t,initialHeight:f*t}),u&&Object(R.Lb)(c,{scale:u}),Object(R.Lb)(c,{layerUrl:a});case 14:return r.abrupt("return",c);case 15:case"end":return r.stop()}}),r)})))()},getAddedSticker:function(e,t,n){var r=this;return Object(c.a)(i.a.mark((function a(){var c,o,s,u,l,d,b,f,h,p,g,O,v,j,m,y,x,w;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if((o=e.result_sticker||(null===(c=e.sticker_resource)||void 0===c?void 0:c.resource_url))||!e.sticker_resource){a.next=7;break}return a.next=4,U.h.getDataFromShop("".concat(I.Ef,"/").concat(e.sticker_resource.package,"/items/").concat(e.sticker_resource.resource_id));case 4:s=a.sent,(u=s.response)&&(o=u.url);case 7:if(!o||!Object(E.a)(o)){a.next=13;break}return a.next=10,Object(S.a)(o,{fill:e.color});case 10:if(!(l=a.sent).canBePathsGroup){a.next=13;break}return a.abrupt("return",r.getAddedSvg(e,n,t,l,o));case 13:if(d=e.konvaObj,b=e.rect,f=b.x,h=b.y,p=b.w,g=b.h,!o){a.next=47;break}if(!e.brush||!e.brush.brush_used){a.next=29;break}if(!e.brush.mask){a.next=27;break}return a.prev=18,a.next=21,U.g.getBrashedImg(o,e.brush.mask,{fill:e.color});case 21:O=a.sent,a.next=27;break;case 24:return a.prev=24,a.t0=a.catch(18),a.abrupt("return");case 27:a.next=38;break;case 29:return a.prev=29,a.next=32,U.h.getImageData(o,{fill:e.color,rect:e.rect},(function(n){if(n&&d){Object(R.Lb)(d,{image:n,opacity:e.opacity/100,name:"image",draggable:!0,is_settings:!0,isCropAble:"elements"!==e.type,hasPatch:!0});var r=1,a=e.rect.w*t,i=e.rect.h*t,c=Object(R.db)(d),o=c.width,s=c.height;b&&(r=Math.max(a/n.width,i/n.height),Object(R.Lb)(d,{x:f*t,y:h*t,width:a<1?1:a,height:i<1?1:i})),Object(R.Lb)(d,{originalWidth:n.width,originalHeight:n.height,imgRatio:r,initialWidth:o,initialHeight:s,layerUrl:Object(R.Qb)(d)})}}));case 32:O=a.sent,a.next=38;break;case 35:return a.prev=35,a.t1=a.catch(29),a.abrupt("return");case 38:if(O&&d){a.next=40;break}return a.abrupt("return");case 40:Object(R.Lb)(d,{image:O,opacity:e.opacity/100,name:"image",draggable:!0,is_settings:!0,isCropAble:"elements"!==e.type,hasPatch:!1}),v=1,j=p*t,m=g*t,b&&(v=Math.max(j/O.width,m/O.height),Object(R.Lb)(d,{x:f*t,y:h*t,width:j<1?1:j,height:m<1?1:m})),y=Object(R.db)(d),x=y.width,w=y.height,Object(R.Lb)(d,{originalWidth:O.width,originalHeight:O.height,imgRatio:v,initialWidth:x,initialHeight:w,layerUrl:Object(R.Qb)(d),layerBigImgUrl:o,layerType:I.Yf});case 47:return a.abrupt("return",d);case 48:case"end":return a.stop()}}),a,null,[[18,24],[29,35]])})))()},getAddedText:function(e,t,n){return Object(c.a)(i.a.mark((function r(){var a,c,o,s,u,l,d,b,f,h,p,g,O,v,j,y,x,A,E,k,C,S,T,L;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(c=null===e||void 0===e||null===(a=e.text_resource)||void 0===a?void 0:a.resource_url,o="",r.prev=2,c){r.next=26;break}if(!e.font_resource||"free"===e.font_resource.source_type){r.next=18;break}if(c=e.font_resource.url){r.next=18;break}if(s=e.font_resource,u=s.package,l=s.resource_id,"sc_discover"!==s.source_type){r.next=12;break}c=X.a[l],r.next=18;break;case 12:return r.next=14,U.h.getDataFromShop("".concat(I.Ef,"/").concat(u,"/items/").concat(l));case 14:d=r.sent,b=d.response,o=null===b||void 0===b?void 0:b.preview_url,c=null===b||void 0===b?void 0:b.url;case 18:if(c){r.next=26;break}return r.next=21,U.h.getFontByFormattedName(e.font);case 21:f=r.sent,h=f.url,p=f.preview_url,o=p,c=h;case 26:if(!c){r.next=29;break}return r.next=29,U.h.loadFont(e.font,c);case 29:r.next=34;break;case 31:r.prev=31,r.t0=r.catch(2),m.a.trigger(r.t0,"error");case 34:if(g={font_preview:o,font_src:c||"",font_family:e.font},Object(_.b)(g),O=e.padding||5/e.scale.x,v=e.konvaObj,Object(R.Ab)(v)){r.next=40;break}return r.abrupt("return",v);case 40:return j="center"===e.alignment?e.suggested_width+O+30*n:Math.ceil(e.suggested_width)+O,Object(R.Lb)(v,{text:e.text,x:e.center.x*n,y:e.center.y*n,opacity:e.opacity/100,fill:"#".concat(e.fill_color),width:j,fontFamily:e.font,fontSize:e.font_size||28,align:e.alignment,scaleX:e.scale.x*n,scaleY:e.scale.y*n,draggable:!0,wrap:"word",name:"text",is_settings:!0,lineJoin:"round",fillAfterStrokeEnabled:!0,font_resource:g}),y=Object(R.db)(v),e.letter_spacing&&Object(R.Lb)(v,{letterSpacing:e.letter_spacing/5}),e.line_spacing&&Object(R.Lb)(v,{lineHeight:e.line_spacing/(y.fontSize*e.scale.x)+1}),e.stroke_color&&e.stroke_width&&Object(R.Lb)(v,{stroke:"#".concat(e.stroke_color),strokeWidth:e.stroke_width/24}),x=y.width,A=y.height,E=y.x,k=y.y,C=y.scaleX,e.shadow_color&&Object(R.Lb)(v,{shadowColor:"#".concat(e.shadow_color),shadowBlur:e.shadow_amount/10,shadowOffsetX:e.shadow_offset_x*x/200,shadowOffsetY:e.shadow_offset_y*A/200,shadowOpacity:e.shadow_opacity/100}),S=Object(w.a)(Object(R.a)(v)),Object(R.Lb)(v,S),T=Object(R.mb)(t),L=Object(N.a)(v,T),Object(R.Lb)(v,{x:E-x*C/2,y:k-L.yOversight-((null===L||void 0===L?void 0:L.actualHeight)||1)/2}),r.abrupt("return",v);case 54:case"end":return r.stop()}}),r,null,[[2,31]])})))()}},te=function(){var e=Object(c.a)(i.a.mark((function e(t,n,r,a,c,s){var l,b,f,h,g,v,j,w,A,E,k,C,S,T,_,L,P,B;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b={},(l={}).promise=new Promise((function(e,t){l.resolve=e,l.reject=t})),b.promise=new Promise((function(e,t){b.resolve=e,b.reject=t})),f=r.destination_size.w||1,h=r.destination_size.h||1,g=Math.min(c.offsetWidth/f,(c?c.clientHeight-I.ub:0)/h),v={width:f*g,height:h*g},j=[],t){e.next=12;break}return s(j),e.abrupt("return",{bgLayerAction:w,stageSize:v});case 12:if(Object(R.qb)(Object(G.c)(t)),A=Object(R.db)(t),E=A.width,k=A.height,Object(R.Lb)(n,Object(u.a)(Object(u.a)({},v),{},{clipX:0,clipY:0,clipWidth:v.width,clipHeight:v.height,x:(E-v.width)/2,y:(k-v.height)/2})),Object(R.Lb)(t,{scaleX:1,scaleY:1}),S=function(){var e;Object(R.k)(n),null===(e=l.resolve)||void 0===e||e.call(l)},!r.collage){e.next=31;break}return e.prev=18,e.next=21,$.getCollageObjects(r.collage,v,n,a,S);case 21:C=e.sent,(null===(T=r.collage.collage_layout)||void 0===T||null===(_=T.paths)||void 0===_?void 0:_.length)&&Object(R.Lb)(t,{collage:p()(r.collage)}),C&&(w=C.bgLayerAction,j.push.apply(j,Object(o.a)(C.collageImages))),e.next=29;break;case 26:e.prev=26,e.t0=e.catch(18),m.a.trigger(e.t0,"error");case 29:e.next=32;break;case 31:S();case 32:return L=function(e){if(e){var t=Object(R.db)(e),r=t.id,i=t.text,c=t.fill,o=t.align,s=t.stroke,u=t.fontFamily,l=t.strokeWidth,b=t.shadowColor,f=t.opacity,h={type:Object(R.db)(e).layerType||e.className.toLowerCase(),id:r,konva_tagName:e.className,resources:{templateId:a,url:Object(R.db)(e).layerUrl,bigImageUrl:Object(R.db)(e).layerBigImgUrl,text:""},defaultSettings:{scaleXTransformer:1,scaleYTransformer:1,opacity:100*f}};if(h.type===I.Af&&h.defaultSettings){var p=Object(R.db)(e).childrenAttrs.find((function(e){return e.fill})),g=null===p||void 0===p?void 0:p.fill;h.elementType=I.bd,h.konva_tagName="Group",h.resources.paths=Object(R.db)(e).childrenAttrs,h.resources.viewbox=e.viewbox,h.defaultSettings.stroke=e.stroke,h.defaultSettings.childrenAttrs=Object(R.db)(e).childrenAttrs,h.defaultSettings.colorRGB1=d()(g).toRgb(),h.defaultSettings.childId=Object(R.db)(e).childId}return"text"===h.type&&i&&h.defaultSettings&&(h.resources.text=i,h.defaultSettings.outlineColor=Object(y.a)(s),h.defaultSettings.sizeOutline=Math.round(100*(45*l+Number.EPSILON))/100,h.defaultSettings.shadowColor=Object(y.a)(b),h.defaultSettings.colorRGB1=Object(y.a)(c),h.defaultSettings.font_family=u,h.defaultSettings.text_align=o,h.defaultSettings.outlineTransparent=!h.defaultSettings.outlineColor),j.push(h),Object(R.k)(n),e}},P=function(){var e;Object(R.k)(n),null===(e=b.resolve)||void 0===e||e.call(b)},r.added_objects?null===(B=ee.getAddedObjectsKonvas(r.added_objects.map((function(e){return Object(u.a)({},e)})),g,n,L,P))||void 0===B||B.map((function(e){return e?(Object(R.h)(n,e),e):e})):P(),e.next=37,Promise.all([b.promise,l.promise]);case 37:return Object(R.k)(t),Object(O.a)(M.a.actions.resetZoom()),s(j.sort((function(e,t){return x(t.id)-x(e.id)}))),e.abrupt("return",{bgLayerAction:w,stageSize:v});case 41:case"end":return e.stop()}}),e,null,[[18,26]])})));return function(t,n,r,a,i,c){return e.apply(this,arguments)}}();t.b=te},,,,function(e,t,n){"use strict";var r=n(7),a=n.n(r),i=n(10),c=n(1),o=n(0),s=n(89),u=n(67),l=n(80),d=n(62),b=n(55),f=n(29),h=function(e){var t=e.effectGroup,n=e.stage,r=e.settings;if(t){var a=r.canvas,i=r.activeImage,h=r.blendMode,p=r.shouldFireClick,g=void 0===p||p,O=Object(o.db)(Object(o.kb)(t))[c.Ed]!==c.pg,v=Object(o.db)(t).effectType,j=v&&v!==c.qc.imageEngine,m=null===i||void 0===i?void 0:i.layer;if(j&&(Object(u.a)({effectType:v}),Object(b.b)(v)),m){var y=(null===i||void 0===i?void 0:i.node)||Object(o.R)(n,"#".concat(m.id));if(y){var x=Object(o.db)(y),w=x.hasTransparency,A=x.visible;w&&A&&Object(o.qb)(y);var E=Object(o.M)(n,"#".concat(m.id,"|").concat(c.id));E&&E.destroy();var k=Object(o.db)(y),C=k.x,S=void 0===C?0:C,T=k.y,_=void 0===T?0:T,I=k.width,R=k.height,L=k.name,P=k.id,G=k.draggable,M=k.scaleX,B=k.scaleY,D=k.offsetX,N=k.offsetY,z=k.rotation,H=k.cropX,Y=k.cropY,X=k.cropWidth,U=k.cropHeight,F=k.image,W=Math.min(a.width/F.width,a.height/F.height),V=Object(o.s)({x:S,y:_,image:a,width:I,height:R,name:L||"image",id:"".concat(P,"|").concat(c.id),is_settings:!0,draggable:G,scaleX:M,scaleY:B,offsetX:D,offsetY:N,rotation:z,cropX:H*W,cropY:Y*W,cropWidth:X*W,cropHeight:U*W});Object(o.Mb)(V,h),Object(o.f)(t,V),Object(o.Lb)(t,{effectType:c.qc.imageEngine}),O&&g&&Object(l.a)({node:t}),Object(o.I)(n),Object(s.a)(t),Object(d.o)(a).then((function(e){return Object(f.a)(e).then((function(e){return Object(o.Lb)(V,{image:e})}))}))}}}},p=n(9),g=n(6),O=n(244),v=function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i,d,h,v,j,m,y,x,w,A,E,k,C,S,T,_,I,R,L;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.settings,r=t.effectGroup,i=t.stage,d=Object(g.b)(p.e),h=null===d||void 0===d?void 0:d.id,i&&d&&h&&r){e.next=5;break}return e.abrupt("return");case 5:return v=Object(o.db)(Object(o.R)(i,"#".concat(h))),j=v.width,m=v.height,y=v.x,x=v.y,w=v.scaleX,A=v.scaleY,E=v.offsetX,k=v.offsetY,C=v.rotation,S=Object(o.db)(r),T=S.effectType,_=T&&T!==c.qc.sky,Object(O.d)({effectGroup:r,activeLayer:d,settings:{cloudType:"cloud"}}),_&&(Object(u.a)({effectType:T}),Object(b.b)(T)),e.next=12,Object(f.a)(n.url);case 12:return I=e.sent,e.next=15,Object(O.c)(j,m,I);case 15:R=e.sent,L=Object(o.s)({x:y,y:x,image:R,width:R.width,height:R.height,id:"".concat(h,"-cloud"),is_settings:!0,scaleX:w,scaleY:A,offsetX:E,offsetY:k,rotation:C,globalCompositeOperation:""}),Object(o.f)(r,L),Object(o.Eb)(L),Object(o.Lb)(r,{effectType:c.qc.sky}),Object(o.db)(Object(o.kb)(r))[c.Ed]!==c.pg&&Object(l.a)({node:r}),Object(s.a)(r);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=n(2),m=n(218),y=function(e){var t;return{brightness:e.brightness,opacity:(100-e.fade)/100,saturation:null!==(t=e.color_intensity)&&void 0!==t?t:e.saturation,contrast:e.contrast,highlights:e.highlights,clarity:e.clarity,shadows:e.shadows,temperature:e.temperature,hue:e.hue,globalCompositeOperation:e.blendMode,hsl:e.hsl}},x=n(51),w=function(e){var t,n,r=e.effectGroup,a=e.stage,i=e.layerArr,d=e.settings,f=Object(o.db)(Object(o.kb)(r))[c.Ed]!==c.pg,h=Object(o.db)(r).effectType,p=h&&h!==c.qc.colorToning,g=(null===(t=d.activeImage)||void 0===t?void 0:t.layer)||i.find((function(e){return"color-toning-effects"===e.type}));if(p&&(Object(u.a)({effectType:h}),Object(b.b)(h)),g){var O=g.id,v=(null===(n=d.activeImage)||void 0===n?void 0:n.node)||Object(o.M)(a,"#".concat(O));if(v){Object(o.Lb)(v,{is_settings:!0}),Object(o.Ib)(v),Object(o.Ib)(Object(o.U)(a,"#".concat(g.id,"rect-effect")));var w=Object(o.db)(v),A=w.x,E=w.y,k=w.width,C=w.height,S=w.scaleY,T=void 0===S?1:S,_=w.scaleX,I=void 0===_?1:_,R=w.offsetX,L=w.offsetY,P=w.draggable,G={x:A,y:E,width:k,height:C,scaleX:I,scaleY:T,offsetX:R,offsetY:L,rotation:w.rotation,draggable:P},M=Object(o.x)(Object(j.a)(Object(j.a)({},G),{},{fill:d.color}));Object(o.Mb)(M,"source-in");var B=Object(o.u)({listening:!1});Object(o.Lb)(v,{x:0,y:0,offsetX:0,offsetY:0,rotation:0}),Object(o.Lb)(M,{x:0,y:0,offsetX:0,offsetY:0,rotation:0}),Object(o.h)(B,v),Object(o.h)(B,M);var D=Object(o.db)(M),N=D.width,z=D.height,H=N*D.scaleX,Y=z*D.scaleY,X=y(d),U=X.opacity,F=X.saturation,W=Object(o.s)(Object(j.a)(Object(j.a)({},G),{},{id:"".concat(g.id,"rect-effect"),image:Object(o.Pb)(B,{pixelRatio:1,width:H,height:Y})}));Object(o.Ib)(B),Object(o.Lb)(v,Object(j.a)({},G)),Object(o.Mb)(v,d.blendMode),d.updateEffect&&(Object(o.Lb)(W,{opacity:U,saturation:F}),Object(o.Lb)(W,{filters:[x.a.IEAdjust]})),Object(o.h)(r,W),Object(o.h)(r,v),Object(o.Lb)(r,{effectType:c.qc.colorToning}),f&&Object(l.a)({node:r}),Object(m.a)(v),Object(s.a)(r)}}},A=/,/g,E=function(e){var t,n,r=e.effectGroup,a=e.stage,i=e.settings,d=i.color1,f=i.color3,h="";i.color2&&(h=i.color2.replace(A,""));var p=Object(o.db)(Object(o.kb)(r))[c.Ed]!==c.pg,g=Object(o.db)(r).effectType,O=g&&g!==c.qc.rainbow,v=null===(t=i.activeImage)||void 0===t?void 0:t.layer;if(O&&(Object(u.a)({effectType:g}),Object(b.b)(g)),v){var m=(null===(n=i.activeImage)||void 0===n?void 0:n.node)||Object(o.M)(a,"#".concat(v.id));if(m){Object(o.Ib)(m);var w=Object(o.U)(a,"#".concat(v.id,"rect-effect"));Object(o.Ib)(w);var E=Object(o.db)(m),k=E.x,C=E.y,S=E.width,T=E.height,_=E.scaleX,I=void 0===_?1:_,R=E.scaleY,L=void 0===R?1:R,P=E.offsetX,G=E.offsetY,M=E.rotation,B={x:k,y:C,width:S,height:T,scaleX:I,scaleY:L,offsetX:P,offsetY:G,draggable:E.draggable,rotation:M,is_settings:!0},D=Object(o.x)(Object(j.a)(Object(j.a)({},B),{},{fillLinearGradientStartPoint:{x:0,y:0},fillLinearGradientEndPoint:{x:S,y:T},fillLinearGradientColorStops:h?[0,"".concat(d),.5,"".concat(h),1,"".concat(f)]:[0,"".concat(d),1,"".concat(f)],fillEnabled:!0,fillPriority:"linear-gradient",name:"rect-effect"}));Object(o.Mb)(D,"source-in");var N=Object(o.u)({listening:!1});Object(o.Lb)(m,{x:0,y:0,offsetX:0,offsetY:0}),Object(o.Lb)(D,{x:0,y:0,offsetX:0,offsetY:0}),Object(o.f)(N,m,D);var z=y(i),H=z.opacity,Y=z.saturation,X=Object(o.db)(D),U=X.width,F=X.height,W=U*X.scaleX,V=F*X.scaleY,K=Object(o.s)(Object(j.a)(Object(j.a)({},B),{},{id:"".concat(v.id,"rect-effect"),image:Object(o.Pb)(N,{pixelRatio:1,width:W,height:V})}));Object(o.Ib)(N),Object(o.Lb)(m,B),Object(o.Mb)(m,i.blendMode),i.updateEffect&&Object(o.Lb)(K,{opacity:H,saturation:Y,filters:[x.a.IEAdjust]}),Object(o.f)(r,K,m),Object(o.Lb)(r,{effectType:c.qc.rainbow}),p&&Object(l.a)({node:r}),Object(s.a)(r)}}},k=n(50),C=function(e){var t,n,r=e.effectGroup,a=e.stage,i=e.settings,d=Object(o.db)(Object(o.kb)(r))[c.Ed]!==c.pg,f=Object(o.db)(r).effectType,h=f&&f!==c.qc.magic,p=null===(t=i.activeImage)||void 0===t?void 0:t.layer;if(h&&(Object(u.a)({effectType:f}),Object(b.b)(f)),p){var g=(null===(n=i.activeImage)||void 0===n?void 0:n.node)||Object(o.R)(a,"#".concat(p.id));if(g){var O=Object(o.M)(a,"#".concat(p.id,"|image-magic-effect"));O&&Object(o.G)(O);var v=Object(o.db)(g).image,m=v.width,w=v.height,A=i.magicImage,E=A.width,C=A.height,S=Math.min(E/m,C/w),T=Object(o.db)(g),_=T.x,I=T.y,R=T.cropY,L=T.cropX,P=T.width,G=T.image,M=T.height,B=T.scaleX,D=T.scaleY,N=T.offsetX,z=T.offsetY,H=T.rotation,Y=T.draggable,X=T.cropWidth,U=T.cropHeight,F=T.name,W=void 0===F?"image":F,V=Object(o.s)({width:P,image:G,height:M}),K=Object(o.s)({image:i.magicImage,width:P,height:M,cropX:L*S,cropY:R*S,cropWidth:X*S,cropHeight:U*S,globalCompositeOperation:"source-in"}),q=Object(o.u)({listening:!1});Object(o.f)(q,V,K);var J=Object(o.s)({x:_,y:I,image:Object(o.Pb)(q,{pixelRatio:Object(k.a)(K)}),width:P,height:M,name:W,id:"".concat(Object(o.db)(g).id,"|image-magic-effect"),is_settings:!0,scaleX:B,scaleY:D,offsetX:N,offsetY:z,rotation:H,draggable:Y,globalCompositeOperation:""});i.updateEffect&&Object(o.Lb)(J,Object(j.a)(Object(j.a)({},y(i)),{},{filters:[x.a.IEAdjust]})),Object(o.f)(r,J),Object(o.Ib)(q),Object(o.Lb)(r,{effectType:c.qc.magic}),d&&Object(l.a)({node:r}),Object(s.a)(r)}}},S=n(12),T=n(393),_=n(103),I=function(e){var t,n,r=e.effectGroup,a=e.stage,i=e.layerArr,d=e.settings,f=Object(o.db)(Object(o.kb)(r))[c.Ed]!==c.pg,h=Object(o.db)(r).effectType,p=h&&h!==c.qc.duotone,O=Object(_.a)(i)||(null===(t=d.activeImage)||void 0===t?void 0:t.layer);if(p&&(Object(u.a)({effectType:h}),Object(b.b)(h)),O){var v=(null===(n=d.activeImage)||void 0===n?void 0:n.node)||Object(o.R)(a,"#".concat(O.id)),j=Object(o.R)(a,"#".concat(O.id,"|duotone-image")),m=d.colorRGB1,w=d.colorRGB2;if("color"===d.settingType)return Object(o.l)(j),void Object(o.Lb)(j,{filters:[function(e){return Object(T.a)(e,m,w)},x.a.Brighten]});if(v){j&&Object(o.G)(j);var A=Object(o.db)(v),E=A.x,C=A.y,I=A.id,R=A.width,L=A.cropX,P=A.cropY,G=A.name,M=void 0===G?"image":G,B=A.image,D=A.height,N=A.scaleX,z=void 0===N?1:N,H=A.scaleY,Y=void 0===H?1:H,X=A.offsetX,U=A.offsetY,F=A.rotation,W=A.draggable,V=A.cropWidth,K=A.cropHeight,q=Object(o.s)({x:E,y:C,width:R,cropX:L,cropY:P,name:M,image:B,height:D,scaleX:z,scaleY:Y,offsetX:X,offsetY:U,rotation:F,draggable:W,cropWidth:V,cropHeight:K,is_settings:!0,id:"".concat(I,"|duotone-image")});if(Object(o.l)(q,{pixelRatio:Object(k.a)(q)}),q.filters([function(e){return Object(T.a)(e,m,w)}]),d.updateEffect){var J=Math.min(c.bc/R,c.bc/D);Object(o.Pb)(q,{pixelRatio:J}).toBlob((function(e){Object(g.a)({type:S.l,resources:{effectUrl:URL.createObjectURL(e)}})}));var Q=y(d),Z=Q.brightness,$=Q.opacity,ee=Q.globalCompositeOperation;Object(o.Lb)(q,{brightness:Z,opacity:$,globalCompositeOperation:ee})}Object(o.f)(r,q),Object(o.Lb)(r,{effectType:c.qc.duotone}),f&&Object(l.a)({node:r}),Object(s.a)(r)}}},R=n(15),L=n(114),P=n.n(L),G=n(47),M=function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i,s,d,h,p,g,O,v,j,m,y,w,A,E,C,S,T,_,I,L,M,B,D,N,z,H,Y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.settings,i=t.stage,s=t.effectGroup,d=t.layerArr,h=r.activeImage.layer,p=h.type===c.Cc,g=Object(o.db)(Object(o.kb)(s))[c.Ed]!==c.pg||p,O=Object(o.db)(s),v=O.effectType,v&&v!==c.qc.doubleExposure&&(Object(u.a)({effectType:v}),Object(b.b)(v)),j="double-exposure-effect-id",m=function(e,t){if(e&&t){var n=[0,0,0],a=[255,255,255];if(r.blendMode){if(0!==r.color1.length){var i=Object(k.a)(e),c=Object(k.a)(t);if(P()(r.color1,n)&&P()(r.color2,a))return Object(o.l)(e,{pixelRatio:i}),Object(o.Lb)(e,{filters:[x.a.Grayscale]}),Object(o.l)(t,{pixelRatio:c}),Object(o.Lb)(t,{filters:[x.a.Grayscale]}),void Object(o.Mb)(t,"lighten");Object(o.l)(e,{pixelRatio:i});var s=Object(R.a)(r.color2,3),u=s[0],l=s[1],d=s[2];Object(o.Lb)(e,{filters:[x.a.Grayscale,x.a.RGB],red:u,green:l,blue:d,is_settings:!0}),Object(o.l)(t,{pixelRatio:c});var b=Object(R.a)(r.color1,3),f=b[0],h=b[1],p=b[2];return void Object(o.Lb)(e,{filters:[x.a.Grayscale,x.a.RGB],red:f,green:h,blue:p,globalCompositeOperation:"lighten"})}return Object(o.n)(t),Object(o.n)(e),void Object(o.Mb)(t,r.blendMode)}if(P()(r.color1,n)&&P()(r.color2,a))return Object(o.l)(e,{pixelRatio:Object(k.a)(e)}),Object(o.Lb)(e,{filters:[x.a.Grayscale]}),Object(o.Lb)(e,{is_settings:!0}),Object(o.l)(t,{pixelRatio:Object(k.a)(t)}),Object(o.Lb)(t,{filters:[x.a.Grayscale]}),void Object(o.Mb)(t,"lighten");Object(o.l)(e,{pixelRatio:Object(k.a)(e)}),Object(o.Lb)(e,{filters:[x.a.Grayscale,x.a.RGB]}),e.red(r.color2[0]),e.green(r.color2[1]),e.blue(r.color2[2]),Object(o.Lb)(e,{is_settings:!0}),Object(o.l)(t,{pixelRatio:Object(k.a)(t)}),Object(o.Lb)(t,{filters:[x.a.Grayscale,x.a.RGB]}),Object(o.Mb)(t,"lighten"),t.red(r.color1[0]),t.green(r.color1[1]),t.blue(r.color1[2])}},y=(null===(n=r.activeImage)||void 0===n?void 0:n.layer)||d.find((function(e){return"double-exposure"===e.type}))){e.next=12;break}return e.abrupt("return");case 12:if((w=Object(o.M)(i,"#".concat(y.id))).opacity(1),w){e.next=16;break}return e.abrupt("return");case 16:if((A=Object(o.L)(s,"#".concat(Object(o.db)(w).id,"|").concat(c.wb)))||(A=Object(o.r)({id:"".concat(w.id(),"|").concat(c.wb),name:c.wb}),Object(o.f)(s,A)),E=Object(o.db)(w),C=E.x,S=E.y,T=E.width,_=E.height,I=E.scaleX,L=E.scaleY,M=E.offsetX,B=E.offsetY,Object(o.Lb)(A,{clipX:C-M*I,clipY:S-B*L,clipWidth:T*I,clipHeight:_*L}),D=Object(o.db)(w),N=D.image,!(z=Object(o.M)(i,"#".concat(y.id,"|").concat(j)))){e.next=30;break}return z.opacity(r.opacity/100),m(w,z),r.updateEffect?(Object(o.Lb)(z,{image:w.image(),width:w.width(),height:w.height(),name:w.name()||"overlay"}),Object.keys(null===(H=h.effectLayer)||void 0===H?void 0:H.settings).forEach((function(e){G.e.hasOwnProperty(e)&&G.e[e](z.filters()||[],z),G.d.hasOwnProperty(e)&&G.d[e](h.effectLayer.settings[e],z)})),Object.keys(h.settings).forEach((function(e){G.e.hasOwnProperty(e)&&G.e[e](w.filters()||[],w),G.d.hasOwnProperty(e)&&G.d[e](h.settings[e],w)})),Object(o.l)(z,{pixelRatio:Object(k.a)(z)}),Object(o.l)(w,{pixelRatio:Object(k.a)(w)})):(z.scale({x:1.2*-w.scaleX(),y:1.2*w.scaleY()}),z.rotation(0)),p&&Object(o.Lb)(z,{x:w.x(),y:w.y(),offsetX:w.offsetX(),offsetY:w.offsetY(),scaleX:1.2*-w.scaleX(),scaleY:1.2*w.scaleY(),width:w.width(),height:w.height()}),g&&Object(l.a)({node:s}),Object(o.k)(i),e.abrupt("return");case 30:if(!r.overlayImgSrc){e.next=35;break}return e.next=33,Object(f.a)(r.overlayImgSrc);case 33:(N=e.sent).crossOrigin="";case 35:(Y=Object(o.s)({x:w.x(),y:w.y(),image:N,width:w.width(),height:w.height(),name:w.name()||"overlay",id:"".concat(Object(o.db)(w).id,"|").concat(j),is_settings:!0,offsetX:w.offsetX(),offsetY:w.offsetY()})).scale({x:1.2*-w.scaleX(),y:1.2*w.scaleY()}),[c.qg,c.Dc].includes(Object(o.db)(w).name)||(Y.x(w.x()+w.width()/2*w.scaleX()),Y.y(w.y()+w.height()/2*w.scaleY()),Y.offsetX(w.width()/2),Y.offsetY(w.height()/2)),Object(o.Lb)(s,{effectType:c.qc.doubleExposure}),g&&Object(l.a)({node:s}),Object(o.l)(Y),Object(o.h)(A,Y),Object(o.k)(i),m(w,Y);case 44:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=n(459),D=n(248),N=function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i,d,h,p,O,v,m,w,A,E,k,C,T,_,I,R,L,P,G,M,B,N,z,H,Y,X,U,F,W,V,K,q,J,Q,Z,$,ee,te,ne,re;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.effectGroup,d=t.stage,h=t.settings,p=t.type,O=Object(D.b)()){e.next=4;break}return e.abrupt("return");case 4:if(v=h.src,m=Object(o.db)(Object(o.kb)(i))[c.Ed]!==c.pg,w=Object(o.db)(i),A=w.effectType,E=A&&![c.qc.lut,c.qc.canvasEffect].includes(A),k=null===h||void 0===h||null===(n=h.activeImage)||void 0===n?void 0:n.layer,E&&(Object(u.a)({effectType:A}),Object(b.b)(A)),k){e.next=12;break}return e.abrupt("return");case 12:if(C=(null===h||void 0===h||null===(r=h.activeImage)||void 0===r?void 0:r.node)||Object(o.M)(d,"#".concat(k.id))){e.next=15;break}return e.abrupt("return");case 15:return T=p===c.qc.lut?"image-lut-filter":"image-canvas-effect-filter",_=Object(o.M)(d,"#".concat(k.id,"|").concat(T)),e.t0=URL,e.next=20,O.applyLut(v,"BLOB");case 20:return e.t1=e.sent,I=e.t0.createObjectURL.call(e.t0,e.t1),_&&Object(o.G)(_),e.next=25,Object(f.a)(I);case 25:return R=e.sent,L=h.brightness?y(h):{},P=Object(o.db)(C),G=P.x,M=P.y,B=P.width,N=P.height,z=P.name,H=void 0===z?"image":z,Y=P.id,X=P.draggable,U=P.scaleX,F=void 0===U?1:U,W=P.scaleY,V=void 0===W?1:W,K=P.offsetX,q=P.offsetY,J=P.rotation,Q=P.cropX,Z=P.cropY,$=P.cropWidth,ee=P.cropHeight,te=P.image,ne=Math.min(R.width/te.width,R.height/te.height),re=Object(o.s)({x:G,y:M,name:H,width:B,height:N,scaleX:F,scaleY:V,offsetX:K,offsetY:q,rotation:J,draggable:X,is_settings:!0,image:R,id:"".concat(Y,"|").concat(T),cropX:Q*ne,cropY:Z*ne,cropWidth:$*ne,cropHeight:ee*ne}),h.updateEffect&&(Object(g.a)({type:S.l,resources:{effectUrl:I}}),Object(o.Lb)(re,Object(j.a)(Object(j.a)({},L),{},{filters:[x.a.IEAdjust]}))),Object(o.f)(i,re),Object(o.Lb)(i,{effectType:p}),m&&Object(l.a)({node:i}),Object(o.k)(d),Object(s.a)(i),e.abrupt("return",I);case 37:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i,h,p,O,v,j,m,y,x,w,A,E,k,C,T,_,I,R,L,P,G,M,B,D,N,z,H,Y,X,U,F,W,V,K,q,J,Q,Z,$,ee,te,ne,re,ae,ie,ce;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.effectGroup,h=t.layerArr,p=t.stage,O=t.settings,v=O.degrees,j=O.offsetX,m=O.offsetY,y=O.vertOrHorizontal,x=O.reverse,w=O.returnedType,A=O.runOutContext,E=O.blendMode,k=Object(o.db)(i),C=k.effectType,T=C&&C!==c.qc.runout,_=(null===(n=O.activeImage)||void 0===n?void 0:n.layer)||h.find((function(e){return"runout"===e.type})),I=Object(o.db)(Object(o.kb)(i))[c.Ed]!==c.pg,T&&(Object(u.a)({effectType:C}),Object(b.b)(C)),_){e.next=9;break}return e.abrupt("return");case 9:if(R=(null===(r=O.activeImage)||void 0===r?void 0:r.node)||Object(o.R)(p,"#".concat(_.id))){e.next=12;break}return e.abrupt("return");case 12:return(L=Object(o.R)(p,"#".concat(_.id,"|runout-image")))&&Object(o.G)(L),e.next=16,A.applyRunOut(v,j,m,y,x,w);case 16:P=e.sent,G=Object(o.db)(R),M=G.x,B=G.y,D=G.id,N=G.width,z=G.cropX,H=G.cropY,Y=G.height,X=G.draggable,U=G.cropWidth,F=G.cropHeight,W=G.scaleY,V=void 0===W?1:W,K=G.scaleX,q=void 0===K?1:K,J=G.offsetY,Q=void 0===J?0:J,Z=G.offsetX,$=void 0===Z?0:Z,ee=G.rotation,te=void 0===ee?0:ee,ne=G.name,re=void 0===ne?"image":ne,ae=G.image,ie=Math.min(P.width/ae.width,P.height/ae.height),ce=Object(o.s)({x:M,y:B,image:P,width:N,height:Y,globalCompositeOperation:E,name:re,id:"".concat(D,"|runout-image"),is_settings:!0,draggable:X,scaleX:q,scaleY:V,offsetX:$,offsetY:Q,rotation:te,cropX:z*ie,cropY:H*ie,cropWidth:U*ie,cropHeight:F*ie}),Object(o.f)(i,ce),Object(o.Lb)(i,{effectType:c.qc.runout}),Object(o.I)(p),I&&Object(l.a)({node:i}),Object(s.a)(i),Object(d.o)(P).then((function(e){O.updateEffect&&Object(g.a)({type:S.l,resources:{effectUrl:e}}),Object(f.a)(e).then((function(e){return Object(o.Lb)(ce,{image:e})}))}));case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=n(226),Y=function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i,d,h,p,g,O,v,m,y,x,w,A,E,k,C,S,T,_,I,R,L,P,G,M,B,D,N,z,Y,X,U,F;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.stage,i=t.effectGroup,d=t.settings,h=null===(n=d.activeImage)||void 0===n?void 0:n.layer,p=Object(o.db)(Object(o.kb)(i))[c.Ed]!==c.pg,g=Object(o.db)(i),O=g.effectType,v=O&&O!==c.qc.canvasEffect,h){e.next=7;break}return e.abrupt("return");case 7:if(v&&(Object(u.a)({effectType:O}),Object(b.b)(O)),m=Object(o.M)(r,"#".concat(h.id))){e.next=11;break}return e.abrupt("return");case 11:return(y=Object(o.M)(i,"#".concat(h.id,"|image-canvas-mask-filter")))&&Object(o.G)(y),x=d.x,w=d.y,A=d.width,E=d.height,k=Object(o.db)(m).image,C=k.width,S=k.height,e.next=17,Object(f.a)(d.src);case 17:if(T=e.sent,_=Object(o.M)(i,(function(e){return Object(o.db)(e).id.includes("image-canvas-effect-filter")})),I=Object(o.db)(_),R=I.image,L=R.width,P=R.height,(G=document.createElement("canvas")).width=L,G.height=P,M=G.getContext("2d"),B=Math.min(L/C,P/S),M){e.next=28;break}return e.abrupt("return");case 28:return D=x*B,N=w*B,z=A*B,Y=E*B,M.drawImage(T,D,N,z,Y),e.next=35,Object(H.a)(G);case 35:return X=e.sent,e.next=38,Object(f.a)(X);case 38:return U=e.sent,F=Object(o.s)(Object(j.a)(Object(j.a)({},I),{},{saturation:0,contrast:0,brightness:0,opacity:1,globalCompositeOperation:"normal",image:U,id:"".concat(h.id,"|image-canvas-mask-filter")})),Object(o.f)(i,F),Object(o.Lb)(i,{effectType:c.qc.canvasEffect}),p&&Object(l.a)({node:i}),Object(o.k)(r),Object(s.a)(i),M.clearRect(0,0,L,P),M.drawImage(I.image,0,0,L,P),M.drawImage(T,D,N,z,Y),e.abrupt("return",Object(H.a)(G));case 49:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(e){var t,n,r=e.stage,a=e.effectGroup,i=e.settings,d=Object(o.db)(Object(o.kb)(a))[c.Ed]!==c.pg,f=Object(o.db)(a).effectType,h=f!==c.qc.colorTransfer&&f,p=null===(t=i.activeImage)||void 0===t?void 0:t.layer;if(p){var g=(null===(n=i.activeImage)||void 0===n?void 0:n.node)||Object(o.R)(r,"#".concat(p.id)),O=Object(o.M)(r,"#".concat(p.id,"|color-transfer-img"));if(g){h&&(Object(u.a)({effectType:f}),Object(b.b)(f)),O&&Object(o.G)(O);var v=Object(o.db)(g),j=v.id,m=v.x,y=void 0===m?0:m,w=v.y,A=void 0===w?0:w,E=v.width,C=v.cropX,S=v.cropY,T=v.height,_=v.image,I=v.scaleY,R=v.scaleX,L=v.offsetY,P=v.offsetX,G=v.rotation,M=v.draggable,B=v.cropWidth,D=v.cropHeight,N=Object(o.s)({image:_,width:E,height:T}),z=Object(o.s)({image:i.image,width:E,height:T,cropX:C,cropY:S,cropWidth:B,cropHeight:D,globalCompositeOperation:"source-in"}),H=Object(o.u)({listening:!1});Object(o.h)(H,N,z);var Y=Object(o.s)({id:"".concat(j,"|").concat(i.id),x:y,y:A,is_settings:!0,image:Object(o.Pb)(H,{pixelRatio:Object(k.a)(z)}),width:E,height:T,scaleX:R,scaleY:I,offsetX:P,offsetY:L,rotation:G,draggable:M});Object(o.Lb)(Y,{filters:[x.a.IEAdjust]}),Object(o.h)(a,Y),Object(o.G)(H),Object(o.Lb)(a,{effectType:c.qc.colorTransfer}),d&&Object(l.a)({node:a}),Object(s.a)(a)}}},U=function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i,s,u,l,d,b,f,p,g,O,j,m,y,x,A,k,S,T,_,R,L;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.effectGroup,r=t.stage,i=t.layerArr,s=t.effectType,u=t.settings,n){e.next=3;break}return e.abrupt("return");case 3:l=c.qc.sky,d=c.qc.magic,b=c.qc.sketch,f=c.qc.imageEngine,p=c.qc.rainbow,g=c.qc.duotone,O=c.qc.colorToning,j=c.qc.lut,m=c.qc.doubleExposure,y=c.qc.canvasEffectMask,x=c.qc.runout,A=c.qc.canvasEffect,k=c.qc.colorTransfer,e.t0=s,e.next=e.t0===O?7:e.t0===p?10:e.t0===m?13:e.t0===d?17:e.t0===b?22:e.t0===g?24:e.t0===j||e.t0===A?27:e.t0===y?28:e.t0===x?29:e.t0===k?32:e.t0===f?34:e.t0===l?36:39;break;case 7:return S={color:u.color1||"",fade:u.fade||0,color_intensity:u.color_intensity||0,activeImage:u.activeImage,blendMode:u.updateEffect?u.blendMode:"hard-light",updateEffect:u.updateEffect},w({effectGroup:n,stage:r,layerArr:i,settings:S}),e.abrupt("break",40);case 10:return T={color1:u.color1||"",color2:u.color2||"",color3:u.color3||"",fade:u.fade||0,color_intensity:u.color_intensity||0,activeImage:u.activeImage,blendMode:u.updateEffect?u.blendMode:"screen",updateEffect:u.updateEffect},E({effectGroup:n,stage:r,layerArr:i,settings:T}),e.abrupt("break",40);case 13:return _={color1:u.overlayColor||[],color2:u.backgroundColor||[],overlayImgSrc:u.overlayImgSrc,blendMode:u.blendWidthColors,opacity:u.opacity||100,updateEffect:u.updateEffect,activeImage:u.activeImage},e.next=16,M({settings:_,stage:r,effectGroup:n,layerArr:i});case 16:return e.abrupt("break",40);case 17:if(u.magicImage){e.next=19;break}return e.abrupt("return");case 19:return R={magicImage:u.magicImage,activeImage:u.activeImage,fade:u.fade||0,brightness:u.brightness||0,saturation:u.saturation||0,contrast:u.contrast||0,hue:u.hue||0,blendMode:u.blendMode||"",updateEffect:u.updateEffect},C({effectGroup:n,stage:r,layerArr:i,settings:R}),e.abrupt("break",40);case 22:return Object(B.b)({effectGroup:n,stage:r,settings:u}),e.abrupt("break",40);case 24:return L={colorRGB1:u.colorRGB1||{r:0,b:0,g:0},colorRGB2:u.colorRGB2||{r:0,b:0,g:0},settingType:u.settingType,updateEffect:u.updateEffect,activeImage:u.activeImage,blendMode:u.blendMode||"",fade:u.fade||0,brightness:u.brightness||0},I({effectGroup:n,stage:r,layerArr:i,settings:L}),e.abrupt("break",40);case 27:return e.abrupt("return",N({effectGroup:n,layerArr:i,stage:r,settings:u,type:s}));case 28:return e.abrupt("return",Y({effectGroup:n,layerArr:i,stage:r,settings:u}));case 29:return e.next=31,z({effectGroup:n,layerArr:i,stage:r,settings:u});case 31:return e.abrupt("break",40);case 32:return X({stage:r,effectGroup:n,settings:u,layerArr:i}),e.abrupt("break",40);case 34:return h({stage:r,effectGroup:n,settings:u}),e.abrupt("break",40);case 36:return e.next=38,v({effectGroup:n,settings:u,stage:r});case 38:case 39:return e.abrupt("break",40);case 40:[m,j].includes(s)||r&&Object(o.I)(r);case 41:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.a=U},,function(e,t,n){"use strict";var r=n(179);n.d(t,"a",(function(){return r.a}))},function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return h}));var r=n(6),a=n(9),i=n(0),c=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Object(r.b)(a.ac),c=n.map((function(e){var t,n;return(null===(t=e.settings)||void 0===t?void 0:t.collageGroupId)||(null===(n=e.settings)||void 0===n?void 0:n.effectGroupId)||e.id})),o=Object(i.fb)(e).sort((function(e,t){return c.indexOf(Object(i.db)(t).id)-c.indexOf(Object(i.db)(e).id)}));return Object(i.Jb)(e),o.forEach((function(t){return Object(i.h)(e,t)})),t&&Object(i.I)(e),o},o=n(2),s=n(153),u=n(15),l=function(e){var t=Object(u.a)(e,6),n=t[0],r=t[1],a=t[2],i=t[3],c=n*i-r*a,o={x:t[4],y:t[5],rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(0!==n||0!==r){var s=Math.sqrt(n*n+r*r);o.rotation=r>0?Math.acos(n/s):-Math.acos(n/s),o.scaleX=s,o.scaleY=c/s,o.skewX=Math.atan((n*a+r*i)/(s*s)),o.skewY=0}else if(0!==a||0!==i){var l=Math.sqrt(a*a+i*i);o.rotation=Math.PI/2-(i>0?Math.acos(-a/l):-Math.acos(a/l)),o.scaleX=c/l,o.scaleY=l,o.skewX=0,o.skewY=Math.atan((n*a+r*i)/(l*l))}return o.rotation*=180/Math.PI,o},d=n(1),b=n(86),f=function(e,t,n){var r=e.getAbsoluteTransform().getMatrix(),a=Object(i.X)(t,d.pb),c=l(r),u=Object(i.db)(Object(i.mb)(t)).scale,f=u.x,h=u.y,p=c.scaleX,g=c.scaleY,O=Object(i.lb)(e),v=O.x,j=O.y;if(Object(i.Lb)(e,Object(o.a)(Object(o.a)({},c),{},{x:v,y:j,scaleX:p/f,scaleY:g/h})),Object(i.m)(e,t),Object(i.Ab)(e)){var m=Object(s.a)(Object(i.db)(e));Object(i.Lb)(e,m)}n&&a&&Object(b.b)({layer:t,node:e})},h=function(){var e,t=Object(r.b)((function(e){return{stage:Object(a.vd)(e)}})).stage,n=Object(i.X)(t,d.pb);return!(!n||(null===(e=Object(i.ob)(n))||void 0===e?void 0:e.length)<1)&&Object(i.ob)(n)}},,function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l}));var r=n(104),a=n(1),i=n(0),c=function(){return r.a.stage},o=function(e){var t=e.toZoom,n=e.deltaY,r=void 0===n?0:n,o=e.toCenter,s=void 0!==o&&o,u=e.min,l=void 0===u?a.lh:u,d=e.max,b=void 0===d?a.kh:d,f=e.speed,h=void 0===f?a.mh:f,p=c(),g=Object(i.db)(p),O=g.scaleX,v=g.width,j=g.height,m=t||O*Math.pow(h,r),y=Math.min(Math.max(m,l),b),x=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=c();if(e<=1){var a=Object(i.db)(r),o=a.width,s=a.height;return{x:(o-e*o)/2,y:(s-e*s)/2}}if(n){var u=Object(i.db)(r),l=u.x,d=u.y;return{x:l+u.width*(t-e)/2,y:d+u.height*(t-e)/2}}var b=Object(i.pb)(r),f=Object(i.db)(r),h=f.x,p=f.y,g={x:(b.x-h)/t,y:(b.y-p)/t};return{x:b.x-g.x*e,y:b.y-g.y*e}}(y,O,s||!!t),w=v*(y-1),A=j*(y-1);return Object(i.Lb)(p,{scaleX:y,scaleY:y,position:y<=1?x:{x:-Math.max(Math.min(Math.abs(x.x),w),0),y:-Math.max(Math.min(Math.abs(x.y),A),0)}}),Object(i.I)(p),{zoom:y,top:x.y,left:x.x}},s=function(e){var t=e.x,n=e.y,r=c();Object(i.Lb)(r,{position:{x:t,y:n}}),Object(i.I)(r)},u=function(e){return e<1},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=c(),n=Object(i.db)(t),r=n.scaleX,a=n.x,o=n.y;return e(r)?{x:a,y:o}:{x:0,y:0}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"e",(function(){return b})),n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return h})),n.d(t,"b",(function(){return p}));var r=n(7),a=n.n(r),i=n(10),c=n(465),o=n(315),s=n(76),u=n(1),l=function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).then((function(e){return e.blob()}));case 2:n=e.sent,(r=document.createElement("a")).href=URL.createObjectURL(n),r.download=s.w,document.body.appendChild(r),r.click(),document.body.removeChild(r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.a)(t);case 2:return n=e.sent,r=Object(c.a)(n,t.name),i=URL.createObjectURL(r),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(e){var t=e.src,n=e.blob;return{blob:n,src:n?URL.createObjectURL(n):t}},f=function(e){return e.filter((function(e){return s.q.includes(e.type)})).map((function(e){return{blob:e,src:URL.createObjectURL(e)}})).map((function(e,t){return{key:(Date.now()+t).toString(),isProcessed:!1,status:u.G.PENDING,source:e,result:e}}))},h=function(e,t){return e.width*t>s.n||e.height*t>s.n},p=function(e,t,n,r){var a=Math.max(e/n,t/r);return{fromX:(n-e/a)/2,fromY:(r-t/a)/2,width:e/a,height:t/a}}},function(e,t,n){"use strict";var r=n(90);t.a=function(e,t,n){if(e.beginPath(),null===n||void 0===n?void 0:n.borderRadius)r.a.drawRoundedPoly(t,n.borderRadius,e);else{e.moveTo(t[0].x,t[0].y);for(var a=1;a<t.length;a++){var i=t[a];e.lineTo(i.x,i.y)}}e.closePath()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"g",(function(){return f})),n.d(t,"h",(function(){return h})),n.d(t,"d",(function(){return g})),n.d(t,"e",(function(){return O})),n.d(t,"f",(function(){return v})),n.d(t,"c",(function(){return m}));var r=n(4),a=n(1),i=n(0),c=n(43),o=n(518),s=n(316),u=n(11),l=function(e,t,n,r){var a=Object(i.db)(r),c=a.scaleX,o=a.scaleY;e.forEach((function(e){var r,a;if(n){var s=Object(i.db)(n);r=s.x,a=s.y}switch(e.orientation){case"V":t.forEach((function(t){var a=e.lineGuide.x+e.offset.x;n?t.x(a/c+(Object(i.db)(t).x-r)):t.x(a/c)}));break;case"H":t.forEach((function(t){var r=e.lineGuide.y+e.offset.y;n?t.y(r/o+(Object(i.db)(t).y-a)):t.y(r/o)}))}}))},d=function(e,t,n){return e===a.nf.opposite?Math.sin(t*Math.PI/180)*n:Math.cos(t*Math.PI/180)*n},b=function(e,t,n){if(t===a.Bc||Object(i.Cb)(e))return function(e,t){var n=Object(i.Cb)(e),r=Object(i.db)(Object(i.mb)(t)),c=r.scaleX,o=r.scaleY,s=Object(i.db)(e),u=s.width,l=s.height,b=s.rotation,f=Object(i.db)(e),h=f.x,p=f.y,g=a.nf.opposite,O=a.nf.adjacent,v=n?h-Object(i.db)(t).x*c:h*c,j=n?p-Object(i.db)(t).y*o:p*o,m=n?u:u*c,y=n?l:l*o,x=b>180&&b<360?-360+b:b;if(x>=0&&x<=90){var w=d(g,x,y);return{x:v-w,y:j,width:w+d(O,x,m),height:d(O,x,y)+d(O,90-x,m)}}if(x>90&&x<180){var A=180-x,E=d(O,A,m),k=d(g,A,y),C=d(O,A,y);return{x:v-(E+k),y:j-C,width:E+k,height:C+d(O,90-A,m)}}if(x>-180&&x<=-90||180===x){var S=180-Math.abs(x),T=d(O,S,m),_=d(O,90-S,y),I=d(g,S,m),R=d(O,S,y);return{x:v-T,y:j-(I+R),width:T+_,height:I+R}}if(x>-90&&x<0){var L=d(O,Math.abs(x),m),P=d(g,Math.abs(x),y),G=d(O,90-Math.abs(x),m);return{x:v,y:j-G,width:L+P,height:G+d(O,Math.abs(x),y)}}}(e,n);var r=Object(i.db)(Object(i.mb)(n)),o=r.scaleX,s=r.scaleY,u=Object(i.gb)(e,{relativeTo:Object(c.a)(n)});return{x:u.x*o,y:u.y*s,width:u.width*o,height:u.height*s}},f=function(e,t){var n=Object(i.db)(t),r=n.width,o=n.height,s=Object(i.gb)(t),u=Object(i.X)(t,a.pb),l=[{x:0,y:0,stage:!0,box:s},{x:r/2,y:o/2,stage:!0,box:s},{x:r,y:o,stage:!0,box:s}];return Object(i.fb)(t).forEach((function(n){var r=Object(i.ob)(u).some((function(e){return Object(i.db)(e).id===Object(i.db)(n).id}))&&Object(i.Cb)(e)?u:n;if(!function(e,t){var n=Object(i.db)(e),r=n.id,c=n.name,o=Object(i.N)(e,".".concat(a.Bc));return(!Object(i.tb)(o)||c===a.Bc)&&(e===t||e.getAttr("layerType")===a.pg||r.includes(t.id())||r===a.ch||r===a.x)}(r,e)){var o=Object(i.tb)(r)&&Object(c.e)(r),s=b(o?Object(i.Z)(r):r,Object(i.db)(r).name,t);if(s){var d=[{x:s.x,y:s.y,stage:!1,snap:"start",box:s},{x:s.x+s.width,y:s.y+s.height,stage:!1,snap:"end",box:s},{x:s.x+s.width/2,y:s.y+s.height/2,stage:!1,snap:"center",box:s}];l.push.apply(l,d)}}})),l},h=function(e,t){var n=Object(i.db)(e),r=n.name,a=n.x,o=n.y,s=Object(i.db)(Object(i.mb)(e)),u=s.scaleX,l=s.scaleY,d=Object(i.tb)(e)&&Object(c.e)(e),f=b(d?Object(i.Z)(e):e,r,t);if(f)return[{x:f.x,y:f.y,box:f,offset:{x:Math.round(a*u-f.x),y:Math.round(o*l-f.y)},stage:!1,snap:"start"},{x:f.x+f.width/2,y:f.y+f.height/2,box:f,offset:{x:Math.round(a*u-f.x-f.width/2),y:Math.round(o*l-f.y-f.height/2)},stage:!1,snap:"center"},{x:f.x+f.width,y:f.y+f.height,box:f,offset:{x:Math.round(a*u-f.x-f.width),y:Math.round(o*l-f.y-f.height)},stage:!1,snap:"end"}]},p={H:{axis:"x",useFromBox:"width",opposite:"y"},V:{axis:"y",useFromBox:"height",opposite:"x"}},g=function(e,t){var n=[];return e.forEach((function(r,a){for(var i=p[r.orientation],c=0;c<e.length;++c)if(r.orientation===e[c].orientation&&c!==a){var o=Math.abs(r.lineGuide[i.opposite]-e[c].lineGuide[i.opposite]);if(o<2*t&&o>.25){if(e[c].lineGuide.stage)return;if(!r.lineGuide.stage&&Math.abs(r.lineGuide[i.axis]-r.itemGuide[i.axis])<Math.abs(e[c].lineGuide[i.axis]-e[c].itemGuide[i.axis]))return}}n.push(r)})),n},O=function(e){return e.reduce((function(e,t){var n=e[0],r=e[1];return"V"===t.orientation?[!n||n.diff>t.diff?t:n,r]:"H"===t.orientation?[n,!r||r.diff>t.diff?t:r]:e}),[]).filter((function(e){return e}))},v=function(e,t,n){var r=[];return e.forEach((function(e){t.forEach((function(t){var a={x:Math.abs(e.x-t.x),y:Math.abs(e.y-t.y)};for(var i in p)if(p.hasOwnProperty(i)){var c=p[i];a[c.opposite]<n&&r.push({lineGuide:e,itemGuide:t,diff:a[c.opposite],offset:t.offset||{x:0,y:0},orientation:i,snap:t.snap||""})}}))})),r},j=function(e,t,n,a){var c=Object(i.db)(Object(i.mb)(a)).scale,o=Object(i.w)({x:e.x/c.x,y:e.y/c.y,data:"M-3 -3L3 3, M3 -3L-3 3",stroke:Object(u.c)(u.b.paColor68),strokeWidth:1,name:"guid-line"});if(c.x>1&&o.scale({x:1/c.x,y:1/c.y}),Object(i.f)(a,o),"center"!==e.snap){var s,l=p[n],d=Object(i.p)(o);if("start"===e.snap)Object(i.Lb)(d,(s={},Object(r.a)(s,l.axis,(e[l.axis]+e.box[l.useFromBox])/c[l.axis]),Object(r.a)(s,l.opposite,e[l.opposite]/c[l.opposite]),s));else if("end"===e.snap){var b;Object(i.Lb)(d,(b={},Object(r.a)(b,l.axis,(e[l.axis]-e.box[l.useFromBox])/c[l.axis]),Object(r.a)(b,l.opposite,e[l.opposite]/c[l.opposite]),b))}Object(i.f)(a,d)}},m=function(e,t){e.forEach((function(e){var n=Object(i.v)({stroke:Object(u.c)(u.b.paColor68),strokeWidth:1,name:"guid-line",points:[]}),r=e.lineGuide,a=e.itemGuide,c=Object(i.db)(Object(i.mb)(t)).scale,o=p[e.orientation],s=[];[a,r].forEach((function(e){switch(e.snap){case"start":s.push((e[o.axis]+e.box[o.useFromBox])/c[o.axis],e[o.axis]/c[o.axis]);break;case"end":s.push((e[o.axis]-e.box[o.useFromBox])/c[o.axis],e[o.axis]/c[o.axis]);break;case"center":s.push(e[o.axis]/c[o.axis])}}));var l=Math.min.apply(Math,s),d=Math.max.apply(Math,s);"H"===e.orientation&&(e.lineGuide.stage?n.points([-6e3,r.y/c.y,6e3,r.y/c.y]):(n.points([l,r.y/c.y,d,r.y/c.y]),j(r,0,e.orientation,t))),"V"===e.orientation&&(e.lineGuide.stage?n.points([r.x/c.x,-6e3,r.x/c.x,6e3]):(n.points([r.x/c.x,l,r.x/c.x,d]),j(r,0,e.orientation,t))),Object(i.f)(t,n)})),Object(i.k)(t)};t.b=function(e,t,n){var r=Object(i.mb)(e),c=Object(i.db)(r).scaleX,u=t||10,l=n?Object(i.X)(e,a.pb):e;return Object(i.i)(l,n?"transformstart":"dragstart",(function(){u=c>=.25?Math.round((t||10)*c):(t||10)*c})),Object(i.i)(l,n?"transform":"dragmove",(function(t){var a=t.target;return Object(o.a)({target:a,baseGroup:e,stage:r,guidelineOffset:u,isForTransformer:n,isArrowMove:!1})})),Object(i.i)(l,n?"transformend":"dragend",(function(){Object(s.a)(e,!0)})),e}},,,,function(e,t,n){"use strict";var r=n(7),a=n.n(r),i=n(10),c=n(179),o=n(273),s=n.n(o),u=n(34),l=n(64),d=[".jpg",".jpeg",".png"],b={},f=function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b[t]){e.next=2;break}return e.abrupt("return",b[t]);case 2:return e.prev=2,e.next=5,Object(l.a)(t);case 5:return n=e.sent,e.next=8,n.blob();case 8:return r=e.sent,i=t.split("/").pop()||"",d.some((function(e){return i.includes(e)}))||(i="".concat(Object(c.a)(),".").concat(s.a.getExtension(r.type))),o=new File([r],i,{type:r.type,lastModified:Date.now()}),b[t]=o,e.abrupt("return",o);case 16:return e.prev=16,e.t0=e.catch(2),u.a.trigger(e.t0,"error"),e.abrupt("return",null);case 20:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(t){return e.apply(this,arguments)}}();t.a=f},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r,a,i=n(2),c=n(14),o=n(40),s=n(42),u=n(63),l=n(76);!function(e){e.removeObject="remove_background_object",e.removePerson="remove_background_person",e.customTexture="custom_background",e.texture="chooser_background",e.upscaleWidth="upscale_by_width_manual",e.upscaleHeight="upscale_by_height_manual",e.upscaleTwoTimes="upscale_two_times",e.upscaleFourTimes="upscale_four_times",e.paddingColor="padding_color",e.usePadding="is_padding_used"}(r||(r={})),function(e){e.batch_editor="batch_editor",e.background_chooser="background_chooser",e.batch_watermark="batch_watermark"}(a||(a={}));var d=function(){function e(){Object(o.a)(this,e),this.screen_name="batch_editor",this.appliedTools=[]}return Object(s.a)(e,[{key:"applyTool",value:function(e){this.appliedTools=[].concat(Object(c.a)(this.appliedTools),[e])}},{key:"applyBackground",value:function(e){this.applyTool({name:e?r.removePerson:r.removeObject,value:!0})}},{key:"applyTexture",value:function(e,t){this.applyTool({name:e?r.customTexture:r.texture,value:null===t||void 0===t||t})}},{key:"applyUpscale",value:function(e){var t=e.side,n=e.factor,a=e.size;n?this.applyTool({name:"auto_upscale",value:2===n?r.upscaleTwoTimes:r.upscaleFourTimes}):this.applyTool({name:"width"===t?r.upscaleWidth:r.upscaleHeight,value:Number(a)})}},{key:"applyCrop",value:function(e){var t=e.templateForm,n=e.orientation,r=e.align;this.applyTool({name:t?"crop_by":n?"orientation":"align",value:t||n||r||""})}},{key:"applyResize",value:function(e,t){this.applyTool({name:e,value:e===l.g.exactSize&&Array.isArray(t)?"".concat(t[0],"x").concat(t[1]):t})}},{key:"usedPadding",value:function(e){this.applyTool({name:r.usePadding,value:e})}},{key:"applyPaddingColor",value:function(e){this.applyTool({name:r.paddingColor,value:e})}},{key:"applyBgColor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.applyTool({name:t?"presets_color":"color_picker",value:e})}},{key:"applyWatermark",value:function(e,t){this.applyTool({name:e,value:t})}},{key:"applyWatermarkColor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;this.applyTool({name:t?"color":"preserve_color",value:t||e})}},{key:"clickEvent",value:function(e){u.a.sendEvent("page_click","custom_event",{screen_name:this.screen_name,action_button:e}),"upload"===e&&this.uploadClick(a.batch_editor)}},{key:"openTool",value:function(e,t){u.a.sendEvent("photo_edit_item_open","custom_event",{source:this.screen_name,item:e,on_item:t?"all_items":"selected_items"})}},{key:"toolAction",value:function(e,t){u.a.sendEvent("photo_edit_item_action","custom_event",{source:this.screen_name,item:e,action:"cancel"===t&&this.appliedTools.length?"try_cancel":t,applied_sub_tools:this.appliedTools,braze:!0}),this.appliedTools=[]}},{key:"textureOpened",value:function(){u.a.sendEvent("chooser_open","custom_event_non_interaction",{source:this.screen_name,tool:"background"})}},{key:"uploadClick",value:function(e){u.a.sendEvent("upload_click","custom_event",{origin:e,item:"image"})}},{key:"uploadDone",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;u.a.sendEvent("upload_done","custom_event",Object(i.a)(Object(i.a)({},n&&Object(i.a)(Object(i.a)({},"cancel"!==t&&{upload_type:n>1?"batch_upload":"single_upload"}),{},{item_count:n})),{},{origin:e,item:"image",result:t,braze:!0},"cancel"!==t?{is_drag_and_drop:!1}:{}))}},{key:"openPage",value:function(e){u.a.sendEvent("page_open","custom_event_non_interaction",{screen_name:this.screen_name,source:!0,braze:!0,is_subscribed:e})}},{key:"textureClick",value:function(e,t){u.a.sendEvent("chooser_click","custom_event",Object(i.a)({item:"background",action:e},t)),"upload"===e&&this.uploadClick(a.background_chooser)}},{key:"download",value:function(e){e&&u.a.sendEvent("object_export","custom_event",{source:this.screen_name,item:e>1?"batch_items":"photo",item_count:e,braze:!0})}},{key:"openPopup",value:function(e,t){u.a.sendEvent("popup_open","custom_event",{source:"".concat(this.screen_name,"_").concat(t||"unknown"),name:e})}},{key:"popupAction",value:function(e){u.a.sendEvent("popup_action","custom_event",{source:"".concat(this.screen_name,"_").concat(e||"unknown"),action_type:"close"})}}]),e}();t.b=new d},function(e,t,n){"use strict";n.d(t,"b",(function(){return i}));var r=n(2),a=n(189),i=function(e){if(1===e.scaleX)return e;var t=e.scaleX||1;return Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)({scaleY:1,scaleX:1,fontSize:Object(a.a)(t,e.fontSize)},e.padding&&{padding:e.padding*t}),e.width&&{width:Math.ceil(e.width*t)}),e.strokeWidth&&{strokeWidth:e.strokeWidth*t}),e.shadowOffsetX&&{shadowOffsetX:e.shadowOffsetX*t}),e.shadowOffsetY&&{shadowOffsetY:e.shadowOffsetY*t}),e.letterSpacing&&{letterSpacing:e.letterSpacing*t}),e.height&&{height:e.height*(e.scaleY||1)})};t.a=function(e){if(!e.scaleX)return e;var t=Object(r.a)(Object(r.a)({},e),{},{fontSize:Object(a.a)(e.scaleX,e.fontSize)});return t.width=e.width*e.scaleX,e.strokeWidth&&(t.strokeWidth=e.strokeWidth*e.scaleX),e.shadowBlur&&(t.shadowBlur=e.shadowBlur*e.scaleX),e.shadowOffsetX&&(t.shadowOffsetX=e.shadowOffsetX*e.scaleX),e.shadowOffsetY&&(t.shadowOffsetY=e.shadowOffsetY*e.scaleX),e.padding&&(t.padding=e.padding*e.scaleX),e.letterSpacing&&(t.letterSpacing=e.letterSpacing*e.scaleX),t.originalScale=(e.originalScale||1)*e.scaleX,t.scaleX=1,t.scaleY=1,t}},,,function(e,t,n){"use strict";t.a=function(e){if(e)for(var t=0;t<8;t++){if(!Object.values(e[t]||{}).every((function(e){return!e})))return!0}return!1}},function(e,t,n){"use strict";var r=n(1);t.a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.qb,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.hb,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"min",c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"floor",o=Math[i](n/e,a/t);return{ratio:o,width:Math[c](o*e),height:Math[c](o*t)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(7),a=n.n(r),i=n(154),c=n(10),o=n(2),s=n(12),u=n(6),l=n(1),d=n(334),b=n(86),f=n(0),h=n(16),p=n(318),g=n(319),O=n(45),v=function(e){return function(t){var n=t.settings,r=n.children;if(r){var a=[];return r.forEach((function(r){var i=e(Object(o.a)(Object(o.a)({},t),{},{settings:Object(o.a)({type:n.type,name:n.name},r)}));a.push(i)})),a}e(t)}},j=function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c,j,m,y,x,w,A,E,k,C,S,T,_,I,R;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.stage,r=t.baseGroup,c=t.layerArr,j=t.settings,m=t.valueKey,y=j.bulkType,e.t0=y,e.next=e.t0===h.a.change_text?5:e.t0===h.a.bend?7:e.t0===h.a.font?9:e.t0===h.a.object_position?11:e.t0===h.a.remove_layer||e.t0===h.a.add_layers?13:e.t0===h.a.change_color?48:e.t0===h.a.blend_mode?50:e.t0===h.a.change_adjust?52:e.t0===h.a.duplicate_layer?54:56;break;case 5:return v(O.q)({baseGroup:r,settings:j,dispatch:u.a,valueKey:m}),e.abrupt("break",57);case 7:return v(O.j)({baseGroup:r,settings:j,valueKey:m,dispatch:u.a}),e.abrupt("break",57);case 9:return v(O.n)({baseGroup:r,settings:j,valueKey:m,dispatch:u.a}),e.abrupt("break",57);case 11:return j.children.forEach((function(e){Object(g.a)({stage:n,baseGroup:r,settings:Object(o.a)(Object(o.a)({},e),{},{bulk:!0}),valueKey:m})})),e.abrupt("break",57);case 13:if(x=y===h.a.add_layers?"newValue":"oldValue",m!==x){e.next=46;break}w=[],A=[],E=Object(i.a)(j.children),e.prev=18,E.s();case 20:if((k=E.n()).done){e.next=30;break}return C=k.value,e.next=24,Object(O.b)({stage:n,baseGroup:r,layerArr:c,settings:Object(o.a)(Object(o.a)({},C),{},{bulk:!0}),sendAttrs:!0,valueKey:m});case 24:S=e.sent,A.push({id:Object(d.a)(S&&Object(f.db)(S).id||"")}),Object(f.h)(r,S),w.push(S);case 28:e.next=20;break;case 30:e.next=35;break;case 32:e.prev=32,e.t1=e.catch(18),E.e(e.t1);case 35:return e.prev=35,E.f(),e.finish(35);case 38:T=Object(i.a)(j.children);try{for(T.s();!(_=T.n()).done;)I=_.value,Object(u.a)({type:s.l,id:I.id,is_visible:!0})}catch(a){T.e(a)}finally{T.f()}R=Object(f.X)(r,l.pb),Object(f.Lb)(R,{nodes:[].concat(w),visible:!0,shouldOverdrawWholeArea:Object(b.g)(w)}),Object(f.Gb)(R),Object(u.a)({type:s.k,layersIds:A}),e.next=47;break;case 46:j.children.forEach((function(e){Object(p.a)({baseGroup:r,settings:e,layerArr:c})}));case 47:return e.abrupt("break",57);case 48:return v(O.m)({stage:n,layerArr:c,settings:j,baseGroup:r,valueKey:m}),e.abrupt("break",57);case 50:return v(O.l)({baseGroup:r,settings:j,valueKey:m}),e.abrupt("break",57);case 52:return v(O.g)({baseGroup:r,layerArr:c,settings:j,valueKey:m}),e.abrupt("break",57);case 54:return v(O.r)({stage:n,baseGroup:r,layersArr:c,settings:j}),e.abrupt("break",57);case 56:return e.abrupt("break",57);case 57:case"end":return e.stop()}}),e,null,[[18,32,35,38]])})));return function(t){return e.apply(this,arguments)}}();t.b=j},,function(e,t,n){"use strict";var r=n(7),a=n.n(r),i=n(10),c=n(2),o=n(27),s=n(6),u=n(12),l=n(17),d=n(219),b=n(47),f=n(1),h=n(81),p=n(67),g=n(16),O=n(214),v=n(282),j=n(0),m=n(55),y=n(57),x=n(259),w=function(e){var t=e.stage,n=e.baseGroup,r=e.templateGroup,a=e.activeLayer,i=e.activeLayerIndex,d=e.fromHistory,b=e.isPreview,p=void 0!==b&&b,O=Object(c.a)(Object(c.a)({cropX:0,cropY:0,cropWidth:0,cropHeight:0},Object(j.db)(r)),{},{children:[],elementIndex:null,id:Object(j.db)(r).id,index:i,url:a.resources.url,width:r.width(),height:r.height(),scaleX:r.scaleX(),scaleY:r.scaleY(),rotation:r.rotation(),isPremium:null===a||void 0===a?void 0:a.isPremium,type:g.b.grid_cell,toolType:null===a||void 0===a?void 0:a.settings.toolType,selectedId:{oldValue:Object(j.db)(r).id},globalCompositeOperation:Object(j.ib)(r)});Object(j.fb)(r).forEach((function(e){O.children.push(Object(c.a)({},Object(j.db)(e))),Object(j.db)(e).name===f.qg&&(O.prevImageId=Object(j.db)(e).id)})),Object(j.G)(r);var v=Object(j.db)(t).collage,m=Object(j.db)(r).layerUrl,y=v.collage_images.findIndex((function(e){return e.result_image===m}));v.collage_images.splice(y,1),v.collage_layout.paths.splice(y,1),Object(j.Lb)(t,{collage:v}),p||Object(o.b)((function(){Object(s.a)({type:u.l,id:a.id,resources:{url:""},settings:f.nb}),Object(s.a)({type:u.g,payload:{id:a.id}}),Object(s.a)(l.a.actions.setActiveSettings("")),Object(s.a)({type:u.e}),Object(s.a)({type:u.n,activeEffect:f.ge})})),Object(j.k)(n),d||p||Object(h.a)({historyStack:{historyAction:g.a.remove_layer,settings:O}})},A=function(e,t){var n,r,a,i,c=Object(x.a)(e,(function(e){var t,n;return e.active||(null===(t=e.effectLayer)||void 0===t?void 0:t.active)||!!(null===(n=e.cellsLayers)||void 0===n?void 0:n.find((function(e){return e.active})))})),o=(null===c||void 0===c?void 0:c.item.active)||(null===c||void 0===c||null===(n=c.item)||void 0===n||null===(r=n.effectLayer)||void 0===r?void 0:r.active)?c.item:null===c||void 0===c||null===(a=c.item.cellsLayers)||void 0===a?void 0:a.find((function(e){return e.active}));return{activeLayer:o,activeLayerIndex:(null===c||void 0===c?void 0:c.index)||"",activeLayerId:null!==(i=null===t||void 0===t?void 0:t.id)&&void 0!==i?i:null===o||void 0===o?void 0:o.id}},E=function(e,t){var n,r=Object(j.M)(e,"#".concat(t)),a=t.includes(f.Bc);n=a?Object(j.K)(e,"#".concat(t.replace(f.Dc,f.Cc))):r.findAncestor((function(e){return e.getAttr(f.Ed)===f.pg}));var i=Object(j.L)(e,"#".concat(t).concat(f.zh)),c=r.getAttr("is_placeholder_active");return{imageToRemove:r,cellGroup:n,effectGroup:i,isFreeGridCell:a,isPlaceholderActive:c}},k=function(e){return"string"!==typeof e?e.src:e},C=function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,x,C,S,T,_,I,R,L,P,G,M,B,D,N,z,H,Y,X,U,F,W,V,K,q,J,Q,Z,$,ee,te,ne,re,ae,ie,ce,oe,se,ue,le,de,be,fe,he,pe,ge;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.stage,r=t.baseGroup,x=t.layerArr,C=t.settings,S=t.valueKey,T=t.fromHistory,_=void 0!==T&&T,I=t.isReplace,R=void 0===I||I,L=t.isPreview,P=void 0!==L&&L,G=t.addSelectionEvt,M=void 0===G||G,n){e.next=3;break}return e.abrupt("return",Promise.resolve(null));case 3:if(B=A(x,C),D=B.activeLayer,N=B.activeLayerId,z=B.activeLayerIndex,!(C&&S&&C.url&&"placeholder"!==C.url[S]&&R)){e.next=9;break}return H=Object(c.a)(Object(c.a)({},C),{},{data_url:"",id:C.id,fromHistory:!0,isPremium:C.isPremium&&C.isPremium[S],url:k(C.url[S])}),e.next=8,Object(v.a)({elem:H,valueKey:S,props:C.props,fromHistoryId:C.id,forceTemplateCollageReplace:!!C.forceTemplateCollageReplace,isPreview:P});case 8:return e.abrupt("return",Promise.resolve(null));case 9:if(D){e.next=11;break}return e.abrupt("return",Promise.resolve(null));case 11:if(Y=E(r,N),X=Y.cellGroup,U=Y.effectGroup,F=Y.imageToRemove,W=Y.isFreeGridCell,!Y.isPlaceholderActive){e.next=15;break}return!W&&w({stage:n,baseGroup:r,templateGroup:X,activeLayer:D,activeLayerIndex:z,fromHistory:_}),e.abrupt("return",Promise.resolve(null));case 15:if(V=Object(j.db)(F),K=V.name,q=V.collageImageJson,J=V.url,Q=Object(j.db)(X).cellData){e.next=19;break}return e.abrupt("return",Promise.resolve(null));case 19:return Z=Q.getCellComputedCenter(),$=Z.x,ee=Z.y,te=F.offset(),ne=te.x,re=te.y,ae=F.scale(),ie=ae.x,ce=ae.y,oe=F.getPosition(),se=oe.x,ue=oe.y,le=Q.getCellComputedSize(),de=le.width,be=le.height,fe=Object(O.a)(de,be),he=fe.phImage,pe=fe.padding,ge={scaleX:ie,scaleY:ce,flipType:Object(j.db)(F).flipType,flipScaleX:{oldValue:D.settings.scaleX,newValue:1},flipScaleY:{oldValue:D.settings.scaleY,newValue:1},x:{oldValue:se,newValue:$},y:{oldValue:ue,newValue:ee},offsetX:{oldValue:ne,newValue:de/2},offsetY:{oldValue:re,newValue:be/2},zoom:{oldValue:D.settings.zoom,newValue:0},rotate:{oldValue:D.settings.rotate,newValue:0},contrast:{oldValue:D.settings.contrast,newValue:0},brightness:{oldValue:D.settings.brightness,newValue:0},saturation:{oldValue:D.settings.saturation,newValue:0},highlights:{oldValue:D.settings.highlights,newValue:0},clarity:{oldValue:D.settings.clarity,newValue:0},shadows:{oldValue:D.settings.shadows,newValue:0},temperature:{oldValue:D.settings.temperature,newValue:0},hue:{oldValue:D.settings.hue,newValue:0},hsl:{oldValue:D.settings.hsl,newValue:{}}},he.onload=function(){var e=Object(i.a)(a.a.mark((function e(){var t,r,i,O,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 100,e.next=3,Object(d.a)({phImage:he,width:4*de,height:4*be,offsetFromFrame:100});case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",Promise.resolve(null));case 6:if(r=Object(j.s)({x:$,y:ee,name:K,collageImageJson:q,draggable:!1,isCropAble:!1,isErasable:!1,is_settings:!1,isReplaceAble:!1,is_placeholder_active:!0,image:t,offsetX:de/2,offsetY:be/2,width:de,height:be,id:Object(j.db)(F).id,prevImageId:Object(j.db)(F).id}),M&&Object(y.b)(r),Object(j.Lb)(r,{phPadding:pe}),U&&(i=Object(j.db)(U),O=i.effectType,v=Object(j.kb)(U),Object(p.a)({effectType:O,isStageBatchDraw:!0}),Object(m.b)(O),Object(j.fb)(v).forEach((function(e){return Object(j.h)(v,e)})),Object(j.G)(U),Object(j.k)(n)),Object(b.h)("rotate",r,(null===q||void 0===q?void 0:q.rotation)||0),_||P||Object(h.a)({historyStack:{historyAction:g.a.draw_placeholder,settings:Object(c.a)(Object(c.a)({},ge),{},{id:Object(j.db)(F).id,is_placeholder_active:!0,type:g.b.grid_cell,selectedId:{oldValue:N,newValue:Object(j.db)(F).id},isPremium:{oldValue:D.isPremium,newValue:!1},url:{oldValue:J||D.resources.url,newValue:"placeholder"}})}}),Object(j.G)(F),Object(j.h)(X,r),W&&Object(j.Lb)(X,{is_placeholder_active:!0}),Object(j.Fb)(r),n&&Object(j.k)(n),!P){e.next=19;break}return e.abrupt("return");case 19:Object(o.b)((function(){Object(s.a)({type:u.l,isPremium:!1,id:Object(j.db)(F).id,resources:{url:t.src,id:""},settings:Object(c.a)(Object(c.a)({},f.nb),{},{x:$,y:ee,scaleX:1,scaleY:1,offsetX:de/2,offsetY:be/2,is_placeholder_active:!0,rotate:(null===q||void 0===q?void 0:q.rotation)||0})}),Object(s.a)(l.a.actions.setActiveSettings(""))}));case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",Promise.resolve(null));case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.a=C},function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"i",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"g",(function(){return u})),n.d(t,"h",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"a",(function(){return b}));var r=function(e){return e.batch},a=function(e){return r(e).eraserItem},i=function(e){return r(e).activeTexture},c=function(e){return r(e).activeColor},o=function(e){return r(e).userWatermarks},s=function(e){return r(e).cropAlign},u=function(e){return r(e).cropOrientation},l=function(e){return r(e).cropTemplate},d=function(e){return r(e).cropAttrs},b=function(e){var t=c(e);return t?"rgb(".concat(t.r,", ").concat(t.g,", ").concat(t.b,")"):null}},,function(e,t,n){"use strict";var r=n(6),a=n(9),i=n(0),c=n(43);t.a=function(){var e=Object(r.b)(a.F),t=Object(c.c)(e);Object(i.Lb)(t,{nodes:[]})}},,function(e,t,n){"use strict";var r=n(1);t.a=function(e){return e.find((function(e){return e.id===r.z}))}},,,function(e,t,n){"use strict";n.d(t,"b",(function(){return A})),n.d(t,"a",(function(){return E})),n.d(t,"d",(function(){return k})),n.d(t,"c",(function(){return C}));var r=n(7),a=n.n(r),i=n(4),c=n(2),o=n(10),s=n(27),u=n(6),l=n(12),d=n(9),b=n(17),f=n(81),h=n(16),p=n(336),g=n(34),O=n(29),v=n(0),j=n(43),m=n(1),y=function(e){if(e){var t,n=Object(u.b)(d.ac).find((function(t){var n;return t.id===e||(null===(n=t.cellsLayers)||void 0===n?void 0:n.find((function(t){return t.id===e})))}));if(n&&n.id!==e)n=null===(t=n.cellsLayers)||void 0===t?void 0:t.find((function(t){return t.id===e}));return n}},x=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,i=Object(u.b)((function(e){return{baseGroup:Object(d.ad)(e),layerArr:Object(d.ac)(e),activeLayer:Object(d.e)(e)}})),c=i.layerArr,o=i.baseGroup,s=i.activeLayer,l=-1!==(null===a||void 0===a?void 0:a.indexOf("|"))?null===a||void 0===a?void 0:a.slice(0,null===a||void 0===a?void 0:a.indexOf("|")).trimRight():a,b=y(l||r);b||(b=s);var f,h=Object(v.M)(o,"#".concat(null===(e=b)||void 0===e?void 0:e.id));Object(v.ub)(h)&&(f=h),n&&![m.pg,m.Cc].includes(null===(t=b)||void 0===t?void 0:t.type)&&(b=c.find((function(e){return e.type===m.pg})));var p=f&&Object(v.db)(f)[m.mf];return{activePhoto:b,isBgObjectRemove:p,layerActivePhoto:f}},w=function(e,t){var n=Object(u.b)((function(e){return{stage:Object(d.vd)(e)}})).stage,r=e.originalUrl||e.data_url||e.url,a=n.width()/n.scaleX();if(a&&!(null===t||void 0===t?void 0:t.is_local)&&~r.indexOf("cdn")&&!~r.indexOf(".svg")){var i=Math.round(a);r+="?to=min&r=".concat(i)}return{url:r}},A=function(e,t,n,r){var a=t+m.Kf*r,i=e*(a/t);return{shutterStockPhotoWidth:i,shutterStockPhotoHeight:a,shutterStockPhotoX:n-(i-e)/2}},E=function(e,t,n){var r=Object(u.b)(d.F),a=t.naturalHeight,i=t.naturalWidth,c=e.license?e.license===m.Kd.PREMIUM:!!e.isPremium,o=Object(v.N)(n,(function(e){return Object(v.db)(e)[m.Ed]===m.pg||Object(v.db)(e).name===m.Cc})),s=Object(v.S)(r,(function(e){return Object(v.db)(e).is_placeholder_active})).toArray().length>0,l=Object(v.db)(o).cellData,b=l.getCellComputedSize(),f=b.width,p=b.height,g=l.getCellComputedGeometryCenter(),O=g.x,j=g.y,y=Math.max(f/i,p/a),x=i*y,w=a*y;if(e.collageGroupId){var A=function(e){for(var t=Object(u.b)(d.r),n=Object(u.b)(d.s);n>=0;n--){var r=t[n];if(r.settings.id===e.id){if(r.historyAction===h.a.object_position)return r;if(r.historyAction===h.a.replace_image&&r.settings.type!==h.b.eraser)return}}}(e);A&&(O=A.settings.x.newValue,j=A.settings.y.newValue)}var E=Object(v.N)(n,".".concat(m.Zb));if(E){var k=Object(v.db)(E),C=k.scaleX;w/=k.scaleY,x/=C,O=0,j=0}return{imageScale:y,xOfCenter:O,yOfCenter:j,isPremium:c,scaledWidth:x,scaledHeight:w,hasLayerPlaceholder:s}},k=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,o,d,g,O,y,x,w,A,E,k,C,S,T;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.url,r=t.elem,o=t.props,d=t.isPremium,g=t.activePhoto,O=t.isNotFromHistory,y=t.layerActivePhoto,x=t.isBgObjectRemove,w=t.isPlaceholderActive,A=t.forceTemplateCollageReplace,E=t.template_collage,k=void 0!==E&&E,C=t.coords,S=Object(j.e)(Object(v.kb)(y)),O&&!S&&Object(f.a)({historyStack:{historyAction:h.a.replace_image,settings:Object(c.a)(Object(c.a)({},C),{},(T={props:o,id:Object(v.db)(y).id,forceTemplateCollageReplace:A,selectedId:{oldValue:Object(v.db)(y).id},zoom:{oldValue:g.settings.zoom,newValue:0},rotate:{oldValue:g.settings.rotate,newValue:0},contrast:{oldValue:g.settings.contrast,newValue:0},brightness:{oldValue:g.settings.brightness,newValue:0},highlights:{oldValue:g.settings.highlights,newValue:0},clarity:{oldValue:g.settings.clarity,newValue:0},shadows:{oldValue:g.settings.shadows,newValue:0},temperature:{oldValue:g.settings.temperature,newValue:0},hue:{oldValue:g.settings.hue,newValue:0},saturation:{oldValue:g.settings.saturation,newValue:0},hsl:{oldValue:g.settings.hsl,newValue:{}},type:k&&h.b.grid_cell,isPremium:{oldValue:g.isPremium,newValue:d},toolType:{oldValue:g.settings.toolType,newValue:""}},Object(i.a)(T,m.mf,{oldValue:x,newValue:!1}),Object(i.a)(T,"url",{oldValue:g.resources.url,newValue:r.data_url||r.url}),Object(i.a)(T,"is_placeholder_active",{oldValue:g.settings.is_placeholder_active,newValue:!!w}),T))}}),Object(s.b)((function(){Object(u.a)({type:l.l,isPremium:d,resources:Object(c.a)(Object(c.a)({},r),{},{url:w?g.resources.url:n,is_local:null===o||void 0===o?void 0:o.is_local,width:Object(v.db)(y).originalWidth,height:Object(v.db)(y).originalHeight}),settings:Object(c.a)(Object(c.a)({},r),{},{toolType:r.toolType,type:g.settings.type}),id:g.id}),!S&&Object(u.a)({type:l.j,id:g.id}),Object(u.a)(b.a.actions.setCanvasLoading(!1))})),!S){e.next=8;break}return e.next=7,Object(p.a)({elem:r});case 7:Object(j.g)(Object(j.c)(Object(v.jb)(y)));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(o.a)(a.a.mark((function e(t,n){var r,i,c,o,l,d,f,h,p,v,j,m=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=m.length>2&&void 0!==m[2]&&m[2],i=m.length>3?m[3]:void 0,c=m.length>4?m[4]:void 0,o=m.length>5&&void 0!==m[5]?m[5]:null,l=x(r,i,c),d=l.activePhoto,f=l.layerActivePhoto,h=l.isBgObjectRemove,p=t.url.includes("base64"),v=p?t.url:o?o.src:w(t,n).url,j=o){e.next=19;break}return e.prev=9,e.next=12,Object(O.a)(v);case 12:j=e.sent,e.next=19;break;case 15:e.prev=15,e.t0=e.catch(9),g.a.trigger(e.t0,"error"),Object(s.b)((function(){Object(u.a)(b.a.actions.setCanvasLoading(!1)),Object(u.a)(b.a.actions.setErrorModal({isVisible:!0}))}));case 19:return e.abrupt("return",{url:v,activePhoto:d,layerActivePhoto:f,isBgObjectRemove:h,newImage:j});case 20:case"end":return e.stop()}}),e,null,[[9,15]])})));return function(t,n){return e.apply(this,arguments)}}()},,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u}));var r=n(14),a=n(6),i=n(17),c=n(1),o=n(0),s=function(e,t){setTimeout((function(){Object(a.a)(i.a.actions.setActiveSettings(e||"")),t&&Object(a.a)(i.a.actions.setSelectedCategory(t))}))},u=function(e,t){var n=Object(o.X)(t,c.pb);n&&(n.detach(),Object(o.Nb)(n,Object(r.a)(e)))}},,,function(e,t,n){"use strict";var r=n(7),a=n.n(r),i=n(10),c=n(40),o=n(42),s=n(346),u=n(167),l=n(101),d=n(100),b=n(1),f=function(){function e(){Object(c.a)(this,e),this.storeName=void 0}return Object(o.a)(e,[{key:"getStore",value:function(){var t=Object(i.a)(a.a.mark((function t(){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.openDB();case 2:if(!(n=t.sent)){t.next=6;break}return r=n.transaction(this.storeName,"readwrite"),t.abrupt("return",r.objectStore(this.storeName));case 6:return t.abrupt("return",null);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getAllData",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getStore();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return n=t.getAll(),e.abrupt("return",new Promise((function(e){n.onsuccess=function(){e(n.result)}})));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addData",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getStore();case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:n.add(t);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"removeData",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getStore();case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:n.delete(t);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"removeAllData",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getStore();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:t.clear();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"putData",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getStore();case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:n.put(t);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getData",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getStore();case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return r=n.get(t),e.abrupt("return",new Promise((function(e){r.onsuccess=function(){return e(r.result)},r.onerror=function(){return e(null)}})));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"openDB",value:function(){return new Promise((function(t){if(e.indexedDB){var n=e.indexedDB.open(b.Dh.name,b.Dh.version);n.onupgradeneeded=function(e){var t=e.oldVersion,r=n.result;t<2&&r.createObjectStore("DataStore",{keyPath:"key"}),t<3&&r.createObjectStore("BulkData",{keyPath:"key",autoIncrement:!0}),t<4&&r.deleteObjectStore("DataStore"),t<5&&r.createObjectStore("BatchData",{keyPath:"key",autoIncrement:!0}),t<6&&r.deleteObjectStore("BulkData")},n.onsuccess=function(){var e=n.result;e.onversionchange=function(){e.close()},t(n.result)},n.onerror=function(){if(!n.result)return null}}}))}}]),e}();f.indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB||window.shimIndexedDB;var h=f,p=n(34),g=n(76),O=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).storeName="BatchData",e}return Object(o.a)(n,[{key:"putData",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(s.a)(Object(u.a)(n.prototype),"putData",this).call(this,t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),p.a.trigger(e.t0,"error");case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"addMultipleData",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAllData();case 2:n=e.sent,r=g.a-((null===n||void 0===n?void 0:n.length)||0),t.slice(0,r).forEach((function(e){return i.addData(e)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(h);t.a=new O},,function(e,t,n){"use strict";t.a=function(e,t,n,r){var a=r.naturalWidth||0,i=r.naturalHeight||0,c=Math.min(t/a,n/i);return{width:"".concat(c*a/t*100,"%"),height:"".concat(c*i/n*100,"%")}}},function(e,t,n){"use strict";var r=n(40),a=n(42),i=n(14),c=n(101),o=n(100),s=n(106),u=n(90),l=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(e,a){var i;return Object(r.a)(this,n),(i=t.call(this)).originalPath="",i.originalVertices=[],i.vertices=[],i.computedVerticesObjects=[],i.computedVertices=[],i.area=0,i.maxBorderWidth=0,i.collageMaxBorderWidth=0,i.maxCornerRadius=0,i.center=i.POINT_ZERO,i.gravityCenter=i.POINT_ZERO,i.geometryCenter=i.POINT_ZERO,i.size={width:0,height:0},i.viewOptions=void 0,i.angles=[],i.originalPath=e,i.originalVertices=e.split(" "),i.vertices=e.split(" "),i.viewOptions=a,i.angles=u.a.computeAngles(i.vertices),i.reCompute(a),i.maxBorderWidth=i.getMaxBorderWidth(),i.getMaxCornerRadius(),i}return Object(a.a)(n,[{key:"drawRoundedPoly",value:function(e,t){u.a.drawRoundedPoly(this.computedVerticesObjects,e,t)}},{key:"applyBorder",value:function(e,t){var n=this;return e.map((function(r,a){var i=s.a.getPointArrayPointAtCycleIndex(e,a-1),c=u.a.getArrow(r,i),o=n.angleAtIndex(a),l=Math.abs(t/Math.sin(o/2)),d=s.a.getPointMakeWithLengthAngle(l,u.a.getPointAngle({x:c.X,y:c.Y}));return d=u.a.getPointRotate(d,o/2),s.a.getPointAddPointToPoint(r,d)}))}},{key:"calculateApplyingBorderWidth",value:function(e,t){var n,r=Math.min(this.viewOptions.size.width,this.viewOptions.size.height),a=r/8*(e/100);return n=this.collageMaxBorderWidth*t/100,n*=(r-2*(n+a))/r}},{key:"setMaxCollageBorderWidth",value:function(e){this.collageMaxBorderWidth=e}},{key:"reCompute",value:function(e){this.area=this.getAreaOfCell(),this.center=this.getCenter(),this.gravityCenter=this.getGravityCenter(),this.geometryCenter=this.getGeometryCenter(),this.size=this.getCellSize(),this.computedVertices=this.getComputedVertices(e.size),this.computedVerticesObjects=this.getComputedVerticesObjects(),this.maxBorderWidth=this.getMaxBorderWidth()}},{key:"getCenter",value:function(){var e=0,t=0;if(this.vertices){for(var n=[].concat(Object(i.a)(this.vertices),[this.vertices[0]]),r=0;r<n.length-1;r++){var a=n[r].split(",").map((function(e){return parseFloat(e)})),c=n[r+1].split(",").map((function(e){return parseFloat(e)}));e+=(a[0]+c[0])*(a[0]*c[1]-c[0]*a[1]),t+=(a[1]+c[1])*(a[0]*c[1]-c[0]*a[1])}e*=1/(6*this.area),t*=1/(6*this.area)}return{x:e,y:t}}},{key:"getGravityCenter",value:function(){for(var e=s.a.getPointXY(this.vertices[0]),t=this.POINT_ZERO,n=0,r=1;r<this.vertices.length;++r){var a=s.a.getPointXY(s.a.getPointArrayPointAtCycleIndex(this.vertices,r)),i=s.a.getPointXY(s.a.getPointArrayPointAtCycleIndex(this.vertices,r+1)),c=u.a.areaOfTriangle(e,a,i);n+=c;var o=u.a.centerOfTrinagle(e,a,i);t=s.a.getPointAddPointToPoint(t,u.a.pointScale(o,c))}return n?u.a.pointScale(t,1/n):this.POINT_ZERO}},{key:"getGeometryCenter",value:function(){var e=this.getMinAndMaxPoints(),t=e.maxX,n=e.minX,r=e.maxY,a=e.minY;return{x:n+(t-n)/2,y:a+(r-a)/2}}},{key:"getMinAndMaxPoints",value:function(){for(var e=-1/0,t=1/0,n=-1/0,r=1/0,a=0;a<this.vertices.length;a++){var i=this.vertices[a].split(",").map((function(e){return parseFloat(e)}));e=e<i[0]?i[0]:e,t=t>i[0]?i[0]:t,n=n<i[1]?i[1]:n,r=r>i[1]?i[1]:r}return{maxX:e,minX:t,maxY:n,minY:r}}},{key:"getCellTopLeft",value:function(){var e=this.getMinAndMaxPoints(),t=e.minX,n=e.minY,r=this.viewOptions.size;return{x:t*r.width,y:n*r.height}}},{key:"getAreaOfCell",value:function(){if(!this.vertices)return 1;for(var e=0,t=this.vertices.length,n=0;n<t;n++){var r=this.vertices[n].split(",").map((function(e){return parseFloat(e)})),a=n+1===t?0:n+1,i=this.vertices[a].split(",").map((function(e){return parseFloat(e)}));e+=r[0]*i[1]-i[0]*r[1]}return e/2}},{key:"getCellSize",value:function(){var e=this.getMinAndMaxPoints();return{width:e.maxX-e.minX,height:e.maxY-e.minY}}},{key:"getCellComputedSize",value:function(){for(var e=-1/0,t=1/0,n=-1/0,r=1/0,a=0;a<this.computedVerticesObjects.length;a++){var i=this.computedVerticesObjects[a];e=e<i.x?i.x:e,t=t>i.x?i.x:t,n=n<i.y?i.y:n,r=r>i.y?i.y:r}return{width:e-t,height:n-r}}},{key:"getCellComputedCenter",value:function(){return this.center?{x:this.center.x*this.viewOptions.size.width,y:this.center.y*this.viewOptions.size.height}:{x:0,y:0}}},{key:"getCellComputedGravityCenter",value:function(){return this.gravityCenter?{x:this.gravityCenter.x*this.viewOptions.size.width,y:this.gravityCenter.y*this.viewOptions.size.height}:{x:0,y:0}}},{key:"getCellComputedGeometryCenter",value:function(){return this.geometryCenter?{x:this.geometryCenter.x*this.viewOptions.size.width,y:this.geometryCenter.y*this.viewOptions.size.height}:{x:0,y:0}}},{key:"getComputedVertices",value:function(e){var t=[];return this.vertices.forEach((function(n){t.push.apply(t,Object(i.a)(n.split(",").map((function(t,n){return 1===n?parseFloat(t)*e.height:parseFloat(t)*e.width}))))})),t}},{key:"getComputedVerticesObjects",value:function(){for(var e=[],t=0;t<this.computedVertices.length;t+=2)e.push({x:this.computedVertices[t],y:this.computedVertices[t+1]});return e}},{key:"getMaxBorderWidth",value:function(){for(var e=1/0,t=0;t<this.computedVerticesObjects.length;++t){var n=this.maxBorderWidthForSegmentAtIndex(t);e=Math.min(e,n)}return e}},{key:"maxBorderWidthForSegmentAtIndex",value:function(e){var t=this.angleAtIndex(e)/2,n=this.angleAtIndex(e+1)/2,r=s.a.getPointArrayPointAtCycleIndex(this.computedVerticesObjects,e),a=s.a.getPointArrayPointAtCycleIndex(this.computedVerticesObjects,e+1),i=u.a.getDistanceBetweenPoints(r,a);return Math.tan(t)*(i-40)/(1+Math.tan(t)/Math.tan(n))}},{key:"getMaxCornerRadius",value:function(){if(!this.maxCornerRadius){for(var e=1/0,t=0;t<this.computedVerticesObjects.length;++t){var n=this.maxCornerRadiusForSegmentAtIndex(t);e=Math.min(e,n)}this.maxCornerRadius=e}return this.maxCornerRadius}},{key:"maxCornerRadiusForSegmentAtIndex",value:function(e){var t=s.a.getPointArrayPointAtCycleIndex(this.computedVerticesObjects,e),n=s.a.getPointArrayPointAtCycleIndex(this.computedVerticesObjects,e-1),r=this.angleAtIndex(e),a=this.angleAtIndex(e-1),i=u.a.subtractPointFromPoint(t,n),c=u.a.getPointRotate(i,r/2),o=u.a.getPointRotate(u.a.pointMakeInvert(i),-a/2),l=this.intersectionPointOfTwoSegments(t,s.a.getPointAddPointToPoint(t,c),n,s.a.getPointAddPointToPoint(n,o),!1),d=u.a.subtractPointFromPoint(t,l);return u.a.getDistanceBetweenPoints(this.POINT_ZERO,d)*Math.sin(r/2)}},{key:"angleAtIndex",value:function(e){var t=this.vertices.length,n=e%t;return this.angles[n>=0?n:t+n]}}]),n}(u.a),d=function(){function e(t,n){var a=this;Object(r.a)(this,e),this.fetchedData=void 0,this.collageCells=void 0,this.collageMaxBorderWidth=void 0,this.viewOptions=void 0,this.fetchedData=t,this.viewOptions=n,this.fetchedData&&this.fetchedData.paths&&(this.collageCells=this.fetchedData.paths.map((function(e){return new l(e,n)}))),this.collageMaxBorderWidth=this.setMaxBorderWidth(),this.collageCells.forEach((function(e){return e.setMaxCollageBorderWidth(a.collageMaxBorderWidth)}))}return Object(a.a)(e,[{key:"setMaxBorderWidth",value:function(){var e=1/0;this.collageCells.forEach((function(t){e=Math.min(e,t.maxBorderWidth)}));var t=Math.min(this.viewOptions.size.width,this.viewOptions.size.height)/8;return Math.min(e,t)}}]),e}();t.a=d},,function(e,t,n){"use strict";var r=n(112),a=n(1),i=function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))&&0===e.toDataURL("image/webp").indexOf("data:image/webp")}(),c=["cdnwebeditor.picsart.com"];t.a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"min",o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=i&&!(r.isSafari||r.isIOS)&&!o;if(!e)return"";var u=e.includes(".png"),l=e.includes("unsplash"),d=new URL(e);if(!c.includes(d.host)&&(e.includes("blob")||e.includes("base64")||!e.match(a.cf)&&!l))return e;var b=new URLSearchParams(d.search);if(l){var f="fixed"===n&&"string"===typeof t&&t.includes("x"),h=f?String(t).split("x")[0]:a.Qg,p=f?String(t).split("x")[1]:a.Qg;return b.set("w","".concat(h)),b.set("h","".concat(p)),"".concat(d.origin).concat(d.pathname,"?").concat(b.toString())}return s?b.set("type","webp"):!u&&b.set("type","jpg"),b.set("to",n),b.set("r","".concat(t)),"".concat(d.origin).concat(d.pathname,"?").concat(b.toString())}},,,,,,,,function(e,t,n){"use strict";var r=n(139),a=n(30);t.a=function(e){return{id:Object(r.a)(),layerId:e,type:a.a.STATIC}}},function(e,t,n){"use strict";t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;return t*Math.abs(e)}},function(e,t,n){"use strict";var r=n(7),a=n.n(r),i=n(4),c=n(10),o=n(39),s=n(1),u=n(6),l=n(9),d=n(64),b=function(){var e=Object(c.a)(a.a.mark((function e(t,n,r){var c,b,f,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=Object(u.b)(l.Nd)){e.next=3;break}return e.abrupt("return",null);case 3:return e.prev=3,(b=new FormData).append("file",t),b.append("type","".concat(n,"/").concat(r)),e.next=9,Object(d.a)("".concat(s.sh,"/files"),{headers:Object(i.a)({},o.q,c),method:"POST",body:b});case 9:return f=e.sent,e.next=12,f.json();case 12:return h=e.sent,e.abrupt("return",h.result.url);case 16:return e.prev=16,e.t0=e.catch(3),e.abrupt("return",null);case 19:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(t,n,r){return e.apply(this,arguments)}}();t.a=b},,function(e,t,n){"use strict";var r=n(7),a=n.n(r),i=n(10),c=n(1),o=n(6),s=n(9),u=n(12),l=n(73),d=n(29),b=n(81),f=n(16),h=n(0),p=function(e){return"double-exposure-effect-id"!==Object(h.db)(e).id&&Object(h.db)(e).name!==c.qg||0===Object(h.db)(e).offsetX||0===Object(h.db)(e).offsetY},g=function(e,t){if(!e)return Promise.resolve(null);var n=document.createElement("canvas");n.width=e.width,n.height=e.height;var r=n.getContext("2d");return r?(t===c.Cd.flipHorizontal&&(r.translate(e.width,0),r.scale(-1,1)),t===c.Cd.flipVertical&&(r.translate(0,e.height),r.scale(1,-1)),r.drawImage(e,0,0),Object(d.a)(n.toDataURL("image/png"))):Promise.resolve(null)},O=function(e){var t=e.object,n=e.x,r=void 0===n?Object(h.db)(t).x:n,a=e.y,i=void 0===a?Object(h.db)(t).y:a,o=e.rotation,s=void 0===o?Object(h.db)(t).rotation:o,u=e.type,d=Object(h.db)(t),b=d.width,f=d.height,g=d.rotation,O=Object(h.db)(t),v=O.scaleX,j=O.scaleY,m=r,y=i;if(u===c.Cd.flipHorizontal){if(p(t))m+=Math.cos(Object(l.a)(s))*b*v,y+=Math.sin(Object(l.a)(s))*b*v;v=-v}if(u===c.Cd.flipVertical){if(p(t))m-=Math.sin(Object(l.a)(g))*f*j,y-=Math.cos(Object(l.a)(g))*f*-j;j=-j}return{x:m,y:y,scaleX:v,scaleY:j}},v=function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,l,d,p,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.ids,r=t.baseGroup,l=t.type,d=t.addToHistory,r){e.next=3;break}return e.abrupt("return");case 3:p=Object(o.b)(s.h),v=[],n.forEach(function(){var e=Object(i.a)(a.a.mark((function e(t){var n,i,s,d,b,f,j,m,y,x,w;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v.push({id:t,type:l}),n=Object(h.R)(r,"#".concat(t)),(i=Object(h.N)(n,(function(e){return Object(h.db)(e).effectType})))?n=i:Object(h.db)(n)[c.Ed]===c.pg&&(s=Object(h.db)(n).childId,n=Object(h.R)(r,"#".concat(s))),!Object(h.ub)(n)){e.next=17;break}return e.next=7,g(Object(h.db)(n).image,l);case 7:if(d=e.sent){e.next=10;break}return e.abrupt("return");case 10:Object(h.n)(n),Object(h.Lb)(n,{image:d,flipType:l}),Object(h.k)(r),(b=p.find((function(e){return e.id===t})))&&(f=b.settings,j=f.scaleX,m=f.scaleY,l===c.Cd.flipHorizontal?j=-1*(j||1):l===c.Cd.flipVertical&&(m=-1*(m||1)),Object(o.a)({type:u.l,id:t,settings:{scaleX:j,scaleY:m}})),e.next=18;break;case 17:("shapeGroup"===Object(h.db)(n).name||Object(h.db)(n).effectType)&&(y=Object(h.fb)(n),x=Object(h.db)(n),w=x.effectType,y.forEach((function(e){if(w===c.qc.sketch&&Object(h.tb)(e))[c.Pf,c.Nf].forEach((function(n){var r=e.findOne("#".concat(t,"|").concat(n));if(r){var a=O({object:r,type:l}),i=a.scaleX>0?1:-1,c=a.scaleY>0?1:-1;r.scale({x:Math.abs(r.scaleX())*i,y:Math.abs(r.scaleY())*c})}}));else{var n=O({object:e,type:l}),r=n.x,a=n.y,i=n.scaleX,s=n.scaleY;Object(o.a)({type:u.l,id:t,settings:{scaleX:i,scaleY:s}}),e.setAttrs({x:r,y:a,scaleX:i,scaleY:s})}})),Object(h.k)(r));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),d&&Object(b.a)({historyStack:{historyAction:f.a.flip_object,settings:{children:v}}});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.a=v},function(e,t,n){"use strict";n.d(t,"e",(function(){return l})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return f})),n.d(t,"f",(function(){return h})),n.d(t,"b",(function(){return p}));var r,a,i,c,o=n(4),s=n(1),u=n(20),l=(r={},Object(o.a)(r,s.Jg.ADJUST,{name:"Adjust",tooltip:"Adjust",iconName:"adjust-editor"}),Object(o.a)(r,s.Jg.EFFECTS,{name:"Effects",tooltip:"Effects",iconName:"effects-editor"}),Object(o.a)(r,s.Jg.BLEND,{name:"Blend",tooltip:"Blend",iconName:"blend-editor"}),Object(o.a)(r,s.Jg.COLOR,{name:"Color",tooltip:"Color",iconName:"color-editor"}),Object(o.a)(r,s.Jg.GRADIENT,{name:"Gradient",tooltip:"Gradient",iconName:"gradient-editor"}),Object(o.a)(r,s.Jg.TEXTURE,{name:"Texture",tooltip:"Texture",iconName:"texture-editor"}),Object(o.a)(r,s.Jg.FONT,{name:"Font",tooltip:"Font",iconName:"font-editor"}),Object(o.a)(r,s.Jg.TEXT_STYLES,{name:"Text styles",tooltip:"Text styles",iconName:"text-style"}),Object(o.a)(r,s.Jg.GRID_ADJUST,{name:"Border",tooltip:"Border",iconName:"stroke-editor"}),Object(o.a)(r,s.Jg.OUTLINE,{name:"Outline",tooltip:"Stroke",iconName:"stroke-editor"}),Object(o.a)(r,s.Jg.SHADOW,{name:"Shadow",tooltip:"Shadow",iconName:"shadow-editor"}),r),d=(a={},Object(o.a)(a,u.a.PHOTO,[s.Jg.ADJUST,s.Jg.EFFECTS,s.Jg.BLEND]),Object(o.a)(a,u.a.CROP_GROUP,[s.Jg.ADJUST,s.Jg.BLEND]),Object(o.a)(a,u.a.STICKER,[s.Jg.ADJUST,s.Jg.EFFECTS,s.Jg.BLEND]),Object(o.a)(a,u.a.BACKGROUND_COLOR,[s.Jg.COLOR,s.Jg.GRADIENT,s.Jg.TEXTURE]),Object(o.a)(a,u.a.BACKGROUND_IMAGE,[s.Jg.COLOR,s.Jg.GRADIENT,s.Jg.TEXTURE]),Object(o.a)(a,u.a.TEXT,[s.Jg.FONT,s.Jg.TEXT_STYLES,s.Jg.COLOR,s.Jg.OUTLINE,s.Jg.SHADOW]),Object(o.a)(a,u.a.ICON,[s.Jg.ADJUST,s.Jg.BLEND,s.Jg.COLOR]),Object(o.a)(a,u.a.SVG_STICKER,[s.Jg.ADJUST,s.Jg.BLEND,s.Jg.COLOR]),Object(o.a)(a,u.a.SHAPE,[s.Jg.ADJUST,s.Jg.BLEND,s.Jg.COLOR,s.Jg.OUTLINE]),Object(o.a)(a,u.a.ORGANIC_SHAPE,[s.Jg.ADJUST,s.Jg.BLEND,s.Jg.COLOR,s.Jg.OUTLINE]),Object(o.a)(a,u.a.ABSTRACT_SHAPE,[s.Jg.ADJUST,s.Jg.BLEND,s.Jg.COLOR,s.Jg.OUTLINE]),Object(o.a)(a,u.a.DECORATIVE_SHAPE,[s.Jg.ADJUST,s.Jg.BLEND,s.Jg.COLOR,s.Jg.OUTLINE]),Object(o.a)(a,u.a.COLLAGE,[s.Jg.GRID_ADJUST]),Object(o.a)(a,u.a.COLLAGE_CELL,[s.Jg.ADJUST,s.Jg.BLEND]),Object(o.a)(a,u.a.COLLAGE_CELL_IMAGE,[s.Jg.ADJUST,s.Jg.EFFECTS,s.Jg.BLEND]),Object(o.a)(a,u.a.COLLAGE_CELL_PLACEHOLDER,[]),Object(o.a)(a,u.a.COLLAGE_CELL_PLACEHOLDER_IMAGE,[]),Object(o.a)(a,u.a.GROUP,[s.Jg.ADJUST,s.Jg.BLEND]),a),b=(i={},Object(o.a)(i,u.a.COLLAGE_CELL,"template-collage"),Object(o.a)(i,u.a.COLLAGE_CELL_IMAGE,"template-collage"),Object(o.a)(i,u.a.CROP_GROUP,"add_photo"),Object(o.a)(i,u.a.ICON,"shape"),Object(o.a)(i,u.a.ORGANIC_SHAPE,"shape"),Object(o.a)(i,u.a.ABSTRACT_SHAPE,"shape"),Object(o.a)(i,u.a.DECORATIVE_SHAPE,"shape"),Object(o.a)(i,u.a.BACKGROUND_COLOR,"canvas"),Object(o.a)(i,u.a.BACKGROUND_IMAGE,"canvas"),Object(o.a)(i,u.a.PHOTO,"add_photo"),i),f=(c={},Object(o.a)(c,u.a.PHOTO,[s.Kg.crop,s.Kg.eraser,s.Kg.replace,s.Kg.remover,s.Kg.duplicate,s.Kg.delete]),Object(o.a)(c,u.a.CROP_GROUP,[s.Kg.crop,s.Kg.eraser,s.Kg.replace,s.Kg.remover,s.Kg.duplicate,s.Kg.delete]),Object(o.a)(c,u.a.STICKER,[s.Kg.crop,s.Kg.duplicate,s.Kg.delete]),Object(o.a)(c,u.a.BACKGROUND_COLOR,[]),Object(o.a)(c,u.a.BACKGROUND_IMAGE,[]),Object(o.a)(c,u.a.TEXT,[s.Kg.duplicate,s.Kg.delete]),Object(o.a)(c,u.a.ICON,[s.Kg.duplicate,s.Kg.delete]),Object(o.a)(c,u.a.SVG_STICKER,[s.Kg.duplicate,s.Kg.delete]),Object(o.a)(c,u.a.SHAPE,[s.Kg.duplicate,s.Kg.delete]),Object(o.a)(c,u.a.ORGANIC_SHAPE,[s.Kg.duplicate,s.Kg.delete]),Object(o.a)(c,u.a.ABSTRACT_SHAPE,[s.Kg.duplicate,s.Kg.delete]),Object(o.a)(c,u.a.DECORATIVE_SHAPE,[s.Kg.duplicate,s.Kg.delete]),Object(o.a)(c,u.a.COLLAGE,[s.Kg.delete]),Object(o.a)(c,u.a.COLLAGE_CELL,[s.Kg.crop,s.Kg.eraser,s.Kg.replace,s.Kg.delete]),Object(o.a)(c,u.a.COLLAGE_CELL_IMAGE,[s.Kg.eraser,s.Kg.delete]),Object(o.a)(c,u.a.COLLAGE_CELL_PLACEHOLDER,[s.Kg.delete]),Object(o.a)(c,u.a.COLLAGE_CELL_PLACEHOLDER_IMAGE,[s.Kg.delete]),Object(o.a)(c,u.a.GROUP,[s.Kg.duplicate,s.Kg.delete]),c),h=[{type:s.Kg.eraser,tooltip:"Eraser tool",iconName:"eraser-editor"},{type:s.Kg.remover,tooltip:"Removal tool",iconName:"removal-editor",crown:!0},{type:s.Kg.duplicate,tooltip:"Duplicate",iconName:"duplicate-editor"},{type:s.Kg.delete,tooltip:"Delete",iconName:"delete-editor"},{type:s.Kg.crop,tooltip:"Crop",iconName:"crop-editor"},{type:s.Kg.replace,tooltip:"Replace",iconName:"replace-editor"}],p={duotone:[s.Jg.GRADIENT],"change-sky":[s.Jg.COLOR,s.Jg.GRADIENT,s.Jg.TEXTURE]};t.a=d},function(e,t,n){"use strict";var r=n(3);t.a=function(e){return Object(r.useEffect)(e,[])}},function(e,t,n){"use strict";n.d(t,"a",(function(){return k})),n.d(t,"c",(function(){return C})),n.d(t,"b",(function(){return y.a}));var r=n(2),a=n(7),i=n.n(a),c=n(10),o=n(14),s=n(15),u=n(3),l=n(24),d=n(194),b=n(175),f=n(1),h=n(76),p=n(533),g=n(143),O=n(152),v=n(435),j=n(149),m=n(534),y=n(105);var x=function(e,t){switch(t.type){case y.a.UPDATE_STATUSES:return Object(r.a)(Object(r.a)({},e),{},{data:e.data.map((function(e){return Object(r.a)(Object(r.a)({},e),{},{status:t.status})}))});case y.a.ADD_DATA:var n=Object(g.d)(t.items);return b.a.addMultipleData(n),Object(r.a)(Object(r.a)({},e),{},{data:[].concat(Object(o.a)(e.data),Object(o.a)(n))});case y.a.SET_DATA:return Object(r.a)(Object(r.a)({},e),{},{data:t.items});case y.a.PUT_DATA:return Object(r.a)(Object(r.a)({},e),{},{data:e.data.map((function(e){return t.item.key===e.key?t.item:e}))});case y.a.DELETE_DATA:return t.keys.forEach((function(e){return b.a.removeData(e)})),Object(r.a)(Object(r.a)({},e),{},{data:e.data.filter((function(e){return!t.keys.includes(e.key)}))});case y.a.RESET_DATA:var a=e.data.map((function(e){return t.keys.includes(e.key)?Object(r.a)(Object(r.a)({},e),{},{result:e.source,isProcessed:!1}):e}));return a.forEach((function(e){return b.a.putData(e)})),Object(r.a)(Object(r.a)({},e),{},{data:a});case y.a.APPLY_PENDING:var i=e.data.map((function(e){return Object(r.a)(Object(r.a)({},e),{},{result:e.pendingResult||e.result,pendingResult:void 0,isProcessed:e.isProcessed||!!e.pendingResult,status:f.G.PENDING})}));return i.forEach((function(e){return b.a.putData(e)})),Object(r.a)(Object(r.a)({},e),{},{data:i});case y.a.DISCARD_PENDING:return Object(r.a)(Object(r.a)({},e),{},{data:e.data.map((function(e){return Object(r.a)(Object(r.a)({},e),{},{pendingResult:void 0,status:f.G.PENDING})}))});case y.a.DELETE_ALL_DATA:return e.data.forEach((function(e){var t=e.key;return b.a.removeData(t)})),Object(r.a)(Object(r.a)({},e),{},{data:[]});case y.a.SET_RESIZE_PARAMS:return Object(r.a)(Object(r.a)({},e),{},{resizeParams:t.params});default:throw new Error}},w=n(5),A={data:[],process:l.a,userBackgrounds:[],addUserBackground:l.a,dispatchData:l.a,selectedKeys:[],selectedData:[],setSelectedKeys:l.a,isSuccessModal:!1,setIsSuccessModal:l.a,discardPending:l.a,allSelected:!0,uploadedData:{count:0,status:f.G.DONE},setUploadedData:l.a,acceptFiles:l.a,setActiveTool:l.a,activeTool:null,setRemovedType:l.a,removedType:null,setMultiplyFactor:l.a,multiplyFactor:null,resizeParams:{width:800,height:null,usePadding:!0}},E=Object(u.createContext)(A);function k(e){var t=e.children,n=Object(u.useReducer)(x,{data:A.data,resizeParams:A.resizeParams}),a=Object(s.a)(n,2),k=a[0],C=k.data,S=k.resizeParams,T=a[1],_=Object(u.useState)(null),I=Object(s.a)(_,2),R=I[0],L=I[1],P=Object(u.useState)(null),G=Object(s.a)(P,2),M=G[0],B=G[1],D=Object(u.useState)([]),N=Object(s.a)(D,2),z=N[0],H=N[1],Y=Object(u.useState)([]),X=Object(s.a)(Y,2),U=X[0],F=X[1],W=Object(u.useState)(!1),V=Object(s.a)(W,2),K=V[0],q=V[1],J=Object(u.useState)(A.uploadedData),Q=Object(s.a)(J,2),Z=Q[0],$=Q[1],ee=Object(u.useState)(null),te=Object(s.a)(ee,2),ne=te[0],re=te[1],ae=Object(u.useRef)(l.a),ie=Object(v.a)().showUploaderError,ce=Object(u.useMemo)((function(){return U.length?C.filter((function(e){var t=e.key;return U.includes(t)})):C}),[C,U]),oe=Object(u.useMemo)((function(){return ce.length===C.length}),[C.length,ce]),se=Object(u.useCallback)((function(e){var t={url:e};return H((function(e){return[t].concat(Object(o.a)(e))})),t}),[]),ue=Object(u.useCallback)(function(){var e=Object(c.a)(i.a.mark((function e(t,n){var r,a,c,o=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>2&&void 0!==o[2]&&o[2],T({type:y.a.PUT_DATA,item:t}),n!==h.c.remove){e.next=13;break}return e.next=5,Object(j.a)(t.source.src);case 5:if(a=e.sent,e.t0=t.pendingResult,!e.t0){e.next=11;break}return e.next=10,Object(j.a)(t.pendingResult.src);case 10:e.t0=e.sent;case 11:c=e.t0,a&&c&&Object(m.a)({original:a,result:c},r);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[]),le=Object(u.useCallback)(function(){var e=Object(c.a)(i.a.mark((function e(t,n){var r,a,c,s,u,l,d,b;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T({type:y.a.UPDATE_STATUSES,status:f.G.IN_PROGRESS}),r=h.J[t],a=r.getProcess,c=r.isMask,s=r.usePending,u=r.isResize,l=a(n),d=new p.a,ae.current=d.cancel.bind(d),b=Object(o.a)(ce).reverse(),e.next=8,d.process(l,b,(function(e){return ue(e,t,n.isPerson)}),c,s,u,Array.isArray(n));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[ue,ce]),de=Object(u.useCallback)((function(){ae.current(),T({type:y.a.DISCARD_PENDING})}),[]);Object(d.a)((function(){(function(){var e=Object(c.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.getAllData();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:t=e.t0,n=t.map((function(e){return Object(r.a)(Object(r.a)({},e),{},{source:Object(g.e)(e.source),result:Object(g.e)(e.result),pendingResult:e.pendingResult&&Object(g.e)(e.pendingResult)})})),T({type:y.a.SET_DATA,items:n});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}));var be=Object(u.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&ie(h.b.fileFormat);var n=e.length+C.length>h.a;if(e.length){n&&ie(h.b.exceededFilesLimit);var r=n?e.slice(0,h.a-C.length):e;r.length?($({count:r.length,status:f.G.IN_PROGRESS}),r.forEach((function(e,t){var n=new FileReader;n.onload=function(){t===r.length-1&&$({count:t+1,status:f.G.DONE})},n.readAsArrayBuffer(e)})),O.b.uploadDone(O.a.batch_editor,n?"partial_upload":"success",r.length),T({type:y.a.ADD_DATA,items:r})):O.b.uploadDone(O.a.batch_editor,"fail")}else O.b.uploadDone(O.a.batch_editor,t?"fail":"cancel")}),[T,$,C,ie]);return Object(w.jsx)(E.Provider,{value:{data:C,resizeParams:S,process:le,userBackgrounds:z,addUserBackground:se,dispatchData:T,selectedKeys:U,selectedData:ce,setSelectedKeys:F,isSuccessModal:K,setIsSuccessModal:q,discardPending:de,allSelected:oe,uploadedData:Z,setUploadedData:$,acceptFiles:be,activeTool:ne,setActiveTool:re,removedType:R,setRemovedType:L,multiplyFactor:M,setMultiplyFactor:B},children:t})}var C=function(){return Object(u.useContext)(E)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"n",(function(){return g})),n.d(t,"o",(function(){return O})),n.d(t,"i",(function(){return r})),n.d(t,"m",(function(){return v})),n.d(t,"h",(function(){return a})),n.d(t,"k",(function(){return l})),n.d(t,"j",(function(){return d})),n.d(t,"g",(function(){return c})),n.d(t,"l",(function(){return j})),n.d(t,"f",(function(){return i})),n.d(t,"e",(function(){return b})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return p}));var r,a,i,c,o=n(180),s=n(1),u="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",l=300,d=300,b=88,f=62,h=100,p=360;!function(e){e.ERASER="eraser",e.BRUSH="brush",e.CUT_OUT="cut-out"}(r||(r={})),function(e){e.OPACITY="opacity",e.SIZE="size",e.HARDNESS="hardness"}(a||(a={})),function(e){e.Object="object",e.Person="person"}(i||(i={})),function(e){e.INVERT="invert",e.RESET="reset"}(c||(c={}));var g=s.vh.editorOnly?[{name:"Remove Background",type:r.CUT_OUT,icon_name:"texture-editor"}]:[{name:"Eraser",type:r.ERASER,icon_name:"eraser-editor"},{name:"Brush",type:r.BRUSH,icon_name:"brush-editor"},{name:"Remove Background",type:r.CUT_OUT,icon_name:"texture-editor"}],O=[{name:"Invert",type:c.INVERT,icon_name:"loop-editor"},{name:"Reset",type:c.RESET,icon_name:"refresh-gen"}],v=[{type:a.OPACITY,name:"Opacity",min:0,max:100,defaultValue:100},{type:a.SIZE,name:"Size",min:1,max:100,defaultValue:20},{type:a.HARDNESS,name:"Hardness",min:0,max:100,defaultValue:100}],j=[{type:i.Object,title:"OBJECT",url:Object(o.a)("".concat(s.N,"/328287709092201.png"),320)},{type:i.Person,title:"PERSON",url:Object(o.a)("".concat(s.N,"/316184224378201.png"),320)}]},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d}));var r=n(1),a=96,i=37.795275591,c=Math.round,o=Math.floor,s=Math.pow,u=function(e,t){var n=s(10,t);return o(e*n)/n},l=function(e){switch(e){case"in":return a;case"cm":return i;default:return 1}},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.Ud.pixel;return t===r.Ud.pixel?c(e):u(e,2)}},,,function(e,t,n){"use strict";var r=n(2),a=n(75),i={baseGroup:null,blank:!1},c=Object(a.c)({name:"canvas",initialState:i,reducers:{setCanvas:function(e,t){var n=t.payload;return Object(r.a)(Object(r.a)({},e),{},{baseGroup:n})},setBlankCanvasSettings:function(e,t){var n,r=t.payload;e.blank=null!==(n=r.blank)&&void 0!==n?n:e.blank,e.width=r.width,e.height=r.height},reset:function(){return i}}});t.a=c},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(84),a=n(75),i=function(e,t){e.stack=e.stack.slice(0,e.pointer+1).concat(t),e.pointer=e.stack.length-1},c=["zoomValue","dragInProgress","hoveredLayerIds","dragSelectionInProgress"],o="_history_snapshot",s=Object(a.c)({name:"new-history",initialState:{stack:[],pointer:0},reducers:{addHistoryFrame:function(e,t){var n=t.payload.layers,a=(n.zoomValue,n.dragInProgress,n.hoveredLayerIds,n.dragSelectionInProgress,Object(r.a)(n,c));i(e,{layers:a,ui:t.payload.ui})},newUndo:function(e){e.pointer=Math.max(e.pointer-1,0)},newRedo:function(e){e.pointer=Math.min(e.pointer+1,Math.max(e.stack.length-1,0))},serialize:function(e){var t=e.stack[e.pointer].layers;localStorage.setItem(o,JSON.stringify(t))},restore:function(e){var t=JSON.parse(localStorage.getItem(o)||"");i(e,t)},reset:function(e){e.stack=[],e.pointer=0}}})},,,,function(e,t,n){"use strict";var r=n(73),a=Math.sin,i=Math.PI,c=Math.min,o=Math.abs,s=function(e,t,n,r){return{x:e+a(i/2-n)*r,y:t+a(n)*r}};t.a=function(e){var t=e.width,n=e.height,u=e.x,l=e.y,d=e.rotation,b=Object(r.a)(d<0?360+d:d),f=b>.5*i&&b<i||b>1.5*i&&b<2*i?i-b:b,h=a(f)*n+a(i/2-f)*t,p=a(f)*t+a(i/2-f)*n,g=s(u,l,b,t),O=g.x,v=g.y,j=s(O,v,b+i/2,n),m=j.x,y=j.y,x=s(m,y,b+i,t),w=x.x,A=x.y;return{x:c(u,O,m,w),y:c(l,v,y,A),width:o(h),height:o(p)}}},,function(e,t,n){"use strict";var r=n(7),a=n.n(r),i=n(10),c=n(1),o=n(247),s=function(){var e=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get(c.Gc,{isCache:!0,headers:{platform:c.t,market:c.t}});case 2:return t=e.sent,e.abrupt("return",null===t||void 0===t?void 0:t.response);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==c.gg.packages){e.next=6;break}return e.next=3,s();case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,o.a.get("".concat(c.C,"/resources/").concat(t,".json"),{isCache:!0});case 8:e.t0=e.sent;case 9:if((n=e.t0)&&Array.isArray(n)){e.next=12;break}return e.abrupt("return",[]);case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.a=u},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return u}));var r,a,i=n(4),c=n(1),o={adjust:{name:"Adjust",type:"adjust",tooltip:"Adjust",icon_name:"adjust-editor"},adjustImageEngine:{name:"Adjust",type:"adjust_image_engine",tooltip:"Adjust",icon_name:"adjust-editor"},blend:{name:"Blend",type:"blend",tooltip:"Blend",icon_name:"blend-editor"},color:{name:"Color",type:"color",tooltip:"Color",icon_name:"color-editor"},effects:{name:"Effects",type:"effects",tooltip:"Effects",icon_name:"effects-editor"},gradient:{name:"Gradient",type:"gradient",tooltip:"Gradient",icon_name:"gradient-editor"},texture:{name:"Texture",type:"texture",tooltip:"Texture",icon_name:"texture-editor"},font:{name:"Font",type:"font",tooltip:"Font",icon_name:"font-editor"},textStyles:{name:"Text styles",type:"text-styles",tooltip:"Text styles",icon_name:"text-style"},border:{name:"Border",type:"grid-adjust",tooltip:"Border",icon_name:"stroke-editor"},outline:{name:"Outline",type:"outline",tooltip:"Stroke",icon_name:"stroke-editor"},shadow:{name:"Shadow",type:"shadow",tooltip:"Shadow",icon_name:"shadow-editor"},transform:{name:"Transform",type:"transform",tooltip:"Transform",icon_name:"transform-editor"},position:{name:"Position",type:"position",tooltip:"Position",icon_name:"transform-editor"}},s=(r={"duotone-effect":[o.adjust,o.effects,o.blend,o.color],"color-toning-effects":[o.adjust,o.effects,o.blend],"rainbow-effects":[o.adjust,o.effects,o.blend],"magic-effect":[o.adjust,o.effects,o.blend],"sketch-effect":[o.position,o.color,o.effects,o.blend],"free-grid":[o.border],"free-grid-cell":[o.adjust,o.effects],canvas:[o.color,o.gradient,o.texture],"double-exposure":[o.adjust,o.effects],"double-exposure-effect":[o.adjust,o.effects,o.blend],editor:[o.adjust],overlays:[o.adjust,o.effects],overlay:[o.adjust,o.effects,o.blend],"stickers-tool":[o.adjust],sticker:[o.adjust,o.effects,o.blend],text:[o.font,o.textStyles,o.color,o.outline,o.shadow],"text-tool":[o.adjust],"lut-filter-image":[o.adjust,o.effects,o.blend],"canvas-effect-filter-image":[o.adjust,o.effects,o.blend],"runout-image":[o.transform,o.effects,o.blend],"template-collage":[o.adjust,o.effects],grid_cell:[o.adjust]},Object(i.a)(r,c.rc.SIMPLE_SHAPES,[o.adjust,o.blend,o.color,o.outline]),Object(i.a)(r,c.rc.ORGANIC_SHAPES,[o.adjust,o.blend,o.color]),Object(i.a)(r,c.rc.ICONS,[o.adjust,o.blend,o.color]),Object(i.a)(r,c.rc.SVG_STICKERS,[o.adjust,o.blend,o.color]),Object(i.a)(r,"photo",[o.adjust,o.effects,o.blend]),Object(i.a)(r,"color-transfer-img",[o.adjust,o.effects,o.blend]),Object(i.a)(r,"template-background-texture",[o.adjust,o.effects,o.blend]),Object(i.a)(r,"template-background-color",[o.color]),Object(i.a)(r,"sky",[o.adjust,o.effects,o.blend,o.color,o.gradient,o.texture]),Object(i.a)(r,"featured",[o.adjustImageEngine,o.effects,o.blend]),Object(i.a)(r,"fx",[o.adjustImageEngine,o.effects,o.blend]),Object(i.a)(r,"blur",[o.adjustImageEngine,o.effects,o.blend]),Object(i.a)(r,"artistic",[o.adjustImageEngine,o.effects,o.blend]),Object(i.a)(r,"popArt",[o.adjustImageEngine,o.effects,o.blend]),Object(i.a)(r,"distort",[o.adjustImageEngine,o.effects,o.blend]),Object(i.a)(r,"paper",[o.adjustImageEngine,o.effects,o.blend]),Object(i.a)(r,"colors",[o.adjustImageEngine,o.effects,o.blend]),r);!function(e){e.remover="remover",e.replace="replace",e.eraser="eraser",e.crop="crop",e.duplicate="duplicate",e.delete="remove"}(a||(a={}));var u=[{type:a.eraser,tooltip:"Eraser tool",icon_name:"eraser-editor"},{type:a.remover,icon_name:"removal-editor"},{type:a.duplicate,tooltip:"Duplicate",icon_name:"duplicate-editor"},{type:a.delete,tooltip:"Delete",icon_name:"delete-editor"},{type:a.crop,tooltip:"Crop",icon_name:"crop-editor"},{type:a.replace,tooltip:"Replace",icon_name:"replace-editor"}];t.a=s},,function(e,t,n){"use strict";var r=n.p+"static/media/upload_bg_img.5b1afbdf.png",a=n.p+"static/media/icon_text.7c5308a2.png",i=n(1),c=function(e){var t=e.width,n=e.height,r=e.imgSize,a=e.border;return t<r.w+a||n<r.h+a};t.a=function(e,t){var n=new Image,o=i.Pe.border,s=i.Pe.i_small,u=i.Pe.t_small,l=i.Pe.t_medium,d=i.Pe.t_vertical,b=8;switch(!0){case c({width:e,height:t,imgSize:s,border:o}):n.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAvCAYAAAClgknJAAAACXBIWXMAACxLAAAsSwGlPZapAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAWFSURBVHgB3VrPbxRVHP+8N7O7pSBdAlWJFRbFH0AiWwQSPEg5qolIMCSQqPgXSPCsTKIHLyZ68wZojJFIkHBAD8bqpYcaupXYA2qc2nqQJrg1adnu7rzn97vTmZ3Z3dmdbbft1k8znXnzZma/3/f9/Z0RiAHrok6jp/SKMIw+7ahxwLSt08JGB3FtjH4DSKOMDI9PHBLDce4TrS6wvnQuQGurwVQempiQ2obS43Scg9B5FMyc9abII4rIEjIGnKyA0SckslrptBagsUt4ALbU5RMvHU7msFQGrC+KZyHkRbQBUwJJE/n0JuQ2pcT45o2yT2ud1bS6DYhshXzZFIMnBqOlbTa9HcZbgEYEkdiQ4r1AKkHHSdCe1lVWLmF1GOKNiK+caCnqxkjLkjpH+3Noh4Ffp0pD2gCpjsqiJTQ6hZ6kgBQGJqY0FsruOSnk0Wb3+AtzbVQP0QK+sWWTyvY/EIfwzqM3ZVSkuFCCz0SRttu2zgVtzTpjfo0gAzdG9QVaSYuPH3vIQcLAmsBjgDFfICamNcoKyP2h4KjQpTa0cYw9obw2ojMe8RuSes2Ir0VvD7B3QFTsbdGugshAOBXnIg3DGUKXgpnY2S/Qm2w4PcTxSUKJNLoY/X3As7tl48meclaSceTR5Xj6EYFDTzRyxKYtDagc1gEOkxSeyYSYyLMRm8VEwjbL7fnyH34BfqRt5l8S8Wbg+X3A0X1YNjT9KRU9v2Mr8LO9OBBudDYpTOdvjCpWo1i2cHUE+GqkOmYmJqbJ7S0ALxzAsnB/QeF+s/ki/1+UglaTvPOsw0YMTEyFiQ+Cz88tYPWgUVH9CgOKI1wM8EpHgSXw029YNQjTHON9WxLoJmhdqqqQEJRnxMDegRbzjyI2WN3su65aLkn15hI27yrZKLtSBdnyHibw4O7GqnLyiOuRWoHvvXmrXh139rtOIKY3y3tFU4WBdlzp2y+7Buu50W1E9IsHWnsgXuXPvicXPNF4fnIG+ORb97nnjwMbU00f58cuPzKQK/2Hkrn0jm0KK4EPr9Pq/x7vWpbGO6fqmfib1vy720Sy0h9bZxKVIieoNzZWCBw74hLPYGmwtKKgZdVmfQbiutJ2wWoWFTuagVXtasR9ghsIiwiWlDZigHX5m1suYYw9A80N770rWDKYcbaxuucb1QTUZ8B1pc1LbyaaCfKIZ3BeNEnu8ORzYZ31jDZ47VLw6bBrE5kHq+esU8l6CbhZaXQ5dpcIef9KY4Jujrk6fvBxN3+fmXVVYL4DqQU/g73TB68tnhAilD37DLArTUG1TbwHnrs5hhWBtxBJat94SZwH34g5KxXcbatBHOJXC6kKAwhJIBR+pRHugDHn3UK8h4e3mCE5hxgoLKiQBNgQu4l4xvat4bHPgEUtwHtzWJOGVjsQjtoVHFclcAlpqni6ukPB0DLcIK4GMmpRFEvoelAUzgTHvgS00F2vPgx6p7A/OPYZEEpksD6QCQ6qNiDFfqwT0JuejHdcZUB3d4sxCFmuqlHTOpKTs97mldGqYFtNqSpRnq0e+1DXa29k4jvRcVsuamiwy6bppxPVQHY6YSVM1KVjrx5xW4drhdeHahnQlzlv80ahAuDOdDFL6WrDnJLbH1zqrVb3jTsc3AEJ1cUaw08OJI4Fr6urYO78VbpHuy3oQmgpzj613bwcPFdnxI7W59HJV48dgoaw5wtGnZ3WMbBnIHlprqDPF9pLK3TEtmzwW0p7hogvGoODu+q/AIgsgm+MOhZNvxsxzQ+yBZV3jqP+5HqaS1Ku6oIGVgv3m4tyVhhyvy5TVsnBk+NP8zQmT28kB6O+zWhaxfMbTNPAcT7WcGbjELlUWJ+TAzFlhppW5EjkTureUmClVk/B/Cjq24v/Bf4DUz8WxJxscIYAAAAASUVORK5CYII=",b=3;break;case c({width:e,height:t,imgSize:u,border:o}):n.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHQAAABICAYAAAAnItHxAAAACXBIWXMAACxLAAAsSwGlPZapAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAiPSURBVHgB7V3vdds2ED/19XvtLhC6A7TyBKG7QNwFamUCO13AagaI7Q4Qqx2gaQaIKQ/QOB2gpTJALXcBX3EmGEPHA3HQv1Iqfu/dkwkcDiAOBA5H8AyQkJCQkJCQkJAAPVgyEHEQwX5naNLr9T5AQjeB82Fq6NJQDgndAi6O0lAGCXPhM+geMkOk1BNIiMbnsHocGJoI6TuWDg09g0qRLs6MUsGsr+eQoMYqjCJkSXtGKRNFOXoiz1gyGU37Unk2Ld8ZnjsnjwYK5e+Y9DH466SfT7yOrKCR5pTdkdph8zOYHagf3HZuBIQ1MYso27cGkotCUU9h03L6212PPWWJDhmvi9pIy1raSnTAyg1t+qm1BSQUho5gUyDcQBZZ/kSQkQfqKWwncpSsDNEe+hXJcU9yPe2UFHoeIfs1VjNJtyE0PINIYPMpPQ/UM/V0GlcoKbPEeLwW6pcUGov3sGR00col/Myuvwnwz6xjhi4MndhfF1fQNL5GUBlue4b2DT2HphE3wHire6SQu2/kDqHLEEZhBpHAan1zUSrqIdCUt+OROWC8NJ3mHt6eoRHjv3Vlo/8JXUhu54DLUWjOhSjquQnIvGH8wwB/j5UhRZ04+ZJCZ3gEmUS7ODvtt5aJRVenXA6NqT/0ZdgnoO8mGQrtb4nnF+eatnhPA2Xu2vbNJo9+pjC7pGjkqtFVhfbZ9QTCuI6Qp90P/sauQ2u59iXDdaRcNTZFoR9DBSI37Kva3P+j5JvAitA5hdo1l2+838Bi4ArUGiGxxsoTJV/Grpc2wLr4hA6FtGtYDBN23UedZRk79Wdzyu2uOxAXsHIN75lQfgiKehSyC1bkVQuvzxo9YjwH2vY6Zfba5HYOOIdCsemDrVFq61HUIe1DTwS+WpmXjP8v916wfR/aJvdG4M9gSVjH6zPyzUpTCk1NtObkIK9VE6g8LUuBMZpG9knI6ySoXtGRhfkWHqc92kIMYHadowHzk+atkUcu3R9dn0DzXl8q5f43wOWgCI1aXkDZtnl9uUNB1jJ8ub9C14GLgZzsKq8JL6gsUyv1jbI9t772oKzQAiv3owZnsAnAOJRYrSnUCfki9USWrf3FpFjpTc3UtikLyOAKvbLpA2yulbXcAld4GG7pJxY2DXYs0DaC1jZa7+6UJyzoh9b4Kye5MGW/dfJdl+NkHWvlOoyiTsP6V7Uuu1i5NEDGsEZsinM+QYmk0C1DUuiWISl0y/C/N4oWBJ2ScL1Zm3XmNiEhISEhISFhW7EWXy5WnzK4J9tepM/wV4N1bVtImblz3f2PdDYUybGwZUgKdYDV5w9n9j0tEZ0jegYbhOQpamIXHs8Tob3eGCSFbgCkAxn2fWsDn7OCGSs0cfLmikUQwrLlrqqdkW0AaMZuiI6vQEuA/TOD2VOIdyavvqeHykQFY/NsbGapQPnsTYmBWAQeuTlW8RTetMg9xYjvJvHxbK/vjNAlyp/2Ez1HPe499T8MJtvuG0/ZEnX9VR9mu0D/1+lo7/eYeEHZ8acBgW5DD1saWDB+7am7EsM3v4P6uAaEmdgGuASF4uOBsVIpg4ytI/Arkw6Zafr9kzxtx8fiaAVyvR/yYjV7lBiP92iVigsq1Jb/DuPRCMiBj0+mxCtRnfd9rEJLrB7tegqm6W0k8NGoyiLkUvrAysvt36XA5xsoI4/MQ9vOPvrD17xyOjFz2sBnj3Mn74EEBUyFfhja+ut2SPd2z+T1hPpp8D1lddby6Njon9Ay4gtsgirwxS2Q4gqdK+UOPTKlp64Q+A61Mi3/EFs6E0CMgUA8gxaZUsyEmW9gHN5a+Xx9LdBasVZeyerPWuqHtnyp40sMr2E8rhApeCckNyAz5zIFHj6SLyEAoR1nLF+tUJSnR2/ADFZmKpVBWaF7Nl3cvnCEPEUXocPBNqaAa47X5nqr3EA+32ZIM0QeKZPwkl0v6gXqs+txWyg6u7WYQPURk0/OxC0C1UFuipNERueuVW5NjTpCCtXu38bgb2C03NB+DatZg8fY07SV82SwGHhshD/CRR72je4HzKS0r528H+1vjQyqr+HoK/ZbS6Rkml1yrthl+XK1sQVWBe2GvcGHy40RNG8/PLgX7RM8NvQDVEqV5lhqb27o2BDZFvQF216t1JBCvwAdeGyBKawXc8dMWDA6Jlegtr94O6ZOe+iHlrGvDL2ASmmUjyArmabid7XMkEL3QQc+xa70ibXr+sy6jbovuhrhbWAxTNi1Jt4Qj0tECpqZqkmpdI+GLuzHT19aor9JyWMmM4NKsUGFHoemJKw2xy7PpM0wWCK4YXGsKMPjKmgU2nb/Y5gdWH1roYvMNp3cdNwYu3Z5uEVrFUx2AhldZPyRYl0jkAZJRn+EFEo3U6Bn64LVhn/IksewHozY9SF6QqES7BaFRxPjVi+lTZxr6qgnkjzn67K3jJ8s0pmthiXKo2n0HRM1rg06R+E0OHcFGa6iP7J2N0cRhj1FtbfE530pUecpyiEALtjDI/mEaeN+5LT1GGVn+VCQV/tkXTwEwcBHL9mpob7DT8q7FeRfWllE5BocYtMJM+M4wEqBtQOktDKoLEXt3LW0Z9vD97JPIUKhWogOelydQmntvMF4XHnkEVGnhRzjQ1aGOvwW40BKOGZy5o0B8TsoO/5EWQHx5OBXTsH4vbxOmRm08JFSR6jHWaBe6SnluBXKkDLI7XcfKEv5fyM72oKPPlqNDFcW+XN3QNvxWE0z1GGlIJDShhg2nBpyIQBekYK/b9vZFjMhBwWwPZQ5PYltYcsHtpOltyPkaD9t6y8rg/r90vJLcm5tHY1ptseE0Z4nd5IOXIsVq7WjjkUw6ep/OMBqXSJSx0zwyKEf9+SBKk6CUG6u/vLI0d/PPE9SQreQjnFuGZJCtwxJoVuGpNAtA7dyayu2xub9r66EhG3Cv7dPJRidMFkFAAAAAElFTkSuQmCC",b=3;break;case c({width:e,height:t,imgSize:d,border:o}):n.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAACQCAYAAADDc689AAAACXBIWXMAACxLAAAsSwGlPZapAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAA5TSURBVHgB7Z3vdds4EsDH+/b7KRUsXcEqFYSpIL4G1koF0VYgpYGztwIpV8A5aSBUGoiyBZypLeDWTgOe45gDEwTxZ0BKiiTj9x6eLWIwADEECIDgECCRSCQSiUQisXXOYEcg4iRC/L4Km7Ozs2+QOA6wH3dVWFQhh8Rhg8Mpq5BBYhA/weGSVYGMPIVEb36G/fG6ChvL8RGHiyq8gdqwOleVkaG6P19DIppdDrLQOHReGWkjSEct9so4TIOwl7b0Rjd+X8nca3F04VD8qDq+An++T7KaLtGgj9OOPOXIoH3hftPjjxLLPTWLSDvmAZdOIcin4GM5/a/fzz15XRiyOmrQlwXKmxvp5nx8xmMJG0UVLuFYwQEG5vRTi448kE/BlWpSWtJl6DasjZmnrKaBryN0L7DuAY4Ly4lkEAl2W/F1IJ87RyWWRhoybonxLBzlzHEYa9gRhzyKJj4Yv38NyLfug1X4owpT/qtDXXlmHFtCPRA8r8LLKryF7qBwgvGj+qVAL92S5nBMWK7SDCLB+v6oUwryIaiLHDl0TizyuacMS0P2ztSN7hY8SO9Bg9sxcKfiBPmsAzrXhvwcwuUw00xD5cRASydjYvc2sfU5/6F30SaSqcXcFcEtZGwclsyvzVtFHpC/D83beZoUqzeaQzewaYwNhPkSoU86H/1o/A6NBaQPTVaReqM5NgP/FUoQuYCwq8WG70K5DeyYgzUw37PNhYAbGIZpUOmgJnbw84tQLjN+b/2CO+QWPLcc+wLD2Bi/xygbucbeKrKeeo9n+RIHjKIr2StL+jkI8hHoLowkVwF522j30pDJpeXV0mQhvQcN9jAwdteQFaU0H0Eetnnw1CFLxl2YZTHPBd3zYJ/edZ86imWfjwtpbdnWBVFXRvesHOz3ug3UK0FboRqE0QLDJbSnJNRj0Aj2EzTd5KsqTKB7n/xD8lTMoZfOj35PoXuu7yP0/nhwOxQYfpLTQli2vmvRc4e+oWvRQweP+weHQct2olUdMyEIwdrIN9soD3YNXGC9XCpBstByeGAcJdb3JKqUfEg+EAnW6903aH8SdcdlygI6Ogbm4xO032tJb4F72Fy4sx0dx0hV4TRtoXsj3S/vpfdENpS+IWFVpX2txetLpJt93mv3Ocg6eHa1L5tX11bwAzi2hw2JSJKBT5xk4BMnGfjESYOs7UCDM3217XgeGiQSiUQikUgk4tnrWjQ/OdF3Dv6e3Dbsln1Pk8i4ufb7eHbyHylpoePESQZ2gPXGv1ILb+AISStZbl5Aez/WCzhCUgs+cawt2Nyiou9AwAG+LHxsW++uyrmFcvT2z4FdXx/9zgm7e5MzbFwe2PYulSjzZWHqpb1M9HbBjUfvDCPem8Vmb7Vrj9XCtRcK7XumnXjKMOJyrx1JSxTUF+uier9Gt/cC5PN9h9J91dg1xCyQgV7wiwi90l2NJYYvnhHG+dxYYPdF7sEGxvoCK4UqSM75NgPFoazen/SBBIyrKBuXO9C79pS37z5namGjbRkYux4JpMwc5xSL7NUXdBuiRO4KONDVurTI0VWXReil4xPWl/P/JQpPwFEG0nnB5Ryj213SlVGpqgxm73KtxT0Gi0HuLPUw5/xVOVznZuoz819bZJS+AqWt12MIytDl98Lm1+paqHfu0GlrlYVF7kKqk+XnGKhcljMvmgl4sMiX6Lit8LmtfeeG3XPPAvl7403hQlpYLY3p18rmrKSjN6AzN3VaZMwrfQHx52e7GMUGRnt3mgfKYGvxuRZfGnEZ9EA6Dw6+cMU+KfThv5oeePUG4s0pgK0HySN1Eu+N30NXqcbG71XIdSLX5yePno0RV2A9MLzAiFmF1MB9fU6MYYDe0HyRr2rTR6SkrKZMBsMwz/NPkLEyfutP2syLMIP6bUd6Ue0Om9dfvK/7bHslS+qbYleIFhBsF05Mq9hWOSw8LYdyD/C7R5bKm1fhHdSt+8bWjUsN/A+hnOmb4g72i8hINmMO9P66Ld8frfri2x55yJtC3dp9ZaT1h8I8N6mBXwrlzK5qpy2a72Ot+z7K3tjruFOCYWyM369AhinX6drpHKtAY6DXVaAWToG26Cqj62RQG9oPdkeZQTd72PXyWgr05hAuSwtLvDnaDb5Mjd0pykKgd+rRN0LPiNiRxjbyDo1ZbHrM95Dnery0BZNxC3TP62gBYm4cXsF+WBq/aZTpc/1LCxtmRb63iG6M3xk44O7dHBEvPPVFx805/UofIPIFQItKoe5+A7FgeCUr5+BaHSpRtpKVC8rSwiFjW9OmVnqplfUd2hf/5w6duUWW5vpqFW+GWotD+7yWWGC7vmYOuczIf8bHS2ymR49unzioCyCq53AZIpYLod5cUJYWDhmX15oQhSdfW7drMjfSjDHu4YBiauixreJJkPmdxq4hpsIMSSaP0JsLytLCI0cGWaKca0HeeUCHbWUtxjh0MVxYdIwx3sAFSqd6aH9uSwVfOjKmY3MMD8Q6egVlaSGQH3M5fT43chCCbtf/jw8SPOkm6O4J18L6yvlcXL1T0NfHmUMxdV16otf60hu2fVlsDvULItjsgIjyueHQpe/MEPvZMNL1ri+Lnv7ngz1aWuIwSZvuTpxk4BMnGfjESQY+cVyjaDVKVhz/t/YSiUQikUgkEolEIpFInDxH7dIf64fltChDCzEfIXFaYLODI/g+0nMlrUWfOMnAJ87R3YOx3tiutquOQNvCYojSPuO3Hj051G8B0NsFGevZQP2Ww8cq7QdI7B+Ub+ktHOlp96XEN0iJHn8jiR2BzabvTDPUR+3YU7CkNbe0KrcMI463uViYQuLHEDuK1gxHf8dC3UQOif0TY2Bse9DJQAA2t4MCEvsn0sBlTGvnNPmxt+JnMU3CtgtA8eiYN/urN/6OcsD1XObBmfon5BzFwp+mjmPi2Rm4Bxv+K3VjcVA8FwMP2RGawRHzXAzcenMe4lCOZaSukQ6KZ2Fgw1nLRJqOL4acfx7lVOk5PWxQHvDeRbTiOf+lVz4/QWK/YONhJti6eImz1FaysoD8TJsDy9z0JraLsRAxs8SNjGO6Dw0y8qVFJsf2A405JH4chjHIeGvNiHOLvPnAQRm7xK7bh/Sg4RDgrto0WoF+hzAuHxol68vgBDjqTXcmmlHuY96G7JsukUgkEolEIpFIJBKJRCKRSCQSCYX2CDD4RZZT42d4HmRQb73ZwDMjvR984iQDnzjJwCdOMvCJ81wGWT8MrL8E5No5g2dn4U012HxN6CxWx08WZQXvS3rDv2m76Uw7vvAUJOf9TPrGN/p/gbJvJGXaBrhMy/+dlj9i872gmD3OQbS8boxNeGs+Jt4+S0apAtU8fSmU6uy2Cn9X4aEKX6vwnypckgx6PgfFcfTF0XkVPrOeB/77WaLDVKgqkTal2T7VtnBUzBWGKXwGwfYXOTOUfwFsFjgn9fJ36YhX5Zd8lq7E8J5qCufYbOp7sATFLcva9JDhplq5XHqoTDlKjIxNhc41xQVXUo7djyjq3w2843S5Fm/6vXBWELYNfGHkH/Kl4etZQgZeanoKls+08xsbMl89eVF4qZX9b6x7wJx1qfJTT3fLMreWej3juiTIkJ8NHSMu560mc4khI2O7GyQmAfmlZrixR46Mpy6EtUcGI/Ofa2mmDpmQgTMM9C6GHqrMN5Z41XJLlvuK7otZyX5lfb8ZcW+1vN55yqTXAV1M5xA4iTJUYZrsWJP1OjVhef2LnpeWeN3Awfy1dNfaRTGyxHsNLAXrVlWwroUj/gPHd1qlRV6d89iip2Tjem8/mrzyOETl8wqX0srAHr4isb6nPBbEEqcbWGwM48KZW+K3ZWC9/LeWuHOOa7XIHnm8teURSHOu1d3TRe6bB68gzCv+G+Ppdcl/c/R/fXMOQniz+gejTLuARsXfPfFjrUz/hv55qHNYsfG8gdmAxZ+Ibx78lycOsPkaJkGDihcghwyi0n+DHvlbUHoyGADWA8QM7Hqo8n/1JFcGXsEw1EvnVKdvI9KptzIydcBn4A340Vtf8D4h0BGbv4sMeoC120K61bjKpJqKa1WBjv8C2yHjv1SmNxBH6wY8ZCVLf4eHBkN9XBx888T5jO+jz7d5J1Abl1hB3d1vHOI52C9o1NL0LbtCnQOVYwnxbNQ/vQ1M972qYlRX+72He6IQj57cI+UhMo1CGex9dR5zlxDf73zTkA3/pcEiSJYhHVBjofOhDFcD9Ax+2KDcGuziDfhYnaori+pJeIqS8c8lDOML/6WLPpckMAZKj4eguYe/gYG9wVADL/lvjtt39SfWyXPFjH9eQ39C3Ts1pdwaUbeyDdTGoR//wnot2gk268zmUuUnLgvFzVCwBInN2ndQsOS51AQEaBPsO5QtdlyhY/KO3YUOKksW0HepyV87ZJzzYJ5DK3JHerWYMNFkbx1yL7FZI15wulYr1aY4FLdEwzc1tufbj4sd6HigYJTtBiOWKicgANvOTdRJjS0y1CL1NWvbipNu4JkmO8PuWm2O7fXhNTrm1RheqiyU0VjvmRFeYLMcWCpZhy5lHP1BwCXr0PW91urjwVJn5jLswlG219h+qOEfdWOkgTnNyKhsZZgS7f4wxg49uoEzbK5iU6f51KdAz6IJyp4mlZo+9XhwwbrvsFnw/yfL3Hrye5x2YX3BPBjnrudDcf9Dh1GwMfIDdutQrweKp3Vo55q1rlQVYAKRYNOqbI/dCqyftfoM0TKwdmyJ3QtFPRPOBeXyGphlVMtTi/96IMP+xjI5H/tvIE9VdpdOMv4M/at5up4lNheMWM/OfHRwho+Zsqc5SZqs+qOMcG6m66MzFqzvYU/5wBb8dmxL5y7KtldsLTgxjLTp7sRJBj5xkoFPnGTgE+fQ9kXTiJC2me5slJxInBT/B3kR0i9GEUWqAAAAAElFTkSuQmCC",b=3;break;case c({width:e,height:t,imgSize:l,border:o}):n.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQgAAABYCAYAAAAJD2m8AAAACXBIWXMAACxLAAAsSwGlPZapAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAA+rSURBVHgB7Z3/ddu2E8Av39f/q+8EQSeIMkGZCepOYHUCuxNYmcDKBFInsDMB5QnsTEBmArsTXHkhGEHQATjwh2zL93mPzzIIHA5H8AiAAAGgKIqiKIqiKIqiKIqiKIqiKIqiKIqiKIqiKIqiKIryVnkHijISiDhr/lx7wU/v3r37GxRFeds0DsLgIRUor5ZfYiebi1s2fwrIp7bHt+a4b4675ilSg6Ior4pfYBqMPYouoHE2m+bPZ3UUymuEWkd+2Juvy9SCwPFZc8ZWXj+n2sU41XJJ+B8cn0VzlOokFOXl06eLsWmOu8h50xw0mv17c8wjce4bJ/GpaaY9gKIor49AF2ORkZ6aZhsMU2lL4nQ41ab4qZZLwlSDlD+wgziLxpjL5i+9ETFeFPp/3RyfuPTWeRRe8IPb6nDi0N/3zfF3c/4JEjTpqHVDrZzfmuNXG/yd5Ns8asiAcZx1I2PrnKdW1Zmjp5vfVqJzH5p8Czi0+62bn43zAXYtvn+bg26Au7FbeAk7PIwx8MfUiS4PKtM3SZmsDGP/NYE4BRP8JLXZGHpGZJOd6XrSdfXr+CO0bxgfBtW7oS0IX+HmuEeeIpCmYOIunXMlc94kdLhqjkdMUzbHOcjLd5Dehs9RNti7xglaU8i34Ap77kpgi0pqB4w8aTF8vUazQ5NuIcyjSpUJ4y3fqP4CPaW2qDCjDlrZdA1WKKvjiJn13M+sZAQuoCdWeU7xMhCfdRDNcYFhTERWhfmsUVBhmXRlQs8QVzAiyFf0cww76xAVJuyAAQeBrSPKzWueUUbKt8R8KgzXl9EdxBR6evKpvkkdg88KcsGRHYSVuQwoOGPicg4iVbENI+cKh1Fh+uYYk+RTKMPefSs6R4WRGxd5B9EXquhGUL459r8punzORrTbOmKbCocRfNJj23oaguHkTjoGEYA8FfeUpIu0gTTiJwuBrUNbBk5T/4v6eTW0b15MQD6Fl42sjwPHCurm2Doyi0A8utg0hvEZjoNvB7KBYeJR2M1Idqjt77nN04fCguNThK3UN4H0xIM9ZvYoQvlYez94Om6d/7m020CenJ7cGJyvJ0C8XlDX4WBsAtuHK3dPddfVfetIcbvxps5um15jPzhBC8LK5VoBKyZekfB6FbbNKvLOM/RaIRj32kvkWy2xZuB1pEwxSmTGWazOy0i6AgaC8SfhY8QOsS7ZTSCvVAtiFchrEcmriJQtlGaN4Wsbssd9JJ9BbzHIXoE8Kdxk6lnhYT0/C8QzCb0WiAPeJOJ0DoIr/JqJF3MQG2QqgSAfItkKiaQ1gfhBPQV5zQNpSxhIpByPQjuUgfQFEzfmIJaJfEI2WAXiL/rkY9OGnPJ5IH5vB4HhOrwUpL2UpA2U5xKmBqdzEFyBSiZeyLjSi/PY13DYPt0rTFwcJz6rJyacmJM+VBlE6SNyQw5C+mZiFrAj1+ILOQjRmAq2LQyf20Dcsm8+kbxCg+VDHMTNBHree3G4+2kJU4Mv10H8IciDS5s1uQX5p1QViMuR85o0dCMuYADIO4hcO3DX656JF3IQhTAftqkciMuR8+ZjFpAR6pqI9GLSPva1R0JP48ThHi6U7zkOfHX+HGsxCMOE/QtCmgGVr4JoXGX5BnlwTy+D8qf6nTAe2EE/rlwGxkdiP5cNEya+Gd0JYwkeJJFw4AQlgJ/25uL/DiNhHZZfV54y7NHpycUvnN8b5vzMhlfYtmSpJUOO/izHaTyXg3jPhNUgQ1oJzIC0P7AXp2ZOSRzEU4+R4ZoJew/jk2uHmgsXVrQajkNWmSzcA+P/MB5cPemj5/eYbFtPY2+8DLRvCelNBw0wd05jnbqGR3cQyE+fJqQDck/CeIP67iMw5DWgEseAsle/GyexhLiT8DHQrqwmRxF8O/ccLYhQvzy3+Z+iZsL6OI2+jmYsByXuemWQpVukS/VcTrBmwvrY+1c4PmPpeWB76yRo3cUX4LslIS5DTuKoE6Vs62HBnNpO8HWemgn7ABkE+pDSLwnR4JLJLBfX/61hfLLsAPx4w9NUC8wE1EzYj7GhTJ3mQtl9qZmw+Uh6sl0VW98uu/9xt1ivW7jF1mloncRXf3zkaC0I+xSi/o9hTk8xY5AzYJE5qsu1drYgZyGNGOl69emzpjjDvNenCyZsCr1E2JvAv8GoPMm3Wx3Ir3IlRiuX1bNmTi1AyFA96YZvDpopedkcn5qDxlg+BfQ6cERHcRC4m2rKecJNzqiuFDuizRnxGgREWjsbkHOR4ZCWTFg9hW2gvZlEi8JsK4pzlBt4Xv5hwpYSx2fjcHMRNhlPdqmD5fS8yHDQnJ6DPg9g6xT3UD7QaVIHYd/hUkWkd+ah5tyU6w2+MGFnmFgx6Tg032A15L0ipPQlpqe8ktMa2lrJ5VJgB7pm3LTqGjJe4U7EigkzkLC3vTFD6yK4mznUpZyhbN7FhgkzINAT2wlVXJzPTHxyOpcgZ/gYGQZmq2E7gSh0kKIrTC9rTU71RX6yU9b0Ywyv/qzQmUhiLwjld4Xh1YGx1XQp1ui8v8d28s0ioZ+BgWB6VWJl7TDz7LCKpFkG8uo9oahP+oiOlS3T3JN9heFrG53diPysWrp2xolDtjvP1POC0fMCI+tMAnarHJlrbK8hN+lrhuFl4QXkgNN81borhGQdwBgOwjXeEFaJfMbmDEYAx13uTZQQt7XPZA7Cpsn9rgVHhel1PctE+sr53zDpSxxHT072VSQNOYJ7e1Qx2Vy5n+M1521zfDzWx2pt8zA0KCPlCw3yQD419OOvJr9bmI6+tt82x5/wsqBru4X+kC0+Cfr09ICoA+cM7HcFFkwcstuQa1pDq2ftBmLr2BaRdHR+DuEl/D9lQy44bguixMwmDI7QgnBk0dMp92lK3lfkGALpKc+cJxzFlfRrc8rNlXmB8SciZ4elIK+jtyCctEvM+3BMcKl7Qr9KIjuhp0SGC7tM3pG5wP6t5BJHXu4tocK2sq+t8r0GRHBEB+HI7BxFhXGj5Yw0sw7CObfAsC0f7blRuhSMXqyDAJktKFx8E+EzOggnfWxcJ7tMgTxiNisx8SCcSk9sl8xLx//WKHhgv+ndvXH35d+OGnpOACKr+2GNnHep/CaYIObrtYHDNyTUhdl48dwJNE9Wt96v0p4bxtajl2kMm1k9DUxge9z/Mncn+2nqOqcwcG4aXgAYaUEoSornWs2pKMorQB2EoihB1EEoihJEHYSiKEHUQSiKEuQ5Ns45VbbwMqnhULcaFEVRFEVRFEVRFEVRFEVRFEVRFEVRFEVRFOUN8aa/B6FMA+72QPkB7ccAiqIoBHpfhgLl1aJrMRRFCXKyazHs9/a6T63RTkT/gKIoWZzyYi0D+58DVwehKJloF0NRlCC63FuA/TowHPtrwPZtwEySbxcXen6VOyLX0N9jlN0pw2j54W7Ph0F2ea46oIwI8vtohFhG5PzYdBj5/QVoL4MVjrNvpqvv2su7suFVIv0aDzeMqWy4EehQ+W8brNySkXtvdTMJmeK3GE4ZKuRtLSqHJ/MsoH+VYZduD8uS0YvCzkF5XeAIDsJWLukOTVcwAE/fNbYbnxxUaibdzMYfrCPu35gktxTIrDCy4xgKHAS2dq5QBtkkubGQzbcUyryOyJkLdaM4o+6E9tI4tS5GDbvt1k1zFE741ov74CfG9mZaesFb2H2ByTgyiSXV/6bZebAdew8MtNvSuzsp1eB9/Ql329fPPR2/QbsxCp3/A3YbppCOptHxL0jjyiVZD8CXnX5fN3J/HVD2C9jf1OXBHt+b472XH5Vp3eRXh/Z0tTcqZ7+tI8Pdn/KSbOnbxTqiGyeI7HBr9SI+WL26DW/KJs2nY+01q4wEtlubdawF8f3WB114w8Trtl5zuYQeIN/ioadlcNs/L+8KA9unkU643xq5DMSrGB3YvSCR35uyCMT7CcTLvsRwWf38SmG8mF2Wnq3nETmbiB1uPDm9tvJTngnMdxBuxbgRxF8NrSB46CBIBxOJb7w8TYb8x0BlrzwdlgmZ1A1x95QsE3piRJaBBIyNuDJspDa08alulH48T46kDtxI7aa8MDDDQTCV0EBa/gwFT+jMfM8T8d0KfC3Mw02zYM5X7s0llOnrXXjnRQ5CimfnuXdu5umSHKsI5DEbWAce4QTReRAtbqX6KnmVZV+ZfXGCChjO18T5353f0olft4H0HEsQ0JR9C/tjOlMP1NXOb78FUbjxGt1uoR97YzoZdaAbe5jhCQ5Y6jyIlvfO7y3IcQemPsAwJDs6G+f3hfDhPAuk5/gGcihuYX/3LrttfVB6dwDRx0REzD2d+uLKoRZQsltqmXkyTmqwUh1Ei3uRcybT5MRNUcdOMk3eBeSTGic5WtmxHUugbtICxmNIM993pAtQ1EFY3MredzR6TGdxADV5vRZDn9eLqTGGY47Er2C3mI7YNsddIC7FM4FzY9ndlUOtgFR3j+OkWg+EOoiW787vnObyPCBjKmrY3ShbOxYwJgXIK7k7npHVtLd99c450I35Mdbnb+JTXiZwunZ+F9Cf2vlN07KXoOggpcUd2DpD+SvLC+d38rXYCLhPtSmm+v4hiWS7O4UTlPvkLJzfdwPXN2xh9/Q3GJj/kCmnGCDnpHgrDsLETtoncW3//TFrDxJgO+vS2H9rCDePx8R1ZAuUTz82IKNA2fRx1xnWPVoyrgOOjhswzmgPO7DrvtFZpxw8ttO8165drBzXAV9LHhR9X6sqzwweThIyGfGJG+RnUtLrrGsv7iUM17EUpll5eV8l5Ff2CM1WrPCQq0Bccjb3XtwiEO8nAb2S1wbzZm66cyWqiMwLJ+5evICcIiDHrQeD1uS8ZE76o7XYTvwx9t8a2icN/aU+MDWnP7qvFrGdDedfbHpqd31seh1KTwz3ZvvSyOjtIKBdP0BsJR93RX4tRg1tM9/Vs4D9ltNnrl/N2MgwMinPbg0CCGSSjJ8Dok2cd0wZ7r28SM532F0fyu/S5v0EO5t/4losyK/F2ML+GpVz7/xtI+tPRs69J57scOfI6V7LurI+6nqMVwamV3cumTSXKF9l2MsxBPQTtSBsOnp6bVDOKiKrcuJ9QNlqyEccvppTumKyxP2yFol8K5RBMmcDdUOMtDKUV4C92CXyFW8eSGNsBaqYdHRzTPE9CLGDyNSzSMhw0xobtsDDroS47JixFiOif4nWCaHQQThyF8hf80cbnpSRkNPpt8QTX6T1ZvbFsBfSQNtMFH9dyEv3Yr8o5OhJPEn1xP0uxm9uumOW3Tqdrjsx2lexXLlD9Ldy6Khh5K92KcqLBZkWhKJ06DwIRVGCqINQFCWIOghFUYKog1AUJYgu1lJ+frRV93xQFEVRxPwHR/4dhSuwFfcAAAAASUVORK5CYII=";break;default:n.src=i.vh.editorOnly?r:a}return{phImage:n,padding:b}}},function(e,t,n){"use strict";var r=function e(t,n){for(var r in n)"object"!==typeof n[r]||Array.isArray(n[r])?t[r]=n[r]:t[r]?e(t[r],n[r]):t[r]=n[r];return t};t.a=function(e,t,n){var a=e.find((function(e){return e.id===t}));r(a,n)}},,,function(e,t,n){"use strict";var r=n(0),a=n(57);t.a=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Object(r.i)(e,"mouseover",(function(n){return Object(a.e)(n,e,t)})),Object(r.i)(e,"mouseout click dblclick mousedown",(function(){var t=e&&e.getLayer();t&&Object(a.f)(t)}))}},function(e,t,n){"use strict";var r=n(29),a=n(11);t.a=function(e){var t=e.phImage,n=e.width,i=e.height,c=e.offsetFromFrame,o=document.createElement("canvas");o.width=n+c,o.height=i+c;var s=o.getContext("2d"),u=t.width,l=t.height;if(!s)return Promise.resolve(null);s.fillStyle=Object(a.c)(a.b.paColor71),s.fillRect(0,0,o.width,o.height);var d=Math.floor((o.width-u)/2),b=Math.floor((o.height-l)/2);s.imageSmoothingQuality="low",s.drawImage(t,0,0,t.width,t.height,d,b,u,l);var f=o.toDataURL("image/jpeg",1);return s.clearRect(0,0,o.width,o.height),Object(r.a)(f)}},function(e,t,n){"use strict";t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n=e.hsl_index,r=void 0===n?0:n;t.index=r;var a=Object.keys(e).filter((function(e){return"hsl_index"!==e}));return a.forEach((function(n){Object.keys(e[n]).forEach((function(r){var a=r.replace("hsl_","");t["".concat(a).concat(n)]=e[n][r]}))})),t}},function(e,t,n){"use strict";var r=n(1);t.a=function(e){var t=r.Tc.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16),a:parseInt(t[4],16)}:void 0}},function(e,t,n){"use strict";var r=n(317),a=n(1),i=n(0),c=n(68);t.a=function(e){var t=e.stage,n=e.baseGroup,o=e.canvasSizes,s=e.canvasColor,u=void 0===s?a.th:s;if(o){var l=document.getElementById("stage-parent"),d=o.width||1,b=o.height||1,f=Math.min(l.offsetWidth/d,(l.clientHeight-a.ub)/b);f>1&&(f=1);var h=Object(i.db)(t),p=h.width,g=h.height;Object(i.Lb)(n,{x:(p-d*f)/2,y:(g-b*f)/2,width:d*f,height:b*f,clipX:0,clipY:0,clipWidth:d*f,clipHeight:b*f});var O=Object(c.a)(u),v=Object(i.db)(n),j=v.width,m=v.height,y=Object(i.x)({id:a.x,width:j,height:m,fillLinearGradientStartPoint:{x:0,y:0},fillLinearGradientEndPoint:{x:j,y:m},fillLinearGradientColorStops:[0,O,1,O],fillEnabled:!0,fillPriority:"linear-gradient",name:"rect-gradient",is_settings:!0,layerId:"fit-background",colorRGB1:u,colorRGB2:u,strokeWidth:.5});Object(i.i)(y,"mousedown",r.a),Object(i.h)(n,y),Object(i.Fb)(y),Object(i.k)(n)}}},,,function(e,t,n){"use strict";n.d(t,"b",(function(){return o}));var r=n(14),a=n(75),i=n(434),c=n(76),o={title:"FreeForm",iconName:i.a[0].smallIconName||""},s={eraserItem:null,activeTexture:null,activeColor:null,cropAlign:null,cropTemplate:o,cropOrientation:c.u[0],cropAttrs:[],userWatermarks:[]},u=Object(a.c)({name:"batch",initialState:s,reducers:{setEraserItem:function(e,t){var n=t.payload;e.eraserItem=n},setActiveTexture:function(e,t){var n=t.payload;e.activeTexture=n},setActiveColor:function(e,t){var n=t.payload;e.activeColor=n},setCropTemplate:function(e,t){var n=t.payload;e.cropTemplate=n},setCropOrientation:function(e,t){var n=t.payload;e.cropOrientation=n},setCropAlign:function(e,t){var n=t.payload;e.cropAlign=n},updateCropAttrs:function(e,t){var n=t.payload,r=e.cropAttrs.findIndex((function(e){return e.key===n.key}));r>-1?e.cropAttrs[r]=n:e.cropAttrs.push(n)},setUserWatermarks:function(e,t){var n=t.payload;e.userWatermarks=[n].concat(Object(r.a)(e.userWatermarks))},deleteWatermark:function(e,t){var n=t.payload;e.userWatermarks.splice(n,1)},reset:function(){return s}}});t.a=u},function(e,t,n){"use strict";t.a=function(e){return new Promise((function(t){e.toBlob((function(e){return t(URL.createObjectURL(e))}))}))}},,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(6),a=n(17),i=n(9);t.a=function(e,t){if("reset"!==e){if("fte"===t){var n=Object(r.b)(i.qb);Object(r.a)(a.a.actions.chooserAdditionalInfo({hasFte:"add"===e?n+1:n-1}))}}else Object(r.a)(a.a.actions.chooserAdditionalInfo({hasFte:0}))}},function(e,t,n){"use strict";n.d(t,"c",(function(){return g})),n.d(t,"b",(function(){return O})),n.d(t,"d",(function(){return v}));var r=n(7),a=n.n(r),i=n(10),c=n(6),o=n(12),s=n(9),u=n(29),l=n(47),d=n(67),b=n(0),f=n(103),h=n(55),p=n(1),g=function(){var e=Object(i.a)(a.a.mark((function e(t,n,r){var i,c,o,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t>n?t/r.width:n/r.height,(c=document.createElement("canvas")).width=t,c.height=n,null===(o=c.getContext("2d"))||void 0===o||o.drawImage(r,(r.width-t/i)/2,(r.height-n/i)/2,t/i,n/i,0,0,t,n),e.next=8,Object(u.a)(c.toDataURL());case 8:return s=e.sent,e.abrupt("return",s);case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),O=function(){var e=Object(c.b)(s.c);if(e){var t=Object(b.db)(Object(b.N)(e.node,"#".concat(e.layer.id).concat(p.zh))).effectType;Object(d.a)({effectType:t,isStageBatchDraw:!0}),Object(h.b)(t)}},v=function(e){var t=e.effectGroup,n=e.activeLayer,r=e.settings;if(t){var a=r.cloudType,i=r.textureId,s=n.id,u=Object(b.R)(t,"#".concat(s,"-texture"));u&&Object(b.Ib)(u);var d=Object(b.R)(t,"#".concat(s,"-color-rect"));["texture","cloud"].includes(a)&&d&&Object(b.Ib)(d);var f=Object(b.R)(t,"#".concat(s,"-cloud"));"cloud"===a&&f&&Object(b.Ib)(f),Object(c.a)({type:o.l,settings:{brightness:0,saturation:0,contrast:0,cloudType:a,textureId:i||-1,blendMode:"cloud"===a?"normal":n.settings.blendMode,isPremiumTexture:r.isPremiumTexture},id:n.id}),f&&(n.settings.contrast&&Object(l.b)(0,f),n.settings.brightness&&Object(l.a)(0,f),n.settings.saturation&&Object(l.c)(0,f),Object(b.Mb)(f,""))}},j=function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i,c,o,s,l,d,h,p,O,j,m,y,x,w,A,E,k;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.settings,r=t.effectGroup,i=t.layerArr,r){e.next=3;break}return e.abrupt("return");case 3:if(c=Object(f.a)(i),o=null===c||void 0===c?void 0:c.id,c&&o){e.next=7;break}return e.abrupt("return");case 7:return s=Object(b.db)(Object(b.R)(r,"#".concat(o))),l=s.width,d=s.height,h=s.x,p=s.y,O=s.draggable,j=s.scaleX,m=s.scaleY,y=s.offsetX,x=s.offsetY,w=s.rotation,v({effectGroup:r,activeLayer:c,settings:{cloudType:"texture",textureId:n.id,isPremiumTexture:n.isPremiumTexture}}),e.next=11,Object(u.a)(n.url);case 11:return A=e.sent,e.next=14,g(l,d,A);case 14:E=e.sent,k=Object(b.s)({x:h,y:p,image:E,width:E.width,height:E.height,id:"".concat(o,"-texture"),is_settings:!0,draggable:O,scaleX:j,scaleY:m,offsetX:y,offsetY:x,rotation:w,globalCompositeOperation:n.blendMode}),Object(b.f)(r,k),Object(b.Eb)(k);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.a=j},function(e,t,n){"use strict";var r=n(1),a=n(53),i=n(11),c={headerHeight:62,headerContentHeight:30,shareBtnWidth:107,downloadBtnWidth:142,downloadBtnHeight:46,headerGradientHeight:4,stageParentHeight:"74vh",toolbarHeight:116,sidebarCategoryWidth:80,sidebarCategoryHeight:64,sidebarCategoryCount:7,sidebarItemsWidth:360,sidebarCategoryMarginRight:2,sidebarRightBorderSize:2,layerWidth:100,currentLayerWidth:80,currentLayerHeight:72,layerItemZIndex:10,layersScaleValue:1.06,effectItemsSize:154,mainBorderRadius:8,sidebarContainerPadding:"0 8px 36px 20px",toolbarBtnBorder:"1px solid ".concat(i.b.paColor2),toolbarBtnBorderHover:"1px solid ".concat(i.b.paColor6),toolbarBtnColor:i.b.paColor10,toolbarBtnHoverColor:i.b.paColor6,toolbarBtnBorderRadius:4,iconSize:24,shutterStockImgHeight:"calc(100% + 18px)",selectionWhiteBorder:{"&:before":{content:'""',width:"100%",height:"100%",position:"absolute",border:"4px solid ".concat(i.b.paColor9),zIndex:a.U,borderRadius:6}},effectItemParentDefaultStyles:{width:r.bc,height:r.bc,position:"relative",cursor:"default",userSelect:"none",marginBottom:12,"-webkit-font-smoothing":"antialiased","&:nth-last-child(-n+2)":{marginBottom:6}},effectItemDisabledState:{cursor:"not-allowed!important"},effectItemNotClickableState:{pointerEvents:"none"},effectItemDefaultStyles:{width:r.bc,height:r.bc,cursor:"pointer",objectFit:"cover",position:"absolute",borderRadius:8,border:"2px solid white","@media (hover: hover)":{"&:hover":{border:"2px solid ".concat(i.b.paColor7),"&:before":{content:'""',width:"100%",height:"100%",position:"absolute",border:"4px solid ".concat(i.b.paColor9),zIndex:a.a.Above,borderRadius:6}}},"& img:not([alt*=gold]):not([alt*=shape]):not([alt*=loader])":{width:"100%",height:"100%",position:"absolute",borderRadius:6,objectFit:"cover"}},effectItemNameDefaultStyles:{position:"absolute",padding:"3px 21px 3px 6px",borderRadius:3,backgroundColor:i.b.paColor6,color:i.b.paColor9,fontWeight:500,fontSize:9,cursor:"pointer",bottom:10,left:10,zIndex:a.a.Above,backfaceVisibility:"hidden","-webkit-font-smoothing":"subpixel-antialiased"},effectItemHoverDefaultStyles:{"&:hover":{border:"2px solid ".concat(i.b.paColor2),"&:before":{content:'""',width:"100%",height:"100%",position:"absolute",border:"4px solid ".concat(i.b.paColor9),zIndex:a.a.Above,borderRadius:6}}},effectItemSelectedDefaultStyles:{border:"2px solid ".concat(i.b.paColor6),"@media (hover: hover)":{"&:hover":{border:"2px solid ".concat(i.b.paColor6)}},"&:before":{content:'""',width:"100%",height:"100%",position:"absolute",border:"4px solid ".concat(i.b.paColor9),zIndex:a.a.Above,borderRadius:6}},visibilitySidebarLayerIcon:{position:"fixed",display:"inline-block",cursor:"pointer",margin:"auto 0",backgroundColor:i.b.paColor9,zIndex:a.eb,"&:before, &:after":{content:"''",display:"inline-block",width:"100%",height:24,position:"absolute",left:0,backgroundColor:"inherit"},"&:before":{top:"-19px",borderTopRightRadius:10,transform:"skew(0deg, 20deg)"},"&:after":{bottom:"-19px",borderBottomRightRadius:10,transform:"skew(0deg, -20deg)"},"@media(hover: hover)":{"&:hover":{"& svg path":{fill:i.b.paColor3}}}},arrowIcon:{top:0,right:0,left:0,bottom:0,margin:"auto",zIndex:a.a.Above,pointerEvents:"none","& svg path":{fill:i.b.paColor7}},sidebarCategoryIndicator:{backgroundColor:i.b.paColor1,width:3,height:46,position:"absolute",borderRadius:8},premiumIcon:{width:40,height:40},crownIcon:{verticalAlign:"top",width:14,height:14,display:"flex",alignItems:"center",justifyContent:"center"}};t.a=c},function(e,t,n){"use strict";var r=n(1),a=n(156),i=n(327);t.a=function(e){return e.some((function(e){return e.type===r.Bc?Object(i.a)([e]):Object(a.a)(e.settings.hsl)}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(7),a=n.n(r),i=n(2),c=n(84),o=n(10),s=n(40),u=n(42),l=n(34),d=n(1),b=n(64),f=["headers","method","body","isFormData","isCache","timeout","includeContentType"],h=new Map,p=function(){function e(){Object(s.a)(this,e)}return Object(u.a)(e,null,[{key:"fetch",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,o,s,u,p,g,O,v,j,m,y,x,w,A,E,k,C,S=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=S.length>1&&void 0!==S[1]?S[1]:{},r=n.headers,o=n.method,s=n.body,u=n.isFormData,p=n.isCache,g=void 0!==p&&p,O=n.timeout,v=void 0===O?12e4:O,j=n.includeContentType,m=void 0===j||j,y=Object(c.a)(n,f),x=d.hc.SERVER_ERROR,w=Object(i.a)({headers:Object(i.a)({Accept:"application/json","Content-Language":document.documentElement.lang},r),credentials:"same-origin",method:o,timeout:v},y),m&&(w.headers["Content-Type"]="application/json"),u&&delete w.headers["Content-Type"],s&&(w.body=u?s:JSON.stringify(s)),!g||!h.has("".concat(t).concat(g))){e.next=10;break}return A=h.get("".concat(t).concat(g)),e.abrupt("return",A.data);case 10:return e.next=12,Object(b.a)(t,w);case 12:if(!((E=e.sent).status>=200&&E.status<300)){e.next=28;break}return e.prev=14,e.next=17,E.json();case 17:return k=e.sent,g&&h.set("".concat(t).concat(g),{data:k,cached:!0}),e.abrupt("return",k);case 22:return e.prev=22,e.t0=e.catch(14),l.a.trigger(e.t0,"error"),e.abrupt("return",{errorMessage:x});case 26:e.next=39;break;case 28:if(401!==E.status){e.next=32;break}return e.abrupt("return",{});case 32:return e.next=34,E.text();case 34:if(e.t1=e.sent,e.t1){e.next=37;break}e.t1=x;case 37:return C=e.t1,e.abrupt("return",{errorMessage:C});case 39:case"end":return e.stop()}}),e,null,[[14,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}();p.get=function(e,t){return p.fetch(e,Object(i.a)(Object(i.a)({},t),{},{method:"GET"}))},p.post=function(e,t){return p.fetch(e,Object(i.a)(Object(i.a)({},t),{},{method:"POST"}))},p.put=function(e,t){return p.fetch(e,Object(i.a)(Object(i.a)({},t),{},{method:"PUT"}))},p.delete=function(e,t){return p.fetch(e,Object(i.a)(Object(i.a)({},t),{},{method:"DELETE"}))},p.clearCache=function(){return h.clear()}},function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c}));var r=null,a=function(e){r=e},i=function(){return r},c=function(){a(null)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={STATIC:0,DYNAMIC:1,INPUT:2}},function(e,t,n){"use strict";var r=n(1),a=n(0),i=n(43),c=n(163);t.a=function(e,t){if(!(e instanceof HTMLCanvasElement)){Object(c.a)();var n=Object(a.mb)(t);if(n)Object(a.T)(n,"Group").forEach((function(e){return Object(i.f)(e)?Object(a.Lb)(e,{collageOutline:!1}):null})),e&&(Object(a.tb)(e)?((Object(a.db)(e).id||"").includes(r.Zb)&&Object(a.Lb)(Object(a.kb)(e),{collageOutline:!0}),Object(a.Lb)(e,{collageOutline:!0})):Object(a.Lb)(Object(a.kb)(e),{collageOutline:!0})),Object(a.I)(n)}}},function(e,t,n){"use strict";var r=n(7),a=n.n(r),i=n(10),c=n(40),o=n(42),s=n(389),u=n(76),l=function(){function e(){var t=this;Object(c.a)(this,e),this.canvas=void 0,this.logo=void 0,this.monotoneLogo=void 0,this.color=void 0,this.visibleSize=0,this.generate=function(e){return function(){var n=Object(i.a)(a.a.mark((function n(r){var i,c,o,s,u,l,d,b,f,h,p,g;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.tileSize,c=e.spacing,o=e.linePadding,s=e.lineWidth,u=e.opacity,l=e.preserveColor,d=e.color,b=l?{r:255,g:255,b:255}:d,!(t.color!==b)){n.next=8;break}return n.next=6,t.getBWLogo(t.logo,b);case 6:t.monotoneLogo=n.sent,t.color=b;case 8:return f=l?t.logo:t.monotoneLogo,n.next=11,t.createTile(f,400,i,o,s,b);case 11:return h=n.sent,p=t.drawOriginalImage(r,t.canvas),g=t.visibleSize/Math.max(r.width,r.height),t.drawTiles(p,400,c/g,h,r,u),n.abrupt("return",new Promise((function(e){p.canvas.toBlob((function(t){return e(URL.createObjectURL(t))}))})));case 16:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},this.drawMark=function(e,t,n,r,a,i){return function(c,o){e.drawImage(i,0,0,t,n,c,o,r,a)}},this.drawLine=function(e,t){return function(n,r,a,i){t.beginPath(),t.moveTo(n,r),t.lineTo(a,i),!e&&t.stroke()}},this.drawOriginalImage=function(e,t){var n=e.width,r=e.height;t.width=n,t.height=r;var a=t.getContext("2d");return a.drawImage(e,0,0),a},this.drawTiles=function(e,t,n,r,a,i){var c=a.width,o=a.height;e.globalAlpha=(100-i)/100;var u=Math.ceil(o/n),l=Math.ceil(c/n);Object(s.range)(0,l).forEach((function(a){Object(s.range)(0,u).forEach((function(i){var c=a*n,o=i*n;e.drawImage(r,0,0,t,t,c,o,n,n)}))}))},this.canvas=document.createElement("canvas")}return Object(o.a)(e,[{key:"init",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.logo=t,e.next=3,this.getBWLogo(t,n);case 3:this.monotoneLogo=e.sent,this.color=n;case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setVisibleSize",value:function(e){this.visibleSize=e}},{key:"getBWLogo",value:function(e,t){var n=e.width,r=e.height,a=document.createElement("canvas");a.width=n,a.height=r;var i=a.getContext("2d");i.drawImage(e,0,0);for(var c=i.getImageData(0,0,n,r).data,o=i.createImageData(n,r),s=o.data,l=0;l<s.length;l+=4){var d=c[l],b=c[l+1],f=c[l+2],h=c[l+3],p=!(255===d&&d===b&&b===f)&&!!h,g=t||u.v;s[l]=p?g.r:0,s[l+1]=p?g.g:0,s[l+2]=p?g.b:0,s[l+3]=p?255:0}return createImageBitmap(o)}},{key:"createTile",value:function(e,t,n,r,a,i){var c=e.width,o=e.height,s=document.createElement("canvas"),l=c>o,d=c/o,b=l?n:n*d,f=b/d,h=l?f:b,p=10-r;s.width=t,s.height=t;var g=s.getContext("2d"),O=i||u.v;g.lineWidth=a,g.strokeStyle="rgb(".concat(O.r,", ").concat(O.g,", ").concat(O.b,")");var v=this.drawMark(g,c,o,b,f,e),j=this.drawLine(p===u.y||!a,g);return v(-b/2,-f/2),v(t-b/2,-f/2),v(-b/2,t-f/2),v(t-b/2,t-f/2),v(t/2-b/2,t/2-f/2),j(h/2+p,h/2+p,t/2-h/2-p,t/2-h/2-p),j(t-h/2-p,h/2+p,t/2+h/2+p,t/2-h/2-p),j(h/2+p,t-h/2-p,t/2-h/2-p,t/2+h/2+p),j(t-h/2-p,t-h/2-p,t/2+h/2+p,t/2+h/2+p),createImageBitmap(g.getImageData(0,0,t,t))}}]),e}();t.a=new l},,,function(e,t,n){"use strict";var r=n(27),a=n(12),i=n(6),c=n(17),o=n(243),s=n(81),u=n(16),l=n(1),d=n(259),b=n(62),f=n(0),h=n(261),p=n(63),g=n(163),O=n(160),v=n(255),j=n(4),m=n(2),y=n(59),x=function(e,t,n,r,a,i){if(!e)return null;var c=Object(f.db)(t).id,o=Object(f.db)(t),s=o.x,d=o.y,b=o.width,h=o.scaleX,p=o.scaleY,g=o.rotation,O=Object(m.a)(Object(m.a)({license:"",url:""},Object(f.a)(t)),{},{x:s,y:d,width:b,scaleX:h,scaleY:p,rotation:g,cropX:0,cropY:0,cropWidth:0,cropHeight:0,globalCompositeOperation:Object(f.ib)(t),elementIndex:null,id:c,selectedId:{oldValue:c},type:"",isPremium:null===a||void 0===a?void 0:a.isPremium,toolType:null===a||void 0===a?void 0:a.settings.toolType,index:i});if(Object(f.db)(t).name===l.Bc)return Object(y.e)(t,i);if(Object(f.ub)(t))if(n)O.images=[],O.id="overlay_",O.type=u.b.overlay,Object(f.Db)(r).forEach((function(e,n){var r,a=Object(f.db)(e),i=a.id,c=a.x,o=a.y,s=a.offsetX,u=a.offsetY,l=a.width,d=a.height,b=a.scaleX,h=a.scaleY,p=a.image,g=a.saturation,v=a.brightness,y=a.contrast,x=a.opacity,w=a.hue,A=a.highlights,E=a.clarity,k=a.shadows,C=a.temperature,S=a.hsl;O.images={oldValue:Object(m.a)(Object(m.a)({},null===(r=O.images)||void 0===r?void 0:r.oldValue),{},Object(j.a)({},"image".concat(n+1),{id:i,x:c,y:o,offsetX:s,offsetY:u,width:l,height:d,scaleX:b,scaleY:h,saturation:g,brightness:v,contrast:y,highlights:A,clarity:E,shadows:k,temperature:C,hue:w,opacity:x,hsl:S,resource_url:p.src,globalCompositeOperation:Object(f.ib)(t)}))}}));else{var v=Object(f.db)(t),x=v.cropX,w=v.cropY,A=v.cropWidth,E=v.cropHeight,k=v.hasFte,C=v.image,S=v.saturation,T=v.brightness,_=v.contrast,I=v.opacity,R=v.highlights,L=v.clarity,P=v.shadows,G=v.temperature,M=v.hue,B=v.hsl;O=Object(m.a)(Object(m.a)({},O),{},{cropX:x,cropY:w,cropWidth:A,cropHeight:E,saturation:S,brightness:T,contrast:_,highlights:R,clarity:L,shadows:P,temperature:G,hue:M,opacity:I,hsl:B,license:k,url:C.src,type:null===a||void 0===a?void 0:a.type})}else if(Object(f.db)(t).id.includes(l.zh))O.children=[],O.effectType=Object(f.db)(t).effectType,Object(f.fb)(t).forEach((function(e){O.children.push(Object(f.a)(e))})),O.layer=a,O.type=u.b.effect_group;else if(Object(f.Ab)(t)||Object(f.Bb)(t)){var D=Object(f.db)(t),N=D.text,z=D.lineHeight,H=D.letterSpacing,Y=D.stroke,X=D.strokeWidth,U=D.fontFamily,F=D.fontSize,W=D.fontStyle,V=D.align,K=D.fill,q=D.textDecoration,J=D.shadowColor,Q=D.shadowOffsetX,Z=D.shadowOffsetY,$=D.shadowOpacity,ee=D.shadowBlur,te=D.groupId,ne=D.isPlaceholder,re=D.isTextStyle;O=Object(f.db)(t).id.includes("text-template")?{id:O.id,textAttrs:Object(m.a)(Object(m.a)({},O),Object(f.a)(t)),type:u.b.text_group}:Object(m.a)(Object(m.a)({},O),{},{font:{text:N,fill:K,align:V,groupId:te,stroke:Y,fontStyle:W,shadowBlur:ee,lineHeight:z,strokeWidth:X,shadowColor:J,letterSpacing:H,shadowOffsetX:Q,shadowOffsetY:Z,shadowOpacity:$,textDecoration:q,font_size:F,font_family:U,isPlaceholder:ne,isPremium:null===a||void 0===a?void 0:a.isPremium,isTextStyle:re},type:u.b.text})}else if(Object(f.db)(t).name===l.zg)O.content=[],Object(f.fb)(t).forEach((function(e){var t=Object(f.db)(e),n=t.x,r=t.y,a=t.offsetX,i=t.offsetY,c=t.width,o=t.height,s=t.scaleX,u=t.scaleY,l=t.text,d=t.lineHeight,b=t.letterSpacing,h=t.stroke,p=t.strokeWidth,g=t.fontFamily,v=t.fontSize,j=t.fontStyle,m=t.align,y=t.fill,x=t.textDecoration,w=t.shadowColor,A=t.shadowOffsetX,E=t.shadowOffsetY,k=t.shadowOpacity,C=t.shadowBlur,S=t.isPlaceholder;O.content.push({id:Object(f.db)(e).id,textAttrs:{x:n,y:r,offsetX:a,offsetY:i,width:c,height:o,scaleX:s,scaleY:u,text:l,lineHeight:d,letterSpacing:b,stroke:h,strokeWidth:p,fontFamily:g,fontSize:v,fontStyle:j,align:m,fill:y,textDecoration:x,shadowColor:w,shadowOffsetX:A,shadowOffsetY:E,shadowOpacity:k,shadowBlur:C,isPlaceholder:S}})})),O.type=u.b.text_group;else if(Object(f.yb)(Object(f.eb)(t)[0])&&(O.type=u.b.shape,O.elementIndex=Object(f.db)(t).elementIndex,a)){var ae=null===a||void 0===a?void 0:a.settings,ie=ae.sizeOutline,ce=ae.opacityOutline;O=Object(m.a)(Object(m.a)(Object(m.a)(Object(m.a)({},O),{},{url:a.resources.url,childId:a.settings.childId,colorRGB1:a.settings.colorRGB1,saturation:a.settings.saturation,brightness:a.settings.brightness,elementType:a.elementType,contrast:a.settings.contrast,opacity:a.settings.opacity,childrenAttrs:a.settings.childrenAttrs,corner_radius:a.settings.corner_radius,globalCompositeOperation:a.settings.blendMode,outlineColor:a.settings.outlineColor},"string"===typeof ie&&{sizeOutline:ie}),("string"===typeof ce||"string"===typeof ie)&&{opacityOutline:ce}),{},{outlineTransparent:a.settings.outlineTransparent})}return O},w=function(e,t){Object(i.a)({type:a.g,payload:{id:e}});var n=e.replace(l.zh,"");!t.some((function(e){var t;return e.id!==n&&l.jd.includes((null===(t=e.settings)||void 0===t?void 0:t.type)||e.type)}))&&Object(b.k)()},A=function(e,t,n){Object(v.a)(t,!0),w(null===e||void 0===e?void 0:e.id(),n),null===e||void 0===e||e.destroy(),Object(i.a)(c.a.actions.setActiveSettings(""))};t.a=function(e){var t,n,b,j,m=e.baseGroup,y=e.konvaElem,E=e.fromHistory,k=e.layerArr,C=e.removeSelectedTransformer;if(k){var S,T=y&&Object(f.db)(y).id===l.ch,_=Object(d.a)(k,(function(e){var t,n;return(y?e.id===Object(f.db)(y).id:e.active||(null===(t=e.effectLayer)||void 0===t?void 0:t.active))||!!(null===(n=e.cellsLayers)||void 0===n?void 0:n.find((function(e){var t;return e.active||(null===(t=e.effectLayer)||void 0===t?void 0:t.active)})))})),I=null===_||void 0===_?void 0:_.item;if((null===(t=I)||void 0===t?void 0:t.type)===l.Bc&&!I.active&&!T)I=null===(S=I.cellsLayers)||void 0===S?void 0:S.find((function(e){var t;return e.active||(null===(t=e.effectLayer)||void 0===t?void 0:t.active)}));var R=Object(f.X)(m,l.pb),L=R&&Object(f.ob)(R),P=Object(f.S)(m,(function(e){return Object(f.db)(e).name.includes("overlay-image")})),G=y||Object(f.R)(m,"#".concat(null===(n=I)||void 0===n?void 0:n.id))||L,M=Object(f.db)(G),B=M.emptyText,D=M.id,N=M.isPlaceholder,z=M.name,H=M.hasFte,Y=D||"",X=!E&&L&&((null===L||void 0===L?void 0:L.length)>1||(null===(b=Object(f.db)(L[0]).id)||void 0===b?void 0:b.includes("text-template"))),U=[l.pg,l.Cc].includes((null===(j=I)||void 0===j?void 0:j.type)||"")||Object(f.db)(Object(f.kb)(G))[l.Ed]===l.pg||z===l.Dc;if(Y!==l.x){if(U&&k){var F,W=Object(f.mb)(m);return Object(O.a)({stage:W,baseGroup:m,layerArr:k,fromHistory:E,addSelectionEvt:(null===(F=I)||void 0===F?void 0:F.type)!==l.Cc}),void(Y&&Y.includes(l.Zb)&&Object(i.a)(c.a.actions.setActiveSettings("")))}if(Object(f.k)(m),G){var V=Y.includes("overlay");if(z&&~z.indexOf(l.tg)&&(I&&p.a.trigerSettingsAction(I,"delete",l.tg),Object(i.a)(c.a.actions.setVisibilityTextarea(!1))),!E){var K={},q=u.a.remove_layer;X?(q=u.a.bulk_action,K={bulkType:u.a.remove_layer,emptyText:B,children:[],isPlaceholder:N,name:Object(f.db)(R).name},L.forEach((function(e){var t=Object(d.a)(k,(function(t){return t.id===Object(f.db)(e).id})),n=x(m,e,V,P,null===t||void 0===t?void 0:t.item,null===t||void 0===t?void 0:t.index);K.children.push(n)})),K.children.sort((function(e,t){return Object(h.a)(e)-Object(h.a)(t)}))):K=x(m,G,V,P,I,null===_||void 0===_?void 0:_.index),Object(s.a)({historyStack:{historyAction:q,settings:K}})}(null===G||void 0===G?void 0:G.name())===l.Bc&&A(G,m,k),(Y!==l.ch||C)&&Object(v.a)(m,!U),Object(i.a)(c.a.actions.setActiveReplaceMode(!1)),Y.includes("overlay")&&(P.each((function(e){return w(Object(f.db)(e).id,k)})),Object(i.a)({type:a.n,activeEffect:""})),G.attrs.hasFte&&Object(o.a)("delete",H),X?L.forEach((function(e){var t=Object(f.db)(e),n=t.hasFte,r=t.id;n&&Object(o.a)("delete",n);var s=Object(f.N)(e,".".concat(l.Bc),!0);if(s)A(s,m,k);else{if(r.includes("overlay"))return P.each((function(e){return w(Object(f.db)(e).id,k)})),void Object(i.a)({type:a.n,activeEffect:""});if(r.includes(l.Zb))return w(r.replace(l.zh,""),k),Object(i.a)(c.a.actions.setActiveEffectPage("")),Object(f.G)(e),void(Y!==l.ch&&Object(g.a)());w(r,k),Object(f.G)(e)}})):(Y.includes(l.Zb)&&Object(r.b)((function(){w(Y.replace(l.zh,""),k),Object(i.a)(c.a.actions.setActiveEffectPage("")),Object(i.a)(c.a.actions.setActiveSettings(""))})),Object(f.G)(G)),Y!==l.ch&&Object(g.a)(),Object(r.b)((function(){w(Y,k),I&&I.type!==l.tg&&Object(i.a)(c.a.actions.setActiveSettings("")),Object(i.a)({type:a.q,selectedTextId:0})}));var J=document.querySelector(".konvajs-content");J&&(J.style.cursor="unset")}}}}},function(e,t,n){"use strict";var r=n(6),a=n(12),i=n(1),c=n(0);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e){var n=Object(c.jb)(e),o=Object(c.T)(n,"Transformer")||[];o.length&&(o.forEach((function(e){var t=Object(c.db)(e).id;if(![i.vc,i.Z].includes(t))return t===i.ob?(Object(c.ob)(e).length>1&&Object(c.Lb)(e,{nodes:[],attachedId:null,shouldOverdrawWholeArea:!1}),void Object(c.qb)(e)):void Object(c.G)(e)})),Object(c.I)(n)),t&&(Object(c.fb)(n).forEach((function(e){Object(c.db)(e).layerType===i.pg&&Object(c.Lb)(e,{collageOutline:!1})})),Object(c.I)(n),Object(r.a)({type:a.e}))}}},function(e,t,n){"use strict";var r=n(6),a=n(9),i=n(1);t.a=function(e,t,n){var c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=["front","forward","back","backward"],s=-1,u=-1,l=Object(r.b)(a.h),d=t.filter((function(e,t){var n;return e.type===i.H&&(s=t),"editor"===e.type&&(u=t),(e.active||(null===e||void 0===e||null===(n=e.effectLayer)||void 0===n?void 0:n.active))&&!l.includes(e)&&l.push(e),!["canvas","editor"].includes(e.type)}));if(d.length<=1&&o.includes(e))return!0;var b=l.some((function(t){var r="paste"===e&&!n,a=!t||t.id===i.x&&"paste"!==e,c=(null===t||void 0===t?void 0:t.type)===i.pg&&["duplicate","copy","cut"].includes(e);return r||a||c})),f=l.some((function(n){var r,a,i,o=n.id===(null===(r=t[0])||void 0===r?void 0:r.id),l=[null===(a=t[s-1])||void 0===a?void 0:a.id,null===(i=t[u-1])||void 0===i?void 0:i.id].includes(n.id);return(o||c)&&["front","forward"].includes(e)||(l||c)&&["back","backward"].includes(e)}));return f||b}},function(e,t,n){"use strict";var r=n(2),a=n(330),i=n(73),c=Math.sin,o=Math.sqrt,s=Math.pow,u=Math.atan,l=Math.cos;t.a=function(e,t){var n=e.width,d=e.height,b=e.rotation,f=void 0===b?-0:b,h=f<0?180+f:f,p=Object(a.a)(Object(r.a)(Object(r.a)({},e),{},{rotation:-h})),g=p.x,O=p.y,v=p.centerX,j=p.centerY,m=function(e){var t=e.x,n=e.y,r=e.centerX,a=e.centerY,d=e.rotation,b=Object(i.a)(d),f=o(s(t-r,2)+s(n-a,2)),h=u((n-a)/(t-r)),p=Object(i.a)(90)+b/2-h,g=o(2*s(f,2)*(1-l(b))),O=l(p)*g,v=c(p)*g;return t<r?{x:t-O,y:n+v}:{x:t+O,y:n-v}}(Object(r.a)(Object(r.a)({},t),{},{centerX:v,centerY:j,rotation:h}));return m.x<g+n&&m.y<O+d&&m.x>g&&m.y>O}},,function(e,t,n){"use strict";function r(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return{item:e[n],index:+n}}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return f}));var r=n(7),a=n.n(r),i=n(15),c=n(10),o=n(217),s=n.n(o),u=n(62),l=/(?:\.([^.]+))?$/,d=function(e){var t=l.exec(e)[0],n=e.replace(t,""),r=s()(n);return"".concat(r).concat(t||"")};function b(e,t){var n=Object(u.g)(),r=n.core.ImageRGBA8.createFromDecodedBuffer(e.data,e.width,e.height),a=r.convertARGB();r.delete(),n.canvas.width=a.width,n.canvas.height=a.height,Object(u.i)().accessGraph((function(){Object(u.l)(a)})),a.delete();var i=Object(u.h)(t),c=Object(u.d)().createBuilder(t),o=new n.fx.parameters.OverrideParameterMap,s=c.buildEffectWithImage(Object(u.i)(),Object(u.e)(),i.resource,o);return o.delete(),s}function f(e){return h.apply(this,arguments)}function h(){return(h=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t.map(function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c,o,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.b)({json:d(t),skipHash:!0});case 2:return n=e.sent,Object(u.j)(n.name,n),r=Object(u.c)([n.name]),c=Object(i.a)(r,1),o=c[0],e.next=7,o;case 7:s=e.sent,Object(u.n)(n.name,s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},function(e,t,n){"use strict";var r=n(16);t.a=function(e){return e.type===r.b.text_group?e.textAttrs.index:e.index}},function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return c}));var r=n(23),a=function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=[],i=/-?[0-9]*\.?\d+/g;null!==(t=r.l.exec(e));)a.push(t);return a.map((function(t){return{marker:e[t.index],index:t.index}})).reduceRight((function(t,n){var r=e.substring(n.index,t.length?t[t.length-1].index:e.length);return t.concat([{marker:n.marker,index:n.index,chunk:r.length>0?r.substr(1,r.length-1):r}])}),[]).reverse().map((function(e){var t=n?e.chunk.match(i):e.chunk.split(" ");return{marker:e.marker,values:t?t.map(parseFloat):[]}}))},i=function(e){var t=a(e),n=[],r=t[t.length-2].marker;return t.forEach((function(e){var t=n.slice(-1).pop()||0;switch(e.marker){case"z":break;case"M":case"L":n.push({x:e.values[0],y:e.values[1]||0});break;case"m":case"l":var r=t.x+e.values[0],a=t.y+e.values[1];n.push({x:r,y:a});break;case"h":var i=t.x+e.values[0],c=t.y||0;n.push({x:i,y:c});break;case"H":var o=e.values[0],s=t.y||0;n.push({x:o,y:s});break;case"V":var u=t.x,l=e.values[0];n.push({x:u,y:l});break;case"v":var d=t.x,b=t.y+e.values[0];n.push({x:d,y:b});break;case"a":var f=t.x+e.values[5],h=t.y+e.values[6],p=e.values[0];n.push({x:f,y:h,radius:p});break;case"A":var g=e.values[5],O=e.values[6],v=e.values[0];n.push({x:g,y:O,radius:v});break;case"s":case"S":var j=e.values[0];n.push({x:j})}})),["L","l","v","V","A","a"].includes(r)&&n.pop(),{coords:n,commandLength:t.length}},c=function(e,t){var n=a(t,!0);e.beginPath();var r,i,c=[0,0];n.forEach((function(t){switch(t.marker){case"z":case"Z":c=[0,0],e.closePath();break;case"m":c=[c[0]+t.values[0],c[1]+t.values[1]],e.moveTo(c[0],c[1]);break;case"l":c=[c[0]+t.values[0],c[1]+t.values[1]],e.lineTo(c[0],c[1]);break;case"h":c=[c[0]+t.values[0],c[1]],e.lineTo(c[0],c[1]);break;case"v":c=[c[0],c[1]+t.values[0]],e.lineTo(c[0],c[1]);break;case"c":r=[c[0]+t.values[0],c[1]+t.values[1]],i=[c[0]+t.values[2],c[1]+t.values[3]],c=[c[0]+t.values[4],c[1]+t.values[5]],e.bezierCurveTo(r[0],r[1],i[0],i[1],c[0],c[1]);break;case"s":r=[c[0]-i[0]+c[0],c[1]-i[1]+c[1]],i=[c[0]+t.values[0],c[1]+t.values[1]],c=[c[0]+t.values[2],c[1]+t.values[3]],e.bezierCurveTo(r[0],r[1],i[0],i[1],c[0],c[1]);break;case"M":c=[t.values[0],t.values[1]],e.moveTo(c[0],c[1]);break;case"L":c=[t.values[0],t.values[1]],e.lineTo(c[0],c[1]);break;case"H":c=[t.values[0],c[1]],e.lineTo(c[0],c[1]);break;case"V":c=[c[0],t.values[0]],e.lineTo(c[0],c[1]);break;case"C":r=[t.values[0],t.values[1]],i=[t.values[2],t.values[3]],c=[t.values[4],t.values[5]],e.bezierCurveTo(r[0],r[1],i[0],i[1],c[0],c[1]);break;case"S":r=[c[0]-i[0]+c[0],c[1]-i[1]+c[1]],i=[t.values[0],t.values[1]],c=[t.values[2],t.values[3]],e.bezierCurveTo(r[0],r[1],i[0],i[1],c[0],c[1])}}))}},,function(e,t,n){"use strict";n.d(t,"b",(function(){return o}));var r=n(15),a=n(86),i=n(0),c=n(43),o=function(e,t,n){var r=Object(a.c)(Object(i.db)(Object(i.mb)(e)).scaleX,e);Object(i.h)(t,r),Object(i.Lb)(r,{nodes:[e],shouldOverdrawWholeArea:!0});var c=Object(i.db)(r),o=c.x,s=c.y,u=c.width,l=c.height;return Object(i.G)(r),{x:o/n.scaleX,y:s/n.scaleY,width:u/n.scaleX,height:l/n.scaleY}};t.a=function(e,t,n,a){var s=Object(i.Bb)(e)&&Object(i.db)(e).bend,u=Object(i.tb)(e)&&Object(c.e)(e),l=u&&Object(i.Z)(e),d=Object(i.fb)(e).some((function(e){return Object(i.yb)(e)})),b=Object(i.db)(t),f=b.scaleX,h=b.scaleY,p=Object(i.db)(e),g=p.absolutePosition,O=g.x,v=g.y,j=p.width,m=p.height,y=p.rotation,x=p.scaleX,w=p.scaleY,A=p.skewX,E=p.skewY,k=p.initialScaleX,C=void 0===k?1:k,S=p.initialScaleY,T=void 0===S?1:S,_=O/f,I=v/h,R=j*x,L=m*w;if(u){var P=Object(i.db)(l);_+=P.x*x,I+=P.y*w,R=P.width*x,L=P.height*w}else if(s){var G=o(e,n,{scaleX:f,scaleY:h});_=G.x,I=G.y,R=G.width,L=G.height}else if(d){var M=Object(i.fb)(e),B=Object(r.a)(M,1)[0],D=Object(i.db)(B).strokeWidth;R+=D*x,L+=D*w,_-=D*x/2,I-=D*w/2}var N=a?R/C:R,z=a?L/T:L,H=N>=0?1:-1,Y=z>=0?1:-1;return{x:_,y:I,width:N+8*H,height:z+8*Y,offsetX:4*H,offsetY:4*Y,skewX:A,skewY:E,rotation:y}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return O}));var r=n(4),a=n(2),i=n(1),c=n(0),o=Math.cos,s=Math.sin,u=Math.PI,l=Math.min,d=Math.max,b=Math.abs,f=Math.round,h=function(e){var t=e.x,n=e.y,r=e.radius,a=(e.angleInDegrees-90)*u/180;return{x:t+r*o(a),y:n+r*s(a)}},p=function(e){var t=e.textNode,n=e.bendRange,r=Object(c.db)(t),a=r.text,o=r.width,s=r.height,p=r.fontSize,g=r.initialWidth,O=r.initialHeight,v=r.letterSpacing,j=r.multiLineTextWitdh,m=a.length-1,y=function(e){var t=e.value,n=e.from,r=e.to,a=(r[1]-r[0])/(n[1]-n[0]);return~~((l(n[1],d(n[0],t))-n[0])*a+r[0])}({value:n,from:[0-i.E,i.E],to:[359,0]}),x=359.99-y,w=a.trim().split("\n").length,A=f(s||O||p),E=360*(j&&o<j&&j||w*f((t.textWidth||o||g)+m*v))/(2*u*(x-y));return{arcPath:function(e){var t=e.x,n=e.y,r=e.radius,a=e.startAngle,c=e.endAngle,o=e.range,s="".concat(Number(o<0)),u=b(o)===i.E?"z":"",l=c-a<180&&o>-i.E/2?"0":"1",d=h({x:t,y:n,radius:r,angleInDegrees:c}),f=h({x:t,y:n,radius:r,angleInDegrees:a});return"M".concat(d.x," ").concat(d.y,", A").concat(b(r),", ").concat(b(r),", 0, ").concat(l,", ").concat(s,", ").concat(f.x," ").concat(f.y," ").concat(u)}({x:o/2,y:A/2-E,radius:E,endAngle:x,startAngle:y,range:n}),textNode:t,bendRange:n}},g={adjust:i.h,adjust_hsl:i.f,text:i.Eg},O=function(e,t){return Object.keys(e).filter((function(e){return e in g[t]})).reduce((function(t,n){return Object(a.a)(Object(a.a)({},t),{},Object(r.a)({},n,e[n]))}),{})}},function(e,t,n){"use strict";t.a=function(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b}},,function(e,t,n){"use strict";var r=n(151),a=n(75),i=n(141),c=n(14),o=n(27),s=n(559),u=n.n(s),l=n(272),d=n(9),b=n(74),f=n(21),h=n(205),p=u()([f.a.actions.restore,f.a.actions.deselect,f.a.actions.putLayer,f.a.actions.addLayers,f.a.actions.updateZoom,f.a.actions.selectLayers,f.a.actions.setupArtBoard,f.a.actions.setSetupStage,f.a.actions.setEditingText,f.a.actions.toggleSelection,f.a.actions.emptyBaseGroup,f.a.actions.setMeasurement,f.a.actions.changePositionBy,f.a.actions.setAdjustSetting,f.a.actions.setDragInProgress,f.a.actions.setActiveCropMode,f.a.actions.setCanvasCSSSizes,f.a.actions.mouseoverToLayers,f.a.actions.mouseoutFromLayers,f.a.actions.setClipBoardElements,f.a.actions.setLayersFromHistory,f.a.actions.removeBackgroundLayer,f.a.actions.patchLayerWithoutHistory,f.a.actions.setDragSelectionInProgress,f.a.actions.removeLayersWithoutHistory,f.a.actions.setEffectSettingWithoutHistory,f.a.actions.setArtBoardSizesWithoutHistory,f.a.actions.addAndSelectLayersWithoutHistory,f.a.actions.patchSelectedLayersWithoutHistory,f.a.actions.patchSelectedLayerPathsWithoutHistory],Object.values(f.a.actions)),g=a.e.apply(void 0,[h.a.actions.reset,b.a.actions.setSelectedFitId].concat(Object(c.a)(p))),O=h.a.actions,v=O.newUndo,j=O.newRedo,m=O.restore,y=Object(a.e)(v,j,m),x=function(e){var t=e.dispatch,n=e.getState;return function(e){return function(r){Object(o.b)((function(){if(e(r),g(r)||y(r)){var a=n(),i=Object(d.qc)(a),c=i.stack,s=i.pointer;Object(d.md)(a)&&(y(r)?Object(o.b)((function(){var e=c[s]||{},n=e.layers,r=e.ui;t(f.a.actions.setLayersFromHistory(n)),t(b.a.actions.restoreUiFromHistory(r))})):t(h.a.actions.addHistoryFrame({layers:a.layers,ui:{selectedFitId:Object(d.gd)(a)}})),!Object(d.Rb)(a)&&Object(d.Tc)(a)&&t(l.a.actions.setIsTemplateChanged(!0)))}}))}}},w=n(150),A=n.n(w),E=n(40),k=n(42),C=n(85),S=n(104),T=n(1),_=n(0),I=n(6),R=n(43),L=n(86);function P(e,t){var n=e.dependencies,r=Object(_.fb)(e.renderable);n.forEach((function(n,a){var i=t[n.layerId],c=Object(_.tb)(e.renderable)?e.renderable:Object(_.kb)(e.renderable);r.includes(i.renderable)?P(i,t):Object(_.h)(c,P(i,t)),function(e,t){for(var n=e.index;e.index!==t;)n<t?e.moveUp():e.moveDown()}(i.renderable,a),r=Object(_.fb)(e.renderable)}));for(var a=r.length-1;a>=n.length;a--){var i,c;if(!(e.renderable instanceof _.b)||(null===(i=(c=e).isCollage)||void 0===i?void 0:i.call(c))){var o,s=r[a];null===(o=C.a.layerRegistry[Object(_.db)(s).id])||void 0===o||o.layer.clearCache(),s.remove()}}return e.renderable}var G=function(){function e(){Object(E.a)(this,e)}return Object(k.a)(e,[{key:"drawTree",value:function(e){var t=S.a.layer;Object(I.b)(d.jc)&&T.Eh&&(window.konvaProvider=S.a);var n=S.a.transformer;Object(_.N)(t,T.A)||Object(_.h)(t,e[T.z].renderable),P(e[T.z],e),Object(_.X)(t,T.pb)?n.zIndex(1):Object(_.h)(t,n),Object(_.I)(t),t._clearSelfAndDescendantCache()}},{key:"draw",value:function(e){Object(_.I)(S.a.layer)}},{key:"setSelection",value:function(e,t){var n=S.a.transformer;Object(_.Nb)(n,e.map((function(e){var t=e.renderable,n=Object(_.kb)(t),r=Object(_.db)(n),a=r.id,i=r.clip;return a!==T.z&&void 0!==(null===i||void 0===i?void 0:i.x)?n:t}))),Object(_.Lb)(n,{enabledAnchors:L.a[t]}),Object(L.d)(n)}},{key:"setShowTransformer",value:function(e){var t=S.a.transformer;e?Object(_.Ob)(t):Object(_.qb)(t),Object(R.g)(t),Object(_.I)(S.a.layer)}}]),e}(),M=new(function(){function e(t){var n=this;Object(E.a)(this,e),this.renderer=t,this.currentCycleArgs=null,this.redrawTree=function(e){var t=e.reduce((function(e,t){return e[t.id]=C.a.layerRegistry[t.id].layer,e}),{});Object.keys(t).length&&n.renderer.drawTree(t)},this.triggerRenderForSingleLayer=function(e){n.renderer.draw(e)},this.renderer=t}return Object(k.a)(e,[{key:"syncLayers",value:function(e){C.a.syncLayers(e,this.triggerRenderForSingleLayer)}},{key:"setSelection",value:function(e,t){this.renderer.setSelection(e.map((function(e){return C.a.layerRegistry[e].layer})),t)}},{key:"setShowTransformer",value:function(e){this.renderer.setShowTransformer(e)}}]),e}())(new G),B=function(e){var t=e.getState;return function(e){return function(n){var r=t();if(Object(d.jc)(r)){var a=r.layers.layers,i=Object(d.qd)(r),c=Object(d.a)(r),s=Object(d.Gd)(r);Object(o.b)((function(){e(n);var r=t(),o=r.layers.layers,u=Object(d.qd)(r),l=Object(d.Gd)(r),b=Object(d.a)(r),f=Object(d.fb)(r);A()(o,a)||(M.syncLayers(o),A()(o.map((function(e){return e.dependencies})),a.map((function(e){return e.dependencies})))||(M.redrawTree(o),M.setSelection(l,f))),(b||i!==u)&&M.setShowTransformer(!b&&u),(!A()(s,l)||!b&&c)&&M.setSelection(l,f)}))}else e(n)}}},D=n(62),N=n(12),z=n(202),H=n(125),Y=n(17),X=n(269),U=n(528),F=n(531),W=n(225),V=Object(r.c)({layer:N.u,ui:b.a.reducer,canvas:z.a.reducer,history:H.a.reducer,general:Y.a.reducer,objectRemoval:X.a.reducer,effects:U.a.reducer,layers:f.a.reducer,newHistory:h.a.reducer,data:F.a.reducer,batch:W.a.reducer,draftProject:l.a.reducer}),K=Object(a.a)({reducer:V,devTools:!T.Fh,middleware:Object(a.d)({serializableCheck:!1,immutableCheck:!1}).concat(B,x)});T.vh.editorOnly||K.getState().general.newCanvasEnabled||Object(i.a)().then((function(e){Object(D.m)(e)}));t.a=K},function(e,t,n){"use strict";var r=n(75),a={isOpen:!1,activeImg:null,forceUpdate:!1,activeToolType:n(405).f[1].type,activeBtns:!1,isSaved:!0,appliedMaskImg:"",activeImageId:""},i=Object(r.c)({name:"objectRemoval",initialState:a,reducers:{setActiveToolType:function(e,t){var n=t.payload;e.activeToolType=n},setActiveButtons:function(e,t){var n=t.payload;e.activeBtns=n},setSaved:function(e,t){var n=t.payload;e.isSaved=n},setLastAppliedMask:function(e,t){var n=t.payload;e.appliedMaskImg=n},open:function(e,t){var n=t.payload;e.isOpen=!0,e.activeImg=n},newOpen:function(e,t){var n=t.payload;e.isOpen=!0,e.activeImageId=n},close:function(e){e.isOpen=!1,e.activeImg=null,e.activeImageId=""},updateObjectRemovalImage:function(e){e.forceUpdate=!e.forceUpdate},reset:function(){return a}}});t.a=i},,function(e,t,n){"use strict";var r,a,i;n.d(t,"g",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"f",(function(){return c})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return u})),function(e){e.license="license",e.size="size",e.category="tab",e.all="all",e.q="q"}(r||(r={})),function(e){e.templates="templates",e.photos="photos",e.stickers="stickers",e.backgrounds="backgrounds"}(a||(a={})),function(e){e.templates="template",e.photos="photo",e.stickers="sticker",e.backgrounds="texture"}(i||(i={}));var c="Search",o="Home",s="search",u="All Sizes"},function(e,t,n){"use strict";var r=n(2),a=n(75),i=n(1),c={autoSaveReady:!1,isTemplateChanged:!1,isLocalImageUploadInProgress:!1,id:"",name:i.Rg,preview_url:"",created:"",updated:"",photos_bytes:0,history_id:"",history:{id:"",version:i.yb,modified_version:i.xb,created:"",updated:"",type:"",history_meta:{actions:[{type:"",result:"",destination_size:{w:0,h:0},collage:{collage_images:[],collage_layout:{paths:[]},background:i.P}}]}},history_modified_version:0,status:i.w.INITIAL,isNew:!0,isStorageFull:!1},o=Object(a.c)({name:"draftProject",initialState:c,reducers:{initAutoSave:function(e){e.autoSaveReady=!0},setIsTemplateChanged:function(e,t){var n=t.payload;e.isTemplateChanged=n},setIsLocalImageUploadInProgress:function(e,t){var n=t.payload;e.isLocalImageUploadInProgress=n},setProject:function(e,t){var n=t.payload;return Object(r.a)(Object(r.a)({},e),n)},setHistory:function(e,t){var n=t.payload;e.history=n},setAutosaveStatus:function(e,t){var n=t.payload;e.status=n},setProjectId:function(e,t){var n=t.payload;e.id=n},setProjectName:function(e,t){var n=t.payload;e.name=n},setProjectIsNew:function(e,t){var n=t.payload;e.isNew=n},setIsStorageFull:function(e,t){var n=t.payload;e.isStorageFull=n},resetProject:function(){return c}}});t.a=o},,,,function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return O})),n.d(t,"e",(function(){return v})),n.d(t,"f",(function(){return j})),n.d(t,"g",(function(){return m.a})),n.d(t,"a",(function(){return y.a}));var r=n(17),a=n(6),i=n(1),c=n(0),o=n(408),s=n(9),u=function(e){var t=Object(a.b)(s.A),n=Object(c.db)(e).isCropAble,u=(Object(c.db)(Object(c.kb)(e)).id||"").includes(i.Zb);n&&!u&&t&&(Object(a.a)(r.a.actions.setActiveCropMode(!0)),Object(o.a)(e,t))},l=n(11),d=n(49),b=n(264),f=Object(l.c)(l.b.paColor1),h=Object(l.c)(l.b.paColor72),p=function(e,t,n){var r=e.target,o=Object(c.mb)(t);if(o){var u=Object(a.b)(s.Kc),l=Object(a.b)(s.Kb),p=Object(c.db)(r),g=p.id,O=p.name,v=g===i.X||Object(c.N)(r,i.Y),j=Object(c.X)(o,i.pb),m=(Object(c.ob)(j)||[]).length>1;if(!(v||m||u||O===i.qg)){var y=r,x=!1,w=r.findAncestor((function(e){var t=Object(c.db)(e).id;return t.includes(i.Zb)||t.includes(i.Df)}));w&&(y=w),"shapeGroup"===Object(c.db)(t).name&&(y=t,x=!0);var A=Object(c.N)(r,".".concat(i.Bc),!0);if(A&&(y=A),y&&!Object(d.f)(y)){var E=Object(c.db)(y),k=E.draggable,C=E.name,S=E.id;!k&&C!==i.Bc||y.attrs.id.includes(i.nd)||Object(c.db)(o).container.style.setProperty("cursor","move"),!l||Object(c.db)(j).isVisible&&!Object(c.ob)(j).find((function(e){return Object(c.db)(e).id===S}))||!Object(c.yb)(y)&&!Object(c.tb)(y)||n&&function(e,t,n){if(!Object(c.X)(t,"".concat(i.Wc))&&e&&!e.attrs.id.includes(i.nd)){var r=Object(c.jb)(e),a=Object(c.x)({id:i.Vc,fill:h,stroke:f,strokeWidth:2,listening:!1}),o=Object(b.a)(e,t,r,n),s=o.x,u=o.y,l=o.width,d=o.height,p=o.rotation,g=o.offsetX,O=o.offsetY,v=o.skewX,j=o.skewY;Object(c.Lb)(a,{x:s,y:u,width:l,height:d,offsetX:g,offsetY:O,skewX:v,skewY:j,rotation:p}),Object(c.Lb)(e,{isHovered:!0}),Object(c.f)(r,a),Object(c.I)(r)}}(y,o,x)}}}},g=n(338),O=function(e){Object(c.db)(Object(c.mb)(e)).container.style.setProperty("cursor","default"),Object(g.a)(e)},v=function(e){var t=e.target,n=Object(a.b)(s.Zb),i=Object(c.db)(t).id;n===i&&Object(a.a)(r.a.actions.setEditingTextId(i))},j=function(e){if(e){var t=Object(c.ob)(e);return t.length?(Object(d.h)(t),!0):void 0}},m=n(313),y=n(317)},,function(e,t,n){"use strict";var r=n(2),a=n(41),i=n.n(a),c=n(30),o=n(20),s=n(11);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:c.d.COLOR_LAYER,data:Object(r.a)(Object(r.a)({colorRGB1:i()(Object(s.c)(s.b.paColor9)).toRgb(),colorTransparent:t},e),{},{draggable:!1,transformable:!1,selectable:!1,meta:{type:o.a.BACKGROUND_COLOR}})}}},,,,function(e,t,n){"use strict";var r=n(7),a=n.n(r),i=n(4),c=n(2),o=n(14),s=n(10),u=n(27),l=n(6),d=n(9),b=n(12),f=n(192),h=n(220),p=n(458),g=n(336),O=n(1),v=n(47),j=n(81),m=n(16),y=n(51),x=n(156),w=n(0),A=n(160),E=n(168),k=function(){var e=Object(s.a)(a.a.mark((function e(t){var n,r,s,C,S,T,_,I,R,L,P,G,M,B,D,N,z,H,Y,X,U,F,W,V,K,q,J,Q,Z,$,ee,te,ne,re,ae,ie,ce,oe,se,ue,le,de,be,fe,he,pe,ge,Oe,ve,je,me,ye,xe,we,Ae,Ee,ke,Ce,Se,Te,_e,Ie,Re,Le,Pe,Ge,Me,Be,De,Ne,ze,He,Ye,Xe,Ue,Fe,We,Ve,Ke,qe,Je,Qe,Ze,$e,et,tt,nt,rt,at,it,ct,ot,st,ut,lt,dt,bt,ft,ht,pt,gt;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Z=t.elem,$=t.props,ee=t.forceTemplateCollageReplace,te=void 0!==ee&&ee,ne=t.fromHistoryId,re=t.droppableId,ae=t.valueKey,ie=t.simpleReplace,ce=void 0!==ie&&ie,oe=t.isPreview,se=void 0!==oe&&oe,ue=t.drawPlaceHolder,le=void 0!==ue&&ue,de=t.draggedImageEl,be=t.imageType,fe=Object(l.b)((function(e){return{stage:Object(d.vd)(e),baseGroup:Object(d.ad)(e),layers:Object(d.ac)(e)}})),he=fe.stage,pe=fe.baseGroup,ge=fe.layers,Oe=be===O.Jf,ve=!Z.fromHistory,e.next=6,Object(E.c)(Z,$,te,ne,re,de);case 6:if(je=e.sent,me=je.url,ye=je.activePhoto,xe=je.layerActivePhoto,we=je.isBgObjectRemove,Ae=je.newImage,xe&&Ae&&pe&&he&&ye&&me){e.next=14;break}return e.abrupt("return");case 14:if(!se||!le){e.next=17;break}return Object(A.a)({stage:he,baseGroup:pe,layerArr:ge,fromHistory:!1,valueKey:ae,isPreview:se}),e.abrupt("return");case 17:if(Ee=Object(E.a)(Z,Ae,xe),ke=Ee.imageScale,Ce=Ee.xOfCenter,Se=Ee.yOfCenter,Te=Ee.isPremium,_e=Ee.scaledWidth,Ie=Ee.scaledHeight,Re=Ee.hasLayerPlaceholder,Le=ae&&!ce?{x:Z.x[ae],y:Z.y[ae],offsetX:null!==(n=Z.offsetX&&Z.offsetX[ae])&&void 0!==n?n:_e/2,offsetY:null!==(r=Z.offsetY&&Z.offsetY[ae])&&void 0!==r?r:Ie/2,adjustSettings:{zoom:null!==(s=Z.zoom[ae])&&void 0!==s?s:0,rotate:null!==(C=Z.rotate[ae])&&void 0!==C?C:0,contrast:null!==(S=Z.contrast[ae])&&void 0!==S?S:0,saturation:null!==(T=Z.saturation[ae])&&void 0!==T?T:0,brightness:null!==(_=Z.brightness[ae])&&void 0!==_?_:0,highlights:null!==(I=Z.highlights[ae])&&void 0!==I?I:0,clarity:null!==(R=Z.clarity[ae])&&void 0!==R?R:0,shadows:null!==(L=Z.shadows[ae])&&void 0!==L?L:0,temperature:null!==(P=Z.temperature[ae])&&void 0!==P?P:0,hue:null!==(G=Z.hue[ae])&&void 0!==G?G:0,hsl:null!==(M=Z.hsl[ae])&&void 0!==M?M:{}}}:{x:Ce,y:Se,offsetX:null!==(B=Z.offsetX)&&void 0!==B?B:_e/2,offsetY:null!==(D=Z.offsetY)&&void 0!==D?D:Ie/2,adjustSettings:{zoom:null!==(N=Z.zoom)&&void 0!==N?N:0,rotate:null!==(z=Z.rotate)&&void 0!==z?z:0,contrast:null!==(H=Z.contrast)&&void 0!==H?H:0,saturation:null!==(Y=Z.saturation)&&void 0!==Y?Y:0,brightness:null!==(X=Z.brightness)&&void 0!==X?X:0,highlights:null!==(U=Z.highlights)&&void 0!==U?U:0,clarity:null!==(F=Z.clarity)&&void 0!==F?F:0,shadows:null!==(W=Z.shadows)&&void 0!==W?W:0,temperature:null!==(V=Z.temperature)&&void 0!==V?V:0,hue:null!==(K=Z.hue)&&void 0!==K?K:0,hsl:null!==(q=Z.hsl)&&void 0!==q?q:{}}},Pe=Le.x,Ge=Le.y,Me=Le.offsetX,Be=Le.offsetY,De=Le.adjustSettings,Ne=ce?Z.x:Ce,ze=ce?Z.y:Se,He=Object(E.b)(_e,Ie,Pe,ke),Ye=He.shutterStockPhotoWidth,Xe=He.shutterStockPhotoHeight,Ue=He.shutterStockPhotoX,Fe={x:se&&Oe?Ue:Pe,y:Ge,offsetX:Me,offsetY:Be,isPremium:Te,image:Ae,width:se&&Oe?Ye:_e,height:se&&Oe?Xe:Ie,scaleX:null!==(J=Z.scaleX)&&void 0!==J?J:1,scaleY:null!==(Q=Z.scaleY)&&void 0!==Q?Q:1,draggable:!0,is_placeholder_active:!ve&&Z.is_placeholder_active,originalWidth:Ae.width,originalHeight:Ae.height},We={x:{oldValue:Ne,newValue:Fe.x},y:{oldValue:ze,newValue:Fe.y}},Ve=De.saturation,Ke=De.brightness,qe=De.contrast,Je=De.rotate,Qe=De.highlights,Ze=De.clarity,$e=De.shadows,et=De.temperature,tt=De.hue,nt=De.hsl,rt=O.vh.editorOnly?{}:{filters:[y.a.IEAdjust].concat(Object(o.a)(Object(x.a)(nt)?[y.a.IEHSL]:[]))},Object(w.Lb)(xe,Object(c.a)(Object(c.a)({},Fe),{},{saturation:Ve,brightness:Ke,highlights:Qe,clarity:Ze,shadows:$e,temperature:et,hue:tt,contrast:qe,hsl:Object(h.a)(nt),rotation:Je},rt)),!ae){e.next=35;break}if(!(Z.flipScaleX&&Z.flipScaleX[ae]<0)){e.next=32;break}return e.next=32,Object(f.a)({ids:[Object(w.db)(xe).id],baseGroup:pe,type:"flip-horizontal",addToHistory:!1});case 32:if(!(Z.flipScaleY&&Z.flipScaleY[ae]<0)){e.next=35;break}return e.next=35,Object(f.a)({ids:[Object(w.db)(xe).id],baseGroup:pe,type:"flip-vertical",addToHistory:!1});case 35:if(Object(v.h)("zoom",xe,De.zoom,ye,!1,!0),at=Object(w.db)(xe),it=at.mask,ct=at.originalImage,(it||ct)&&Object(w.Lb)(xe,{mask:null,originalImage:void 0}),Object(w.db)(xe)[O.mf]&&ve&&Object(w.Lb)(xe,Object(i.a)({},O.mf,!1)),Re?Object(w.Lb)(xe,{scaleX:null!==(ot=Z.scaleX)&&void 0!==ot?ot:1,scaleY:null!==(st=Z.scaleY)&&void 0!==st?st:1,draggable:xe.draggable(),isErasable:!0,is_settings:!0,isCropAble:!1,isReplaceAble:!1,is_placeholder_active:!1}):Object(w.Lb)(xe,{is_placeholder_active:!1,scaleX:null!==(ut=Z.scaleX)&&void 0!==ut?ut:1,scaleY:null!==(lt=Z.scaleY)&&void 0!==lt?lt:1}),re&&!se&&Z.originalUrl&&Object(p.a)(he,re),Object(w.k)(pe),dt=Object(w.db)(Object(w.kb)(xe)),bt=dt.id.includes(O.Zb),ye.type===O.Cc&&(ft=Object(w.N)(xe,".".concat(O.Cc)),Object(w.Lb)(ft,{is_placeholder_active:!1})),!ve||bt||se||Z.originalUrl||(gt=ae&&!ce?{zoom:ye.settings.zoom,rotate:ye.settings.rotate,contrast:ye.settings.contrast,brightness:ye.settings.brightness,saturation:ye.settings.saturation,highlights:ye.settings.highlights,clarity:ye.settings.clarity,shadows:ye.settings.shadows,temperature:ye.settings.temperature,hue:ye.settings.hue,hsl:ye.settings.hsl}:{zoom:{oldValue:ye.settings.zoom,newValue:0},rotate:{oldValue:ye.settings.rotate,newValue:0},contrast:{oldValue:ye.settings.contrast,newValue:0},brightness:{oldValue:ye.settings.brightness,newValue:0},saturation:{oldValue:ye.settings.saturation,newValue:0},highlights:{oldValue:ye.settings.highlights,newValue:0},clarity:{oldValue:ye.settings.clarity,newValue:0},shadows:{oldValue:ye.settings.shadows,newValue:0},temperature:{oldValue:ye.settings.temperature,newValue:0},hue:{oldValue:ye.settings.hue,newValue:0},hsl:{oldValue:ye.settings.hsl,newValue:{}}},Object(j.a)({historyStack:{historyAction:m.a.replace_image,settings:Object(c.a)(Object(c.a)(Object(c.a)({},We),gt),{},(pt={props:$,id:Object(w.db)(xe).id,forceTemplateCollageReplace:te,selectedId:{oldValue:Object(w.db)(xe).id},type:m.b.grid_cell,isPremium:{oldValue:ye.isPremium,newValue:Te},toolType:{oldValue:ye.settings.toolType,newValue:""}},Object(i.a)(pt,O.mf,{oldValue:we,newValue:!1}),Object(i.a)(pt,"url",{oldValue:null!==(ht=Object(w.db)(xe).url)&&void 0!==ht?ht:ye.resources.url,newValue:Z.data_url||Z.originalUrl||Z.url}),Object(i.a)(pt,"is_placeholder_active",{oldValue:ye.settings.is_placeholder_active,newValue:!1}),pt))}})),se||Z.originalUrl||Object(u.b)((function(){var e,t,n,r,a,i,o,s,u,d,f,h,p;Object(l.a)({type:b.l,isPremium:Te,resources:{url:Z.originalUrl||me,id:Z.id,license:Z.license,is_local:null===$||void 0===$?void 0:$.is_local,width:Ae.width,height:Ae.height,type:be},settings:Object(c.a)(Object(c.a)({},Z),{},{is_placeholder_active:!1,type:ye.settings.type||ye.type,zoom:null!==(e=ae&&Z.zoom[ae])&&void 0!==e?e:0,rotate:null!==(t=ae&&Z.rotate[ae])&&void 0!==t?t:0,contrast:null!==(n=ae&&Z.contrast[ae])&&void 0!==n?n:0,saturation:null!==(r=ae&&Z.saturation[ae])&&void 0!==r?r:0,brightness:null!==(a=ae&&Z.brightness[ae])&&void 0!==a?a:0,highlights:null!==(i=ae&&Z.highlights[ae])&&void 0!==i?i:0,clarity:null!==(o=ae&&Z.clarity[ae])&&void 0!==o?o:0,shadows:null!==(s=ae&&Z.shadows[ae])&&void 0!==s?s:0,temperature:null!==(u=ae&&Z.temperature[ae])&&void 0!==u?u:0,hue:null!==(d=ae&&Z.hue[ae])&&void 0!==d?d:0,hsl:null!==(f=ae&&Z.hsl[ae])&&void 0!==f?f:{},scaleX:null!==(h=ae&&Z.flipScaleX&&Z.flipScaleX[ae])&&void 0!==h?h:1,scaleY:null!==(p=ae&&Z.flipScaleY&&Z.flipScaleY[ae])&&void 0!==p?p:1,toolType:Z.toolType}),id:ye.id}),Object(l.a)({type:b.j,id:ye.id})})),!bt||se||Z.originalUrl){e.next=50;break}return e.next=50,Object(g.a)({elem:Z});case 50:if(!Z.originalUrl){e.next=53;break}return e.next=53,k({elem:Object(c.a)(Object(c.a)({},Z),{},{url:Z.originalUrl,originalUrl:""}),props:$,forceTemplateCollageReplace:te,fromHistoryId:ne,droppableId:re,valueKey:ae,simpleReplace:ce,isPreview:se,imageType:be,drawPlaceHolder:le,draggedImageEl:null});case 53:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.a=k},,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1),a={overlays:r.qc.overlay,"lut-filter-image":r.qc.lut,"color-toning-effects":r.qc.colorToning,blur:r.qc.imageEngineBlur,fx:r.qc.imageEngineFX,popArt:r.qc.imageEnginePopArt,featured:r.qc.imageEngineFeatured},i=function(e,t){if(!e)return!1;var n=e.effectName,i=e.type,c=i&&a[i];if(!c||!r.Lh.includes(c))return!1;if(r.Mh.includes(c)){var o=t.data[c].find((function(e){return e.name===n}));return!!(null===o||void 0===o?void 0:o.isPremium)}var s=Number(null===n||void 0===n?void 0:n.replace(/^\D+/g,""))%2,u=c===r.qc.overlay;return"NONE"!==n&&u?0!==s:0===s}},,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var r=n(7),a=n.n(r),i=n(2),c=n(10),o=n(179),s=n(6),u=n(17),l=n(269),d=n(29),b=n(157),f=n(9),h=n(77),p=n(50),g=n(1),O=n(0),v=n(49),j=n(57);function m(e,t,n,r){return e>n||t>r?Object(b.a)(e,t,n,r):{width:e,height:t,ratio:1}}function y(e){return e.includes("type=webp&")?e.replace("type=webp&to=min&r=1920",""):e.replace("to=min&r=1920","")}var x=10,w=40,A=g.Gb,E=function(e,t,n){var r=n?w:x;return Math.min(e,t)*r/100},k=function(e,t,n,r,a,i){var c=Object(O.S)(e,(function(e){return Object(O.db)(e).className===t&&Object(O.db)(e).id!==g.ch}));if(!(Object(O.S)(e,(function(e){return Object(O.db)(e).id.includes(g.Hd)})).length?c.length>1:c.length>=1))return{x:(a-r)/2,y:(i-n)/2};var o=c[c.length-1],s=Object(O.db)(o).initialWidth,u=Object(O.db)(o).initialHeight,l=Object(O.db)(o).x,d=Object(O.db)(o).y,b=u===n&&s===r,f=(a-r)/2,h=(i-n)/2,p=(l-f)/A,v=p===(d-h)/A&&p===Math.floor(p),j=b&&v?A:0,m=a-l-j<50*r/100;return{x:j&&!m?l+j:f,y:j&&!m?d+j:h}},C=function(e,t,n,r,o,d){Object(O.fb)(e).forEach(function(){var e=Object(c.a)(a.a.mark((function e(c){var s,u,l,f,h,p,g,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(s=Object(O.db)(c)).unique===n&&(u=function(){var e=s.cropX,n=s.cropY,r=s.cropWidth,a=s.cropHeight;if(e||n||r||a){var i=t.width/s.originalWidth,c=t.height/s.originalHeight;return{cropX:e*i,cropY:n*c,cropWidth:r*i,cropHeight:a*c}}return{}}(),l=E(o,d),f=Object(b.a)(t.width,t.height,o-l,d-l),h=f.width,p=f.height,g=f.ratio,v=Object.keys(u).length?u:{width:h,height:p},Object(O.Lb)(c,Object(i.a)(Object(i.a)({},v),{},{imgRatio:g,image:t,originalWidth:t.width,originalHeight:t.height,waitingForOriginal:!1})),Object(O.l)(c,{pixelRatio:r}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var h=Object(s.b)((function(e){return{eraserImage:Object(f.jb)(e),bgRemovalImage:Object(f.j)(e)}})),p=h.eraserImage,g=h.bgRemovalImage;p&&Object(O.db)(p).unique===n&&(Object(O.Lb)(p,{image:t}),Object(s.a)(u.a.actions.updateEraserImage())),g&&Object(O.db)(g).unique===n&&(Object(O.Lb)(g,{image:t}),Object(s.a)(l.a.actions.updateObjectRemovalImage())),Object(O.k)(e)};function S(e,t){return T.apply(this,arguments)}function T(){return(T=Object(c.a)(a.a.mark((function e(t,n){var r,i,c,o,u,l,b,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.image,i=t.baseGroup,c=r.url,o=r.imageNode,u=r.resizeWidth,l=r.resizeHeight,e.next=4,Object(d.a)(c);case 4:b=e.sent,f=Object(p.a)(o),C(i,b,n,f,u,l),Object(s.a)({type:h.n,resources:{width:b.width,height:b.height}});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=function(e){Object(O.i)(e,"dblclick",(function(){return Object(j.d)(e)})),Object(j.a)(e)},I=function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c,l,f,h,j,x,w,A,C,T,I,R,L,P,G,M,B,D,N,z,H,Y,X,U,F,W,V,K,q,J,Q,Z,$,ee,te,ne,re,ae,ie,ce,oe,se,ue,le,de,be,fe,he,pe,ge,Oe,ve,je,me;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.id,c=t.baseGroup,l=t.layerArr,f=t.image,h=t.drawOnCanvas,c){e.next=3;break}return e.abrupt("return");case 3:return j=Object(O.mb)(c),x=f.url,w=f.license,A=f.toolType,C=f.isErasable,T=f.isCropAble,I=f.originalUrl,R=f.resizeWidth,L=f.resizeHeight,P=f.isReplaceAble,G=f.hasPatch,M=void 0!==G&&G,B=x.includes("cdn-shutterstock")&&x.includes("to=min&r=1920"),D=B?y(x):x,e.next=9,Object(d.a)(D);case 9:N=e.sent,z=Object(o.a)(),H={id:r,unique:z,hasPatch:M,toolType:A,isErasable:C,name:"image",hasFte:w,draggable:!0,image:N,is_settings:!0,waitingForOriginal:!!I,isCropAble:!!T,isReplaceAble:!!P},Y=Object(O.S)(c,(function(e){return Object(O.db)(e).is_placeholder_active})),X=null===(n=l.find((function(e){var t;return e.active||(null===(t=e.effectLayer)||void 0===t?void 0:t.active)})))||void 0===n?void 0:n.id,U=Object(O.Db)(Y),(F=U.find((function(e){return Object(O.db)(e).id===X})))&&!h?(W=Object(O.db)(c).width,V=Object(O.db)(c).height,K=Object(p.a)(F),q=Object(O.kb)(F),J=m(N.width,N.height,R,L),Q=J.height,Z=J.width,$=J.ratio,ee=q.attrs.collageCell,te=ee.size,ne=te.width,re=te.height,ae=ee.gravityCenter,ie=ae.x,ce=ae.y,oe=Math.max(ne*W/Z,re*V/Q),Object(O.n)(F),se=Object(O.db)(F),ue=se.id,le=se.name,Object(O.l)(Object(O.Lb)(F,Object(i.a)(Object(i.a)({},H),{},{image:N,x:ie*W,y:ce*V,id:ue,name:le,width:Z*oe,height:Q*oe,offsetX:Z*oe/2,offsetY:Q*oe/2,imgRatio:$,isCropAble:!1,prevImageId:"",is_placeholder_active:!1})),{pixelRatio:K}),Object(O.k)(j)):f.fromHistory?H=Object(i.a)(Object(i.a)({},H),f):(de=r.includes(g.Yf),be=E(R,L,de),fe=Object(b.a)(N.width,N.height,R-be,L-be),he=fe.width,pe=fe.height,ge=fe.ratio,Oe=k(c,"Image",pe,he,R,L),ve=Oe.x,je=Oe.y,H=Object(i.a)(Object(i.a)({},H),{},{x:f.is_placeholder_active?f.x:ve,y:f.is_placeholder_active?f.y:je,width:he,height:pe,imgRatio:ge,initialWidth:he,initialHeight:pe,originalWidth:N.width,originalHeight:N.height})),me=Object(O.s)(H),Object(O.f)(c,me),_(me),Object(v.h)([me]),Object(s.a)(u.a.actions.setActiveEffectPage("")),I&&S({image:{url:I,resizeWidth:R,resizeHeight:L,imageNode:me},baseGroup:c},z);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.b=I},function(e,t,n){"use strict";var r=n(7),a=n.n(r),i=n(10),c=n(64),o=n(1),s=n(262),u=function(e){var t=e.length;if(t>o.Sd)return!1;for(var n=0,r=0;r<t;++r){var a=e[r].getAttribute("d"),i=Object(s.c)(a||"");if((n+=i.length)>o.Rd||i.length>o.Md)return!1}return!0},l=function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r,i,s,l,d,b,f,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.a)(t);case 2:return r=e.sent,e.next=5,r.blob();case 5:return i=e.sent,e.next=8,new Promise((function(e){var t=document.createElement("object");t.type="image/svg+xml",t.title="fake",t.addEventListener("load",(function(){var r=t.contentDocument,a=Array.from(r.querySelectorAll("path"));a.forEach((function(e){(null===n||void 0===n?void 0:n.fill)&&e.style.setProperty("fill","#".concat(n.fill))}));var i=null===r||void 0===r?void 0:r.querySelector("svg"),c=null===i||void 0===i?void 0:i.getBBox(),o=Number(null===i||void 0===i?void 0:i.getAttribute("width"))||(null===c||void 0===c?void 0:c.width),s=Number(null===i||void 0===i?void 0:i.getAttribute("height"))||(null===c||void 0===c?void 0:c.height);e({doc:r,width:o,height:s,canBePathsGroup:u(a)}),document.body.removeChild(t)}),{once:!0}),t.data=URL.createObjectURL(i),t.classList.add("visually-hidden"),document.body.append(t)}));case 8:return s=e.sent,l=s.doc,d=s.width,b=s.height,f=s.canBePathsGroup,h="".concat(o.Af,"_").concat(Date.now().toString(36)),e.abrupt("return",{id:h,svgDoc:l,svgWidth:d,svgHeight:b,canBePathsGroup:f});case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();t.a=l},,,function(e,t,n){"use strict";var r=n(2),a=n(41),i=n.n(a),c=n(1),o=n(0),s=function(e){var t=e.layerSize/2,n=e.size/2;return t<=n?Math.abs(t):Math.abs(t-n)},u=function(e){var t=e.baseGroup,n=e.width,r=e.height,a=e.nodeXPosition,i=e.nodeYPosition,c=Object(o.mb)(t),u=Object(o.db)(t).width/Object(o.db)(c).scaleX,l=Object(o.db)(t).height/Object(o.db)(c).scaleY;return{x:void 0===a?s({layerSize:u,size:n}):a,y:void 0===i?s({layerSize:l,size:r}):i}},l=n(519),d=n(11),b=n(68),f=function(e){return e.replace(/rgb\((.+?)\)/gi,(function(e,t){return"#".concat(t.split(",").map((function(e){return parseInt(e,10).toString(16).padStart(2,"0")})).join(""))}))},h=n(49),p=n(262),g=n(90),O=n(57),v=c.Gb;function j(e,t){var n=e.getAttribute(t);return n||(e.parentElement?j(e.parentElement,t):void 0)}function m(e){var t,n=j(e,"fill");return!n&&(null===(t=e.style)||void 0===t?void 0:t.fill)&&e.style.fill.includes("rgb")?f(e.style.fill):n}t.a=function(e){var t=e.baseGroup,n=e.settings,a=e.fireClick,s=void 0===a||a,f=e.isFromTemplate,y=void 0!==f&&f,x=[];if(!t||!n||!n.svgDoc)return{childrenAttrs:x,ratio:1};var w=Object(o.mb)(t),A=Object(o.L)(t,"#".concat(n.id)),E=n.svgDoc,k=n.shapeType,C=n.colorRGB1,S=n.svgWidth,T=void 0===S?200:S,_=n.svgHeight,I=void 0===_?200:_,R=E.querySelector("svg"),L=k===c.rc.ICONS,P=!L&&C&&Object(b.a)(C);if(!R)return{childrenAttrs:x,ratio:1};var G=Object(o.S)(t,"Group"),M=G[G.length-2],B=Object(o.db)(M),D=B.width,N=B.height,z=Object(o.db)(t).width/Object(o.db)(w).scaleX,H=Object(o.db)(t).height/Object(o.db)(w).scaleY,Y=u({baseGroup:t,width:T,height:I}),X=Object(l.a)({width:T,height:I},t,w),U=D===T&&N===I,F=(z-X*T)/2,W=(H-X*I)/2,V=Object(o.db)(M),K=V.x,q=V.y,J=(K-F)/v,Q=J===(q-W)/v&&J===Math.floor(J),Z=U&&Q?v:0,$=U&&z-K-Z<X*(2+T)*50/100,ee=Z&&!$?K+Z:F,te=Z&&!$?q+Z:W,ne=n.fromHistory?{x:n.positionX,y:n.positionY,scaleX:n.scaleX,scaleY:n.scaleY,rotation:n.rotation}:{x:ee||(null===Y||void 0===Y?void 0:Y.x),y:te||(null===Y||void 0===Y?void 0:Y.y),scaleX:X,scaleY:X},re={width:T,height:I,id:n.id,name:"shapeGroup",is_settings:!0,draggable:!0,isFromTemplate:y},ae=A||Object(o.r)({});Object(o.Lb)(ae,Object(r.a)(Object(r.a)({},ne),re));var ie,ce=E.querySelectorAll("path"),oe=Object(d.c)(d.b.paColor3);return ie=ce,Array.from(ie).forEach((function(e,t){var a,s=function(e){return{data:e.getAttribute("d"),pathFill:m(e),stroke:j(e,"stroke"),strokeWidth:j(e,"stroke-width"),lineCap:j(e,"stroke-linecap"),lineJoin:j(e,"stroke-linejoin"),opacity:j(e,"fill-opacity")}}(e),u=s.data,l=s.pathFill,d=s.stroke,b=s.strokeWidth,f=s.lineCap,h=s.lineJoin,O=s.opacity,v=P||("none"===l?"":l||oe);if(u){var y=Object(p.a)(u),w=null===y||void 0===y?void 0:y.coords.filter((function(e){return!!e.radius})),A=Math.ceil((null===(a=w[0])||void 0===a?void 0:a.radius)+w.length+1||0),E=L?"".concat(n.childId,"-").concat(t):n.childId,k=Object(o.w)(Object(r.a)(Object(r.a)({data:u,name:c.ec},n.shapeType!==c.rc.ORGANIC_SHAPES&&{stroke:L&&n.childrenAttrs?n.childrenAttrs[t].stroke:d}),{},{lineCap:f,lineJoin:h,opacity:Number(O)||void 0,strokeWidth:Number(b)||void 0,fill:L&&n.childrenAttrs?n.childrenAttrs[t].fill:v,id:E,is_settings:!0,width:T,height:I},n.shapeType===c.rc.SIMPLE_SHAPES&&{cornerRadius:0,setCornerRadius:function(e){this.cornerRadius=e},sceneFunc:function(e,t){var n=Object(o.db)(t).cornerRadius+A;e.beginPath(),u.includes("c")||u.includes("C")?Object(p.b)(e,u):g.a.drawRoundedPoly(null===y||void 0===y?void 0:y.coords,n,e),Object(o.Lb)(t,{width:T,height:I}),e.closePath(),e.strokeShape(t),e.fillShape(t),Object(o.Lb)(t,{strokeWidth:Object(o.db)(t).strokeWidth})}})),C=Object(o.db)(k),S=C.fill,_=C.stroke;x.push({data:u||"",fill:S&&i()(S).toHexString(),stroke:_&&i()(_).toHexString(),id:E}),Object(o.h)(ae,k)}})),Object(o.h)(t,ae),Object(O.a)(ae),s&&Object(h.h)([ae]),{childrenAttrs:x,ratio:X,pathsGroup:ae}}},function(e,t,n){"use strict";var r=n(2),a=n(139),i=n(1),c=n(19),o=n(188),s=n(132);t.a=function e(t){var n=t.root,u=t.layers,l=t.ids,d=t.isFirstIteration,b=void 0===d||d,f=Object(s.a)(u,l),h=u.find((function(e){return e.id===i.eh})),p=b?f.map((function(){return Object(a.a)()})):[];return f.forEach((function(t,s){var l=b?p[s]:Object(a.a)(),d=Object(c.q)(t),f=Object(r.a)(Object(r.a)({},t),{},{id:l,dependencies:[],x:t.x+(b?i.Gb:0),y:t.y+(b?i.Gb:0),addWithLoader:d,transformable:!d&&t.transformable});h?u.splice(u.length-1,0,f):u.push(f),h?n.dependencies.splice(n.dependencies.length-1,0,Object(o.a)(l)):n.dependencies.push(Object(o.a)(l)),t.dependencies.length&&e({layers:u,root:f,isFirstIteration:!1,ids:t.dependencies.map((function(e){return e.layerId}))})})),p}},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"e",(function(){return c})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return s}));var r=n(1),a=function(){return sessionStorage.getItem(r.cg)},i=function(){return sessionStorage.removeItem(r.cg)},c=function(e){return sessionStorage.setItem(r.cg,e)},o=function(){return sessionStorage.getItem(r.Pb)},s=function(e){return sessionStorage.setItem(r.Pb,e)}},function(e,t,n){"use strict";var r=n(6),a=n(17),i=n(49);t.a=function(e,t){var n=t.evt.shiftKey;Object(r.a)(a.a.actions.setEditingTextId("")),n?Object(i.i)([e]):Object(i.h)([e])}},function(e,t,n){"use strict";var r=n(2),a=n(7),i=n.n(a),c=n(10),o=n(1),s=n(52),u=n(29),l=n(50),d=n(47),b=n(0),f=n(49),h=n(55),p=n(67),g=s.a.generateOverlaySettings(),O=function(e){Object(b.Lb)(e,{hue:g.hue,rotation:g.rotate,contrast:g.contrast,opacity:g.opacity/100,saturation:g.saturation,brightness:g.brightness,scale:{x:1,y:1},globalCompositeOperation:g.blendMode})},v=function(e,t){if(!t)return{};var n=Object(b.db)(t),r=n.width,a=n.height,i=n.x,c=n.y,o=n.offsetX,s=n.offsetY,u=n.scaleX,l=n.scaleY;return{x:i-o*u+(r-e.width)/2,y:c-s*l+(a-e.height)/2,scaleX:u,scaleY:l}},j=function(){var e=Object(c.a)(i.a.mark((function e(t){var n,a,s,g,j,m,y,x,w,A,E,k,C,S,T,_,I,R,L,P,G,M,B,D,N,z,H,Y,X,U,F,W,V,K,q,J,Q,Z,$,ee,te,ne,re,ae,ie,ce,oe,se;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.images,a=t.id,s=t.effectGroup,g=t.stage,j=t.fireClick,m=void 0===j||j,y=t.fromHistory,x=t.activeImage,w=t.updateEffect,A=null===x||void 0===x?void 0:x.layer.id,E=Object(b.M)(s,"#".concat(A,"-overlay")),k=Object(b.M)(s,"#".concat(A,"-overlay2")),C=Object(b.tb)(s),S=Object(b.db)(Object(b.kb)(s)),T=S[o.Ed]!==o.pg&&S.name!==o.Cc,_=Object(b.db)(s),I=_.effectType,R=I&&I!==o.qc.overlay,L=Object(b.M)(s,"#".concat(A)),P=Object(b.db)(g),G=P.width,M=P.height,B=P.scaleX,D=P.scaleY,N=G/B,z=M/D,H=x&&Object(b.db)(x.node),Y=H.y,X=H.x,U=H.width,F=H.height,W=H.offsetX,V=H.offsetY,K=null===x||void 0===x?void 0:x.layer.type.includes("template"),q=null===A||void 0===A?void 0:A.includes(o.Bc),J=U||0,Q=F||0,Z=X||0,$=Y||0,ee=W||0,te=V||0,ne=function(){var e=Object(c.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w&&(x&&Object.keys(x.layer.effectLayer.settings).forEach((function(e){d.e.hasOwnProperty(e)&&d.e[e](t.filters()||[],t),d.d.hasOwnProperty(e)&&d.d[e](x.layer.effectLayer.settings[e],t)})),Object(b.l)(t,{pixelRatio:Object(l.a)(t)})),Object(b.Mb)(L,""),C&&Object(b.Lb)(s,{effectType:o.qc.overlay}),C&&T&&Object(f.h)([s]),Object(b.l)(L,{pixelRatio:Object(l.a)(L)}),Object(b.f)(s,t),K&&(n=Object(b.eb)(Object(b.kb)(t))[0],Object(b.Lb)(n,{x:n.x()-n.offsetX()*n.scaleX(),y:n.y()-n.offsetY()*n.scaleY(),offsetX:0,offsetY:0})),Object(b.I)(g),m&&T&&Object(f.h)([t]);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C&&R&&(Object(p.a)({effectType:I}),Object(h.b)(I)),!(null===n||void 0===n?void 0:n.image2)){e.next=34;break}return e.t0=Promise,e.next=28,Object(u.a)(null===n||void 0===n?void 0:n.image1.resource_url);case 28:return e.t1=e.sent,e.next=31,Object(u.a)(null===n||void 0===n?void 0:n.image2.resource_url);case 31:return e.t2=e.sent,e.t3=[e.t1,e.t2],e.abrupt("return",e.t0.all.call(e.t0,e.t3).then((function(e){e.forEach((function(e,t){var i;i=(null===x||void 0===x?void 0:x.node.scaleX())?Math.max(e.width/(J*Object(b.db)(null===x||void 0===x?void 0:x.node).scaleX),e.height/(Q*Object(b.db)(null===x||void 0===x?void 0:x.node).scaleY)):Math.max(e.width/J,e.height/Q);var c=e.width/i,o=e.height/i,s=0,u=0,l=0,d=0;C?(s=Z,u=$,l=e.width/i,d=e.height/i):N>=z?(s=(N-z)/2,u=0,l=z,d=z):N<=z&&(s=0,u=(z-N)/2,l=N,d=N);var f,h=0===t;if(h&&E?(Object(b.n)(E),f=E,Object(b.Lb)(f,{image:e,isHover:!0})):1===t&&k?(Object(b.n)(k),f=k,Object(b.Lb)(f,{image:e,isHover:!0})):f=Object(b.s)({image:e,is_settings:!0,globalCompositeOperation:"screen",draggable:!1}),O(f),Object(b.Lb)(f,{id:C?"".concat(A,h?"-overlay":"-overlay2"):"".concat(a).concat(t),name:h?"first-overlay-image":"second-overlay-image"}),y){var p=h?n.image1:n.image2;Object(b.Lb)(f,p),Object(b.l)(f)}else{Object(b.Lb)(f,{size:{width:h?c:l,height:h?o:d}});var g=Object(b.db)(f).width,j=Object(b.db)(f).height,m={};m=q?v({height:o,width:c},null===x||void 0===x?void 0:x.node):C?x&&Object(b.db)(x.node).scaleX&&!K?{position:{x:(J*Object(b.db)(x.node).scaleX-g)/2+Z,y:(Q*Object(b.db)(x.node).scaleY-j)/2+$}}:K?{position:{x:(J-g)/2+Z-ee,y:(Q-j)/2+$-te}}:{position:{x:(J-g)/2+Z,y:(Q-j)/2+$}}:h?{position:{x:(N-g)/2+Object(b.db)(f).offsetX,y:(z-j)/2+Object(b.db)(f).offsetY}}:{position:{x:s+Object(b.db)(f).offsetX,y:u+Object(b.db)(f).offsetX}},Object(b.Lb)(f,Object(r.a)(Object(r.a)({},m),{},{rotation:0}))}ne(f)}))})));case 34:return k&&Object(b.G)(k),e.next=37,Object(u.a)((null===n||void 0===n?void 0:n.image1.resource_url)||"");case 37:return re=e.sent,ae=x&&Object(b.db)(x.node).scaleX?Math.max(re.width/(J*Object(b.db)(x.node).scaleX),re.height/(Q*Object(b.db)(x.node).scaleY)):C?Math.max(re.width/J,re.height/Q):Math.min(re.width/N,re.height/z),E?(Object(b.n)(E),ie=E,Object(b.Lb)(ie,{image:re}),O(ie),Object(b.Lb)(ie,{isHover:!0})):ie=C?Object(b.s)({image:re,is_settings:!0,globalCompositeOperation:"screen",id:"".concat(A,"-overlay"),draggable:!1}):Object(b.s)({image:re,draggable:!1,is_settings:!0,globalCompositeOperation:"screen",name:"first-overlay-image",id:"".concat(a,"0")}),y?(Object(b.Lb)(ie,null===n||void 0===n?void 0:n.image1),Object(b.l)(ie)):(ie.size({width:re.width/ae,height:re.height/ae}),ce=Object(b.db)(ie).width,oe=Object(b.db)(ie).height,se={},se=q?v({height:oe,width:ce},null===x||void 0===x?void 0:x.node):x&&Object(b.db)(x.node).scaleX&&!K?{position:{x:(J*Object(b.db)(x.node).scaleX-ce)/2+Z,y:(Q*Object(b.db)(x.node).scaleY-oe)/2+$}}:C&&!K?{position:{x:(J-ce)/2+Z,y:(Q-oe)/2+$}}:K?{position:{x:(J-ce)/2+Z-ee,y:(Q-oe)/2+$-te}}:{position:{x:(N-ce)/2+Object(b.db)(ie).offsetX,y:(z-oe)/2+Object(b.db)(ie).offsetY}},Object(b.Lb)(ie,se)),e.next=43,ne(ie);case 43:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.a=j},function(e,t,n){"use strict";t.a=function(e){return new Promise((function(t){var n=new FileReader;n.onload=function(e){return e.target&&e.target.result?t(e.target.result):t("")},n.readAsDataURL(e)}))}},function(e,t,n){"use strict";var r=n(0);t.a=function(e,t){!function(e){Object(r.T)(e,".guid-line").forEach((function(e){return Object(r.G)(e)}))}(e),t&&Object(r.k)(e)}},function(e,t,n){"use strict";var r=n(6),a=n(12),i=n(163),c=n(1),o=n(9),s=n(0),u=n(43);t.a=function(){var e;Object(r.a)({type:a.k,layersIds:[{id:c.x}]}),Object(i.a)(),(null===(e=Object(s.T)(Object(r.b)(o.vd),"Group"))||void 0===e?void 0:e.filter((function(e){return Object(u.f)(e)}))).forEach((function(e){return Object(s.Lb)(e,{collageOutline:!1})}))}},function(e,t,n){"use strict";var r=n(1),a=n(254),i=n(0),c=n(158);t.a=Object(c.a)((function(e){var t=e.baseGroup,n=e.settings,c=e.layerArr;if(t){var o=Object(i.R)(t,(function(e){return Object(i.db)(e).id==="".concat(n.id).concat(r.zh)}));if(o||(o=Object(i.R)(t,(function(e){return Object(i.db)(e).id===n.id}))),o||n.withoutCheckIsExist)Object(a.a)({baseGroup:t,konvaElem:o,fromHistory:!0,layerArr:c});else{var s=Object(i.S)(t,(function(e){return Object(i.db)(e).groupId&&n.groupId===Object(i.db)(e).groupId}));Object(i.Db)(s).forEach((function(e){Object(a.a)({baseGroup:t,konvaElem:e,fromHistory:!0,layerArr:c})}))}}}))},function(e,t,n){"use strict";var r=n(12),a=n(6),i=n(140),c=n(50),o=n(0),s=n(1),u=n(49),l=n(59),d=n(16);t.a=function(e){var t=e.stage,n=e.baseGroup,b=e.settings,f=e.valueKey,h=b.id,p=Object(o.R)(t,"#".concat(h));if(p){var g={};for(var O in b)b.hasOwnProperty(O)&&!["id","selectedId","children","bulk","groupId","name"].includes(O)&&(g[O]=b[O][f]);var v=Object(o.N)(p,".".concat(s.Bc),!0);if(Object(o.db)(p).name!==s.Dc&&Object(o.tb)(v))return Object(l.i)(v,g),p;switch(Object(o.Lb)(p,g),Object(o.Ab)(p)&&Object(o.Lb)(p,{height:"auto"}),b.type){case d.b.transformend:var j=p.rotation();j=j?j<180?Math.floor(j):Math.floor(j-360):0;var m=Object(o.db)(p),y=m.scaleX,x=m.scaleY;Object(a.a)({type:r.l,settings:{zoom:0,rotate:j,fontSize:Object(o.db)(p).fontSize,scaleXTransformer:y,scaleYTransformer:x},isPremium:b.isPremium});break;case d.b.crop:var w={pixelRatio:Object(c.a)(p)};Object(o.l)(p,w),Object(i.c)(n),b.fire&&Object(u.h)([p])}return p}}},function(e,t,n){"use strict";var r=n(15),a=n(14);t.a=function(e,t,n){var i=Object(a.a)(e),c=i.splice(t,1),o=Object(r.a)(c,1)[0];return i.splice(n,0,o),i}},function(e,t,n){"use strict";var r=n(6),a=n(9),i=n(0),c=n(68),o=n(57);t.a=function(e){var t,n=e.baseGroup,s=e.layerArr,u=e.settings,l=e.type;if(u.colorRGB1&&u.colorRGB2){var d=Object(c.a)(u.colorRGB1),b=Object(c.a)(u.colorRGB2),f=u.id?u.id:null===(t=s.find((function(e){return e.active})))||void 0===t?void 0:t.id,h=n&&Object(i.R)(n,"#".concat(f));h&&Object(i.G)(h);var p=Object(r.b)(a.G),g=p.width,O=p.height,v="gradient"===l?b:d,j=Object(i.x)({id:f,width:g,height:O,fillLinearGradientStartPoint:{x:0,y:0},fillLinearGradientEndPoint:{x:g,y:O},fillLinearGradientColorStops:[0,"".concat(d),1,"".concat(b)],fillEnabled:!0,fillPriority:"linear-gradient",name:"rect-gradient",is_settings:!0,colorRGB1:u.colorRGB1,colorRGB2:u.colorRGB2,strokeWidth:.5});Object(i.i)(j,"mousedown",o.c),Object(i.f)(n,j),Object(i.Fb)(j),Object(i.Lb)(j,{fillLinearGradientColorStops:[0,d,1,v]}),Object(i.k)(n)}}},,function(e,t,n){"use strict";var r=n(4),a=n(84),i=n(15),c=n(2),o=n(46),s=n.n(o),u=n(179),l=n(27),d=n(1),b=n(12),f=n(6),h=n(243),p=n(81),g=n(16),O=n(0),v=n(124),j=n(57),m=n(43),y=n(50),x=function(e){var t=e.konvaElem,n=e.isGroup,r=e.movePixels,a=e.stage,i=e.isShape,c=e.baseGroup,o=Object(O.gb)(t,{relativeTo:Object(m.a)(c)}),s=o.x,u=o.y,l=o.width,d=o.height,b=Object(O.db)(a),f=b.scaleX,h=b.scaleY,p=Object(O.db)(c),g=p.width/f,v=p.height/h,j={x:(g-l)/2,y:(v-d)/2};if(function(e){var t=e.xAxis,n=e.yAxis,r=e.ratio,a=e.elementWidth,i=e.elementHeight,c=e.isShape;return t<(c?r*a*50/100:a/2)||n<(c?r*i*50/100:i/2)}({xAxis:g-s,yAxis:v-u,ratio:Math.min(100*l/(75*g),100*d/(75*v)),elementWidth:l,elementHeight:d,isShape:i}))return j;var y=Object(O.db)(t),x=y.x,w=y.y;return n&&!i?{x:x,y:w}:{x:x+r,y:w+r}},w=n(345),A=n(59),E=n(306),k=["counter"],C=d.Hb.keyDown,S=d.Hb.fromButton;t.a=function(e){var t=e.baseGroup,n=e.konvaElems,o=e.layerArr,T=e.fromHistoryId,_=e.duplicateType,I=void 0===_?S:_,R=e.keepSourceInHistory,L=void 0!==R&&R,P=e.movePixels,G=void 0===P?d.Gb:P,M=Object(O.mb)(t),B=[],D=[],N=[],z=[],H=o.map((function(e){return"#".concat(e.id)})),Y=n||Object(O.T)(t,H.join(", ")),X=Object(O.X)(t,d.pb),U="";if(!Y.some((function(e){return Object(O.db)(e).isPlaceholder&&"text"!==Object(O.db)(e).name}))){if(Y.forEach((function(e,n){var r,l,b;if(!(n>=o.length)){var f=Object(O.db)(e).id,p=o.find((function(e){return e.id===f||e.settings.effectGroupId===f}));if(p){var g=p.type===d.Af,m=p.type===d.Bc,S=[d.Zb,d.Df,d.Bc].some((function(t){var n,r;return f.includes(t)||(null===(n=Object(O.db)(Object(O.kb)(e)))||void 0===n||null===(r=n.id)||void 0===r?void 0:r.includes(t))})),_=T||function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.id.includes("elements"))return"elements_".concat(Object(u.a)());if(e.type.includes(d.Bc)){var n,r=(null===e||void 0===e||null===(n=e.settings)||void 0===n?void 0:n.counter)||1;return"".concat(e.type,"-").concat(Object(u.a)(),"-").concat(r+1)}if(t){var a=e.type===d.Af;return"".concat(e.type,"_").concat(Object(u.a)()).concat(a?d.Qh:d.zh)}return"".concat(e.type,"_").concat(Object(u.a)())}(p,S),R=x({konvaElem:e,isGroup:S,movePixels:G,stage:M,isShape:g,baseGroup:t}),P=p.elementType===d.rc.ICONS,H=Object(O.p)(e,Object(c.a)({id:_},R));Object(j.h)(H),Object(O.Ab)(H)||Object(O.Bb)(H)?Object(v.a)(H):m?Object(A.a)(H):Object(O.ub)(H)?Object(E.a)(H):Object(j.a)(H);var Y=S&&Object(O.fb)(H);if(Y&&!g){var X=Object(O.db)(H),F=X.x,W=X.y;Object(O.Lb)(H,{x:F+G,y:W+G})}if(Object(O.db)(H).effectType===d.qc.overlay){var V=Object(O.fb)(H),K=Object(i.a)(V,1)[0];Object(w.a)(H,K)}if(I===C){Object(O.Lb)(H,{duplicated_id:f});var q=Object(O.fb)(t).reduce((function(e,t){return t.attrs.duplicated_id===H.attrs.duplicated_id?{x:e.x===t.attrs.x?e.x+d.Gb:e.x,y:e.y===t.attrs.y?e.y+d.Gb:e.y}:e}),{x:Object(O.db)(H).x,y:Object(O.db)(H).y}),J=q.x,Q=q.y;Object(O.Lb)(H,{x:J,y:Q})}if(Object(h.a)("add",Object(O.db)(H).hasFte),["Image","Group",d.og].includes(p.konva_tagName))if(Y){!function e(t){t.forEach((function(t){var n,r=Object(O.tb)(t);if(!Object(O.wb)(t)||!(null===(n=Object(O.db)(t).id)||void 0===n?void 0:n.includes(d.Of))){var a=_.replace(g?d.Qh:d.zh,""),i=Object(y.a)(t),c=Object(O.db)(t),o=c.width,s=c.height;!r&&o&&s&&Object(O.l)(t,{pixelRatio:i});var u=g?a:Object(O.db)(t).id.replace(p.id,a);Object(O.Lb)(t,{id:u}),r&&e(t.getChildren().toArray())}}))}(Y)}else Object(O.l)(H,{pixelRatio:Object(y.a)(H)}),Object(O.Mb)(H,p.settings.blendMode||"");H&&Object(O.db)(H).name===d.ec&&Object(O.fb)(H).forEach((function(e){return Object(O.Lb)(e,{id:_})})),Object(O.f)(t,H);var Z=_.replace(d.zh,""),$=Object(c.a)(Object(c.a)({},p),{},{settings:Object(c.a)({},p.settings),id:Z});if(m&&H instanceof s.a.Group){var ee,te=Object(A.b)(H);$.cellsLayers=null===(ee=$.cellsLayers)||void 0===ee?void 0:ee.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{id:te[e.id],id2:Z})}))}var ne,re=function(e,t,n){if(e.settings.selectedChildAttrs&&e.settings.childrenAttrs&&n){var r=e.settings.selectedChildAttrs.id,a=e.settings.childrenAttrs.findIndex((function(e){return e.id===r}));return{selectedChildAttrs:Object(c.a)(Object(c.a)({},e.settings.selectedChildAttrs),{},{id:"".concat(t,"-").concat(a)})}}}(p,_,P);P&&(!function(e){var t=Object(O.db)(e).id;Object(O.fb)(e).forEach((function(e,n){return Object(O.Lb)(e,{id:"".concat(t,"-").concat(n)})}))}(H),$.settings.childrenAttrs=(ne=H,Object(O.fb)(ne).reduce((function(e,t){var n=Object(O.db)(t),r=n.data,a=n.fill,i=n.stroke,c=n.id;return e.push({data:r||"",fill:a,stroke:i,id:c}),e}),[])));var ae,ie=null===(r=p.effectLayer)||void 0===r?void 0:r.id;ie&&(ae=ie.indexOf("-")&&!ie.includes("|")&&ie.slice(ie.indexOf("-"))||ie.slice(ie.indexOf("|"),ie.length)),(null===(l=p.effectLayer)||void 0===l?void 0:l.lutId)&&(U="".concat(Z,"|image-canvas-effect-filter"));var ce="".concat(Z).concat(ae||"");D.unshift($),N.unshift(H);var oe=p.settings,se=(oe.counter,Object(a.a)(oe,k)),ue=Object(c.a)({id:Z,settings:Object(c.a)(Object(c.a)(Object(c.a)({},se),{},{childId:g?_.replace(d.Qh,""):void 0,effectGroupId:!Y||g||m?void 0:_},$.settings.childrenAttrs&&{childrenAttrs:$.settings.childrenAttrs}),re)},p.settings.isDoubleGroup&&{effectLayer:Object(c.a)(Object(c.a)({},p.effectLayer),{},{id:ce,id2:"".concat(ce,"2"),lutId:U,maskId:(null===(b=p.effectLayer)||void 0===b?void 0:b.lutId)&&"".concat(Z,"|image-canvas-mask-filter")})});z.unshift(ue),B.unshift({id:_,source:L&&{activeLayer:$,konvaElem:Object(O.p)(H)},duplicateType:I,duplicateLayerId:f.replace(d.zh,"")})}}})),X){var F;Object(O.Nb)(X,[].concat(N));var W=N.length>1?null:Object(O.db)(N[0]).id;Object(O.Lb)(X,(F={},Object(r.a)(F,d.v,W),Object(r.a)(F,"visible",!0),F)),Object(m.g)(X)}T||Object(p.a)({historyStack:{historyAction:g.a.duplicate_layer,settings:{children:B}}});var V=D.map((function(e,t){var n,r,a;return[d.qc.canvasEffecfilterImage,d.qc.sketch].includes(null===(n=z[t].effectLayer)||void 0===n?void 0:n.type)||[d.qc.doubleExposure,d.qc.overlay].includes(null===(r=e.settings)||void 0===r?void 0:r.effectId)?{id:null===(a=z[t].effectLayer)||void 0===a?void 0:a.id}:{id:e.id}}));return Object(l.b)((function(){Object(f.a)({type:b.b,newLayers:D}),Object(f.a)({type:b.m,batchSettings:z}),Object(f.a)({type:b.k,layersIds:V})})),Object(O.I)(t),{newKonvaElements:N,newLayers:D}}}},,,,function(e,t,n){"use strict";var r=n(156);t.a=function(e){var t=!1;return e.forEach((function(e){e.cellsLayers.forEach((function(e){Object(r.a)(e.settings.hsl)&&(t=!0)}))})),t}},,function(e,t,n){"use strict";var r=n(330),a=n(78),i=n(331),c=n(1),o=Math.abs,s=function(e){var t=e.clip,n=e.scaleX,r=e.scaleY;if(t){var a=t.width*n,i=t.height*r;return{x:t.x*n,y:t.y*r,width:a,height:i}}};function u(e,t){var n=e.x,i=e.y,l=e.id,d=e.clip,b=e.width,f=e.height,h=e.rotation,p=e.scaleX,g=void 0===p?1:p,O=e.scaleY,v=void 0===O?1:O,j=e.fontSize,m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l,y=Object(a.a)(t,m),x=g*y.scaleX,w=v*y.scaleY,A=b*x,E=f*w,k=Object(r.a)({width:A,height:E,rotation:-h,x:n*y.scaleX,y:i*y.scaleY}),C=s({clip:d,scaleX:x,scaleY:w}),S={id:l,rotation:h,clip:C,x:k.x+y.x+A*Number(A<0),y:k.y+y.y+E*Number(E<0),scaleX:x,scaleY:w,width:o(A),height:o(E),fontSize:j};return y.id===c.z?S:u(S,t,y.id)}t.a=function(e,t){return e.map((function(e){return u(Object(i.a)(e),t)}))}},function(e,t,n){"use strict";var r=n(73),a=Math.sin,i=Math.sqrt,c=Math.pow,o=Math.atan,s=Math.cos;t.a=function(e){var t=e.x,n=e.y,u=e.rotation,l=e.width,d=e.height,b=i(c(l,2)+c(d,2))/2,f=o(d/l)||0,h=Object(r.a)(u),p=a(h),g=s(h),O=t+b*s(f-h)*Math.sign(l),v=n+b*a(f-h)*Math.sign(l),j=((t-O)*g-(n-v)*p+O*Math.sign(l))*Math.sign(l),m=((t-O)*p+(n-v)*g+v*Math.sign(d))*Math.sign(d),y=j-Number(l<0)*l,x=m-Number(d<0)*d;return{x:y,y:x,centerX:y+l,centerY:x+d}}},function(e,t,n){"use strict";var r=n(2),a=n(30);t.a=function(e){return Object(r.a)({x:e.x,y:e.y,id:e.id,clip:e.clip,width:e.width,scaleY:e.scaleY,height:e.height,scaleX:e.scaleX,rotation:e.rotation,fontSize:e.fontSize},e.type===a.d.VECTOR_LAYER&&{sizeOutline:e.sizeOutline||0})}},function(e,t,n){"use strict";var r=n(1);t.a=function(e){switch(e.type){case r.tg:return r.tg;default:return"adjust"}}},function(e,t,n){"use strict";function r(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,r=arguments.length>1?arguments[1]:void 0;return t.hasOwnProperty(r.type)?t[r.type](n,r):n}}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var a=n(27).f},function(e,t,n){"use strict";var r=n(6),a=n(9),i=n(1);t.a=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=Object(r.b)(a.ac),o=c.find((function(t){var n;return t.id===e||(null===(n=t.effectLayer)||void 0===n?void 0:n.id)===e}));if(e.includes("overlay2"))t=e.slice(0,e.lastIndexOf("2"));else if(e.includes("image-canvas-effect-filter"))t=e.replace("|image-canvas-effect-filter","-canvas-effect-id");else if(!e.includes(i.Af)||e.includes(i.Qh)||n)if(e.includes(i.zh)){t=e.replace(i.zh,"");var s=c.find((function(e){return(null===e||void 0===e?void 0:e.effectLayer.id)===t||e.id===t}));t=(null===s||void 0===s?void 0:s.effectLayer.id)||(null===s||void 0===s?void 0:s.id)||""}else t=e.includes("|".concat(i.Of,"|"))?"".concat(e.split("|".concat(i.Of,"|"))[0],"|").concat(i.Of):e.slice(0,~e.indexOf("|")&&!(null===o||void 0===o?void 0:o.settings.isDoubleGroup)?e.indexOf("|"):e.length);else t="".concat(e.split("-")[0]).concat(i.Qh);return t}},function(e,t,n){"use strict";var r=n(2),a=n(73),i=n(0),c=function(e,t){var n=e.x,r=e.y,a=Math.cos(t),i=Math.sin(t);return{x:n*a-r*i,y:r*a+n*i}};t.a=function(e,t){var n=Object(i.db)(e),o=function(e){var t=e.x,n=e.y,r=e.width,i=e.height,o=e.scaleX,s=e.scaleY,u=e.currentRotation,l=e.rotation,d={x:-r*o/2,y:-i*s/2},b=c(d,Object(a.a)(u)),f=c(d,Object(a.a)(l));return{x:t+(f.x-b.x),y:n+(f.y-b.y)}}({x:n.x,y:n.y,width:n.width,height:n.height,scaleX:n.scaleX,scaleY:n.scaleY,currentRotation:n.rotation,rotation:t});Object(i.Lb)(e,Object(r.a)({rotation:t},o))}},function(e,t,n){"use strict";var r=n(2),a=n(7),i=n.n(a),c=n(10),o=n(164),s=n(1),u=n(6),l=n(12),d=n(9),b=n(52),f=n(180),h=n(211),p=n(29),g=n(157),O=n(137),v=n(314),j=n(385),m=n(248),y=n(55),x=n(386),w=n(337),A=n(244),E=n(0),k=n(149),C=n(517),S=n(62),T=n(67),_=function(){var e=Object(c.a)(i.a.mark((function e(t){var n,r,a,c,o,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.stage,r=t.layerArr,a=t.activeLayer,c=t.effectGroup,o=t.activeImage,e.next=3,Object(j.b)(o);case 3:if(d=e.sent){e.next=6;break}return e.abrupt("return");case 6:if(Object(u.a)({type:l.r,effectsData:{magic:d}}),a.settings.activeEffect!==s.ge){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,Object(j.a)({effect:{title:a.settings.effectName,uid:a.settings.activeEffect,icon:""},activeImage:o,stage:n,effectGroup:c,layerArr:r});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(c.a)(i.a.mark((function e(t){var n,r,a,c,s,u,l,d,b,f,h;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.stage,a=t.layerArr,c=t.activeImage,s=t.effectGroup,u=t.elem,c.src&&(null===(n=c.layer.resources)||void 0===n?void 0:n.effect_resource_url)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Object(k.a)(c.src);case 5:if(l=e.sent){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,Object(w.b)(l);case 10:if(d=e.sent){e.next=13;break}return e.abrupt("return");case 13:return e.next=15,Object(w.c)(d.sid);case 15:if(e.sent){e.next=18;break}return e.abrupt("return");case 18:return e.next=20,Object(p.a)(u.data_url||u.url);case 20:return b=e.sent,f=new o.Editor(o.LUT,b,b.width,b.height),Object(m.c)(f),e.next=25,f.applyLut(c.layer.resources.effect_resource_url);case 25:return h=e.sent,e.next=28,Object(w.a)({canvasEffectSrc:h,elemName:c.layer.settings.effectName,src:c.layer.resources.effect_resource_url,activeImage:c,sid:d.sid,effectGroup:s,stage:r,layerArr:a,activeEffect:c.layer.settings.effectName,isReplace:!0});case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(c.a)(i.a.mark((function e(t){var n,r,a,c,o,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.stage,r=t.layerArr,a=t.activeImage,c=t.effectGroup,o=t.elem,e.next=3,Object(k.a)(a.src);case 3:if(s=e.sent){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,Object(x.c)(s,void 0,!1);case 8:if(u=e.sent){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,Object(x.b)({sid:u.sid,stage:n,layerArr:r,effectGroup:c,activeImage:a,title:a.layer.settings.effectName,effectId:a.layer.settings.colorTransferId,colorTransferEffectUrl:a.layer.settings.colorTransferEffectUrl,url:Object(f.a)(o.data_url||o.url,120)});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(c.a)(i.a.mark((function e(t){var n,r,a,c,o,u,l,d,b,f;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.stage,r=t.layerArr,a=t.activeLayer,c=t.effectGroup,o=t.activeImage,u="overlay_",e.next=4,Object(h.a)(s.gg.overlays);case 4:return l=e.sent,d=l.find((function(e){return e.find((function(e){return e.name===(null===a||void 0===a?void 0:a.settings.effectName)}))})),b=null===d||void 0===d?void 0:d.map((function(e){return{image1:e.items[0],image2:e.items[1],overlay_category:e.name.split(" ")[0],overlay_name:e.name}})),f=null===b||void 0===b?void 0:b.find((function(e){return e.overlay_name===(null===a||void 0===a?void 0:a.settings.effectName)})),e.next=10,Object(v.a)({images:f,id:u,effectGroup:c,stage:n,activeImage:o,layerArr:r,fireClick:!0,effectType:s.qc.overlay,updateEffect:!0});case 10:return e.abrupt("return",f);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(c.a)(i.a.mark((function e(t){var n,a,c,u,l,d,b,f,h,g,v,j;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.type,a=t.elem,c=t.activeLayer,u=t.stage,l=t.layerArr,d=t.effectGroup,b=t.activeImage,c.resources.effect_resource_url||c.settings.runOutType){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Object(p.a)(a.data_url||a.url);case 5:return f=e.sent,h=new o.Editor(n,f,f.width,f.height),n===o.LUT&&Object(m.c)(h),g=Object(r.a)(Object(r.a)({},c.settings),{},{src:c.resources.effect_resource_url,activeImage:b,updateEffect:!0,degrees:Number(null===c||void 0===c?void 0:c.settings.degrees)}),n===o.RUNOUT&&(g=Object(r.a)(Object(r.a)({},g),{},{runOutContext:h})),v=s.qc.lut,j=s.qc.runout,e.abrupt("return",Object(O.a)({effectGroup:d,stage:u,layerArr:l,effectType:n===o.LUT?v:j,settings:g}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(c.a)(i.a.mark((function e(t){var n,a,c,o,d,f,h,p,g,v,j,m,y,x,w,A,E,S;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.stage,c=t.layerArr,o=t.activeLayer,d=t.effectGroup,f=t.activeImage,Object(T.a)({effectType:s.qc.sketch,isStageBatchDraw:!0}),e.next=4,Object(k.a)((null===f||void 0===f?void 0:f.src)||"");case 4:if(h=e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,Object(C.a)(h);case 9:return p=e.sent,Object(u.a)({type:l.r,effectsData:{sketch:p}}),g=null===(n=o.effectLayer)||void 0===n?void 0:n.settings,v=g.colorRGB1,j=g.colorRGB2,m=g.horizontal,y=g.vertical,x=g.line,w=g.zoom,A=g.rotate,E=g.blendMode,S=g.sketchType,e.abrupt("return",Object(O.a)({effectGroup:d,stage:a,layerArr:c,effectType:s.qc.sketch,settings:Object(r.a)(Object(r.a)({},b.a.generateSketchSettings()),{},{sketchType:S,svgDoc:p.svgDoc,activeImage:f,colorRGB1:v,colorRGB2:j,horizontal:m,vertical:y,line:x,zoom:w,rotate:A,blendMode:E})}));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(c.a)(i.a.mark((function e(t){var n,a,c,o,l,b,f,h,p,v,j,m,x,w,A,E,k,C,T;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.elem,a=t.effectGroup,c=t.stage,o=t.layerArr,l=t.activeImage,b=t.activeLayer,f=Object(u.b)((function(e){return{builderName:Object(d.tb)(e),ignoredSettings:Object(d.ub)(e)}})),h=f.builderName,p=f.ignoredSettings,h){e.next=4;break}return e.abrupt("return");case 4:return v=Object(S.g)(),j=new S.a(n.data_url||n.url),e.next=8,j.readyPromise;case 8:return v.canvas.width=j.image.width,v.canvas.height=j.image.height,m=Object(S.i)(),x=Object(S.f)(),w={},m.accessGraph((function(){var e=Object(S.e)();e.setValue(j.image);for(var t=Object(S.h)(h),n=new v.fx.parameters.OverrideParameterMap,r=Object(S.d)().createBuilder(h).buildEffectWithImage(m,e,t,n),a=r.parameters(),i=0;i<a.size();++i){var c,o=a.get(i);if(o.type===v.fx.parameters.ParameterType.Int&&!p.includes(o.name))w[o.name]=null!==(c=o.value)&&void 0!==c?c:o.defaultValue}x.output.node().setInput("value",r.outputImage()),x.output.node().setInput("size",v.graph.basic_operations.ShapeOf(r.outputImage()).size),m.runValue(x.output),r.delete(),n.delete()})),A={activeImage:l,canvas:v.canvas,blendMode:(null===b||void 0===b?void 0:b.settings.blendMode)||"normal"},e.next=17,Object(O.a)({effectGroup:a,stage:c,layerArr:o,effectType:s.qc.imageEngine,settings:A});case 17:E=document.createElement("canvas"),k=E.getContext("2d"),C=Object(g.a)(v.canvas.width,v.canvas.height,s.hh,s.hh),E.width=C.width,E.height=C.height,null===k||void 0===k||k.drawImage(v.canvas,0,0,v.canvas.width,v.canvas.height,0,0,C.width,C.height),T=Object(r.a)({effectUrl:E.toDataURL(),activeEffect:b.settings.activeEffect,elemName:b.settings.effectName,type:b.settings.type,blendMode:b.settings.blendMode,isReplace:!0},w),E.remove(),Object(y.a)({effectType:s.qc.imageEngine,effectGroup:a,layerArr:o,activeImageLayer:null===l||void 0===l?void 0:l.layer,settings:T});case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(c.a)(i.a.mark((function e(t){var n,a,c,l,b,f,h,p,g,v,j,m,x,w,k,C,S,T,B,D,N,z,H,Y,X,U,F,W,V,K,q,J,Q,Z,$,ee,te,ne,re,ae,ie,ce,oe,se,ue,le,de,be,fe,he,pe,ge;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v=t.elem,j=Object(u.b)((function(e){return{layers:Object(d.ac)(e),activeLayer:Object(d.e)(e),baseGroup:Object(d.ad)(e)}})),m=j.layers,x=j.activeLayer,w=j.baseGroup,k=Object(E.mb)(w),x){e.next=5;break}return e.abrupt("return");case 5:if(S=Object(E.M)(w,"#".concat(x.id))){e.next=8;break}return e.abrupt("return");case 8:T=s.qc.magic,B=s.qc.lut,D=s.qc.runout,N=s.qc.colorTransfer,z=s.qc.canvasEffect,H=s.qc.overlay,Y=s.qc.sky,X=s.qc.sketch,U=s.qc.imageEngine,F=Object(E.kb)(S),W=Object(E.db)(F),V=W.effectType,K=Object(E.kb)(F),Object(E.db)(K).layerType===s.pg&&Object(E.Lb)(K,{collageOutline:!0}),q={layer:x,node:S,src:S.attrs.image.src},Object(E.fb)(F).forEach((function(e){return e.draggable(!1)})),J=x.settings.activeEffect===s.ge,e.t0=V,e.next=e.t0===T?19:e.t0===H?22:e.t0===N?26:e.t0===B||e.t0===D?29:e.t0===z?35:e.t0===Y?38:e.t0===X?41:e.t0===U?46:49;break;case 19:return e.next=21,_({stage:k,layerArr:m,activeLayer:x,effectGroup:F,activeImage:q});case 21:return e.abrupt("break",55);case 22:return e.next=24,L({stage:k,layerArr:m,activeLayer:x,effectGroup:F,activeImage:q,baseGroup:w});case 24:return C=e.sent,e.abrupt("break",55);case 26:return e.next=28,R({activeImage:q,effectGroup:F,layerArr:m,stage:k,elem:v});case 28:return e.abrupt("break",55);case 29:if(!J){e.next=31;break}return e.abrupt("return");case 31:return Q=V===B?o.LUT:o.RUNOUT,e.next=34,P({type:Q,elem:v,activeLayer:x,stage:k,layerArr:m,effectGroup:F,activeImage:q});case 34:return e.abrupt("break",55);case 35:return e.next=37,I({activeImage:q,effectGroup:F,layerArr:m,stage:k,elem:v});case 37:return e.abrupt("break",55);case 38:return e.next=40,Object(A.b)();case 40:return e.abrupt("break",55);case 41:if(!J){e.next=43;break}return e.abrupt("return");case 43:return e.next=45,G({stage:k,layerArr:m,activeLayer:x,effectGroup:F,activeImage:q});case 45:return e.abrupt("break",55);case 46:return e.next=48,M({effectGroup:F,elem:v,activeLayer:x,stage:k,layerArr:m,activeImage:q});case 48:return e.abrupt("break",55);case 49:if(!J){e.next=51;break}return e.abrupt("return");case 51:return Z=Object(r.a)(Object(r.a)({},x.settings),{},{activeImage:q,updateEffect:!0,settingType:""}),e.next=54,Object(O.a)({effectGroup:F,stage:k,layerArr:m,settings:Z,effectType:V});case 54:return e.abrupt("break",55);case 55:$=x.settings,ee=$.color1,te=$.color2,ne=$.color3,re=$.activeEffect,ae=$.colorRGB1,ie=$.colorRGB2,ce=$.effectName,oe=$.overlayColor,se=$.backgroundColor,ue=$.multi,le=$.multiWithoutColors,de=$.blendWidthColors,be=$.blendMode,fe=x.resources,he=fe.effect_resource_url,pe=fe.effectUrl,ge={color1:ee,color2:te,color3:ne,activeEffect:re,colorRGB1:ae,colorRGB2:ie,effectUrl:pe,overlayColor:oe,backgroundColor:se,multi:ue,multiWithoutColors:le,blendWidthColors:de,name:ce,images:C,blendMode:be,isReplace:!0,title:re,elemName:ce,type:re,src:he,blendModeType:be,overlayType:null===(n=x.effectLayer)||void 0===n?void 0:n.type,overlayLayerId:(null===(a=x.effectLayer)||void 0===a||null===(c=a.id)||void 0===c?void 0:c.slice((null===(l=x.effectLayer)||void 0===l?void 0:l.id.indexOf("|"))+1,null===(b=x.effectLayer)||void 0===b?void 0:b.id.length))||(null===(f=x.effectLayer)||void 0===f||null===(h=f.id)||void 0===h?void 0:h.slice((null===(p=x.effectLayer)||void 0===p?void 0:p.id.indexOf("-"))+1,null===(g=x.effectLayer)||void 0===g?void 0:g.id.length))},[T,Y,z,N,U,B].includes(V)||Object(y.a)({effectType:V,layerArr:m,effectGroup:F,activeImageLayer:x,settings:ge});case 59:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.a=B},function(e,t,n){"use strict";n.d(t,"b",(function(){return C})),n.d(t,"c",(function(){return T})),n.d(t,"a",(function(){return I}));var r=n(2),a=n(15),i=n(7),c=n.n(i),o=n(10),s=n(1),u=n(12),l=n(6),d=n(9),b=n(17),f=n(98),h=n(137),p=n(34),g=n(95),O=n(67),v=n(55),j=n(0),m=n(52),y=["sculpture","impressionism","neoclassicism","engravings","renaissance","rococo"],x=["half_face_left","half_face_right","mouth","eyes","nose"],w=function(e,t){var n=Math.ceil(e),r=Math.floor(t);return Math.floor(Math.random()*(r-n+1))+n},A=function(e,t,n){var r=y[w(0,y.length-1)],a=x[w(0,x.length-1)],i={warp_inplace:"true",categories:r,width:String(t),height:String(n),landmarks_id:e,match_type:a,random_factor:w(0,7).toString(),template:w(0,3).toString(),collage_mask:w(0,18).toString()};return Object.keys(i).reduce((function(e,t){return"".concat(e).concat(""===e?"?":"&").concat(t,"=").concat(i[t])}),"")},E=function(e){return Object(l.a)(b.a.actions.setCanvasLoading(e))},k={},C=function(){var e=Object(o.a)(c.a.mark((function e(t,n){var r,a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!k[n]){e.next=3;break}return Object(l.a)({type:u.r,effectsData:{canvas:{url:"",sid:k[n]}}}),e.abrupt("return",{sid:k[n]});case 3:return E(!0),e.next=6,g.a.uploadPhoto(t);case 6:return r=e.sent,(a=new FormData).append("image",r),e.prev=9,e.next=12,f.a.uploadImage({body:a});case 12:if(!(i=e.sent).errorMessage){e.next=16;break}return Object(l.a)(b.a.actions.setErrorModal({isVisible:!0,errorKey:s.ic.UPLOAD_ERROR})),e.abrupt("return");case 16:return n&&(k[n]=i.data.sessionID),Object(l.a)({type:u.r,effectsData:{canvas:{url:"",sid:i.data.sessionID}}}),e.abrupt("return",{sid:i.data.sessionID});case 21:e.prev=21,e.t0=e.catch(9),p.a.trigger(e.t0,"error"),Object(l.a)(b.a.actions.setErrorModal({isVisible:!0,errorKey:s.ic.UPLOAD_ERROR}));case 25:case"end":return e.stop()}}),e,null,[[9,21]])})));return function(t,n){return e.apply(this,arguments)}}(),S=function(){var e=Object(l.b)((function(e){return{activeEffect:Object(d.b)(e),activeImage:Object(d.c)(e)}})),t=e.activeEffect,n=e.activeImage;if(t!==s.ge&&n){var r=Object(j.db)(Object(j.N)(n.node,"#".concat(n.layer.id).concat(s.zh))).effectType;Object(O.a)({effectType:r,isStageBatchDraw:!0}),Object(v.b)(r)}},T=function(){var e=Object(o.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.canvasEffectLandmark({body:null},{sid:t});case 3:if(417!==(n=e.sent).status){e.next=8;break}return S(),Object(l.a)(b.a.actions.setErrorModal({isVisible:!0,errorKey:s.ic.CANVAS_ERROR})),e.abrupt("return");case 8:return e.abrupt("return",n);case 11:return e.prev=11,e.t0=e.catch(0),p.a.trigger(e.t0,"error"),S(),Object(l.a)(b.a.actions.setErrorModal({isVisible:!0,errorKey:s.ic.CANVAS_ERROR})),e.abrupt("return");case 17:return e.prev=17,E(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[0,11,17,20]])})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(o.a)(c.a.mark((function e(t){var n,i,o,u,d,g,O,j,y,x,w,k,C,T,_,I,R,L,P,G,M,B,D;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.activeImage,i=t.sid,o=t.effectGroup,u=t.stage,d=t.layerArr,g=t.title,O=t.canvasEffectSrc,j=t.effect_resource_url,y=t.isReplace,x=t.resetSettings,n){e.next=3;break}return e.abrupt("return");case 3:return w=n.node.image(),k=w.width,C=w.height,T=A(i,k,C),e.prev=5,e.next=8,f.a.canvasEffect({body:null},T);case 8:if(!(_=e.sent).errorMessage&&_.data&&_.data.metadata){e.next=13;break}return S(),E(!1),e.abrupt("return",Object(l.a)(b.a.actions.setErrorModal({isVisible:!0,errorKey:s.ic.CANVAS_ERROR})));case 13:return I=Object(a.a)(_.data.metadata,4),R=I[0],L=I[1],P=I[2],G=I[3],M=Object(r.a)(Object(r.a)({},m.a.generateCanvasEffectSettings()),{},{src:_.data.url,x:R,y:L,width:P,height:G,imgSrc:O}),e.next=17,Object(h.a)({effectGroup:o,stage:u,layerArr:d,effectType:s.qc.canvasEffectMask,settings:Object(r.a)(Object(r.a)({},M),{},{activeImage:n})});case 17:B=e.sent,D=Object(r.a)(Object(r.a)({},M),{},{lutUrl:O,maskUrl:M.src,effectUrl:B,title:g,src:M.src,canvasEffectSrc:O,effect_resource_url:j,isReplace:y,resetSettings:x}),Object(v.a)({effectType:s.qc.canvasEffect,settings:D,effectGroup:o,layerArr:d,activeImageLayer:null===n||void 0===n?void 0:n.layer}),setTimeout((function(){return E(!1)}),1500),e.next=29;break;case 23:return e.prev=23,e.t0=e.catch(5),S(),p.a.trigger(e.t0,"error"),E(!1),e.abrupt("return",Object(l.a)(b.a.actions.setErrorModal({isVisible:!0,errorKey:s.ic.CANVAS_ERROR})));case 29:case"end":return e.stop()}}),e,null,[[5,23]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(o.a)(c.a.mark((function e(t){var n,r,a,i,o,d,b,f,p,g,O,v,j,m,y;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.src,r=t.elemName,a=t.activeEffect,i=t.activeImage,o=t.layerArr,d=t.effectGroup,b=t.stage,f=t.sid,p=t.isReplace,g=void 0!==p&&p,n&&r!==s.ge){e.next=3;break}return e.abrupt("return",S());case 3:if(a!==r||g){e.next=9;break}if(E(!0),null===i||void 0===i||null===(O=i.layer)||void 0===O?void 0:O.effectLayer){e.next=7;break}return e.abrupt("return");case 7:return v=i.layer.effectLayer,j=v.resources.lutUrl,m=v.settings.imgSrc,e.abrupt("return",_({activeImage:i,sid:f,effectGroup:d,stage:b,layerArr:o,canvasEffectSrc:m||j,activeEffect:a,title:r,effect_resource_url:n}));case 9:return Object(l.a)({type:u.n,activeEffect:r}),E(!0),e.next=13,Object(h.a)({effectGroup:d,stage:b,layerArr:o,effectType:s.qc.canvasEffect,settings:{src:n,activeImage:i}});case 13:return y=e.sent,e.abrupt("return",_({activeImage:i,sid:f,effectGroup:d,stage:b,layerArr:o,canvasEffectSrc:y,activeEffect:a,title:r,effect_resource_url:n,isReplace:g,resetSettings:!0}));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},function(e,t,n){"use strict";var r=n(0),a=n(1),i=n(6),c=n(9);t.a=function(e){var t=Object(r.R)(e,"".concat(a.Wc)),n=Object(i.b)(c.A);if(t){var o=Object(r.R)(n,(function(e){return Object(r.db)(e).isHovered}));Object(r.Lb)(o,{isHovered:!1}),Object(r.G)(t),Object(r.I)(e)}}},function(e,t,n){"use strict";var r=n(7),a=n.n(r),i=n(10),c=n(29),o=n(1),s=n(0),u=n(444);function l(){return(l=Object(i.a)(a.a.mark((function e(){var t,n,r,i,l=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:0,n=l.length>1&&void 0!==l[1]?l[1]:0,e.next=4,Object(c.a)(u.a);case 4:return r=e.sent,i=3*Math.max(t,n),e.abrupt("return",Object(s.s)({id:o.x,layerId:"fit-background",image:r,is_settings:!0,is_transparent_image:!0,crop:{x:0,y:0,width:i,height:i},width:i,height:i}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.a=function(){return l.apply(this,arguments)}},function(e,t,n){"use strict";var r=n(209);t.a=function(e){var t=e.width,n=void 0===t?0:t,a=e.height,i=void 0===a?0:a,c=e.x,o=void 0===c?0:c,s=e.y,u=void 0===s?0:s,l=e.rotation,d=void 0===l?0:l,b=arguments.length>1&&void 0!==arguments[1]&&arguments[1],f=Number(!b),h=Object(r.a)({x:o*f,y:u*f,width:n,height:i,rotation:d}),p=h.x,g=h.y,O=h.width,v=h.height,j=p+O,m=g+v;return[{x:p,y:g,w:j,h:m},{x:p,y:m,w:j,h:g},{x:O/2+p,y:v/2+g},{x:j,y:g,w:p,h:m},{x:j,y:m,w:p,h:g}]}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return p}));var r=n(7),a=n.n(r),i=n(15),c=n(2),o=n(10),s=n(141),u=n(115),l=n(401),d=n(526),b=n(34),f="adjust_tools.json",h="hsl_tool.json",p={},g=function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n.getContext("2d")};function O(e){var t=g(e.width,e.height);return t.putImageData(e,0,0),t.canvas}function v(e,t,n){return p[e]={},p[e].ctx=g(t,n)}function j(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"source-over",r=document.createElement("canvas"),a=r.getContext("2d");if(!a)return new ImageData(0,0);var i=document.createElement("canvas"),c=i.getContext("2d");return c?(r.width=e.width,r.height=e.height,i.width=t.width,i.height=t.height,a.putImageData(e,0,0),c.putImageData(t,0,0),a.globalCompositeOperation=n,a.drawImage(i,0,0),a.getImageData(0,0,r.width,r.height)):new ImageData(0,0)}function m(e,t,n){return y.apply(this,arguments)}function y(){return(y=Object(o.a)(a.a.mark((function e(t,n,r){var o,l,d,b,f,h,g,O,v,j,m,y,x,w,A,E,k,C;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=r.effect,l=(o=void 0===o?{}:o).json,d=void 0===l?"":l,b=o.name,f=void 0===b?"":b,h=o.settings,g=void 0===h?[]:h,O=o.subFolder,f){e.next=6;break}return p[t].eiImageEffect=n,e.abrupt("return",n);case 6:if(v=g.reduce((function(e,t){return e[t.name]=t.value,e}),{}),!Object.values(u.a).includes(f)){e.next=14;break}return j=Object(u.d)(f),m=Object(u.e)(n,t),e.next=12,Object(u.f)(m,j,Object(c.a)(Object(c.a)({},v),{},{effectName:f}));case 12:return y=e.sent,e.abrupt("return",p[t].eiImageEffect=y);case 14:if(d){e.next=17;break}return p[t].eiImageEffect=n,e.abrupt("return",n);case 17:return e.next=19,Promise.all([Object(s.c)(d,O),Object(s.d)(n)]);case 19:return x=e.sent,w=Object(i.a)(x,2),A=w[0],E=w[1],k=Object(s.b)(E,A,v),C=k.imageData,(0,k.cleanup)(),E.cleanup(),A.cleanup(),e.abrupt("return",p[t].eiImageEffect=new ImageData(new Uint8ClampedArray(C),n.width));case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,t,n){return t.canvas.width=n.width,t.canvas.height=n.height,t.drawImage(n,0,0,t.canvas.width,t.canvas.height),Object(u.c)(e),p[e].originalImage=t.getImageData(0,0,t.canvas.width,t.canvas.height)}function w(e,t,n){return A.apply(this,arguments)}function A(){return(A=Object(o.a)(a.a.mark((function e(t,n,r){var c,o,u,l,d,b,g,O,v,j,m,y,x,w,A,E,k,C,S,T,_,I,R,L,P,G,M,B,D=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((o=!(D.length>3&&void 0!==D[3])||D[3])&&(p[t].eiImageEAdjust=n),u=o?p[t].eiImageEAdjust:n,r){e.next=5;break}return e.abrupt("return",n);case 5:return e.next=7,Promise.all([Object(s.c)(f,"web-effects"),Object(s.c)(h)]);case 7:if(l=e.sent,d=Object(i.a)(l,2),b=d[0],g=d[1],O=b.getParams(),v=g.getParams(),j=~r.settings.findIndex((function(e){return O.map((function(e){return e.name})).includes(e.name)})),m=~r.settings.findIndex((function(e){return v.map((function(e){return e.name})).includes(e.name)})),y=!!~r.settings.findIndex((function(e){return"opacity"===e.name})),x=r.settings.reduce((function(e,t){return e[t.name]=t.value,e}),{}),!j){e.next=27;break}return e.next=20,Object(s.d)(u);case 20:w=e.sent,A=b.getParams(),E=A.reduce((function(e,t){var n,r=t.defaultValue,a=t.name;return e[a]=null!==(n=x[a])&&void 0!==n?n:r,e}),{}),k=Object(s.b)(w,b,E),C=k.imageData,(0,k.cleanup)(),w.cleanup(),u=new ImageData(new Uint8ClampedArray(C),n.width);case 27:if(!m){e.next=37;break}return e.next=30,Object(s.d)(u);case 30:S=e.sent,T=g.getParams(),_=T.reduce((function(e,t){var n,r=t.defaultValue,a=t.name;return e[a]=null!==(n=x[a])&&void 0!==n?n:r,e}),{}),I=Object(s.b)(S,g,_),R=I.imageData,(0,I.cleanup)(),S.cleanup(),u=new ImageData(new Uint8ClampedArray(R),n.width);case 37:if((y||o&&p[t].hasOpacity&&!y)&&(null===(c=u)||void 0===c?void 0:c.data))for(G=((null===(L=u)||void 0===L?void 0:L.height)||1)*((null===(P=u)||void 0===P?void 0:P.width)||1)*4,M=3;M<G;M+=4)u.data[M]=(null===(B=p[t])||void 0===B?void 0:B.originalImage.data[M])*x.opacity/100;return o&&(p[t].eiImageEAdjust=u),e.abrupt("return",u);case 40:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e,t,n,r){return t.putImageData(n,0,0),r?(t.globalCompositeOperation="destination-out",t.drawImage(r,0,0,t.canvas.width,t.canvas.height),t.globalCompositeOperation="source-over",t.canvas):t.canvas}function k(e,t,n){return C.apply(this,arguments)}function C(){return(C=Object(o.a)(a.a.mark((function e(t,n,r){var i,c,s,u,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=document.createElement("canvas"),c=i.getContext("2d")){e.next=4;break}return e.abrupt("return");case 4:if(n.width&&n.height){e.next=6;break}return e.abrupt("return",b.a.trigger("DOMException: Failed to execute 'drawImage' on 'CanvasRenderingContext2D': The image argument is a canvas element with a width or height of 0."));case 6:if(s=t.maskImage,i.width=n.width,i.height=n.height,c.drawImage(n,0,0,i.width,i.height),u=c.getImageData(0,0,i.width,i.height),t.checkMutexAvailability(r)){e.next=13;break}return e.abrupt("return");case 13:return e.next=15,w(t.id,u,t.adjust,!1);case 15:if(d=e.sent,t.checkMutexAvailability(r)){e.next=18;break}return e.abrupt("return");case 18:return c.putImageData(d,0,0),c.globalCompositeOperation="xor",s&&(c.drawImage(s,0,0,c.canvas.width,c.canvas.height),c.globalCompositeOperation="source-over"),e.abrupt("return",new Promise((function(e){return c.canvas.toBlob(function(){var n=Object(o.a)(a.a.mark((function n(i){var c;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!i){n.next=10;break}if(t.checkMutexAvailability(r)){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,Object(l.a)({file:i,timeout:45e3});case 5:if(c=n.sent,t.checkMutexAvailability(r)){n.next=8;break}return n.abrupt("return");case 8:t.imageWithoutEffect=c,e(!0);case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())})));case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=Object(o.a)(a.a.mark((function e(t,n,r){var i,c,o,s,u,l,b,f,h,g,y,A,C,S,T,_,I,R,L,P,G,M,B,D;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.isOriginalImageChange,c=void 0!==i&&i,o=t.isEffectChange,s=void 0!==o&&o,u=t.isEffectMaskChange,l=void 0!==u&&u,b=t.isAdjustChange,f=void 0!==b&&b,h=t.isMaskChange,g=void 0!==h&&h,y=t.isBlendChangeWithEffect,A=void 0!==y&&y,C=p[n.id],S=(C=void 0===C?{}:C).ctx,T=void 0===S?v(n.id,n.originalImage.width,n.originalImage.height):S,_=C.eiImageEffect,I=C.eiImageEAdjust,R=C.originalImage,L=c||s||A,P=l||f,G=c?x(n.id,T,n.originalImage):R,M=O(G),!L){e.next=14;break}return e.next=11,m(n.id,G,n);case 11:e.t0=e.sent,e.next=15;break;case 14:e.t0=_;case 15:if(G=e.t0,B=G,(A||s)&&(B=j(p[n.id].originalImage,G,n.globalCompositeOperation)),n.checkMutexAvailability(r)){e.next=20;break}throw new Error("Mutex unavailable");case 20:if(G=B,!L&&!P){e.next=27;break}return e.next=24,w(n.id,O(G).getContext("2d").getImageData(0,0,n.originalImage.width,n.originalImage.height),n.adjust);case 24:e.t1=e.sent,e.next=28;break;case 27:e.t1=I;case 28:if(B=e.t1,n.checkMutexAvailability(r)){e.next=31;break}throw new Error("Mutex unavailable");case 31:if(G=B,!(n.maskUrl&&g||f||c)){e.next=35;break}return e.next=35,k(n,Object(d.a)(M),r);case 35:return D=O(G),e.abrupt("return",{imageWithoutMask:D,image:L||P||g?E(n.id,T,G,n.maskImage):T.canvas});case 37:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.d=function(e,t,n){return S.apply(this,arguments)}},function(e,t,n){"use strict";var r=n(44),a=n(1),i=n(53),c=Object(r.b)({gridImageWrap:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:function(e){return null===e||void 0===e?void 0:e.width},height:function(e){return null===e||void 0===e?void 0:e.height},background:"url(".concat(a.O,"/64814455576311042242.svg) center center/cover no-repeat")},gridImage:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",height:"100%"},cropActive:{zIndex:i.b},cropWrap:{position:"absolute",top:0,left:0,right:0,bottom:0}});t.a=c},,,function(e,t,n){"use strict";var r=n(0),a=function(e,t){var n=Object(r.db)(t),a=n.x,i=n.y,c=n.width,o=n.height,s=n.scaleX,u=n.scaleY;e.beginPath(),e.moveTo(a,i),e.lineTo(a+c*s,i),e.lineTo(a+c*s,i+o*u),e.lineTo(a,i+o*u),e.lineTo(a,i),e.closePath()};t.a=function(e,t){Object(r.Lb)(e,{clipFunc:function(n){a(n,t),Object(r.Lb)(e,{clipWidth:Object(r.db)(t).width*Object(r.db)(t).scaleX}),Object(r.Lb)(e,{clipHeight:Object(r.db)(t).height*Object(r.db)(t).scaleY}),Object(r.Lb)(e,{clipX:Object(r.db)(t).x}),Object(r.Lb)(e,{clipY:Object(r.db)(t).y})}})}},,,function(e,t,n){"use strict";t.a=function(e,t,n){return 100*(e-t)/(n-t)}},function(e,t,n){"use strict";n.d(t,"p",(function(){return R})),n.d(t,"j",(function(){return L})),n.d(t,"d",(function(){return M})),n.d(t,"e",(function(){return B})),n.d(t,"c",(function(){return D})),n.d(t,"k",(function(){return N})),n.d(t,"f",(function(){return z})),n.d(t,"g",(function(){return H})),n.d(t,"i",(function(){return Y})),n.d(t,"m",(function(){return X})),n.d(t,"l",(function(){return F})),n.d(t,"r",(function(){return W})),n.d(t,"a",(function(){return V})),n.d(t,"b",(function(){return K})),n.d(t,"h",(function(){return q})),n.d(t,"q",(function(){return J})),n.d(t,"o",(function(){return Q})),n.d(t,"s",(function(){return Z})),n.d(t,"t",(function(){return $})),n.d(t,"u",(function(){return ee})),n.d(t,"v",(function(){return te})),n.d(t,"n",(function(){return ne}));var r=n(328),a=n.n(r),i=n(1),c=i.vh.tools.includes("duplicate"),o=i.yd.keyA,s=i.yd.keyC,u=i.yd.keyB,l=i.yd.keyD,d=i.yd.keyI,b=i.yd.keyS,f=i.yd.keyV,h=i.yd.keyU,p=i.yd.keyX,g=i.yd.keyZ,O=i.yd.enter,v=i.yd.arrowLeft,j=i.yd.arrowDown,m=i.yd.arrowRight,y=i.yd.arrowUp,x=i.yd.deleteBtn,w=i.yd.fnDelete,A=i.yd.esc,E=i.yd.bracketLeft,k=i.yd.bracketRight,C=i.yd.minus,S=i.yd.equal,T=i.yd.digit0,_=i.yd.metaLeft,I=i.yd.metaRight,R=function(e){return e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement},L=function(e){return e.metaKey||e.ctrlKey},P=function(e){return e.altKey},G=function(e,t){return L(e)&&e.code===t},M=function(e){return G(e,p)&&c},B=function(e){return G(e,l)&&c},D=function(e){return G(e,s)&&c},N=function(e){return G(e,f)&&c},z=function(e){return e.code===O},H=function(e){return e.code===A},Y=function(e){return e.code===I||e.code===_},X=function(e){return a()([x,w],[e.code,e.key]).length>0},U=function(e){return G(e,g)},F=function(e){return U(e)&&e.shiftKey&&i.vh.undoRedo},W=function(e){return U(e)&&!e.shiftKey&&i.vh.undoRedo},V=function(e){return[v,y,m,j].includes(e.code)},K=function(e){return G(e,u)},q=function(e){return G(e,d)},J=function(e){return K(e)||q(e)||function(e){return G(e,h)}(e)},Q=function(e){return G(e,o)},Z=function(e){return G(e,S)},$=function(e){return G(e,C)},ee=function(e){return G(e,T)},te=function(e){if(L(e))return e.code===E?P(e)?"back":"backward":e.code===k?P(e)?"front":"forward":void 0},ne=function(e){return G(e,b)}},,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(6),a=n(21),i=n(1),c=n(85),o=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=t.map((function(e){return c.a.createLayer(e.type,e.data).toJSON()}));return a.length&&r.push({layerId:n,layers:a}),a.forEach((function(n,a){var i=n.id,c=t[a].dependencies;e(void 0===c?[]:c,i,r)})),r};t.b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.z,n=o(e,t);return Object(r.a)(a.a.actions.addAndSelectLayers(n)),n.reduce((function(e,t){return e.concat(t.layers)}),[])}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return b}));var r=n(2),a=n(1),i=n(0),c=n(11),o=n(6),s=n(9),u=n(264),l=function(e,t,n,r,a){return-(e-t)*(r/(t-n*a))},d=function(e){var t=e.stage,n=e.layers,d=e.scale,b=e.currentContainerWidth,f=e.currentContainerHeight,h=Object(i.db)(Object(i.tb)(n)?n:t),p=h.height,g=h.width,O=p>f,v=g>b;if(O||v){var j,m=Object(i.u)({id:a.Oh});Object(i.h)(t,m),m.getCanvas()._canvas.style.pointerEvents="none";var y,x=f*f/p/d,w=Object(i.db)(m),A=w.width,E=w.height;if(O){var k=Math.min(b,g);j=Object(i.x)({width:6/d,height:x,fill:Object(c.c)(c.b.paColor148),opacity:.8,x:(A-6)/d,y:0,cornerRadius:14,shadowColor:Object(c.c)(c.b.paColor125),shadowOffsetX:0,shadowOffsetY:2,shadowBlur:4,draggable:!0,dragBoundFunc:function(e){var t=Object(r.a)({},e);return t.x=k-6,t.y=Math.max(Math.min(t.y,f-x*d),0),t}}),Object(i.f)(m,j),Object(i.i)(j,"mousedown",(function(e){e.cancelBubble=!0}));var C="";Object(i.i)(j,"mousemove",(function(e){e.evt.onScrollBar=!0;var n=Object(i.hb)(t);C||(C=n.style.cursor||"none"),n.style.setProperty("cursor","default")})),Object(i.i)(j,"mouseleave",(function(){Object(i.hb)(t).style.setProperty("cursor",C||"default")})),Object(i.i)(j,"dragmove",(function(){var e=Object(i.db)(Object(i.tb)(n)?n:t).height,r=Object(i.db)(j).y,a=l(e,f,x,r,d);Object(i.tb)(n)?(Object(i.Lb)(n,{y:a}),Object(i.I)(n),Object(i.k)(n)):(n.forEach((function(e){Object(i.Lb)(e,{y:a})})),Object(i.k)(t))}))}var S=b*b/(g*d)/d;if(v){y=Object(i.x)({width:S,height:6/d,fill:Object(c.c)(c.b.paColor148),opacity:.8,shadowColor:Object(c.c)(c.b.paColor125),x:0,y:(E-6)/d,cornerRadius:14,shadowOffsetX:0,shadowOffsetY:2,shadowBlur:4,draggable:!0,dragBoundFunc:function(e){var t=Object(r.a)({},e);return t.x=Math.max(Math.min(t.x,b-S*d),0),t.y=Math.min(f,p)-6,t}}),Object(i.f)(m,y),Object(i.i)(y,"mousedown",(function(e){e.cancelBubble=!0}));var T="";Object(i.i)(y,"mousemove",(function(e){e.evt.onScrollBar=!0;var n=Object(i.hb)(t);T||(T=n.style.cursor||"none"),n.style.setProperty("cursor","default")})),Object(i.i)(y,"mouseleave",(function(){Object(i.hb)(t).style.setProperty("cursor",T||"default")})),Object(i.i)(y,"dragmove",(function(){var e=Object(i.db)(Object(i.tb)(n)?n:t).width,r=Object(i.db)(y).x,a=l(e,b,S,r,d);Object(i.tb)(n)?(Object(i.Lb)(n,{x:a}),Object(i.I)(n),Object(i.k)(n)):(n.forEach((function(e){Object(i.Lb)(e,{x:a})})),Object(i.k)(t))}))}Object(i.I)(m),Object(i.i)(t,"wheel.scroll",(function(e){e.evt.preventDefault();var r=e.evt.deltaX/2,c=e.evt.deltaY/2,h={};if(j){var p=Object(i.db)(j).y,g=Math.max(Math.min(p+c,f/d-x),0);Object(i.Lb)(j,{y:g}),h.y=l(Object(i.db)(Object(i.tb)(n)?n:t).height,f,x,g,d)}if(y){var O=Object(i.db)(y).x,v=Math.max(Math.min(O+r,b/d-S),0);Object(i.Lb)(y,{x:v}),h.x=l(Object(i.db)(Object(i.tb)(n)?n:t).width,b,S,v,d)}Object(i.tb)(n)?(Object(i.Lb)(n,h),function(e,t){var n=Object(o.b)(s.A),r=Object(i.R)(t,"".concat(a.Wc)),c=Object(i.R)(n,(function(e){return Object(i.db)(e).isHovered})),l=c&&c.getLayer(),d=Object(i.Bb)(c),b=c&&Object(i.fb)(c).some((function(e){return Object(i.yb)(e)}));if(c&&l){var f=Object(i.db)(t),h=f.scaleX,p=f.scaleY,g=d?Object(u.b)(c,l,{scaleX:h,scaleY:p}):Object(i.db)(c),O={x:d||!e.x?g.x:g.x+e.x,y:d||!e.y?g.y:g.y+e.y};if(b){var v=Object(u.a)(c,t,l,!1),j=v.x,m=v.y;O.x=j,O.y=m}Object(i.Lb)(r,O)}}(h,t)):n.forEach((function(e){Object(i.Lb)(e,h)})),Object(i.k)(t)}))}},b=function(e){var t=Object(i.O)(e,"#".concat(a.Oh));t&&(Object(i.H)(e,"wheel.scroll"),Object(i.fb)(t).forEach((function(e){return Object(i.H)(e,"dragmove")})),Object(i.G)(t),Object(i.T)(e,(function(e){return Object(i.vb)(e)})).forEach((function(e){Object(i.Lb)(e,{x:0,y:0})})))}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"b",(function(){return y})),n.d(t,"a",(function(){return x}));var r=n(2),a=n(7),i=n.n(a),c=n(15),o=n(10),s=n(1),u=n(9),l=n(6),d=n(17),b=n(34),f=n(95),h=n(98),p=n(29),g=n(137),O=n(55),v=n(149),j=function(e){return Object(l.a)(d.a.actions.setCanvasLoading(e))},m={},y=function(){var e=Object(o.a)(i.a.mark((function e(t){var n,r,a,o,s,u,p,g;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===t||void 0===t?void 0:t.src)||!m[t.src]){e.next=2;break}return e.abrupt("return",m[t.src]);case 2:return j(!0),e.next=5,Object(v.a)((null===t||void 0===t?void 0:t.src)||"");case 5:if(n=e.sent){e.next=9;break}return j(!1),e.abrupt("return");case 9:return e.next=11,f.a.uploadPhoto(n,void 0,"image/jpeg");case 11:return r=e.sent,(a=new FormData).append("image",r),e.prev=14,e.next=17,h.a.uploadImage({body:a,isFormData:!0});case 17:if(!(o=e.sent).errorMessage){e.next=22;break}return Object(l.a)(d.a.actions.setErrorModal({isVisible:!0})),j(!1),e.abrupt("return");case 22:return(s={url:(o.data||{}).url,sid:""}).url&&(u=s.url.split("picsart.com/"),p=Object(c.a)(u,2),g=p[1],s.sid=g),(null===t||void 0===t?void 0:t.src)&&(m[t.src]=s),e.abrupt("return",s);case 28:e.prev=28,e.t0=e.catch(14),b.a.trigger(e.t0,"error");case 31:return e.prev=31,j(!1),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[14,28,31,34]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(o.a)(i.a.mark((function e(t){var n,a,c,o,f,v,m,y,x,w,A,E,k;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.effect,a=t.defaultSid,c=t.effectGroup,o=t.stage,f=t.layerArr,v=t.activeImage,j(!0),m=a,y=Object(l.b)((function(e){return{magic:Object(u.dc)(e)}})),x=y.magic,m||(m=x),e.prev=5,e.next=8,h.a.magicEffect({body:{effect:n.uid,sid:m.sid}});case 8:if(!(w=e.sent).errorMessage){e.next=13;break}return Object(l.a)(d.a.actions.setErrorModal({isVisible:!0})),j(!1),e.abrupt("return");case 13:return A=(w.data||{}).url||"",e.next=16,Object(p.a)(A);case 16:return E=e.sent,e.next=19,Object(g.a)({effectGroup:c,stage:o,layerArr:f,effectType:s.qc.magic,settings:Object(r.a)({magicImage:E,activeImage:v},null===v||void 0===v?void 0:v.layer.settings)});case 19:k={effect:n,magicUrl:A,newImage:E},Object(O.a)({effectType:s.qc.magic,activeImageLayer:null===v||void 0===v?void 0:v.layer,layerArr:f,effectGroup:c,settings:k}),j(!1),e.next=28;break;case 24:e.prev=24,e.t0=e.catch(5),b.a.trigger(e.t0,"error"),Object(l.a)(d.a.actions.setErrorModal({isVisible:!0}));case 28:return e.prev=28,j(!1),e.finish(28);case 31:case"end":return e.stop()}}),e,null,[[5,24,28,31]])})));return function(t){return e.apply(this,arguments)}}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"c",(function(){return j})),n.d(t,"b",(function(){return m}));var r=n(7),a=n.n(r),i=n(10),c=n(1),o=n(6),s=n(17),u=n(98),l=n(29),d=n(137),b=n(55),f=n(34),h=n(95),p="MY STYLE",g="color-transfer-choosed",O=function(e){return Object(o.a)(s.a.actions.setCanvasLoading(e))},v={},j=function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r,i,l,d,b,j,m=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=m.length>2&&void 0!==m[2]&&m[2],i=m.length>3?m[3]:void 0,r||!i||!v[i]){e.next=4;break}return e.abrupt("return",{sid:v[i]});case 4:if(O(!0),!n){e.next=9;break}return e.next=8,h.a.uploadPhoto(n,240);case 8:l=e.sent;case 9:return(d=new FormData).append("image",l||t),e.prev=11,e.next=14,u.a.uploadImage({body:d});case 14:if(!(b=e.sent).errorMessage){e.next=19;break}return Object(o.a)(s.a.actions.setErrorModal({isVisible:!0,errorKey:c.ic.UPLOAD_ERROR})),O(!1),e.abrupt("return");case 19:return j={sid:b.data.sessionID},r&&(j.dbItem={key:g,id:j.sid,url:b.data.url,title:p}),i&&!r&&(v[i]=j.sid),e.abrupt("return",j);case 25:e.prev=25,e.t0=e.catch(11),f.a.trigger(e.t0,"error"),Object(o.a)(s.a.actions.setErrorModal({isVisible:!0}));case 29:return e.prev=29,r||O(!1),e.finish(29);case 32:case"end":return e.stop()}}),e,null,[[11,25,29,32]])})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i,h,g,v,j,m,y,x,w,A,E,k,C,S;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.title,r=t.effectGroup,i=t.sid,h=t.effectId,g=t.stage,v=t.layerArr,j=t.activeImage,m=t.url,y=t.colorTransferEffectUrl,x=n===p?p:n,r){e.next=4;break}return e.abrupt("return");case 4:return O(!0),w={sid:i},"string"===typeof h?w.effectSid=h:w.effectUrl=y||m,e.prev=7,e.next=10,u.a.styleTransfer({body:{}},w);case 10:if(!(A=e.sent).errorMessage){e.next=15;break}return Object(o.a)(s.a.actions.setErrorModal({isVisible:!0,errorKey:c.ic.APPLY_EFFECT_ERROR})),O(!1),e.abrupt("return");case 15:return A.cached&&O(!1),E=A.data.url,k="color-transfer-img",e.next=20,Object(l.a)(E);case 20:return C=e.sent,e.next=23,Object(d.a)({effectGroup:r,stage:g,layerArr:v,effectType:c.qc.colorTransfer,settings:{id:k,image:C,activeImage:j}});case 23:S={colorTransferUrl:E,newImage:C,elementName:x,id:k,effectId:h,colorTransferEffectUrl:y||m},Object(b.a)({effectType:c.qc.colorTransfer,activeImageLayer:null===j||void 0===j?void 0:j.layer,layerArr:v,effectGroup:r,settings:S}),e.next=31;break;case 27:e.prev=27,e.t0=e.catch(7),f.a.trigger(e.t0,"error"),Object(o.a)(s.a.actions.setErrorModal({isVisible:!0}));case 31:return e.prev=31,O(!1),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[7,27,31,34]])})));return function(t){return e.apply(this,arguments)}}()},function(e,t,n){"use strict";var r=n(2),a=n(15),i=n(0),c=n(257),o=n(9),s=n(1),u=n(43),l=n(6),d=function(e){var t=[],n=Object(i.pb)(Object(i.mb)(e));return n&&Object(i.fb)(e).forEach((function(e){Object(c.a)(Object(i.gb)(e,{skipShadow:!0}),n)&&Object(i.db)(e).id!==s.ch&&t.push(e)})),t},b=function(e){return e.reduce((function(e,t){return Object(i.db)(e).zIndex>Object(i.db)(t).zIndex?e:t}))};t.a=function(e){var t,n=Object(l.b)((function(e){return{baseGroup:Object(o.ad)(e),isDropperActive:Object(o.Eb)(e),draggableId:Object(o.Z)(e).draggableId}})),f=n.baseGroup,h=n.isDropperActive;if(n.draggableId)return!1;var p=Object(i.mb)(f),g=Object(i.pb)(p),O=Object(i.db)(f),v={x:O.x*p.scaleX(),y:O.y*p.scaleY(),width:O.width,height:O.height};if(!Object(c.a)(v,g||{x:0,y:0}))return!1;var j=Object(u.c)(f),m=(null===(t=Object(i.ob)(j))||void 0===t?void 0:t.length)>1,y=Object(i.ob)(j)||[],x=Object(a.a)(y,1)[0],w=!m&&(Object(i.Ab)(x)||Object(i.Bb)(x));if("mousedown"===e.evt.type&&(m||w))return!1;var A=d(f);if(!A.length)return!1;var E=b(A),k=Object(i.db)(E).layerType===s.Bc,C=[];k&&(C=d(E));var S=k&&C.length?b(C):E;if("mousemove"===e.evt.type){var T=Object(i.db)(Object(i.X)(f,s.Wc)).attachedId,_=Object(i.db)(E).id;return Object(i.Y)(E,"mouseover",Object(r.a)(Object(r.a)({},e),{},{target:S})),T!==_&&Object(i.Y)(E,"mouseout",Object(r.a)(Object(r.a)({},e),{},{target:S})),!0}return h||Object(i.Y)(E,"mousedown",Object(r.a)(Object(r.a)({},e),{},{target:S})),Object(i.Y)(E,"click",Object(r.a)(Object(r.a)({},e),{},{target:S})),!0}},function(e,t,n){"use strict";var r=n(15),a=n(3),i=n(18),c=n.n(i),o=n(177),s=n(342),u=n(5);t.a=function(e){var t=e.imgSrc,n=e.boxWidth,i=e.boxHeight,l=Object(a.useState)({width:"0",height:"0"}),d=Object(r.a)(l,2),b=d[0],f=b.width,h=b.height,p=d[1],g=Object(s.a)({width:f,height:h}),O=Object(a.useRef)(null),v=Object(a.useCallback)((function(e,t,n){var r=Object(o.a)(e,t,n,O.current);p(r)}),[]);return Object(u.jsx)("div",{className:c()(g.gridImageWrap),children:Object(u.jsx)("img",{ref:O,className:g.gridImage,src:t,onLoad:function(){return v(t,n,i)},alt:"img"})})}},,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=function(e,t){for(var n=[],r=0;r<1024;r+=4)n[r]=((256-r/4)*e.r+r/4*t.r)/256,n[r+1]=((256-r/4)*e.g+r/4*t.g)/256,n[r+2]=((256-r/4)*e.b+r/4*t.b)/256,n[r+3]=255;return n},a=function(e,t,n){for(var a=r({r:t.r,g:t.g,b:t.b},{r:n.r,g:n.g,b:n.b}),i=0;i<e.data.length;i+=4)e.data[i]=a[4*e.data[i]],e.data[i+1]=a[4*e.data[i+1]+1],e.data[i+2]=a[4*e.data[i+2]+2]}},,,,,,,function(e,t,n){"use strict";var r=n(39);t.a=function(e){var t=e.userKey,n=e.accept,a=void 0===n?"application/json":n,i=e.contentType,c={Accept:a,"Content-Type":void 0===i?"application/json":i};return t&&(c[r.q]=t),c}},function(e,t,n){"use strict";var r=n(7),a=n.n(r),i=n(4),c=n(2),o=n(10),s=n(39),u=n(1),l=n(64),d=n(6),b=n(9),f=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,o,f,h,p,g,O,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.file,r=t.type,o=void 0===r?"web-editor":r,f=t.timeout,h=Object(d.b)(b.Nd),(p=new FormData).append("type",o),p.append("file",n),e.next=7,Object(l.a)("".concat(u.sh,"/files"),Object(c.a)({headers:Object(i.a)({},s.q,h),method:"POST",body:p},f&&{timeout:f}));case 7:return g=e.sent,e.next=10,g.json();case 10:if(O=e.sent,v=O.result.download_url){e.next=14;break}throw new Error(u.hc.SERVER_ERROR.message);case 14:return e.abrupt("return",v);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.a=f},,function(e,t,n){"use strict";var r=n(3),a=n(414);t.a=function(e){var t=Object(r.useRef)(null),n=Object(r.useCallback)((function(n){var r;(null===(r=t.current)||void 0===r?void 0:r.contains(n.target))||e(n)}),[e]);return Object(a.a)("mousedown",n),t}},function(e,t,n){"use strict";var r=n(2),a=n(4),i=n(84),c=n(3),o=n(18),s=n.n(o),u=n(44),l=Object(u.b)((function(e){return{"pw-input_inner":{border:"1px solid ".concat(e.colors.paColor2),borderRadius:"8px",width:"100%",padding:"0 16px",fontFamily:"inherit",color:e.colors.paColor66,"&::placeholder":{opacity:.3},"&:::-ms-input-placeholder":{opacity:.3},"@media(hover: hover)":{"&:hover":{borderColor:e.colors.paColor7}},"&:focus":{borderColor:e.colors.paColor6,outline:"none"},"&[tabindex]:focus":{outline:"none"}},large:{height:48,fontSize:14,lineHeight:"48px"},medium:{height:40,fontSize:14,lineHeight:"40px"},small:{height:32,fontSize:12,lineHeight:"32px"},mini:{height:28,fontSize:12,lineHeight:"28px"},disabled:{}}})),d=n(5),b=["size","disabled","className","isFocused"],f=Object(c.forwardRef)((function(e,t){var n=e.size,o=void 0===n?"medium":n,u=e.disabled,f=void 0!==u&&u,h=e.className,p=e.isFocused,g=Object(i.a)(e,b),O=l(),v=Object(c.useRef)(null),j=t||v;return Object(c.useEffect)((function(){var e;p&&(null===(e=j.current)||void 0===e||e.focus())}),[p,j]),Object(d.jsx)("div",{className:O["pw-input"],children:Object(d.jsx)("input",Object(r.a)(Object(r.a)({},g),{},{ref:j,className:s()(O["pw-input_inner"],O[o],Object(a.a)({},O.disabled,f),h)}))})}));t.a=f},function(e,t,n){"use strict";n.d(t,"f",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"e",(function(){return r})),n.d(t,"g",(function(){return u})),n.d(t,"a",(function(){return l}));var r,a=n(1),i=[{name:"Eraser",type:a.De.ERASER,icon_name:"eraser-editor"},{name:"Brush",type:a.De.BRUSH,icon_name:"brush-editor"}],c=360,o=88,s=62;!function(e){e.SIZE="size"}(r||(r={}));var u=[{type:r.SIZE,name:"Size",min:1,max:100,defaultValue:20}],l={white:"mouseWhiteCircle",black:"mouseBlackCircle"}},function(e,t,n){"use strict";n.d(t,"c",(function(){return g})),n.d(t,"b",(function(){return O})),n.d(t,"a",(function(){return j}));var r=n(7),a=n.n(r),i=n(10),c=n(15),o=n(2),s=n(41),u=n.n(s),l=n(139),d=n(23),b=function e(t,n){var r=t.getAttribute(n);return r||(t.parentElement?e(t.parentElement,n):void 0)},f=function(e){var t,n=b(e,"fill");return!n&&(null===(t=e.style)||void 0===t?void 0:t.fill)&&e.style.fill.includes("rgb")?u()(e.style.fill).toHex8String():n};function h(){var e=0;return function(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=a.moveX,c=void 0===i?0:i,o=a.moveY,s=void 0===o?0:o,u=++e%2?n:r,l=e%2?c:s;return(parseFloat(t)*u+l).toString()}}function p(e){var t=e.paths,n=e.width,r=e.height;if(0===n||0===r)throw new Error("width or height is zero");return t.map((function(e){var t=function(e){return{path:e.getAttribute("d")||"",stroke:b(e,"stroke"),opacity:Number(b(e,"fill-opacity"))||0,strokeWidth:Number(b(e,"stroke-width"))||0,lineCap:b(e,"stroke-linecap"),lineJoin:b(e,"stroke-linejoin"),fill:"none"===f(e)?"":f(e),id:Object(l.a)()}}(e);return Object(o.a)(Object(o.a)({},t),{},{path:t.path.replace(d.r,(function(e){return g(e,n,r)}))})}))}function g(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=Object(c.a)(e,1),i=a[0],o=r.moveX,s=void 0===o?0:o,u=r.moveY,l=void 0===u?0:u;switch(i){case"H":return e.replace(d.j,(function(e){return(parseFloat(e)*t+s).toString()}));case"h":return e.replace(d.j,(function(e){return(parseFloat(e)*t).toString()}));case"V":return e.replace(d.j,(function(e){return(parseFloat(e)*n+l).toString()}));case"v":return e.replace(d.j,(function(e){return(parseFloat(e)*n).toString()}));case"m":case"l":case"c":case"s":case"t":case"q":var b=h();return e.replace(d.j,(function(e){return b(e,t,n)}));case"L":case"Q":case"M":case"C":case"S":case"T":case"A":case"a":var f=h();return e.replace(d.j,(function(e){return f(e,t,n,r)}));case"Z":case"z":return e;default:throw new Error("".concat(i," command is not supported"))}}function O(e){return v.apply(this,arguments)}function v(){return(v=Object(i.a)(a.a.mark((function e(t){var n,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.blob();case 5:return r=e.sent,e.next=8,new Promise((function(e){var t=document.createElement("object");t.type="image/svg+xml",t.title="fake",t.addEventListener("load",(function(){var n=t.contentDocument,r=Array.from(n.querySelectorAll("path")),a=null===n||void 0===n?void 0:n.querySelector("svg"),i=null===a||void 0===a?void 0:a.getBBox(),c=Number(null===a||void 0===a?void 0:a.getAttribute("width"))||(null===i||void 0===i?void 0:i.width)||0,o=Number(null===a||void 0===a?void 0:a.getAttribute("height"))||(null===i||void 0===i?void 0:i.height)||0,s=p({paths:r,width:1/((null===i||void 0===i?void 0:i.width)||1),height:1/((null===i||void 0===i?void 0:i.height)||1)});document.body.removeChild(t),e({width:c,height:o,paths:s})}),!1),t.data=URL.createObjectURL(r),t.classList.add("visually-hidden"),document.body.append(t)}));case 8:return i=e.sent,e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j=function(e){var t=!0,n=e.replace(d.i,(function(e){var n="".concat(t?"M":"L"," ").concat(e);return t=!1,n}));return"".concat(n,"Z")}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return h})),n.d(t,"f",(function(){return E})),n.d(t,"g",(function(){return k})),n.d(t,"e",(function(){return C})),n.d(t,"d",(function(){return T})),n.d(t,"h",(function(){return _})),n.d(t,"c",(function(){return I}));var r=n(1),a=n(0),i=n(49),c=n(116),o=function(e){return e<0?360+e:Math.abs(e)},s=n(50),u=n(11),l=function(e,t){var n=Object(a.X)(t,r.pb);if(n&&Object(a.G)(n),!Object(a.R)(t,r.Y)){var l=Object(a.db)(e),d=l.id,b=l.x,f=l.y,p=l.cropX,g=l.cropY,O=l.cropWidth,v=l.cropHeight,j=l.rotation,m=l.imgRatio,y=l.scaleX,x=l.scaleY,w=l.initialWidth,A=l.initialHeight,E=o(j),k=Object(a.mb)(t),C=p*m,S=g*m,T=O?O*m:w,_=v?v*m:A,R=Object(c.a)(E,C,S),L=R.x,P=R.y,G=b-L*y,M=f-P*x,B=Object(a.r)({id:r.X,originalX:b,originalY:f,originalWidth:w,originalHeight:A,originalCropWidth:O,originalCropHeight:v,originalCropX:p,originalCropY:g,width:w,height:A,scaleX:y,scaleY:x,childId:d,oldWidth:T,oldHeight:_}),D=Object(a.x)({x:0,y:0,width:w,height:A,fill:Object(u.c)(u.b.paColor161),listening:!1,rotation:E}),N=Object(a.r)({id:r.S,x:0,y:0,width:w,height:A,clipX:C,clipY:S,clipWidth:T,clipHeight:_,listening:!1,rotation:E}),z=Object(a.r)({id:r.U,x:L,y:P,width:T,height:_,draggable:!0,rotation:E});Object(a.i)(z,"mouseover",(function(){return Object(a.hb)(k).style.cursor="move"})),Object(a.i)(z,"mouseout",(function(){return Object(a.hb)(k).style.cursor="default"}));var H=Object(a.x)({id:"crop-rect",x:0,y:0,width:T,height:_});Object(a.Lb)(e,{x:0,y:0,rotation:E,width:w,height:A,scaleX:1,scaleY:1,cropX:0,cropY:0,cropWidth:0,cropHeight:0,draggable:!1});var Y={pixelRatio:Object(s.a)(e)};Object(a.l)(e,Y),Object(a.m)(e,B),null===e||void 0===e||e.removeEventListener("mousedown");var X=h(t,!1),U=h(t,!0);Object(i.d)(U,{color:Object(u.c)(u.b.paColor152)}),Object(i.d)(X,{shadowBlur:10,shadowColor:Object(u.c)(u.b.paColor162),showDefaultBorder:!0});var F=Object(a.p)(e);F.rotation(0),Object(a.l)(F,Y),Object(a.Kb)(F,!1),Object(a.h)(N,F),Object(a.h)(z,H),Object(a.h)(B,D,N,z,U,X),Object(a.Nb)(U,[e]);var W=Object(a.db)(t),V=W.x,K=W.y;z.dragBoundFunc((function(e){var t=Object(a.db)(z),n=t.width,r=t.height,i=t.scaleX,o=t.scaleY,s=Object(a.db)(B),u=s.x,l=s.y,d=s.width,b=s.height,f=s.scaleX,h=s.scaleY,p=Object(c.a)(-E,u,l),g=p.x,O=p.y,v=Object(c.a)(-E,e.x-V,e.y-K),j=v.x,m=v.y,y=j-g,x=m-O,w=n*i*f,A=r*o*h;y<0?j+=g-j:y+w>d*f&&(j+=-(j+w-(g+d*f))),x<0?m+=O-m:x+A>b*h&&(m+=-(m+A-(O+b*h)));var k=Object(c.a)(E,j,m),C=k.x,S=k.y;return Object(a.Lb)(z,{name:"isDragTransform"}),I(B,E),{x:C+V,y:S+K}})),Object(a.Nb)(X,[z]),Object(a.h)(t,B),Object(a.Lb)(B,{x:G,y:M}),Object(a.I)(t)}},d=n(14),b=n(46),f=n.n(b),h=function(e,t){var n=["top-left","top-right","bottom-left","bottom-right"];t||(n=[].concat(Object(d.a)(n),["top-center","middle-right","middle-left","bottom-center"]));var i=Object(a.D)({id:t?r.vc:r.Z,anchorStroke:t?Object(u.c)(u.b.paColor1):"#0000",anchorFill:t?Object(u.c)(u.b.paColor9):"#0000",anchorSize:t?12:16,anchorCornerRadius:t?50:0,borderStroke:t?Object(u.c)(u.b.paColor1):Object(u.c)(u.b.paColor9),anchorStrokeWidth:2,borderStrokeWidth:2,resizeEnabled:!0,rotateEnabled:!1,listening:!t,enabledAnchors:n,boundBoxFunc:function(n,i){return t?i:function(e,t){var n=Object(a.L)(t,r.Y),i=Object(a.L)(t,r.T),s=Object(a.db)(n),u=s.x,l=s.y,d=s.width,b=s.height,f=s.scaleX,h=s.scaleY,p=Object(a.db)(i).rotation;p=o(p);var g=d*f,O=b*h,v=e.width,j=e.height,m=e.x,y=e.y,x=v<30||j<30,w=m<0||y<0,A=Object(a.db)(t),E=A.x,k=A.y,C=Object(c.a)(-p,u,l),S=C.x,T=C.y,_=Object(c.a)(-p,m-E,y-k),I=_.x,R=_.y;return x||w||I+1<=S||R+1<=T||I+v>=S+g+1||R+j>=T+O+1}(i,e)?n:i}});i.update=function(){f.a.Transformer.prototype.update.apply(i),t||k(i)},t&&Object(a.qb)(i);return Object(a.i)(i,"transform",(function(e){I(Object(a.kb)(e.target),Object(a.db)(e.target).rotation||0);var t=Object(a.jb)(e.target),n=Object(a.R)(t,r.wc),i=Object(a.R)(t,r.ab),c=Object(a.db)(n).width,o=Object(a.db)(n).height,s=Object(a.db)(i).width,u=Object(a.db)(i).height;c>s+2||o>u+2?Object(a.Ob)(n):Object(a.qb)(n)})),i},p=n(2),g=n(114),O=n.n(g),v=n(6),j=n(9),m=n(17),y=n(140),x=n(81),w=n(16),A=n(57),E=function(e){var t,n=(null===e||void 0===e?void 0:e.baseGroup)||Object(v.b)(j.ad);if(n){var o=Object(a.L)(n,r.Y),u=Object(a.L)(n,r.V),l=Object(a.U)(n,"#crop-rect"),d=Object(a.X)(n,r.wc);if(l){var b=Object(a.M)(n,"#".concat(Object(a.db)(o).childId));if(!b){var f=Object(v.b)((function(e){return{activeLayer:Object(j.e)(e)}})).activeLayer;b=Object(a.M)(n,"#".concat(null===f||void 0===f?void 0:f.id))||(null===e||void 0===e?void 0:e.obj)}if(b){var h=Object(a.db)(u),g=h.x,E=h.y,k=h.scaleY,C=h.scaleX,S=h.rotation,T=Object(a.db)(o),_=T.x,I=T.y,R=T.scaleX,L=T.scaleY,P=T.width,G=T.height,M=T.originalX,B=T.originalY,D=T.originalCropX,N=T.originalCropY,z=T.originalCropWidth,H=T.originalCropHeight,Y=T.oldWidth,X=T.oldHeight,U=_+g*R,F=I+E*L,W=Object(a.db)(b).imgRatio,V=Object(a.db)(l),K=V.width,q=V.height,J=K*C/W,Q=q*k/W,Z={x:M,y:B,width:Y,height:X,scaleX:R,scaleY:L,rotation:S,cropX:D,cropY:N,cropWidth:z,cropHeight:H},$=Object(c.a)(-S,g,E),ee={x:U,y:F,width:K*C,height:q*k,scaleX:R,scaleY:L,rotation:S,cropX:$.x/W,cropY:$.y/W,cropWidth:J,cropHeight:Q};Object(a.Lb)(b,Object(p.a)(Object(p.a)({},(null===e||void 0===e?void 0:e.rollback)?Z:ee),{},{draggable:!0}));var te=Object(s.a)(u);d&&Object(a.G)(d),Object(a.m)(b,n),Object(a.l)(b,{pixelRatio:te}),Object(a.G)(o),Object(y.c)(n);var ne=null===(t=null===e||void 0===e?void 0:e.fire)||void 0===t||t;if(ne&&Object(i.h)([b]),Object(v.a)(m.a.actions.setActiveCropMode(!1)),Object(A.a)(b),!(null===e||void 0===e?void 0:e.rollback)&&!O()(Z,ee)&&(J!==P*R/W||Q!==G*L/W)){var re=Object.keys(Z).reduce((function(e,t){return e[t]={oldValue:Z[t],newValue:ee[t]},e}),{});Object(x.a)({historyStack:{historyAction:w.a.object_position,settings:{children:[Object(p.a)(Object(p.a)({},re),{},{id:Object(a.db)(b).id})],fire:ne,type:w.b.crop}}})}}}}},k=function(e){var t=C(e,"anchors"),n=C(e,"lines"),r=Object(a.L)(e,"#custom-anchors-group")||T(t,e,"custom-anchors-group"),i=Object(a.L)(e,"#lines-group")||T(n,e,"lines-group");_(t,r),_(n,i)},C=function(e,t){var n=Object(a.db)(e),r=n.width,i=n.height,c=29;return{anchors:[{points:[0,c,0,0,c,0]},{points:[r/2-14.5,0,r/2+14.5,0]},{points:[r-c,0,r,0,r,c]},{points:[r,i/2-14.5,r,i/2+14.5]},{points:[r,i-c,r,i,r-c,i]},{points:[r/2-14.5,i,r/2+14.5,i]},{points:[0,i-c,0,i,c,i]},{points:[0,i/2-14.5,0,i/2+14.5]}],lines:[{points:[r/3,1,r/3,i-1]},{points:[2*r/3,1,2*r/3,i-1]},{points:[1,i/3,r-1,i/3]},{points:[1,2*i/3,r-1,2*i/3]}]}[t]},S=n(68),T=function(e,t,n){var r=Object(a.r)({id:n}),i=n.includes("anchor"),c=i?6:1;return e.forEach((function(e){var t=Object(a.v)({points:e.points,listening:!1,stroke:Object(u.c)(u.b.paColor9),strokeWidth:c,lineCap:i?"round":"square",lineJoin:i?"round":"miter",shadowBlur:i?10:5,shadowColor:Object(S.a)([0,0,0],i?.2:.5)});Object(a.h)(r,t)})),Object(a.h)(t,r),r},_=function(e,t){e.forEach((function(e,n){Object(a.Lb)(Object(a.fb)(t)[n],{points:e.points})}))},I=function(e,t){var n=Object(a.L)(e,r.V),i=Object(a.L)(e,r.T),o=Object(a.R)(n,"#crop-rect"),s=Object(a.db)(n),u=s.x,l=s.y,d=s.scaleY,b=s.scaleX,f=Object(a.db)(o),h=f.width,p=f.height,g=Object(c.a)(-t,u,l),O=g.x,v=g.y;Object(a.o)(i,{x:O,y:v,width:h*b,height:p*d})}},function(e,t,n){"use strict";n.d(t,"e",(function(){return p})),n.d(t,"f",(function(){return O})),n.d(t,"a",(function(){return g})),n.d(t,"d",(function(){return v})),n.d(t,"b",(function(){return f})),n.d(t,"g",(function(){return j})),n.d(t,"c",(function(){return m}));var r=n(7),a=n.n(r),i=n(10),c=n(4),o=n(2),s=n(95),u=n(29),l=n(0),d=n(1),b=n(196),f=function(){return b.m.reduce((function(e,t){return Object(o.a)(Object(o.a)({},e),{},Object(c.a)({},t.type,t.defaultValue))}),{})},h={x:0,y:0},p=function(e,t,n,r){if(t&&e){var a=Object(l.u)({width:n,height:r,listening:!1}),i=Object(l.s)({width:n,height:r,image:t}),c=Object(l.s)({width:n,height:r,image:e});return Object(l.h)(a,i),Object(l.h)(a,Object(l.Mb)(c,"destination-out")),Object(l.Pb)(a,{pixelRatio:t.width/n,width:n,height:r})}},g=function(){var e=Object(i.a)(a.a.mark((function e(t,n,r,i,c,o){var d,f,h,p,g,O;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=37;break}if(e.prev=1,o!==b.f.Person){e.next=8;break}return e.next=5,s.a.personCutout(n);case 5:e.t0=e.sent,e.next=18;break;case 8:if(o!==b.f.Object){e.next=14;break}return e.next=11,s.a.objectBackgroundRemove(n);case 11:e.t1=e.sent,e.next=17;break;case 14:return e.next=16,s.a.backgroundRemove(n);case 16:e.t1=e.sent;case 17:e.t0=e.t1;case 18:return d=e.t0,e.next=21,Object(u.a)(d);case 21:if(f=e.sent,c){e.next=24;break}return e.abrupt("return",f);case 24:return h=Object(l.u)({width:r,height:i,listening:!1}),p=Object(l.s)({width:r,height:i,image:f}),g=Object(l.s)({width:r,height:i,image:t}),O=Object(l.s)({width:r,height:i,image:n}),h.add(g),h.add(p),h.add(O.globalCompositeOperation("source-in")),e.abrupt("return",h.toCanvas({pixelRatio:n.width/r,width:r,height:i}));case 34:return e.prev=34,e.t2=e.catch(1),e.abrupt("return",t);case 37:return e.abrupt("return",t);case 38:case"end":return e.stop()}}),e,null,[[1,34]])})));return function(t,n,r,a,i,c){return e.apply(this,arguments)}}(),O=function(e){var t=document.createElement("canvas");t.width=b.k,t.height=b.j;var n=e.width<e.height?e.width:e.height,r=t.getContext("2d");return r&&e&&r.drawImage(e,(e.width-n)/2,(e.height-n)/2,n,n,0,0,t.width,t.height),t.toDataURL()},v=function(e,t,n){var r=Math.max(t/e.width,n/e.height);return{x:t/2-e.width/2*r,y:n/2-e.height/2*r,opacity:.6,width:e.width*r,height:e.height*r}},j=function(e,t){var n=e&&Object(l.mb)(e);if(n){var r=Object(l.O)(n,"#".concat(d.Oh));r&&(Object(l.fb)(r).forEach((function(e){e[t?"show":"hide"]()})),Object(l.k)(r))}},m=function(e){if(!e)return h;var t=Object(l.pb)(e)||h,n=Object(l.db)(e),r=n.scaleX,a=n.scaleY,i=0,c=0,o=Object(l.O)(e,(function(e){return Object(l.vb)(e)}));if(o){var s=Object(l.db)(o);i=s.x,c=s.y}return{x:t.x/r-i,y:t.y/a-c}}},,function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));var r=n(1),a=n(34),i=function(){var e=window.localStorage.getItem(r.ce);if(e){var t;try{t=JSON.parse(e)}catch(n){return void a.a.trigger(n,"error")}return t}},c=function(e,t){window.localStorage.setItem(e,JSON.stringify(t))},o=function(e){if(e){var t=i(),n=t||[e];t?(!function(e,t){var n=e.findIndex((function(e){return e.font_family===t.font_family}));n>=0&&e.splice(n,1),e.unshift(t)}(n,e),n.length>r.wd&&n.pop(),c(r.ce,n)):c(r.ce,[e])}},s=function(){var e=i();if(e)return e}},,,function(e,t,n){"use strict";var r=n(3);t.a=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Object(r.useEffect)((function(){if(n)return window.addEventListener(e,t),function(){window.removeEventListener(e,t)}}),[t,n,e])}},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return i})),n.d(t,"g",(function(){return c})),n.d(t,"a",(function(){return o})),n.d(t,"f",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"e",(function(){return l}));var r=n(1),a=function(e){return e===r.Te},i=function(e){return e.is_paid},c=function(e){return e.license===r.Te},o=function(e){var t;return null!==(t=e.isPremium)&&void 0!==t?t:e.is_monotype},s=function(e){return e.premium},u=function(e){return e.license===r.Te},l=function(e){return e.license===r.Te}},function(e,t,n){"use strict";var r=n(6),a=n(21),i=n(1),c=n(353);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.z,n=Object(c.a)(e,t);return Object(r.a)(a.a.actions.addAndSelectLayersWithoutHistory(Object(c.a)(e,t))),n.reduce((function(e,t){return e.concat(t.layers)}),[])}},function(e,t,n){"use strict";var r=n(3);t.a=function(e,t){var n=Object(r.useRef)(!1);Object(r.useEffect)((function(){if(n.current){var t=e();if(t)return t}n.current=!0}),t)}},,function(e,t,n){"use strict";var r=n(110),a=n.n(r),i=n(18),c=n.n(i),o=n(44),s=Object(o.b)({skeletonWrapper:{marginBottom:10},skeletonItem:{marginTop:5}}),u=n(5);t.a=function(e){var t=e.count,n=e.classes,r=e.width,i=e.height,o=s();return Object(u.jsx)("div",{className:c()(o.skeletonWrapper,null===n||void 0===n?void 0:n.main),children:Object(u.jsx)(a.a,{count:t,width:r,height:i,className:c()(t>1?o.skeletonItem:null,null===n||void 0===n?void 0:n.skeleton)})})}},,,,,,,,,,function(e,t,n){"use strict";var r=n(3),a=n(88),i=n(1),c=n(271);t.a=function(){var e=Object(a.h)();return Object(r.useMemo)((function(){var t=new URLSearchParams(e.search),n=t.has(i.fb.templateSearch),r=t.has(i.fb.templateCategory);return{imageUrl:t.get(i.fb.image),imageId:t.get(i.fb.imageId),stickerId:t.get(i.fb.stickerId),projectId:t.get(i.fb.projectId),template:t.get(i.fb.template),background:t.get(i.fb.background),templateSearch:n?t.get(i.fb.templateSearch):r?t.get(i.fb.templateCategory):"",url:String(e.pathname.split("/").pop()),eraserOpen:t.get(i.fb.eraserOpen),patchOpened:t.get(i.fb.patchOpen),cropOpen:t.get(i.fb.cropOpen),search:t.get(i.fb.search),category:t.get(i.fb.category),templateSize:t.get(i.fb.templateSize),customSize:t.get(i.fb.customSize),unit:t.get(i.fb.unit)||"",tab:t.get(i.fb.tab),batch_key:t.get(i.fb.batch_key),paymentFlow:t.get(i.fb.paymentFlow),license:t.get(c.g.license),bendText:t.get(i.fb.text)}}),[e.search,e.pathname])}},,function(e,t,n){"use strict";var r=/\.svg$/;t.a=function(e){return e.match(r)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return i}));var r=n(2),a=n(0);t.a=function(e,t){var n=Object(a.db)(t),r=Object(a.u)(),i={x:n.width/4,y:n.height/4,padding:0},c=Object(a.p)(e,i);Object(a.h)(r,c),Object(a.h)(t,r);var o=Object(a.Pb)(r,{});Object(a.G)(r);var s=o.getContext("2d"),u=document.createElement("canvas").getContext("2d");if(!s||!u)return{xOversight:0,yOversight:0};for(var l,d,b=s.getImageData(0,0,o.width,o.height),f={top:1/0,left:1/0,right:-1/0,bottom:-1/0},h=b.data.length,p=0;p<h;p+=4)0!==b.data[p+3]&&(l=p/4%o.width,(d=~~(p/4/o.width))<f.top&&(f.top=d),l<f.left&&(f.left=l),f.right<l&&(f.right=l),f.bottom<d&&(f.bottom=d));return{xOversight:f.left-i.x,yOversight:f.top-i.y,actualHeight:f.bottom-f.top,actualWidth:f.right-f.left}};var i=function(e){var t=document.createElement("div");t.setAttribute("id","tmp-container"),t.setAttribute("hidden","true"),document.body.appendChild(t);var n=2*e.width,i=Object(a.z)({container:"tmp-container",width:n,height:n}),c=Object(a.db)(i),o=Object(a.u)(),s={x:c.width/4,y:c.height/4,padding:0},u=Object(a.B)(Object(r.a)(Object(r.a)({},e),s)),l=Object(a.db)(u),d=l.width,b=l.height;Object(a.h)(o,u),Object(a.h)(i,o);var f=Object(a.Pb)(o,{});Object(a.G)(o);var h=f.getContext("2d"),p=document.createElement("canvas").getContext("2d");if(!h||!p)return{xOversight:0,yOversight:0,actualHeight:b,actualWidth:d};for(var g,O,v=h.getImageData(0,0,f.width,f.height),j={top:1/0,left:1/0,right:-1/0,bottom:-1/0},m=v.data.length,y=0;y<m;y+=4)0!==v.data[y+3]&&(g=y/4%f.width,(O=~~(y/4/f.width))<j.top&&(j.top=O),g<j.left&&(j.left=g),j.right<g&&(j.right=g),j.bottom<O&&(j.bottom=O));return document.body.removeChild(t),{xOversight:j.left-s.x,yOversight:j.top-s.y,actualHeight:j.bottom-j.top,actualWidth:j.right-j.left}}},,,function(e,t,n){"use strict";var r=n(2),a=n(3),i=n(198),c=n(33),o=n(76),s=n(436),u=n(469),l=n(152),d=n(195),b=n(5);t.a=function(){var e=Object(c.c)(),t=Object(i.d)(),n=Object(d.c)().activeTool,f=Object(a.useCallback)((function(t){var n=t.title,r=t.text;return Object(b.jsx)(u.a,{title:e(n),text:e(r)})}),[e]);return{showUploaderError:Object(a.useCallback)((function(e){l.b.openPopup(o.I.error[e].title,n),t({duration:o.m,hasClose:!0,content:f(Object(r.a)(Object(r.a)({},o.I.error),s.b.error)[e]),type:i.c.error,onClose:function(){return l.b.popupAction(n)}})}),[t,f,n])}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c}));var r,a=n(4),i=n(1);!function(e){e.fileFormat="fileFormat"}(r||(r={}));var c={error:Object(a.a)({},r.fileFormat,{title:"Format not supported",text:"Some files were not in the right format. Please upload only JPG, JPEG, PNG".concat(i.vh.editorOnly?"":" for images, and TTF, OTF, WOFF for fonts",".")})}},function(e,t,n){"use strict";var r=n(15),a=n(9),i=n(6),c=n(323),o=n(254),s=n(12),u=n(1),l=n(0),d=function(e){var t=e.layerArr,n=e.index,r=e.konvaElem,a=t.map((function(e,r){return r===n-1?t[n]:r===n?t[n-1]:e})),c=Object(l.db)(r).name===u.qg?Object(l.kb)(r):r;Object(l.Hb)(c),Object(i.a)({type:s.s,layers:a})},b=function(e){var t=e.layerArr,n=e.index,r=e.konvaElem,a=t.map((function(e,r){return r===n?t[n+1]:r===n+1?t[n]:e})),c=Object(l.db)(r).name===u.qg?Object(l.kb)(r):r;Object(l.Eb)(c),Object(i.a)({type:s.s,layers:a})},f=n(192),h=function(e){var t=e.layerArr,n=e.index,r=e.konvaElem,a=t.findIndex((function(e){return e.type===u.H})),c=t.findIndex((function(e){return"editor"===e.type})),o=t.map((function(e,r){return c>-1&&r===c-1||r===a-1&&-1===c?t[n]:r>=n&&r!==a&&r!==c?t[r+1]:e})),d=Object(l.db)(r).name===u.qg?Object(l.kb)(r):r;Object(l.Fb)(d),Object(l.Hb)(d),Object(i.a)({type:s.s,layers:o})},p=function(e){var t=e.layerArr,n=e.index,r=e.konvaElem,a=t.map((function(e,r){return 0===r?t[n]:r<=n?t[r-1]:e})),c=Object(l.db)(r).name===u.qg?Object(l.kb)(r):r;Object(l.Gb)(c),Object(i.a)({type:s.s,layers:a})},g=n(81),O=n(16),v=n(256),j=n(43);t.a=function(e){var t=e.type,n=e.handleCopy,s=e.handlePaste,m=e.handleCut,y=e.layersIDs,x=e.movePixels,w=Object(i.b)((function(e){return{baseGroup:Object(a.ad)(e),layers:Object(a.ac)(e),activeLayers:Object(a.h)(e)}})),A=w.baseGroup,E=w.layers,k=w.activeLayers,C=Object(r.a)(k,1)[0];if((C||"paste"===t)&&A){var S,T,_=E.indexOf(C),I=E.findIndex((function(e){return e.type===u.H})),R=1!==k.length,L=Object(l.L)(A,"#".concat(C.id).concat(u.zh)),P=Object(l.L)(A,"#".concat(C.id).concat(u.Qh)),G=L||P||Object(l.R)(A,"#".concat(C.id)),M=Object(l.db)(G).name===u.qg||Object(l.lb)(G).layerType===u.pg;switch(t){case"copy":n&&n();break;case"cut":m&&m();break;case"paste":s&&s();break;case u.Cd.flipHorizontal:case u.Cd.flipVertical:var B=k.map((function(e){return e.id}));Object(f.a)({ids:B,baseGroup:A,type:t,addToHistory:!0});break;case"duplicate":var D=E.filter((function(e){var t;return!!u.Ig.includes(e.type)&&(y?y.includes(e.id):e.active||(null===(t=e.effectLayer)||void 0===t?void 0:t.active))})).map((function(e){return e.settings.effectGroupId?"".concat(e.id).concat(u.zh):e.id}));if(!D.length||M)return;var N=Object(l.T)(A,D.map((function(e){return"#".concat(e)})).join(", "));T=Object(c.a)({baseGroup:A,layerArr:k,konvaElems:N,movePixels:x});break;case"remove":Object(o.a)({baseGroup:A,layerArr:E,konvaElem:G,removeSelectedTransformer:!0});break;case"forward":if(R||Object(v.a)("forward",E))return;d({layerArr:E,index:_,konvaElem:G}),S=_-1;break;case"backward":if(R||Object(v.a)("backward",E))return;b({layerArr:E,index:_,konvaElem:G}),S=_+1;break;case"back":if(R||Object(v.a)("back",E))return;h({layerArr:E,index:_,konvaElem:G}),S=I-1;break;case"front":if(R||Object(v.a)("front",E))return;p({layerArr:E,index:_,konvaElem:G}),S=0}if("number"===typeof S){var z=A&&Object(l.X)(A,u.pb);Object(j.g)(z),Object(g.a)({historyStack:{historyAction:O.a.reorder_layers,settings:{indexes:{oldValue:{prevIndex:S,newIndex:_},newValue:{prevIndex:_,newIndex:S}},selectedId:{oldValue:Object(l.db)(z)[u.v]}}}})}return Object(l.k)(A),T}}},function(e,t,n){"use strict";var r=n(4),a=n(18),i=n.n(a),c=n(419),o=n(1),s=n(44),u=Object(s.b)({sidebarLoader:{display:"flex",marginTop:15,flexWrap:"wrap",alignContent:"flex-start",justifyContent:"space-between"},sidebarWrapper:{},sidebarLoaderItem:{marginBottom:10}}),l=n(5);t.a=function(e){for(var t=e.withContainer,n=e.itemCount,a=void 0===n?10:n,s=u(),d=[],b=1;b<=a;b++)d.push(Object(l.jsx)(c.a,{classes:{main:b%2!==0?s.sidebarLoaderItem:""},count:1,width:o.bc,height:o.bc},b));return Object(l.jsx)("div",{className:i()(s.sidebarLoader,Object(r.a)({},s.sidebarWrapper,t)),children:d})}},,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(7),a=n.n(r),i=n(10),c=n(75),o=n(64),s=n(1),u=Object(c.b)("fetchRatioCards",Object(i.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.a)(s.af);case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n.response.data);case 7:case"end":return e.stop()}}),e)}))),{condition:function(e,t){var n=(0,t.getState)().general.ratioCards;if(null===n||void 0===n?void 0:n.length)return!1}})},function(e,t,n){"use strict";var r=n(1),a=n(30);t.a=function(e){switch(e){case"Add a heading":return a.b.textHeading;case"Add a subheading":return a.b.textSubHeading;case"Add a body text":return a.b.textBody;default:return r.Dg}}},function(e,t,n){"use strict";t.a=n.p+"static/media/bg.c42217fd.png"},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(2),a=n(6),i=n(77),c=n(1),o=n(81),s=n(16),u=n(0),l=n(124),d=n(265),b=function(e,t,n){return n&&(Object(u.G)(n),Object(l.a)(t),Object(u.f)(e,t)),Object(u.I)(e),t},f=function(e){var t=e.textNode,n=e.bendRange,a=e.baseGroup;if(0===n){var i=Object(u.a)(t),c=Object(u.B)(Object(r.a)(Object(r.a)({},i),{},{bend:0}));return b(a,c,t)}if(Object(u.Bb)(t)){var o=Object(d.b)({textNode:t,bendRange:n}).arcPath;return Object(u.Lb)(t,{data:o,bend:n}),b(a,t)}var s=Object(d.b)({textNode:t,bendRange:n}).arcPath,l=0;t.textArr.forEach((function(e){l+=e.width}));var f=Object(u.C)(Object(r.a)(Object(r.a)({},Object(u.a)(t)),{},{multiLineTextWitdh:l,data:s,bend:n}));return b(a,f,t)};t.b=function(e){var t=e.baseGroup,n=e.layerArr,l=e.value,d=e.setSettings,b=e.isRecentlyValue;if(c.F.test(String(l))){var h=Object(u.X)(t,c.pb),p=[],g=[];n.forEach((function(e){var n=Object(u.R)(t,"#".concat(e.id)),a=f({baseGroup:t,textNode:n,bendRange:Number(l)});if(a){p.push(a);var i=Object(u.db)(a),c=i.id,o=i.bend,s=Object(u.Bb)(a);d((function(e){return Object(r.a)(Object(r.a)({},e),{},{isBended:s,textAlign:s?"":e.textAlign,textSpace:e.textSpace.map((function(e){return"line"===e.type&&s?Object(r.a)(Object(r.a)({},e),{},{value:10}):e})),textBend:Object(r.a)(Object(r.a)({},e.textBend),{},{value:l})})})),g.push({id:c,bend:{oldValue:Object(u.db)(n).bend||0,newValue:o}})}})),p.length&&Object(u.Nb)(h,p),!b&&g.length&&(Object(o.a)({historyStack:{historyAction:s.a.bulk_action,settings:{bulkType:s.a.bend,children:g}}}),Object(a.a)({type:i.n,settings:{bend:l}}))}}},function(e,t,n){"use strict";var r=n(7),a=n.n(r),i=n(10),c=n(1),o=n(34),s=n(219),u=n(64),l=n(214),d=/(\s|-|_)/g,b={getImageData:function(e,t,n){var r=this;return Object(i.a)(a.a.mark((function i(){var c;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(c=e,!e||!e.includes(".svg")){a.next=5;break}return a.next=4,r.loadSVG(e,t);case 4:c=a.sent;case 5:return a.abrupt("return",r.loadImage(c,t,(function(e){null===n||void 0===n||n(e)})));case 6:case"end":return a.stop()}}),i)})))()},getPlaceholder:function(e,t,n){return Object(i.a)(a.a.mark((function r(){return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,c){var o=Object(l.a)(e,t),u=o.phImage,d=o.padding;u.onload=Object(i.a)(a.a.mark((function i(){var o;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(s.a)({phImage:u,width:4*e,height:4*t,offsetFromFrame:n});case 3:if(o=a.sent){a.next=6;break}return a.abrupt("return",c(new Error("Could not load placeholder image 1")));case 6:return o.setAttribute("padding","".concat(d)),a.abrupt("return",r(o));case 10:return a.prev=10,a.t0=a.catch(0),a.abrupt("return",c(new Error("Could not load placeholder image 2")));case 13:case"end":return a.stop()}}),i,null,[[0,10]])}))),u.onerror=function(){return c(new Error("Could not load placeholder image 3"))}})));case 1:case"end":return r.stop()}}),r)})))()},loadImage:function(e,t,n){var r=!1,a=e;~a.indexOf("cdn")&&!~a.indexOf(".svg")&&(a+="?to=min&r=50");var i=new Image;return i.addEventListener("load",(function(){r||null===n||void 0===n||n(i)}),{once:!0}),i.setAttribute("crossOrigin",""),i.src=a,new Promise((function(t,n){var a=new Image;a.addEventListener("load",(function(){r=!0,t(a)}),{once:!0}),a.onerror=function(e){n(e)},a.setAttribute("crossOrigin",""),a.src=e}))},loadSVG:function(e,t){return new Promise((function(n,r){Object(u.a)(e).then((function(e){return e.blob()})).then((function(e){var r=document.createElement("object");r.type="image/svg+xml",r.title="fake",r.classList.add("svg-obj"),r.onload=function(){if(r&&r.contentDocument){r.contentDocument.querySelectorAll("path").forEach((function(e){e.style.setProperty("fill","#".concat(t.fill))}));var e=r.contentDocument.querySelector("svg");t&&t.rect&&e&&(e.removeAttribute("viewBox"),e.removeAttribute("enable-background"));var a=(new XMLSerializer).serializeToString(e),i=new Blob([a],{type:"image/svg+xml"});n(URL.createObjectURL(i)),document.body.removeChild(r)}},r.data=URL.createObjectURL(e),r.classList.add("visually-hidden"),document.body.appendChild(r)})).catch((function(e){o.a.trigger(e,"error"),r(e)}))}))},loadFont:function(e,t){return Object(i.a)(a.a.mark((function n(){var r;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,new FontFace(e,"url(".concat(t,")"));case 2:return r=n.sent,n.abrupt("return",r.load().then((function(e){return document.fonts.add(e),e})).catch((function(e){o.a.trigger(e,"error")})));case 4:case"end":return n.stop()}}),n)})))()},getDataFromShop:function(e){return Object(i.a)(a.a.mark((function t(){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(u.a)(e);case 2:return n=t.sent,t.abrupt("return",n.json());case 4:case"end":return t.stop()}}),t)})))()},getFontByFormattedName:function(e){return Object(i.a)(a.a.mark((function t(){var n,r,i,s,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.toLocaleLowerCase().replace(d,""),t.prev=1,t.next=4,fetch("".concat(c.yc,"?name=").concat(r));case 4:if(200!==(n=t.sent).status){t.next=7;break}return t.abrupt("return",null===(i=n)||void 0===i?void 0:i.json());case 7:return r=r.replace("bold","").replace("black","").replace("italic","").replace("medium","").replace("regular",""),t.next=10,fetch("".concat(c.yc,"?name=").concat(r));case 10:if(200!==(n=t.sent).status){t.next=13;break}return t.abrupt("return",null===(s=n)||void 0===s?void 0:s.json());case 13:if(!r.includes("condensed")){t.next=20;break}return r=r.replace("condensed","cn"),t.next=17,fetch("".concat(c.yc,"?name=").concat(r));case 17:if(200!==(n=t.sent).status){t.next=20;break}return t.abrupt("return",null===(u=n)||void 0===u?void 0:u.json());case 20:t.next=25;break;case 22:t.prev=22,t.t0=t.catch(1),o.a.trigger(t.t0,"error");case 25:return t.abrupt("return",{url:"",preview_url:""});case 26:case"end":return t.stop()}}),t,null,[[1,22]])})))()}};t.a=b},function(e,t,n){"use strict";t.a=function(e){var t=e.width,n=e.height,r=e.nextWidth,a=e.nextHeight,i=Math.max(t/r,n/a);return{x:t/2-r/2*i,y:n/2-a/2*i,width:r*i,height:a*i}}},,,function(e,t,n){"use strict";var r=n(112);t.a=function(e,t){var n=document.createElement("a");n.href=e,n.download=t,r.isIOS||(n.target="_blank"),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}},function(e,t,n){"use strict";var r=n(1),a=[{id:1,page:"featured",name:"Featured",icon:"".concat(r.N,"/09989455731345560793.jpg")},{id:2,page:"fx",name:"FX",icon:"".concat(r.Fe,"/73991646167397985600.jpg")},{id:3,page:"blur",name:"Blur",icon:"".concat(r.O,"/00346484866545463106.jpg")},{id:4,page:"lut-filters",name:"Light Filters",icon:"".concat(r.O,"/317477850339201.jpg")},{id:5,page:"magic-effects",name:"Magic",icon:"".concat(r.N,"/316184816006201.png")},{id:6,page:"popArt",name:"Pop Art",icon:"".concat(r.O,"/13206429425500168418.jpg")},{id:7,page:"color-toning-effects",name:"Color Toning",icon:"".concat(r.N,"/316184791150201.png")},{id:8,page:"artistic",name:"Artistic",icon:"".concat(r.N,"/95782874672749247733.jpg")},{id:9,page:"colors",name:"Colors",icon:"".concat(r.N,"/94292943550758678331.jpg")},{id:10,page:"paper",name:"Paper",icon:"".concat(r.N,"/45605213357145146562.jpg")},{id:11,page:"canvas-effect",name:"Canvas",icon:"".concat(r.N,"/326370410018201.jpg")},{id:12,page:"sketch-effects",name:"Sketch",icon:"".concat(r.O,"/83708613861054859789.jpeg")},{id:13,page:"color-transfer",name:"Style Transfer",icon:"".concat(r.O,"/33597712871585858810.png")},{id:14,page:"overlays",name:"Photo Overlays",icon:"".concat(r.N,"/316184876308201.png")},{id:15,page:"distort",name:"Distort",icon:"".concat(r.N,"/29554785672896532671.jpg")},{id:16,page:"color-exposure",name:"Color Exposure",icon:"".concat(r.O,"/316184558141201.png")},{id:17,page:"duotone",name:"Duotone",icon:"".concat(r.O,"/316184714440201.png")},{id:18,page:"rainbow-effects",name:"Rainbow Filters",icon:"".concat(r.N,"/316184919421201.png")},{id:19,page:"runout",name:"Pixel Stretch",icon:"".concat(r.N,"/318584585002201.jpg")},{id:20,page:"sky-effects",name:"Change Sky",icon:"".concat(r.O,"/32789421211600728326.png")}];t.a=a},,,,,,function(e,t,n){"use strict";var r=n(78),a=n(19);t.a=function(e,t){var n=Object(r.a)(e,t);return n&&Object(a.m)(n)}},function(e,t,n){"use strict";var r=n(0),a=n(49),i=n(1);t.a=function(e,t){var n=Object(r.R)(e,(function(e){return Object(r.db)(e).layerId===t||Object(r.db)(e).id===t}))||null,c=Object(r.N)(n,".".concat(i.Bc),!0);Object(r.tb)(c)&&(n=Object(a.f)(c)?Object(r.N)(n,".".concat(i.Cc),!0)||n:c),n&&Object(a.h)([n])}},function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return g})),n.d(t,"c",(function(){return O}));var r=n(1),a=n(80),i=n(89),c=n(67),o=n(0),s=n(68),u=n(11),l=n(55),d=200,b=function(e,t){return!(0===e&&0===t)},f=function(e,t,n){!function(e,t){Object(o.fb)(e).forEach((function(e){return Object(o.db)(e).id!==Object(o.db)(t).id&&Object(o.G)(e)})),Object(o.Lb)(t,{visible:!0})}(e,n);var a=Object(o.db)(n),i=a.x,c=a.y,s=a.width,u=a.height,l=a.scaleX,d=a.scaleY,f=a.offsetX,h=a.offsetY,p=a.id,g=Math.abs(s*l),O=Math.abs(u*d),v=b(f,h),j=l<0&&!v?i-g:i,m=d<0&&!v?c-O:c,y=Object(o.r)({id:"".concat(p,"|").concat(r.Of),name:r.Of,clipX:v?j-f:j,clipY:v?m-h:m,clipWidth:g,clipHeight:O});Object(o.h)(e,y);var x=Object(o.r)({id:"".concat(n.id(),"|").concat(r.Pf),name:r.Pf,x:j,y:m,width:g,height:O,is_settings:!0,offsetX:g/2,offsetY:O/2,scaleX:l>0?1:-1,scaleY:d>0?1:-1});switch(Object(o.h)(y,x),t){case r.hg.ONLY_SKETCH:var w=Object(o.x)({id:"".concat(n.id(),"|").concat(r.Qf),x:v?j-f:j,y:v?m-h:m,width:g,height:O,fill:"white"});Object(o.h)(e,w),Object(o.Lb)(w,{zIndex:0}),Object(o.Lb)(n,{visible:!1});break;case r.hg.TWO_SKETCH:var A=Object(o.r)({id:"".concat(p,"|").concat(r.Nf),name:r.Nf,x:j,y:m,width:g,height:O,offsetX:g/2,offsetY:O/2,scaleX:l>0?1:-1,scaleY:d>0?1:-1,is_settings:!0});Object(o.h)(y,A)}},h=function(e){var t,n,a=e.effectGroup,i=e.stage,c=e.settings;!function(e){var t,n,a=e.effectGroup,i=e.stage,c=e.settings,s=c.svgDoc,l=s.querySelector("svg");if(l){var d,b=parseInt(l.getAttribute("height"),10),f=parseInt(l.getAttribute("width"),10),h=s.querySelectorAll("path"),p=null===(t=c.activeImage)||void 0===t?void 0:t.layer,g=(null===(n=c.activeImage)||void 0===n?void 0:n.node)||i.findOne("#".concat(p.id)),O=Math.abs(g.width()*g.scaleX()),v=Math.abs(g.height()*g.scaleY()),j=Object(o.L)(a,"#".concat(g.id(),"|").concat(r.Pf));c.sketchType===r.hg.TWO_SKETCH&&(d=Object(o.L)(a,"#".concat(g.id(),"|").concat(r.Nf))),h.forEach((function(e,t){var n=Object(o.w)({id:"".concat(g.id(),"|").concat(r.Of,"|").concat(r.Pf,"|").concat(t),x:0,y:0,width:O,height:v,data:e.getAttribute("d")||"",fill:Object(u.c)(u.b.paColor3),stroke:Object(u.c)(u.b.paColor3),strokeWidth:10,scale:{x:.1/(f/O),y:.1/(b/v)},is_settings:!0});if(j.add(n),c.sketchType===r.hg.TWO_SKETCH){var a=n.clone();Object(o.Lb)(a,{id:"".concat(Object(o.db)(g).id,"|").concat(r.Of,"|").concat(r.Nf,"|").concat(t)}),Object(o.h)(d,a)}}))}}({effectGroup:a,stage:i,settings:c});var l,f=null===(t=c.activeImage)||void 0===t?void 0:t.layer,h=(null===(n=c.activeImage)||void 0===n?void 0:n.node)||i.findOne("#".concat(f.id));c&&c.colorRGB1&&(l=Object(s.a)(c.colorRGB1));var p=Object(o.L)(a,"#".concat(h.id(),"|").concat(r.Pf)),g=Object(o.db)(p),O=g.scaleX>0?1:-1,v=g.scaleY>0?1:-1;Object(o.Lb)(p,{globalCompositeOperation:c.blendMode,rotation:Number(c.rotate)}),Object(o.fb)(p).forEach((function(e){var t=e;Object(o.Lb)(t,{fill:l,stroke:l,strokeWidth:10*Number(c.line)})}));var j=Object(o.db)(h),m=j.width,y=j.height,x=j.scaleX,w=j.scaleY,A=j.offsetX,E=j.offsetY,k=j.x,C=j.y,S=j.id,T=Math.abs(m*x),_=Math.abs(y*w),I=Number(c.horizontal)*T/d,R=Number(c.vertical)*_/d,L=b(A,E),P=(x<0&&!L?k-T:k)+(L?0:T/2),G=(w<0&&!L?C-_:C)+(L?0:_/2);switch(p.x(P+I),p.y(G-R),p.scale({x:(1+Number(c.zoom)/100)*O,y:(1+Number(c.zoom)/100)*v}),c.sketchType){case r.hg.TWO_SKETCH:var M;c&&c.colorRGB2&&(M=Object(s.a)(c.colorRGB2));var B=Object(o.L)(a,"#".concat(S,"|").concat(r.Nf));Object(o.Lb)(B,{globalCompositeOperation:c.blendMode,x:P-I,y:G+R,rotation:Number(c.rotate),scaleX:(1+Number(c.zoom)/100)*O,scaleY:(1+Number(c.zoom)/100)*v}),Object(o.fb)(B).forEach((function(e){var t=e;Object(o.Lb)(t,{fill:M,stroke:M,strokeWidth:10*Number(c.line)})}));break;case r.hg.FLIP_SKETCH:Object(o.Lb)(p,{scaleX:-(1+Number(c.zoom)/100)*O,scaleY:(1+Number(c.zoom)/100)*v})}},p=function(e){var t,n,s=e.effectGroup,u=e.stage,d=e.settings,b=Object(o.lb)(s),p=b[r.Ed]!==r.pg||b.name!==r.Cc,g=Object(o.db)(s).effectType,O=g&&g!==r.qc.sketch,v=null===(t=d.activeImage)||void 0===t?void 0:t.layer;if(O&&(Object(c.a)({effectType:g}),Object(l.b)(g)),v){var j=(null===(n=d.activeImage)||void 0===n?void 0:n.node)||u.findOne("#".concat(v.id));f(s,d.sketchType,j),h({effectGroup:s,stage:u,settings:d}),Object(o.Lb)(s,{effectType:r.qc.sketch}),p&&Object(a.a)({node:s}),Object(i.a)(s)}},g=function(e){var t=e.baseGroup,n=e.activeLayer,a=e.activeImage,i=e.settingName,c=e.settingValue,s=n.effectLayer.settings.sketchType,u=b(a.offsetX(),a.offsetY()),l=Object(o.db)(a),f=l.width,h=l.height,p=l.scaleX,g=l.scaleY,O=l.x,v=l.y,j=Math.abs(f*p),m=Math.abs(h*g),y=u?0:j/2,x=u?0:m/2,w=Object(o.L)(t,"#".concat(n.id,"|").concat(r.Pf)),A=Object(o.L)(t,"#".concat(n.id,"|").concat(r.Nf));switch(i){case"horizontal":var E=p<0&&!u?O-j:O;Object(o.Lb)(w,{x:E+c*j/d+y}),s===r.hg.TWO_SKETCH&&Object(o.Lb)(A,{x:E-c*j/d+y});break;case"vertical":var k=v<0&&!u?v-m:v;Object(o.Lb)(w,{y:k-c*m/d+x}),s===r.hg.TWO_SKETCH&&Object(o.Lb)(A,{y:k+c*m/d+x});break;case"line":Object(o.fb)(w).forEach((function(e){var t=e;Object(o.Lb)(t,{strokeWidth:10*c})})),s===r.hg.TWO_SKETCH&&Object(o.fb)(A).forEach((function(e){var t=e;Object(o.Lb)(t,{strokeWidth:10*c})}));break;case"zoom":var C={x:w.scaleX()>0?1:-1,y:w.scaleY()>0?1:-1};Object(o.Lb)(w,{scaleX:(1+1*c/100)*C.x,scaleY:(1+1*c/100)*C.y}),s===r.hg.TWO_SKETCH&&Object(o.Lb)(A,{scaleX:(1+1*c/100)*C.x,scaleY:(1+1*c/100)*C.y});break;case"rotate":Object(o.Lb)(w,{rotation:c}),s===r.hg.TWO_SKETCH&&Object(o.Lb)(A,{rotation:c})}Object(o.I)(t)},O=function(e){var t=e.baseGroup,n=e.activeLayer,a=e.settings,i=Object(o.L)(t,"#".concat(n.id).concat(r.zh)),c=a.colorRGB1,u=a.colorRGB2,l=Object(s.a)(c),d=Object(o.L)(i,"#".concat(n.id,"|").concat(r.Pf));if(Object(o.fb)(d).forEach((function(e){var t=e;Object(o.Lb)(t,{fill:l,stroke:l})})),n.effectLayer.settings.sketchType===r.hg.TWO_SKETCH){var b=Object(s.a)(u),f=Object(o.L)(i,"#".concat(n.id,"|").concat(r.Nf));Object(o.fb)(f).forEach((function(e){var t=e;Object(o.Lb)(t,{fill:b,stroke:b})}))}Object(o.k)(t)}},,function(e,t,n){"use strict";var r=n(2),a=n(41),i=n.n(a),c=n(1),o=n(0),s=n(43);t.a=function(e){var t,n=e.baseGroup,a=e.type,u=e.rgb,l=e.activeLayer,d=e.transparent,b=e.selectedChildAttrs;if(n&&l){var f=Object(o.T)(n,"#".concat((null===b||void 0===b?void 0:b.id)||l.settings.childId)),h=(null===b||void 0===b?void 0:b.transparent)||d?0:null!==(t=u&&u.a)&&void 0!==t?t:1,p=u&&i()(u).setAlpha(h).toHex8String(),g=(null===b||void 0===b?void 0:b.type)||a;f.forEach((function(e){return function(e){var t=Object(o.X)(Object(o.jb)(e),c.pb),n=Object(o.kb)(f[0]);Object(o.rb)(n)&&Object(o.n)(n),Object(o.rb)(e)&&Object(o.n)(e);var a={};c.Ae===g&&(a={stroke:p,strokeWidth:l.settings.sizeOutline/c.Be}),["color",c.Af].includes(g)&&(a=Object(r.a)(Object(r.a)({},a),{},{fill:p})),Object(s.g)(t),Object(o.Lb)(e,a)}(e)})),Object(o.k)(n)}}},function(e,t,n){"use strict";var r=n(1),a=n(0),i=n(68),c=n(212);t.a=function(e){var t=e.baseGroup,n=e.layerArr,o=e.type,s=e.colorRGB1,u=e.fromHistoryId,l=e.transparent,d=n.filter((function(e){return u?e.id===u:e.active}));t&&d.length&&(d.forEach((function(e){var n=Object(a.W)(t,"#".concat(e.id)),u=s&&Object(i.a)(s,l?0:null===s||void 0===s?void 0:s.a);o===c.b.outline.type&&e.settings.opacityOutline&&!l&&(u=s&&Object(i.a)(s,e.settings.opacityOutline/100)),o===c.b.color.type&&e.settings.textColorOpacity&&!l&&(u=s&&Object(i.a)(s,e.settings.textColorOpacity/100)),n&&(o===c.b.color.type&&u&&Object(a.Lb)(n,{fill:u}),o===c.b.outline.type&&(u&&Object(a.Lb)(n,{stroke:u}),n.attrs.strokeWidth||Object(a.Lb)(n,{strokeWidth:e.settings.sizeOutline*n.attrs.fontSize*r.Gg/100})),o===c.b.shadow.type&&u&&Object(a.Lb)(n,{shadowColor:u}))})),Object(a.k)(t))}},function(e,t,n){"use strict";var r=n(7),a=n.n(r),i=n(14),c=n(2),o=n(10),s=n(1),u=n(9),l=n(6),d=n(17),b=n(133),f=n(354),h=n(80),p=n(50),g=n(16),O=n(81),v=n(140),j=n(249),m=n(51),y=n(0),x=n(59),w=n(524),A=function(e){var t=Object(y.db)(e),n=t.filters;Object(y.l)(e),n&&Array.isArray(n)&&n.forEach((function(n){n===m.a.IEAdjust&&Object(y.Lb)(e,{contrast:t.contrast,temperature:t.temperature,brightness:t.brightness,saturation:t.saturation,highlights:t.highlights,opacity:t.opacity,clarity:t.clarity,shadows:t.shadows,hue:t.hue}),n===m.a.IEHSL&&Object(y.Lb)(e,{hsl:t.hsl})}))},E=function(e,t,n,r,a){if(a){var i=Object(y.db)(e);if(i.name===s.Lc){var c=Object(y.db)(a),o=c.width,u=c.height;Object(y.I)(Object(y.Lb)(Object(y.n)(e),{fillLinearGradientEndPointX:o,fillLinearGradientEndPointY:u,x:0,y:0,width:o,height:u}))}else if(i.is_transparent_image){var l=3*Math.max(i.width*r,i.height*r);Object(y.Lb)(e,{x:0,y:0,width:l,height:l,is_transparent_image:!0,crop:{x:0,y:0,width:l,height:l},scaleTransparentImage:r})}else Object(y.Lb)(e,{x:t,y:n,width:i.width*r,height:i.height*r,scaleTransparentImage:r})}},k=function(e){var t=e.canvasSectionWidth,n=e.canvasSectionHeight,r=e.elem,a=null===r||void 0===r?void 0:r.size.width,i=null===r||void 0===r?void 0:r.size.height,c=1;return(a>t||i>n)&&(c=Math.min(t/a,n/i)),{boxWidth:a,boxHeight:i,stageWidthInApp:c*a,stageHeightInApp:c*i}},C=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,o,m,C,S,T,_,I,R,L,P,G,M,B,D,N,z,H,Y,X,U,F,W,V,K,q,J,Q,Z,$,ee,te,ne,re,ae,ie,ce,oe,se,ue,le,de,be,fe,he,pe,ge,Oe,ve,je,me,ye,xe,we,Ae,Ee,ke,Ce,Se,Te,_e,Ie,Re,Le,Pe,Ge,Me,Be,De,Ne,ze,He,Ye;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.originalWidth,r=t.originalHeight,o=t.stage,m=t.baseGroup,C=t.elem,S=t.originalOriginalWidth,T=t.originalOriginalHeight,_=t.fromHistory,I=t.zoom,n&&r&&S&&T){e.next=3;break}return e.abrupt("return");case 3:if(R={enabled:!1,value:1},1!==I&&(R.enabled=!0),L=Object(y.jb)(m),P=document.getElementById("stage-parent"),G=(null===P||void 0===P?void 0:P.offsetWidth)||0,M=P?P.offsetHeight-s.ub:0,R.enabled&&(B=Object(l.b)((function(e){return{scale:Object(u.G)(e)}})),D=B.scale,(N=Object(y.O)(o,"#".concat(s.Oh)))&&(Object(y.H)(o,"wheel"),Object(y.fb)(N).forEach((function(e){return Object(y.H)(e,"dragmove")})),Object(y.G)(N)),R.value=I,z=Object(y.db)(o),H=z.width,Y=z.height,Object(y.Lb)(L,{x:0,y:0}),Object(y.Lb)(m,{width:D.width,height:D.height,x:(H-D.width)/2,y:(Y-D.height)/2,visible:!1}),Object(y.Lb)(o,{scaleX:1,scaleY:1})),X=Object(c.a)({},C),U=k({canvasSectionWidth:G,canvasSectionHeight:M,elem:X})){e.next=14;break}return e.abrupt("return");case 14:if(F=U.boxWidth,W=U.boxHeight,V=U.stageWidthInApp,K=U.stageHeightInApp,q=Object(y.db)(m),J=q.width,Q=q.height,Z=Math.min(J/S,Q/T),ee={x:(J-($={width:Z*S,height:Z*T}).width)/2,y:(Q-$.height)/2},te=Math.min(V/S,K/T),re={x:(V-(ne={width:te*S,height:te*T}).width)/2,y:(K-ne.height)/2},P){e.next=24;break}return e.abrupt("return");case 24:return ae=P.offsetWidth,ie=P.offsetHeight,Object(y.Lb)(m,{x:(ae-V)/2,y:(ie-K)/2,width:V,height:K,clipX:0,clipY:0,clipWidth:V,clipHeight:K}),Object(y.Lb)(o,{width:ae,height:ie,scaleX:1,scaleY:1}),ce=Object(y.fb)(m),oe=[],ce.forEach((function(e,t){var n=Object(y.db)(e);if(![s.x,s.ch].includes(n.id)){var r=re.x+ne.width*(n.x-ee.x)/$.width,a=re.y+ne.height*(n.y-ee.y)/$.height,i=ne.width/$.width,c=ne.height/$.height;if(Object(y.ub)(e)){Object(y.n)(e);var o=i*n.width,u=c*n.height,l=n.image||{},d=l.width,b=l.height,f=Math.min(o/d,u/b);Object(y.Lb)(e,{x:r,y:a,width:o,height:u,initialWidth:o,initialHeight:u,imgRatio:f}),A(e)}if(Object(y.Ab)(e)||Object(y.Bb)(e)){var h=n.fontSize,p=n.width,g=n.padding;Object(y.Lb)(e,{x:r,y:a,fontSize:h*i,padding:g*i,width:p*i})}if(Object(y.db)(e).name===s.Bc&&Object(y.tb)(e)){var O=Object(y.db)(e),v=O.width,j=O.height,m=O.x,w=O.y,E={width:i*v,height:c*j,x:re.x+ne.width*(m-ee.x)/$.width,y:re.y+ne.height*(w-ee.y)/$.height};Object(x.i)(e,E)}if(Object(y.tb)(e))if("shapeGroup"===n.name||n.effectType){var k=Object(y.db)(e).scale;Object(y.Lb)(e,{x:r,y:a,scaleX:k.x*i,scaleY:k.y*c})}else if(Object(y.db)(e)[s.Ed]===s.pg){var C,S=Object(y.R)(e,(function(e){return Object(y.db)(e).name===s.qg})),T=Object(y.db)(S).image.src,_=[T],I=0;if(T.includes("cdn")&&T.includes("?"))_=T.split("?"),I=parseInt((null===(C=_[1].split("&").find((function(e){return e.includes("r=")})))||void 0===C?void 0:C.replace("r=",""))||"0",10);oe.push({layerIndex:t,id:Object(y.db)(e).id,imageId:Object(y.db)(S).id,imageUrl:_[0],imageSize:I,is_placeholder:Object(y.db)(S).is_placeholder_active||!1,node:e}),Object(y.Ib)(e)}Object(y.xb)(e)&&Object(y.Lb)(e,{x:r,y:a,width:Object(y.db)(e).width*i,height:Object(y.db)(e).height*c})}})),se=Object(y.R)(m,s.y),ue=Object(y.db)(se),le=ue.width,de=ue.height,se&&le&&(be=Math.max(V/le,K/de),E(se,V/2-le/2*be,K/2-de/2*be,be,m)),fe=Object(y.R)(m,s.dh),he=Object(y.db)(fe),pe=he.width,ge=he.height,fe&&pe&&(Oe=Math.max(V/pe,K/ge),E(fe,V/2-pe/2*Oe,K/2-ge/2*Oe,Oe,m)),ve=Object(y.db)(o),(je=ve.collage)&&je.collage_images&&je.collage_images.length?(me=Math.max(V,K),ye=!1,je.collage_images.forEach((function(e,t){var n=Object(c.a)({},e);n.result_image=oe[t].imageUrl,je.collage_images[t]=n,me!==oe[t].imageSize&&(ye=!0)})),je.collage_images.length||(je.collage_images[0]={result_image:oe[0].imageUrl}),xe=je.collage_layout.paths,we=[],xe.forEach((function(e){var t=e.split(" "),n=[],r=[];t.forEach((function(e){var t=e.split(",");n.push(parseFloat(t[0])),r.push(parseFloat(t[1]))}));var a="";t.forEach((function(e,t){var i=S*n[t]*te,c=((re.x+i)/V).toFixed(3),o=T*r[t]*te,s=((re.y+o)/K).toFixed(3);a+=0===t?"".concat(c,",").concat(s):" ".concat(c,",").concat(s)})),we.push(a)})),je.collage_layout.paths=we,ye&&Object(l.a)(d.a.actions.setCanvasLoading(!0)),Ae=b.a.drawTemplateCollage(je,{width:V,height:K},m,(function(){if(Ae.forEach((function(e,t){Object(y.Lb)(e,{is_settings:!0});var n=oe[t];if(Object(y.tb)(Object(y.eb)(n.node)[0])){var r=Object(y.eb)(n.node)[0],a=Object(y.fb)(r),i=Object(y.R)(n.node,(function(e){return Object(y.db)(e).name===s.qg})),c=Object(y.R)(e,(function(e){return Object(y.db)(e).name===s.qg}));Object(y.Ib)(a[0]);var o=Object(y.db)(c).rotation,u=Object(y.db)(i),l=u.x,d=u.y,b=!!o,f=b?Object(y.db)(r).x+l:l,h=b?Object(y.db)(r).y+d:d,g=re.x+ne.width*(f-ee.x)/$.width,O=re.y+ne.height*(h-ee.y)/$.height;b&&Object(y.Lb)(r,{x:g,y:O,rotation:o});var v=Object(y.db)(c),j=v.width,x=v.height,w=v.offsetY,A=v.offsetX;a.forEach((function(e){Object(y.n)(e),Object(y.Lb)(e,{x:b?0:g,y:b?0:O,width:j,height:x,offsetY:w,offsetX:A,rotation:0}),Object(y.l)(e)})),Object(y.Lb)(c,{x:b?0:g,y:b?0:O,rotation:0}),Object(y.Lb)(e,{id:n.id}),Object(y.Lb)(e,{childId:n.imageId}),Object(y.Lb)(c,{id:n.imageId}),Object(y.h)(r,c),Object(y.Fb)(c),Object(y.h)(e,r),Object(y.Fb)(r),Object(y.f)(m,e)}else{var E=Object(y.R)(n.node,(function(e){return Object(y.db)(e).name===s.qg})),k=Object(y.db)(E),C=k.x,S=k.y,T=re.x+ne.width*(C-ee.x)/$.width,_=re.y+ne.height*(S-ee.y)/$.height,I=Object(y.R)(e,(function(e){return Object(y.db)(e).name===s.qg})),R=Object(y.db)(Object(y.fb)(n.node)[0]);Object(y.Lb)(I,{x:T,y:_,draggable:!n.is_placeholder,is_placeholder_active:n.is_placeholder,scaleX:R.scaleX,scaleY:R.scaleY,rotation:R.rotation,filters:R.filters,saturation:R.saturation,brightness:R.brightness,contrast:R.contrast}),Object(y.Lb)(e,{id:n.id}),Object(y.Lb)(I,{id:n.imageId}),Object(y.l)(I,{pixelRatio:Object(p.a)(I)}),Object(y.f)(m,e)}})),Object(v.c)(m),je.collage_layout.paths=xe,Object(h.a)({node:Object(y.R)(m,s.y)}),R.enabled){var e=(null===P||void 0===P?void 0:P.offsetWidth)||0,t=(null===P||void 0===P?void 0:P.offsetHeight)||0,n="fill"===R.value?1:R.value;("fill"===R.value||e<J*n&&n<=1)&&(n*=e/J),Object(y.Lb)(o,{scaleX:n,scaleY:n});var r=Object(y.db)(m),a=r.width,i=r.height,c=(e-a)/2,u=(t-i)/2;Object(y.Lb)(m,{x:c>0?c:0,y:u>0?u:0,width:a*n,height:i*n,visible:!0}),Object(f.a)({stage:o,layers:m,currentContainerWidth:e,currentContainerHeight:(null===P||void 0===P?void 0:P.offsetHeight)||0,scale:n})}Object(y.k)(m),ye&&Object(l.a)(d.a.actions.setCanvasLoading(!1))}),!1)):(R.enabled&&(Ee=(null===P||void 0===P?void 0:P.offsetWidth)||0,ke=(null===P||void 0===P?void 0:P.offsetHeight)||0,Ce="fill"===R.value?1:R.value,("fill"===R.value||Ee<J*Ce&&Ce<=1)&&(Ce*=Ee/J),Object(y.Lb)(o,{scaleX:Ce,scaleY:Ce}),Se=Object(y.db)(m),Te=Se.width,_e=Se.height,Ie=(Ee/Ce-Te)/2,Re=(ke/Ce-_e)/2,Object(y.Lb)(m,{x:Ie>0?Ie:0,y:Re>0?Re:0,width:Te*Ce,height:_e*Ce,visible:!0}),Object(f.a)({stage:o,layers:m,scale:Ce,currentContainerWidth:Ee,currentContainerHeight:ke})),Object(y.Lb)(L,{x:0,y:0}),Object(y.k)(m)),_||(Pe=Object(l.b)(u.p),Ge=Pe.width,Me=Pe.height,Be=Pe.originalWidth,De=Pe.originalHeight,Ne=Object(l.b)(u.b),ze=Object(l.b)(u.Xc),He=[Object(c.a)(Object(c.a)({},w.a),{},{size:{width:n,height:r}})].concat(Object(i.a)(ze.map((function(e){return{id:e.id,name:e.name,preview_url:e.preview_url,type:0,iconName:"",size:{width:Number(e.size.width),height:Number(e.size.height)}}})))),(Ye=He.find((function(e){return e.id===Ne})))||""!==Ne?Ye||(Ye={id:"input".concat(Ne),iconName:"",type:j.a.INPUT,size:{width:Ge,height:Me},preview_url:"",name:""}):Ye=He.find((function(e){return"original"===e.id})),Object(O.a)({historyStack:{historyAction:g.a.change_ratio,settings:{selectedId:{oldValue:"background",newValue:"background"},originalWidth:{oldValue:Ge,newValue:F},originalHeight:{oldValue:Me,newValue:W},originalOriginalWidth:{oldValue:Be,newValue:S},originalOriginalHeight:{oldValue:De,newValue:T},activeEffect:{oldValue:null===(Le=Ye)||void 0===Le?void 0:Le.id,newValue:C.id},elem:{oldValue:Ye,newValue:C},zoom:{oldValue:I,newValue:I}}}})),Object(l.a)(d.a.actions.chooserAdditionalInfo({width:F,height:W,scale:{width:V,height:K}})),e.abrupt("return",{boxWidthOriginal:F,boxHeightOriginal:W});case 41:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.a=C},function(e,t,n){"use strict";var r=n(1),a={font_1:"".concat(r.Fe,"/82619001327360539306.ttf"),font_34:"".concat(r.Fe,"/52752010154707441770.ttf"),MilasianCircaMedium:"".concat(r.Fe,"/11963791869219228465.ttf"),font_31:"".concat(r.Fe,"/30390048653593202960.ttf"),font_24:"".concat(r.Fe,"/15231045459280344589.ttf"),font_2:"".concat(r.Fe,"/35827841699759132262.ttf"),font_11:"".concat(r.Fe,"/46519564483112504392.ttf"),font_19:"".concat(r.Fe,"/53509086899943718644.ttf"),font_3:"".concat(r.Fe,"/53509086899943718644.ttf"),font_21:"".concat(r.Fe,"/59858439319028983380.ttf"),font_17:"".concat(r.Fe,"/65023865685907340591.ttf"),font_30:"".concat(r.Fe,"/33522598575372290924.ttf")};t.a=a},function(e,t,n){"use strict";t.a=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e.split(","),r=n[0].match(/:(.*?);/),a=atob(n[1]),i=a.length,c=new Uint8Array(i);i--;)c[i]=a.charCodeAt(i);return new File([c],t,{type:r?r[1]:"image/png"})}},function(e,t,n){"use strict";var r=n(7),a=n.n(r),i=n(2),c=n(10),o=n(1),s=n(34),u=n(64),l=n(415),d=n(467),b=function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("".concat(o.lg,"/").concat(t));case 3:return r=e.sent,e.next=6,r.json();case 6:c=e.sent,b=c.response,n=Object(i.a)(Object(i.a)({},b.data.data),{},{ratios:b.ratios,tags:b.tags,isPremium:Object(l.f)(b)}),e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(0),s.a.trigger(e.t0,"error"),e.abrupt("return",{});case 15:return e.abrupt("return",Object(i.a)(Object(i.a)({},Object(d.a)(n.actions[0])),{},{templateId:t,isPremium:n.isPremium,ratios:n.ratios,tags:n.tags}));case 16:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();t.a=b},function(e,t,n){"use strict";t.a=function(e){var t=e.destination_size.w||1,n=e.destination_size.h||1,r={width:Math.round(t),height:Math.round(n)};return{addedObjects:e.added_objects,artBoardSize:r,collageData:e.collage}}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(33),a=n(44),i=Object(a.b)((function(e){return{title:{marginBottom:8,fontWeight:600,fontSize:14,lineHeight:"17px",color:e.colors.paColor9},text:{fontSize:12,lineHeight:"18px",color:e.colors.paColor11}}})),c=n(5);var o=function(e){var t=e.title,n=e.text,a=i(),o=Object(r.c)();return Object(c.jsxs)("div",{className:a.toasterContainer,children:[Object(c.jsx)("div",{className:a.title,children:o(t)}),Object(c.jsx)("div",{className:a.text,children:o(n)})]})}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=/^[\w\s-,.]+\.([a-zA-Z0-9]{3,4})/;t.a=function(e){try{var t,n;return null===(t=e.split("/").pop())||void 0===t||null===(n=t.match(r))||void 0===n?void 0:n[1]}catch(a){return!1}}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(7),a=n.n(r),i=n(10),c=n(17),o=n(6),s=n(34),u=n(95),l=n(64),d=n(1),b=n(98),f={},h=function(e){return new Promise((function(t){var n=document.createElement("object");n.setAttribute("type","image/svg+xml"),n.setAttribute("data",e),n.addEventListener("load",(function(e){t(e.target.contentDocument),n.remove()}),!1),document.body.appendChild(n)}))},p=function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r,i,u,p,g,O;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(o.a)(c.a.actions.setCanvasLoading(!0)),e.prev=1,e.next=4,b.a.sketch({body:t,isFormData:!0,isCache:"sketch-img"});case 4:if(!(r=e.sent).errorMessage&&!r.cached){e.next=7;break}return e.abrupt("return",Object(o.a)(c.a.actions.setCanvasLoading(!1)));case 7:return e.next=9,Object(l.a)(r.data.url);case 9:return i=e.sent,e.next=12,i.blob();case 12:return u=e.sent,p=URL.createObjectURL(u),e.next=16,h(p);case 16:return g=e.sent,O={blobUrl:p,svgDoc:g},n&&(f[n]={blobUrl:p,svgDoc:g}),e.abrupt("return",O);case 22:return e.prev=22,e.t0=e.catch(1),s.a.trigger(e.t0,"error"),e.abrupt("return",Object(o.a)(c.a.actions.setErrorModal({isVisible:!0,errorKey:d.ic.SKETCH_EFFECT_ERROR})));case 26:return e.prev=26,Object(o.a)(c.a.actions.setCanvasLoading(!1)),e.finish(26);case 29:case"end":return e.stop()}}),e,null,[[1,22,26,29]])})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!f[n]){e.next=2;break}return e.abrupt("return",f[n]);case 2:return e.next=4,u.a.uploadPhoto(t,d.Rf);case 4:return r=e.sent,(i=new FormData).append("image",r),e.abrupt("return",p(i,n));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},function(e,t,n){"use strict";var r=n(0),a=n(1),i=n(145),c=n(316);t.a=function(e){var t,n=e.target,o=e.baseGroup,s=e.stage,u=e.guidelineOffset,l=e.isForTransformer,d=e.isArrowMove,b=Object(r.X)(o,a.pb),f=(null===(t=Object(r.ob)(b))||void 0===t?void 0:t.length)>1,h=f?b:n,p=Object(r.db)(h),g=p.name;if(!p.id.includes("crop")&&g!==a.Dc&&g!==a.qg){Object(c.a)(o,!1);var O=Object(i.g)(h,o),v=Object(i.h)(h,o);if(O&&v){var j=Object(i.f)(O,v,u);if(j.length){var m=Object(i.e)(j);l||d||Object(i.a)(m,f?Object(r.ob)(h):[h],f?h:null,s),(v=Object(i.h)(h,o))&&(j=Object(i.d)(Object(i.f)(O,v,.75),u)).length&&Object(i.c)(j,o)}}}}},function(e,t,n){"use strict";var r=n(0),a=n(1);t.a=function(e,t,n){var i=e.width,c=e.height,o=Object(r.db)(t).width/Object(r.db)(n).scaleX,s=Object(r.db)(t).height/Object(r.db)(n).scaleY;return Math.min(o*a.K/i,s*a.K/c)}},function(e,t,n){"use strict";var r=n(1);t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n=e.index,a=void 0===n?0:n;t.hsl_index=a;var i=Object.keys(e).filter((function(e){return"index"!==e}));return i.forEach((function(n){var a=n[n.search(r.ie)],i=n.replace(r.ie,""),c=e[n];t[a]||(t[a]={}),t[a]["hsl_".concat(i)]=c})),t}},function(e,t,n){"use strict";var r=n(7),a=n.n(r),i=n(2),c=n(4),o=n(10),s=n(6),u=n(9),l=n(51),d=n(0),b=n(1),f=n(168),h=n(157),p=function(){var e=Object(o.a)(a.a.mark((function e(t,n){var r,o,p,g,O,v,j,m,y,x,w,A,E,k,C,S,T,_,I,R,L,P,G,M,B,D,N,z,H,Y,X,U,F,W,V,K,q,J,Q,Z,$,ee,te,ne,re,ae,ie,ce,oe,se,ue,le,de,be,fe,he=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S=he.length>2&&void 0!==he[2]&&he[2],T=he.length>3?he[3]:void 0,_=he.length>4?he[4]:void 0,I=Object(s.b)((function(e){return{stage:Object(u.vd)(e),baseGroup:Object(u.ad)(e)}})),R=I.stage,L=I.baseGroup,e.next=6,Object(f.c)(t,n,S,T,_);case 6:if(P=e.sent,G=P.url,M=P.activePhoto,B=P.layerActivePhoto,D=P.isBgObjectRemove,N=P.newImage,B&&N&&L&&R&&M&&G){e.next=14;break}return e.abrupt("return");case 14:return z=N.height,H=N.width,Y=Object(d.db)(L),X=Y.width,U=Y.height,F=Object(d.db)(R),W=F.scaleX,V=F.scaleY,K=X/W,q=U/V,J=t.license?"premium"===t.license:!!t.isPremium,Object(d.n)(B),Q=Object(d.db)(B).name===b.og,Z=Q?1:.1*Math.min(K,q),$=Object(h.a)(H,z,K-Z,q-Z),ee=!T,te=Object(c.a)({image:N,x:null!==(r=t.x)&&void 0!==r?r:B.x(),y:null!==(o=t.y)&&void 0!==o?o:B.y(),width:ee?$.width:t.width,height:ee?$.height:t.height,imgRatio:null!==(p=t.ratio)&&void 0!==p?p:$.ratio,initialWidth:$.width,initialHeight:$.height,originalWidth:H,originalHeight:z,cropX:0,cropY:0,mask:null,cropWidth:0,cropHeight:0,originalImage:null,isPremium:J},b.mf,!!t[b.mf]),ne={x:{oldValue:B.x(),newValue:te.x},y:{oldValue:B.y(),newValue:te.y},width:{oldValue:B.width(),newValue:te.width},height:{oldValue:B.height(),newValue:te.height},ratio:{oldValue:Object(d.db)(B).imgRatio,newValue:te.imgRatio}},re={zoom:null!==(g=t.zoom)&&void 0!==g?g:0,rotation:null!==(O=null!==(v=t.rotation)&&void 0!==v?v:B.rotation())&&void 0!==O?O:0,contrast:null!==(j=t.contrast)&&void 0!==j?j:0,saturation:null!==(m=t.saturation)&&void 0!==m?m:0,brightness:null!==(y=t.brightness)&&void 0!==y?y:0,highlights:null!==(x=t.highlights)&&void 0!==x?x:0,clarity:null!==(w=t.clarity)&&void 0!==w?w:0,shadows:null!==(A=t.shadows)&&void 0!==A?A:0,temperature:null!==(E=t.temperature)&&void 0!==E?E:0,hue:null!==(k=t.hue)&&void 0!==k?k:0,hsl:null!==(C=t.hsl)&&void 0!==C?C:{}},ae=re.saturation,ie=re.brightness,ce=re.highlights,oe=re.clarity,se=re.shadows,ue=re.hsl,le=re.temperature,de=re.hue,be=re.contrast,fe=re.rotation,Object(d.Lb)(B,Object(i.a)(Object(i.a)({},te),{},{filters:[l.a.IEAdjust],saturation:ae,brightness:ie,highlights:ce,clarity:oe,shadows:se,temperature:le,hue:de,contrast:be,hsl:ue,rotation:fe})),Object(d.k)(L),e.next=33,Object(f.d)({url:G,elem:t,props:n,coords:ne,isPremium:J,activePhoto:M,isNotFromHistory:ee,layerActivePhoto:B,isBgObjectRemove:D,forceTemplateCollageReplace:S});case 33:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();t.a=p},,function(e,t,n){"use strict";var r=n(7),a=n.n(r),i=n(10),c=n(6),o=n(1),s=n(12),u=n(339),l=n(0),d=n(57),b=function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i,b,f,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.baseGroup,r=t.layerArr,n.parent){e.next=3;break}return e.abrupt("return");case 3:if(Object(c.a)({type:s.l,settings:{url:"",transparent:!0,settingType:""},id:o.x}),Object(c.a)({type:s.o,activeTexture:0}),i=Object(l.R)(n,o.y),(b=r.find((function(e){return e.id===o.x})))&&b.settings.defaultTransparentBg){e.next=9;break}return e.abrupt("return");case 9:return f=Object(l.kb)(n),e.next=12,Object(u.a)(f.width(),f.height());case 12:h=e.sent,Object(l.h)(n,h),Object(l.Fb)(h),Object(l.i)(h,"mousedown",d.c),i&&Object(l.G)(i),Object(l.k)(n);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.a=b},function(e,t,n){"use strict";t.a={id:"original",name:"Original",type:1,iconName:"original-social",preview_url:"",size:{width:1,height:1}}},function(e,t,n){"use strict";t.a=function(e,t){return!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y)}},function(e,t,n){"use strict";t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return new Array(t).fill(null).reduce((function(t){if(!(t&&t.width&&t.height))return e;var n=document.createElement("canvas"),r=n.getContext("2d");return n.width=t.width/2,n.height=t.height/2,r.drawImage(t,0,0,n.width,n.height),n}),e)}},function(e,t,n){"use strict";var r=n(73);t.a=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.x,a=e.y,i=e.clip,c=e.rotation,o=e.scaleX,s=e.scaleY,u=i.x,l=i.y,d=i.width,b=i.height,f=u*(t?o:1),h=l*(t?s:1);return{x:Math.cos(Object(r.a)(c))*f+n-Math.sin(Object(r.a)(c))*h,y:Math.cos(Object(r.a)(c))*h+a+Math.sin(Object(r.a)(c))*f,width:d,height:b,rotation:c}}},function(e,t,n){"use strict";var r=n(4),a=n(2),i=n(75),c=n(358),o=n.n(c),s=n(210),u=n.n(s),l=Object(i.c)({name:"effects",initialState:{data:{featured:[],fx:[],blur:[],artistic:[],popArt:[],distort:[],paper:[],colors:[]},settings:{}},reducers:{addData:function(e,t){var n=t.payload;e.data=Object(a.a)(Object(a.a)({},e.data),n)},updateBuilderNames:function(e,t){var n=t.payload;o()(u()(e.data[n.type],"id"),u()(n.data,"id"))},updateSrc:function(e,t){var n=t.payload;o()(u()(e.data[n.type],"name"),Object(r.a)({},n.data.name,n.data))},addSettings:function(e,t){var n=t.payload;e.settings[n.effectKey]=n.effectSettings}}});t.a=l},,,function(e,t,n){"use strict";var r=n(75),a=Object(r.c)({name:"data",initialState:{templates:[],texts:[],shapes:[]},reducers:{storeTemplatesData:function(e,t){var n=t.payload;e.templates=n},storeTextsData:function(e,t){var n=t.payload;e.texts=n},storeShapesData:function(e,t){var n=t.payload;e.shapes=n},storeColorsData:function(e,t){var n=t.payload;e.colors=n},storeImageData:function(e,t){var n=t.payload;e.image=n}}});t.a=a},,function(e,t,n){"use strict";var r=n(7),a=n.n(r),i=n(2),c=n(40),o=n(42),s=n(10),u=n(29),l=n(34),d=n(76),b=n(143);function f(e,t,n){return h.apply(this,arguments)}function h(){return(h=Object(s.a)(a.a.mark((function e(t,n,r){var i,c,o,s,l,d,b,f=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=f.length>3&&void 0!==f[3]?f[3]:0,c=f.length>4&&void 0!==f[4]?f[4]:0,o=f.length>5?f[5]:void 0,s=f.length>6?f[6]:void 0,(l=document.createElement("canvas")).width=n,l.height=r,null===(d=l.getContext("2d"))||void 0===d||d.drawImage(t,i,c,o||t.width,s||t.height,0,0,n,r),e.next=11,Object(u.a)(l.toDataURL());case 11:return b=e.sent,e.abrupt("return",b);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e,t,n){return g.apply(this,arguments)}function g(){return(g=Object(s.a)(a.a.mark((function e(t,n,r){var i,c,o,s,u,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.width,c=n.height,!(o=!r&&Object(b.b)(i,c,t.width,t.height))){e.next=8;break}return e.next=5,f(t,i,c,o.fromX,o.fromY,o.width,o.height);case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,f(t,i,c);case 10:e.t0=e.sent;case 11:return s=e.t0,(u=document.createElement("canvas")).width=n.width,u.height=n.height,(l=u.getContext("2d"))&&(l.drawImage(s,0,0),l.globalCompositeOperation=r?"source-in":"source-over",l.drawImage(n,0,0)),e.abrupt("return",new Promise((function(e){u.toBlob((function(t){return t&&e(t)}))})));case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O=function(){function e(){Object(c.a)(this,e),this.canceled=!1}return Object(o.a)(e,[{key:"processItem",value:function(){var e=Object(s.a)(a.a.mark((function e(t,n,r,c,o){var s,u,b,f=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=f.length>5&&void 0!==f[5]&&f[5],u=f.length>6&&void 0!==f[6]?f[6]:null,!this.canceled){e.next=4;break}return e.abrupt("return");case 4:if(!t.doNotProcess){e.next=6;break}return e.abrupt("return",r(Object(i.a)(Object(i.a)({},t),{},{status:"error"})));case 6:return e.prev=6,e.next=9,this.processInDepend(n,t,c,o,s,u);case 9:if(e.t0=e.sent,e.t0){e.next=12;break}e.t0=[];case 12:if(b=e.t0,!this.canceled){e.next=15;break}return e.abrupt("return");case 15:r(Object(i.a)(Object(i.a)({},t),{},{status:"done",pendingResult:b})),e.next=22;break;case 18:e.prev=18,e.t1=e.catch(6),l.a.trigger(e.t1,"error"),r(Object(i.a)(Object(i.a)({},t),{},{status:"error",errorType:d.b[e.t1.message]||d.b.serverError}));case 22:case"end":return e.stop()}}),e,this,[[6,18]])})));return function(t,n,r,a,i){return e.apply(this,arguments)}}()},{key:"process",value:function(){var e=Object(s.a)(a.a.mark((function e(t,n,r){var i,c,o,u,l,d,b,f,h,p,g=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(p=function(){return(p=Object(s.a)(a.a.mark((function e(n){var s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=0;case 1:if(!(s<d.length)){e.next=7;break}return e.next=4,n(t,d[s],r,i,c,o,u);case 4:s++,e.next=1;break;case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)},h=function(e){return p.apply(this,arguments)},i=g.length>3&&void 0!==g[3]&&g[3],c=g.length>4&&void 0!==g[4]&&g[4],o=g.length>5&&void 0!==g[5]&&g[5],u=g.length>6&&void 0!==g[6]&&g[6],l=5,d=[],b=0;b<n.length;b+=l)d.push(n.slice(b,b+l));return f=this.processBatch.bind(this),e.next=12,h(f);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"processInDepend",value:function(){var e=Object(s.a)(a.a.mark((function e(t,n,r,i,c,o){var s,l,d,b,f,h,g,O,v,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.result,l=n.pendingResult,d=i?null===l||void 0===l?void 0:l.mask:s.src,e.next=4,Object(u.a)(d);case 4:if(b=e.sent,!o){e.next=11;break}return e.next=8,t(b,o);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,t(b);case 13:e.t0=e.sent;case 14:if(f=e.t0,!c&&!o){e.next=18;break}return h=URL.createObjectURL(f),e.abrupt("return",{blob:f,src:h});case 18:return e.next=20,Object(u.a)(f);case 20:if(g=e.sent,!r&&!i){e.next=27;break}return e.next=24,p(g,b,r);case 24:return O=e.sent,v=URL.createObjectURL(O),e.abrupt("return",{blob:O,src:v,mask:r?v:null===l||void 0===l?void 0:l.mask});case 27:return e.next=29,p(b,g,!0);case 29:return j=e.sent,e.abrupt("return",{blob:j,src:URL.createObjectURL(j)});case 31:case"end":return e.stop()}}),e)})));return function(t,n,r,a,i,c){return e.apply(this,arguments)}}()},{key:"cancel",value:function(){this.canceled=!0}},{key:"processBatch",value:function(){var e=Object(s.a)(a.a.mark((function e(t,n,r,i,c,o,s){var u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=this.processItem.bind(this),e.abrupt("return",Promise.all(n.map((function(e){return u(e,t,r,i,c,o,s?e.key:null)}))));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,i,c,o){return e.apply(this,arguments)}}()}]),e}();t.a=O},function(e,t,n){"use strict";var r=n(190);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="remove-".concat(t?"person":"object","-background");Object.keys(e).forEach((function(t){Object(r.a)(e[t],n,t)}))}},,function(e,t,n){"use strict";var r=n(27),a=n(12),i=n(6),c=n(202),o=n(17),s=n(222),u=n(1),l=n(0);t.a=function(e,t,n){Object(s.a)({stage:e,baseGroup:t,canvasSizes:n});var d=Object(l.db)(t),b=d.width,f=d.height;Object(r.b)((function(){Object(i.a)({type:a.f}),Object(i.a)(c.a.actions.setCanvas(t)),Object(i.a)(o.a.actions.chooserAdditionalInfo({width:null===n||void 0===n?void 0:n.width,height:null===n||void 0===n?void 0:n.height,originalWidth:null===n||void 0===n?void 0:n.width,originalHeight:null===n||void 0===n?void 0:n.height,scale:{width:b,height:f}})),Object(i.a)({type:a.l,id:u.x,settings:{colorRGB1:u.th,colorRGB2:u.th,settingType:"color",isImage:!1,width:b,height:f,x:0,y:0},resources:{url:""}}),Object(i.a)({type:a.j,id:u.x})}))}},,,,function(e,t,n){"use strict";t.a=function(e){for(var t=3;t<e.length;t+=4)if(e[t]<255)return!0;return!1}},function(e,t,n){"use strict";var r=/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/;t.a=function(){var e=navigator.userAgent.toLowerCase();return r.test(e)}},,,,,,,,,function(e,t,n){"use strict";var r=n(1),a=[r.fb.category,r.fb.patchOpen,r.fb.templateCategory,r.fb.cropOpen,r.fb.paymentFlow,r.fb.resultCode,r.fb.refusalReason];t.a=function(e){var t=new URLSearchParams(e),n=new URLSearchParams;return a.forEach((function(e){t.has(e)&&n.append(e,t.get(e))})),n}},,function(e,t,n){"use strict";var r=n(110),a=n.n(r),i=n(2),c=n(44),o=n(53),s=Object(c.b)((function(e){return{bigSkeletonContainer:{"--gap":"8px","--header-height":"".concat(e.variables.headerHeight,"px"),"--sidebar-width":"444px","--layers-sidebar-width":"100px",display:"grid",grid:'\n      ". canvas ." calc(var(--gap) / 2)\n      "header canvas ." var(--header-height)\n      "sidebar canvas layers" 1fr\n      ". canvas ." calc(var(--gap) / 2)\n      / var(--sidebar-width) calc(100% - var(--sidebar-width) - var(--layers-sidebar-width)) var(--layers-sidebar-width)',rowGap:"calc(var(--gap) / 2)",padding:"0 var(--gap)",height:"100vh",width:"100%",backgroundColor:e.colors.paColor60},bigSkeletonHeader:{gridArea:"header",backgroundColor:e.colors.paColor9,display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 18px",borderRadius:8},editorHeaderTitle:{margin:"10px 0px",display:"flex"},editorHeaderButtonContainer:{position:"fixed",top:"var(--gap)",right:"var(--gap)",height:"var(--header-height)",display:"grid",gridAutoFlow:"column",gap:"8px",alignItems:"center",padding:8,backgroundColor:e.colors.paColor9,borderRadius:e.variables.mainBorderRadius,zIndex:o.a.Base},editorSidebarWrapper:{gridArea:"sidebar",position:"relative",height:"100%",display:"grid",gridAutoFlow:"column",gap:"calc(var(--gap) / 2)",overflow:"hidden"},editorSidebarTools:{display:"flex",flexDirection:"column",alignItems:"center",padding:"23px 12px 0",width:e.variables.sidebarCategoryWidth,height:"100%",backgroundColor:e.colors.paColor9,borderRadius:8,textAlign:"center",overflowY:"auto","-webkit-overflow-scrolling":"auto"},editorSidebarToolsItem:{marginBottom:20},editorSidebarToolsItemBig:{borderRadius:4},editorSidebarToolsItemSmall:{borderRadius:2,marginTop:9},editorSidebarCategories:{display:"flex",flexFlow:"column",padding:"22px 20px",height:"100%",backgroundColor:e.colors.paColor9,borderRadius:8},editorSidebarCategoriesTopContent:{flexShrink:0},editorSidebarCategoriesList:{position:"relative",flexGrow:1,"& > :first-child":{position:"absolute",top:0,right:0,bottom:0,left:0,overflow:"hidden","-webkit-overflow-scrolling":"touch"}},editorSidebarCategoriesSkeleton:{borderRadius:"".concat(e.variables.mainBorderRadius,"px!important")},editorSidebarCategoriesSkeletonInput:{marginTop:7},editorSidebarTexts:{display:"flex",justifyContent:"space-between",marginTop:24},editorSidebarIcon:Object(i.a)(Object(i.a)({},e.variables.visibilitySidebarLayerIcon),{},{position:"fixed",left:"calc(var(--sidebar-width) + 4px)",zIndex:o.a.Above,cursor:"default",width:26,height:30,top:"50%",transform:"translateY(-50%)","& path":{fill:e.colors.paColor7}}),editorSidebarIconArrow:{position:"absolute",top:0,bottom:0,right:0,left:0,margin:"auto",transform:"scaleX(1)"},editorMainSection:{gridArea:"canvas",display:"flex",justifyContent:"center",alignItems:"center"},editorMainSectionSkeleton:{position:"relative","& > span":{position:"absolute",top:0,right:0,bottom:0,left:0,display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",overflowY:"auto","-webkit-overflow-scrolling":"auto"}},editorSkeletonLayers:{gridArea:"layers",backgroundColor:e.colors.paColor9,paddingTop:7,display:"flex",flexDirection:"column",alignItems:"center",borderRadius:8},editorSkeletonLayerItem:{marginBottom:12,borderRadius:"".concat(e.variables.mainBorderRadius,"px!important")},editorLayerIcon:Object(i.a)(Object(i.a)({},e.variables.visibilitySidebarLayerIcon),{},{position:"fixed",width:26,height:30,top:"50%",zIndex:o.a.Base,transform:"scaleX(-1) translateY(-50%)",right:"calc(var(--gap) + var(--layers-sidebar-width))",cursor:"default","& path":{fill:e.colors.paColor7}})}})),u=n(5),l=function(){var e=s();return Object(u.jsx)("div",{className:e.editorMainSection,children:Object(u.jsx)("div",{className:e.editorMainSectionSkeleton,children:Object(u.jsx)(r.SkeletonTheme,{children:Object(u.jsx)(a.a,{style:{width:"calc((100vw - (var(--sidebar-width) + var(--layers-sidebar-width) + (2 * var(--gap)))) * 0.8)",height:"80vh",borderRadius:0}})})})})},d=n(87),b=n(245),f=n(9),h=n(83),p=function(){var e=s(),t=Object(h.a)(f.Td)||1;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:e.editorSkeletonLayers,children:Array(t).fill(null).map((function(t,n){return Object(u.jsx)(a.a,{width:b.a.currentLayerWidth,height:b.a.currentLayerHeight,className:e.editorSkeletonLayerItem},String(n))}))}),Object(u.jsx)("div",{className:e.editorLayerIcon,children:Object(u.jsx)(d.a,{name:"arrow-small-left-gen",className:e.arrowIcon})})]})},g=n(18),O=n.n(g),v=n(134),j=n(438),m=n(1),y=Array(m.vh.categories.length).fill(null).map((function(){return Object(v.a)()})),x=function(){var e=s();return Object(u.jsxs)("div",{className:e.editorSidebarWrapper,children:[Object(u.jsx)("div",{className:e.editorSidebarTools,children:y.map((function(t){return Object(u.jsxs)("div",{className:e.editorSidebarToolsItem,children:[Object(u.jsx)(a.a,{width:37,height:37,className:e.editorSidebarToolsItemBig}),Object(u.jsx)(a.a,{width:37,height:6,className:e.editorSidebarToolsItemSmall})]},t)}))}),Object(u.jsxs)("div",{className:e.editorSidebarCategories,children:[Object(u.jsxs)("div",{className:e.editorSidebarCategoriesTopContent,children:[Object(u.jsx)(a.a,{width:80,height:19,className:e.editorSidebarCategoriesSkeleton}),Object(u.jsx)(a.a,{width:320,height:45,className:O()(e.editorSidebarCategoriesSkeleton,e.editorSidebarCategoriesSkeletonInput)}),Object(u.jsxs)("div",{className:e.editorSidebarTexts,children:[Object(u.jsx)(a.a,{width:80,height:19,className:e.editorSidebarCategoriesSkeleton}),Object(u.jsx)(a.a,{width:80,height:19,className:e.editorSidebarCategoriesSkeleton})]})]}),Object(u.jsx)("div",{className:e.editorSidebarCategoriesList,children:Object(u.jsx)(j.a,{itemCount:8})})]}),Object(u.jsx)("div",{className:e.editorSidebarIcon,children:Object(u.jsx)(d.a,{name:"arrow-small-left-gen",className:e.arrowIcon})})]})},w=function(){var e=Object(c.d)(),t=s();return Object(u.jsxs)("div",{className:t.bigSkeletonHeader,children:[Object(u.jsx)("div",{className:t.editorHeaderTitle,children:Object(u.jsx)("img",{src:m.vh.editorOnly&&m.vh.logo?m.vh.logo:m.Jd,alt:"img"})}),Object(u.jsx)("div",{className:t.editorHeaderButtonContainer,children:Object(u.jsx)(r.SkeletonTheme,{color:e.colors.paColor1,highlightColor:e.colors.paColor44,children:Object(u.jsx)(a.a,{width:112,height:46,style:{borderRadius:8}})})})]})};t.a=function(){var e=s();return Object(u.jsxs)("div",{className:e.bigSkeletonContainer,children:[Object(u.jsx)(w,{}),Object(u.jsx)(x,{}),Object(u.jsx)(l,{}),Object(u.jsx)(p,{})]})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return R}));var r=n(15),a=n(3),i=n(18),c=n.n(i),o=n(107),s=n(407),u=n(24),l=n(112),d=n(73),b=n(403),f=function(e){var t=Object(a.useRef)(null),n=Object(a.useCallback)((function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var i=function(t){e.apply(void 0,[t].concat(r))};t.current=i,document.addEventListener("mousemove",i),document.addEventListener("mouseup",(function(){document.removeEventListener("mousemove",i)}),{once:!0})}),[e]);return Object(o.a)((function(){return function(){t.current&&document.removeEventListener("mousemove",t.current)}})),n},h=n(2),p=n(44),g=Object(p.b)((function(e){return{container:function(t){var n=t.border,r=t.rotation;return{width:t.objectWidth,height:t.objectHeight,boxSizing:"border-box",borderTop:"".concat(n.top,"px solid ").concat(e.colors.paColor162),borderLeft:"".concat(n.left,"px solid ").concat(e.colors.paColor162),borderRight:"".concat(n.right,"px solid ").concat(e.colors.paColor162),borderBottom:"".concat(n.bottom,"px solid ").concat(e.colors.paColor162),transform:"rotate(".concat(r,"deg)")}},currentBox:function(e){return{width:e.currentWidth,height:e.currentHeight,position:"relative"}},boxWrap:function(t){var n=t.fullOverlay;return Object(h.a)({"--border-color":e.colors.paColor9,"--border-width":"3px","--item-count":3,position:"relative",display:"grid",gridTemplateColumns:"repeat(var(--item-count), 1fr)",gridTemplateRows:"repeat(var(--item-count), 1fr)",width:"100%",height:"100%",border:"var(--border-width) solid var(--border-color)",boxShadow:"0 1px 5px ".concat(e.colors.paColor220)},n&&{backgroundColor:e.colors.paColor162})},box:{"--border":"calc(var(--border-width) / 2) solid var(--border-color)","&:nth-child(3n+2)":{borderLeft:"var(--border)",borderRight:"var(--border)"},"&:nth-child(4)":{borderTop:"var(--border)",borderBottom:"var(--border)"},"&:nth-child(5)":{borderTop:"var(--border)",borderBottom:"var(--border)"},"&:nth-child(6)":{borderTop:"var(--border)",borderBottom:"var(--border)"},"&:not(:nth-child(3)):not(:nth-child(6)):not(:nth-child(9))":{boxShadow:"4px 0 6px ".concat(e.colors.paColor162)},"&:nth-child(n + 4)":{position:"relative","&::after":{content:'""',position:"absolute",top:0,right:0,bottom:0,left:0,boxShadow:"0 -2px 6px ".concat(e.colors.paColor162)}}},option:{position:"absolute",borderRadius:4,"&::after":{borderRadius:4}},optionCorner:{"--border-width":"8px","--width":"30px",width:"var(--width)",height:"var(--border-width)",background:e.colors.paColor9,"&::after":{content:"''",display:"block",background:"inherit",width:"calc(var(--width) + 4px)",height:"inherit"}},optionLeftTop:{left:0,top:0,transform:"translateY(-60%)",cursor:"nwse-resize","&::after":{transform:"rotate(90deg) translateX(-4px)",transformOrigin:"left",borderTopLeftRadius:"initial"}},optionRightTop:{right:0,top:0,transform:"translateY(-60%)",cursor:"nesw-resize","&::after":{transform:"rotate(-90deg) translate(4px, -4px)",transformOrigin:"right",borderTopRightRadius:"initial"}},optionRightBottom:{right:0,bottom:0,transform:"translateY(60%)",cursor:"nwse-resize","&::after":{transform:"rotate(90deg) translate(4px, 4px)",transformOrigin:"right",borderBottomRightRadius:"initial"}},optionLeftBottom:{left:0,bottom:0,transform:"translateY(60%)",cursor:"nesw-resize","&::after":{transform:"rotate(-90deg) translate(-4px, 0)",transformOrigin:"left",borderBottomLeftRadius:"initial"}},optionMiddle:{"--width":"30px","--height":"8px",width:"var(--width)",height:"var(--height)",background:e.colors.paColor9,borderRadius:4},optionMiddleTop:{left:"50%",top:0,transform:"translate(-50%, -60%)",cursor:"ns-resize"},optionMiddleRight:{top:"calc(50% - var(--height))",right:0,transform:"translate(55%, 50%) rotate(90deg)",cursor:"ew-resize"},optionMiddleBottom:{left:"50%",bottom:0,transform:"translate(-50%, 70%)",cursor:"ns-resize"},optionMiddleLeft:{top:"calc(50% - var(--height))",left:0,transform:"translate(-55%, 50%) rotate(90deg)",cursor:"ew-resize"}}})),O=n(1),v={top:"top",left:"left",right:"right",bottom:"bottom"},j=Object(h.a)(Object(h.a)({},v),{},{topLeft:"".concat(v.top).concat(O.wh).concat(v.left),topRight:"".concat(v.top).concat(O.wh).concat(v.right),bottomLeft:"".concat(v.bottom).concat(O.wh).concat(v.left),bottomRight:"".concat(v.bottom).concat(O.wh).concat(v.right)}),m=[{origin:j.top,scales:[0,1]},{origin:j.topRight,scales:[1,1]},{origin:j.right,scales:[1,0]},{origin:j.bottomRight,scales:[1,1]},{origin:j.bottom,scales:[0,1]},{origin:j.bottomLeft,scales:[1,1]},{origin:j.left,scales:[1,0]},{origin:j.topLeft,scales:[1,1]}],y=Math.PI,x=function(e){return e.includes(O.wh)},w=[j.topRight,j.bottomLeft],A=function(e){var t,n=e.index,r=e.origin,a=e.rotationAngle,i=e.diagonalAngle,c=r.includes(j.bottom)?y:0,o=x(r),s=w.includes(r)?1:-1,u=(t=a+(o?s*i+c:n*y/4))>2*y?t-2*y:t,l=u+y;return u<0?[[u+2*y,2*y],[0,l]]:l>2*y?[[u,2*y],[0,l-2*y]]:[[u,l]]},E=n(5),k=Math.PI,C=Math.sin,S=Math.atan,T=Math.atan2,_=Math.abs,I=l.isSafari?6:1,R=function(e){var t="x"in e||"y"in e||"width"in e||"height"in e,n=e.x,i=void 0===n?0:n,l=e.y,h=void 0===l?0:l,p=e.width,O=e.height,v=e.objectWidth,y=e.objectHeight,w=e.rotation,R=void 0===w?0:w,L=e.fullOverlay,P=e.onChange,G=void 0===P?u.a:P,M=e.onDone,B=void 0===M?u.a:M,D=e.defaultX,N=void 0===D?0:D,z=e.defaultY,H=void 0===z?0:z,Y=e.defaultWidth,X=e.defaultHeight,U=e.stopClickPropagation,F=void 0===U||U,W=Object(a.useState)({top:H,left:N,right:v-(Y||v)-N,bottom:y-(X||y)-H}),V=Object(r.a)(W,2),K=V[0],q=V[1],J=t?{top:h,left:i,right:v-(p||v)-i,bottom:y-(O||y)-h}:K,Q=v-J.left-J.right,Z=y-J.top-J.bottom,$=g({border:J,rotation:R,fullOverlay:L,objectWidth:v,objectHeight:y,currentWidth:Q,currentHeight:Z}),ee=Object(d.a)(R<0?R+360:R),te=Object(a.useMemo)((function(){return{cosAngle:C(k/2-ee),sinAngle:C(ee)}}),[ee]),ne=te.cosAngle,re=te.sinAngle,ae=Object(a.useCallback)((function(e){G()((function(t){var n=e({top:t.y,left:t.x,right:v-t.x-t.width,bottom:y-t.y-t.height});return{width:v-n.left-n.right,height:y-n.top-n.bottom,x:n.left,y:n.top}}))}),[v,y,G]),ie=Object(a.useCallback)((function(e,n,r){var a=e.movementX,i=e.movementY,c=(ne*a+re*i)*I,o=(ne*i-re*a)*I,s=function(e){var t=e.top+o,a=e.left+c,i=t>=0,s=t<=r,u=a<=n?a>=0?a:0:e.left,l=s?i?t:0:e.top;return{left:u,right:n-u>=0?n-u:0,top:l,bottom:r-l>=0?r-l:0}};t?ae(s):q((function(e){return s(e)}))}),[ne,re,t,ae]),ce=f(ie),oe=Object(a.useCallback)((function(e,n){var a=n.origin,i=n.ratio,c=n.ranges,o=n.respectRatio,s=Object(r.a)(n.scales,2),u=s[0],l=s[1],d=e.movementX,b=e.movementY,f=T(b,d)+k,h=c.some((function(e){var t=Object(r.a)(e,2),n=t[0],a=t[1];return f>=n&&f<=a}))?-1:1,p=_(d)*I,g=_(b)*I,O=_(p*ne)+_(g*re),m=o?O*i:_(g*ne)+_(p*re),x=function(e){var t=h*O+e.left>=0,n=h*O+e.right>=0,r=h*m+e.top>=0,i=h*m+e.bottom>=0,c=a.includes(j.left),s=a.includes(j.right),d=a.includes(j.top),b=a.includes(j.bottom),f=(!o||(!c||t)&&(!s||n))&&(!o||(!d||r)&&(!b||i)),p=2*h*m+e.top+e.bottom,g=2*h*O+e.left+e.right<=v-40,x=p<=y-40,w=g&&x;return{left:t?c&&(f?w:g)?u*h*O+e.left:e.left:0,right:n?s&&(f?w:g)?u*h*O+e.right:e.right:0,top:r?d&&(f?w:x)?l*h*m+e.top:e.top:0,bottom:i?b&&(f?w:x)?l*h*m+e.bottom:e.bottom:0}};t?ae(x):q((function(e){return x(e)}))}),[re,ne,t,ae,v,y]),se=f(oe),ue=function(e){e.stopPropagation();var t=m.findIndex((function(t){return t.origin===e.currentTarget.dataset.direction})),n=m[t],r=n.origin,a=n.scales,i=(X||O)/(Y||p),c=S(Q/Z),o=x(r),s=A({origin:r,index:t,diagonalAngle:c,rotationAngle:ee});se({origin:r,scales:a,ranges:s,respectRatio:o,ratio:i})},le=Object(a.useCallback)((function(){B({y:J.top,x:J.left,width:Q,height:Z})}),[J.top,J.left,Q,Z,B]),de=Object(s.a)(le,200),be=Object(b.a)(de);return Object(o.a)((function(){if(F){var e=function(e){var t;(null===(t=be.current)||void 0===t?void 0:t.contains(e.target))||e.stopPropagation()};return document.addEventListener("click",e,{capture:!0}),function(){document.removeEventListener("click",e,!0)}}})),Object(E.jsx)("div",{ref:be,className:$.container,children:Object(E.jsxs)("div",{onMouseDown:function(){ce(v-Q,y-Z)},className:c()($.boxWrap,$.currentBox),children:[Array(9).fill(null).map((function(e,t){return Object(E.jsx)("div",{className:$.box},String(t))})),Object(E.jsx)("div",{className:c()($.option,$.optionCorner,$.optionLeftTop),"data-direction":"top-left",onMouseDown:ue}),Object(E.jsx)("div",{className:c()($.option,$.optionMiddle,$.optionMiddleTop),"data-direction":"top",onMouseDown:ue}),Object(E.jsx)("div",{className:c()($.option,$.optionCorner,$.optionRightTop),"data-direction":"top-right",onMouseDown:ue}),Object(E.jsx)("div",{className:c()($.option,$.optionMiddle,$.optionMiddleRight),"data-direction":"right",onMouseDown:ue}),Object(E.jsx)("div",{className:c()($.option,$.optionCorner,$.optionRightBottom),"data-direction":"bottom-right",onMouseDown:ue}),Object(E.jsx)("div",{className:c()($.option,$.optionMiddle,$.optionMiddleBottom),"data-direction":"bottom",onMouseDown:ue}),Object(E.jsx)("div",{className:c()($.option,$.optionCorner,$.optionLeftBottom),"data-direction":"bottom-left",onMouseDown:ue}),Object(E.jsx)("div",{className:c()($.option,$.optionMiddle,$.optionMiddleLeft),"data-direction":"left",onMouseDown:ue})]})})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));var r=n(4),a=n(2),i=n(3),c=n(114),o=n.n(c),s=n(27),u=n(117),l=n.n(u),d=n(33),b=n(12),f=n(9),h=n(348),p=n(68),g=n(81),O=n(16),v=n(404),j=n(1),m=n(83),y=n(0),x=n(172),w=n(21),A=[{name:"Opacity",type:"opacity",newType:"shadowOpacity",min:0,max:100},{name:"X Offset",type:"x_offset",newType:"shadowOffsetX",min:-50,max:50},{name:"Y Offset",type:"y_offset",newType:"shadowOffsetY",min:-50,max:50},{name:"Blur / Depth",type:"blur_depth",newType:"shadowBlur",min:0,max:100}],E=n(44),k=n(53),C=Object(E.b)((function(e){return{name:{float:"left",fontSize:12,color:e.colors.paColor8,opacity:.7,marginLeft:22,marginBottom:-1},shadowMain:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},shadowTitle:{width:"100%",height:50,display:"flex",alignItems:"center",color:e.colors.paColor3,borderBottom:"1px solid ".concat(e.colors.paColor53)},shadowInputsContainer:{display:"flex",width:"100%",flexDirection:"column",marginTop:20,justifyContent:"space-around"},currentInputRange:{position:"relative",width:246,borderRadius:e.variables.mainBorderRadius,cursor:"pointer","-webkit-appearance":"none",height:1,outline:"none",marginRight:8,marginBottom:15,marginTop:15,zIndex:k.a.Above,"&::-webkit-slider-thumb":{"-webkit-appearance":"none",appearance:"none",width:11.2,height:11.2,cursor:"pointer",borderRadius:2.1,background:e.colors.paColor9,border:"1px solid ".concat(e.colors.paColor3)},"&::-moz-range-thumb":{"-webkit-appearance":"none",appearance:"none",width:12,height:12,cursor:"pointer",borderRadius:2.1,background:e.colors.paColor9,border:"1px solid ".concat(e.colors.paColor3)},"&::-moz-focus-outer":{border:"none"}},rangeWrap:{position:"relative",width:246,marginRight:"8px","&::before, &::after":{content:"''",display:"block",height:"1px",position:"absolute",top:"50%",left:"0",right:"0",opacity:"0.7",transform:"translateY(50%)"},"&::before":{background:e.colors.paColor3,width:"var(--progressValue)",zIndex:k.a.Above},"&::after":{background:e.colors.paColor13}},shadowTypeOutputContainer:{marginTop:13},shadowTypeOutput:{float:"left",fontSize:14,color:e.colors.paColor8,opacity:.7},shadowOutputPercent:{float:"right"},shadowIcon:{marginLeft:24,marginRight:16.6},shadowText:{fontSize:14,opacity:.7,fontWeight:300,fontStretch:"normal",fontStyle:"normal",lineHeight:"normal",letterSpacing:"normal",color:e.colors.paColor3},settingNameOutput:{display:"flex",justifyContent:"center",flexDirection:"space-between",alignItems:"baseline",marginBottom:12},inputVisible:{width:58,height:40,border:"1px solid ".concat(e.colors.paColor2),borderRadius:e.variables.mainBorderRadius,marginBottom:12,textAlign:"center","@media(hover: hover)":{"&:hover":{border:"1px solid ".concat(e.colors.paColor7)}},"&:focus":{border:"1px solid ".concat(e.colors.paColor6)}}}})),S=n(5),T=function(e){return e/5},_=function(){var e=C();return Object(S.jsx)("div",{className:e.shadowMain,children:Object(S.jsx)("div",{className:e.shadowInputsContainer,children:A.map((function(e){return Object(S.jsx)(I,{elem:e},e.type)}))})})};function I(e){var t,n=e.elem,c=C(),u=Object(d.c)(),A=Object(s.e)(),E=Object(m.a)((function(e){return{layersArr:Object(f.ac)(e),baseGroup:Object(f.ad)(e),activeSetting:Object(f.l)(e),activeLayer:Object(f.e)(e),newCanvasEnabled:Object(f.jc)(e),newSettings:Object(f.kd)(e)}})),k=E.baseGroup,_=E.layersArr,I=E.activeSetting,R=E.activeLayer,L=E.newCanvasEnabled,P=E.newSettings,G=Object(i.useMemo)((function(){return _.filter((function(e){return e.active&&"text"===e.type}))}),[_]);Object(i.useEffect)((function(){k&&(G.forEach((function(e){if(e.settings.x_offset===j.xf&&e.settings.y_offset===j.yf&&e.settings.blur_depth===j.vf&&!e.settings.shadowTransparent){var t=Object(y.W)(k,"#".concat(e.id));if(t){var n=Object(y.db)(t).originalScale||1;Object(y.Lb)(t,{shadowOffsetX:j.wf*n,shadowOffsetY:j.wf*n,shadowBlur:j.wf*n})}}})),Object(y.k)(k))}),[G,k]);var M=Object(i.useCallback)((function(e){var t=l()(_);e.forEach((function(e){var n=e.id,r=e.type,a=e.value,i=null===t||void 0===t?void 0:t.find((function(e){return e.id===n}));i&&(i.settings[r]=a)})),Object(s.b)((function(){A({type:b.s,layers:t}),(null===R||void 0===R?void 0:R.id)&&A({type:b.l,id:R.id,settings:{shadowTransparent:!1}})}))}),[R,A,_]),B=Object(i.useCallback)((function(e,t){if((!e||j.je.test(e))&&k){var r=Object(y.W)(k,"#".concat(t.id)),i=Object(y.db)(r).originalScale||1,c=t.settings.shadowColor,o=c&&Object(p.a)(c,0===(null===c||void 0===c?void 0:c.a)?0:1),s={shadowOpacity:Number(r.shadowOpacity()),shadowOffsetX:Number(t.settings.x_offset),shadowOffsetY:Number(t.settings.y_offset),shadowBlur:Number(t.settings.blur_depth),shadowColor:o||Object(y.db)(r).shadowColor};switch(n.type){case"x_offset":s.shadowOffsetX=e;break;case"y_offset":s.shadowOffsetY=e;break;case"opacity":s.shadowOpacity=e/100;break;case"blur_depth":s.shadowBlur=e}return Object(y.Lb)(r,Object(a.a)(Object(a.a)({},s),{},{shadowBlur:T(s.shadowBlur)*i,shadowOffsetX:s.shadowOffsetX*i,shadowOffsetY:s.shadowOffsetY*i})),{id:t.id,type:n.type,value:e}}}),[k,n.type]),D=Object(i.useCallback)((function(e){var t=e;if(L){if(t<n.min||t>n.max||Number.isNaN(t))return;A(w.a.actions.patchSelectedLayersWithoutHistory(Object(r.a)({},n.newType,t)))}else if(k&&!Number.isNaN(t)&&j.je.test(t)){var a=[];G.forEach((function(e){var n=B(t,e);n&&a.push(n)})),M(a),Object(y.k)(k)}}),[L,k,G,M,A,n,B]),N=Object(i.useCallback)((function(e){if(L)A(w.a.actions.takeHistorySnapshot());else{var t=[],a=[];G.forEach((function(i){var c,s,u=_.find((function(e){return e.id===i.id}));u&&(o()(u.settings,i.settings)||t.push((s={id:i.id},Object(r.a)(s,n.type,{oldValue:u.settings[n.type],newValue:e}),Object(r.a)(s,"shadowTransparent",{oldValue:u.settings.shadowTransparent,newValue:!1}),Object(r.a)(s,"color",i.settings.shadowColor),s)));a.push({id:i.id,settings:(c={},Object(r.a)(c,n.type,e),Object(r.a)(c,"shadowTransparent",!1),c)})})),t.length&&(Object(g.a)({historyStack:{historyAction:O.a.bulk_action,settings:{children:t,bulkType:O.a.change_adjust,activeSetting:I,type:"shadow",name:n.type}}}),A({type:b.m,batchSettings:a}))}}),[L,G,A,_,n.type,I]);if(!L&&!R)return Object(x.a)(""),null;var z=L?Object(h.a)(P[n.newType],n.min||0,n.max||0):Object(h.a)(R.settings[n.type],n.min||0,n.max||0),H=null===(t=G[0])||void 0===t?void 0:t.settings[n.type],Y=L?P[n.newType]:G.every((function(e){return e.settings[n.type]===H}))?H:"-";return Object(S.jsxs)(i.Fragment,{children:[Object(S.jsx)("p",{className:c.name,children:u(n.name)}),Object(S.jsxs)("div",{className:c.settingNameOutput,children:[Object(S.jsx)("div",{className:c.rangeWrap,style:{"--progressValue":"".concat(z,"%")},children:Object(S.jsx)("input",{className:c.currentInputRange,type:"range",min:n.min,max:n.max,value:L?P[n.newType]:R.settings[n.type]||0,onChange:function(e){return D(Number(e.target.value))},onMouseUp:function(e){return N(e.target.value)},onKeyUp:function(e){return N(e.target.value)},onTouchEnd:function(e){return N(e.target.value)},"data-test":n.type})}),Object(S.jsx)(v.a,{value:Y,className:c.inputVisible,onChange:function(e){return D(Number(e.target.value))},onKeyUp:function(e){return N(e.target.value)},onBlur:function(){return e=n.type,void(L||R.settings[e]||D(0));var e},"data-test":"".concat(n.type,"-input")})]})]},n.type)}t.b=Object(i.memo)(_)},function(e,t,n){"use strict";var r=n(174),a=n.n(r),i=n(18),c=n.n(i),o=n(87),s=n(33),u=n(24),l=n(1),d=n(2),b=n(44),f=n(79),h=Object(b.b)({downloadModalOverlay:Object(d.a)({},f.h),modalHeader:f.f,downloadModal:Object(d.a)(Object(d.a)({},f.g),{},{transform:"translate(-50%, -50%)"}),downloadCloseButton:Object(d.a)(Object(d.a)({},f.d),{},{width:20}),downloadBody:{marginTop:20},downloadText:f.j,downloadFooter:Object(d.a)(Object(d.a)({},f.c),{},{display:"flex"}),downloadButtonBase:f.b,downloadButtonContinue:f.k,downloadButtonCreate:Object(d.a)(Object(d.a)({},f.e),{},{marginLeft:8})}),p=n(5);t.a=function(e){var t=e.isOpen,n=void 0!==t&&t,r=e.description,i=e.onContinue,d=void 0===i?u.a:i,b=e.onCreateNew,f=void 0===b?u.a:b,g=Object(s.c)(),O=h();return a.a.setAppElement("#root"),Object(p.jsxs)(a.a,{isOpen:n,className:O.downloadModal,overlayClassName:O.downloadModalOverlay,onRequestClose:d,children:[Object(p.jsx)(o.a,{name:"close-gen",className:O.downloadCloseButton,onClick:d}),Object(p.jsx)("p",{className:O.modalHeader,"data-test":"modal root",children:g("Hurray!")}),Object(p.jsx)("div",{className:O.downloadBody,children:Object(p.jsx)("p",{className:O.downloadText,children:g(r||l.Yd.imageWasDownloaded)})}),Object(p.jsxs)("div",{className:O.downloadFooter,children:[Object(p.jsx)("button",{className:c()(O.downloadButtonBase,O.downloadButtonContinue),onClick:d,children:g("Continue Editing")}),Object(p.jsx)("button",{className:c()(O.downloadButtonBase,O.downloadButtonCreate),onClick:f,children:g("Create New")})]})]})}},function(e,t,n){"use strict";var r=n(7),a=n.n(r),i=n(2),c=n(10),o=n(12),s=n(6),u=n(9),l=n(17),d=n(29),b=n(540),f=function(e){var t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.width,t.height=e.height,null===n||void 0===n||n.drawImage(e,0,0,e.width,e.height,0,0,e.width,e.height),null===n||void 0===n?void 0:n.getImageData(0,0,e.width,e.height).data},h=n(409),p=n(339),g=n(222),O=n(1),v=n(0),j=n(57),m=function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c,m,y,x,w,A,E,k,C,S,T,_,I,R,L,P,G,M,B,D,N,z,H,Y,X,U,F,W;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.originalImageUrl,m=t.baseGroup,y=t.params,x=t.isPremium,w=t.id,A=Object(v.mb)(m),e.next=4,Object(d.a)(c);case 4:if(E=e.sent,k=Object(s.b)((function(e){return{tempImagelicense:Object(u.zb)(e),tempImageId:Object(u.yb)(e),tempDataType:Object(u.L)(e),tempImageData:Object(u.xd)(e),additionalInfo:Object(u.p)(e),isHslOpen:Object(u.Lb)(e)}})),C=k.tempImagelicense,S=k.tempDataType,T=k.tempImageId,_=k.tempImageData,I=k.additionalInfo,R=k.isHslOpen,L=Object(v.db)(A),P=L.width,G=L.height,0,(M=Math.min((P-0)/E.width,(G-O.ub)/E.height))>1&&(M=1),B={width:Number((E.width*M).toFixed(10)),height:Number((E.height*M).toFixed(10))},D=w||"".concat(S===O.Yf?O.Yf:O.Hd,"_").concat(Date.now().toString(36)),N=S!==O.Yf,z=Object(v.s)({x:0,y:0,id:D,width:B.width,height:B.height,name:"image",image:E,is_settings:!0,draggable:!0,imgRatio:M,hasPatch:N,isCropAble:!0,isErasable:N,isReplaceAble:N,originalWidth:E.width,originalHeight:E.height,initialWidth:B.width,initialHeight:B.height}),Object(j.a)(z),Object(v.i)(z,"dblclick",(function(){return Object(j.d)(z)})),!(H=null===y||void 0===y?void 0:y.get("mask"))){e.next=22;break}return e.next=20,Object(d.a)(H);case 20:Y=e.sent,Object(v.Lb)(z,{image:Y,originalImage:E,mask:Object(h.e)(Y,E,E.width,E.height)});case 22:if(Object(v.f)(m,z),X=f(E),U=Object(b.a)(X),!H&&!U){e.next=33;break}return e.next=28,Object(p.a)(A.width(),A.height());case 28:F=e.sent,Object(v.f)(m,F),Object(v.Fb)(F),e.next=34;break;case 33:Object(g.a)({stage:A,baseGroup:m,canvasSizes:B});case 34:return Object(v.Lb)(m,{clipX:0,clipY:0,clipWidth:B.width,clipHeight:B.height,width:B.width,height:B.height,x:(P-B.width)/2,y:(G-B.height)/2}),Object(v.k)(m),W={type:S===O.Yf?O.Yf:O.Je,id:D,konva_tagName:"Image",isPremium:x,resources:Object(i.a)(Object(i.a)({},_.find((function(e){return e.url===c}))),{},{id:T||(null===(n=_[0])||void 0===n?void 0:n.id),license:C||(null===(r=_[0])||void 0===r?void 0:r.license),url:H||c,is_local:!0},I.resources),uiMetaData:{hsl:R,light:!R}},Object(s.a)({type:o.f}),Object(s.a)({type:o.a,payload:W}),_.length&&Object(s.a)(l.a.actions.removeImageDataTemp()),Object(s.a)({type:o.j,id:D}),Object(s.a)(l.a.actions.updateChooser({extraData:{width:E.width,height:E.height,originalWidth:E.width,originalHeight:E.height,scale:{width:B.width,height:B.height}}})),(H||U)&&Object(s.a)({type:o.l,settings:{url:"",transparent:!0,settingType:""},id:O.x}),e.abrupt("return",{newImage:E,id:D,konvaImage:z});case 44:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.a=m},,,,,,,,function(e){e.exports=JSON.parse('{"name":"@pa/web-editor","version":"3.0.2","private":true,"scripts":{"test":"react-app-rewired test","start":"react-app-rewired start","eject":"react-app-rewired eject","lint-ci":"eslint \'src/**/*.{js,ts,tsx}\'","lint":"eslint \'src/**/*.{js,ts,tsx}\' --fix","build:production":"react-app-rewired build","precommit":"eslint --fix --max-warnings 0","start:sdk":"env-cmd -f .env.sdk react-app-rewired start","build":"env-cmd -f .env.development react-app-rewired build","update:packages":"npm i @pa/monetization@alpha @pa/rc@alpha","lint-report":"eslint --ext .js,.ts,.tsx src/ -f json -o report.json","build:staging":"env-cmd -f .env.staging react-app-rewired build","build:preproduction":"env-cmd -f .env.preproduction react-app-rewired build","analyze":"react-app-rewired build && source-map-explorer \'build/static/js/*.js\'","build:sdk":"env-cmd --no-override -f .env.sdk.production env-cmd --no-override -f .env.sdk react-app-rewired build"},"dependencies":{"@PicsArtWeb/editor-lib":"^3.1.25","@bugsnag/js":"^7.11.0","@bugsnag/plugin-react":"^7.11.0","@pa/editor-lib":"^0.7.0","@pa/monetization":"^1.4.6","@pa/pilibs":"^13.0.1-alpha","@pa/rc":"^24.6.0-editor-hotfix","@reduxjs/toolkit":"^1.4.0","abortcontroller-polyfill":"^1.5.0","classnames":"^2.3.1","crypto-js":"^4.1.1","dayjs":"^1.10.6","file-saver":"^2.0.2","js-cookie":"^2.2.1","js-md5":"^0.7.3","jspdf":"^2.3.1","jszip":"^3.4.0","konva":"7.2.2","lodash":"^4.17.21","mime":"^2.4.5","opentype.js":"^1.3.3","piexifjs":"^1.0.6","react":"^17.0.2","react-beautiful-dnd":"^13.1.0","react-device-detect":"^1.17.0","react-dom":"^17.0.2","react-dropzone":"^11.3.0","react-fast-compare":"^3.0.1","react-jss":"^10.1.1","react-konva":"^17.0.1-3","react-loading-skeleton":"^2.2.0","react-masonry-css":"^1.0.16","react-modal":"^3.11.2","react-redux":"^7.2.0","react-router-dom":"^5.1.2","react-spring":"^8.0.27","react-window":"^1.8.6","redux":"^4.0.5","reselect":"^4.0.0","resize-observer-polyfill":"^1.5.1","styled-jss":"^2.2.3","tinycolor2":"^1.4.2","uuid":"^7.0.2","workbox-core":"^5.1.4","workbox-expiration":"^5.1.4","workbox-precaching":"^5.1.4","workbox-routing":"^5.1.4","workbox-strategies":"^5.1.4"},"devDependencies":{"@babel/plugin-proposal-object-rest-spread":"^7.9.5","@babel/plugin-proposal-optional-catch-binding":"^7.8.3","@babel/plugin-syntax-optional-catch-binding":"^7.8.3","@types/css-font-loading-module":"0.0.6","@types/jest":"^26.0.19","@types/js-cookie":"^2.2.5","@types/js-md5":"^0.4.3","@types/lodash":"^4.14.149","@types/opentype.js":"^1.3.1","@types/react":"^17.0.0","@types/react-beautiful-dnd":"^13.1.1","@types/react-dom":"^17.0.0","@types/react-modal":"^3.10.5","@types/react-redux":"^7.1.7","@types/react-router-dom":"^5.1.3","@types/react-window":"^1.8.4","@types/tinycolor2":"^1.4.3","@types/uuid":"^7.0.2","babel-plugin-transform-class-constructor-call":"^6.24.1","copy-webpack-plugin":"^6.3.1","customize-cra":"^1.0.0","env-cmd":"^10.1.0","eslint":"^7.16.0","eslint-config-airbnb":"^18.1.0","eslint-plugin-babel":"^5.3.0","eslint-plugin-import-helpers":"^1.1.0","eslint-plugin-no-unsanitized":"^3.1.4","husky":"^4.3.8","lint-staged":"^10.5.4","react-app-rewired":"^2.1.8","react-scripts":"^4.0.3","source-map-explorer":"^2.5.0","typescript":"^4.1.3","webpack-bugsnag-plugins":"^1.8.0"},"husky":{"hooks":{"pre-commit":"lint-staged"}},"lint-staged":{"src/**/*.{js,ts,tsx}":["npm run precommit"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var r=n(120),a=n(54),i=n(63);function c(){var e=this;return new Promise((function(t){var n=new FileReader;n.onload=function(){t(n.result)},n.readAsArrayBuffer(e)}))}File.prototype.arrayBuffer=File.prototype.arrayBuffer||c,Blob.prototype.arrayBuffer=Blob.prototype.arrayBuffer||c;var o,s,u=n(34),l=n(1),d=n(11),b=n(245),f={main:{scrollbarWidth:"thin",scrollbarColor:"".concat(d.b.paColor7," ").concat(d.b.paColor12),"&::-webkit-scrollbar":{width:4,height:4,backgroundColor:d.b.paColor12},"&::-webkit-scrollbar-thumb":{width:4,borderRadius:2,backgroundColor:d.b.paColor7},"&::-webkit-scrollbar-track":{backgroundColor:d.b.paColor12}},showOnHover:{scrollbarWidth:"thin","&::-webkit-scrollbar":{width:4,backgroundColor:"transparent"},"&::-webkit-scrollbar-thumb":{width:4,backgroundColor:"transparent",borderRadius:10},"&:hover":{"&::-webkit-scrollbar-thumb":{width:4,borderRadius:10,backgroundColor:d.b.paColor174}}},textarea:{scrollbarWidth:"thin","&::-webkit-scrollbar":{width:4,backgroundColor:"transparent"},"&::-webkit-scrollbar-thumb":{backgroundColor:"transparent"}},layer:{"&::-webkit-scrollbar-thumb":{background:"transparent",borderRadius:"10px"},"&:hover, &:focus-within, &:active":{"&::-webkit-scrollbar-thumb":{backgroundColor:d.b.paColor174}}}},h=n(4),p="--pa-spacing-",g="px",O=(o={},Object(h.a)(o,"".concat(p,"1x"),"2".concat(g)),Object(h.a)(o,"".concat(p,"2x"),"4".concat(g)),Object(h.a)(o,"".concat(p,"3x"),"8".concat(g)),Object(h.a)(o,"".concat(p,"4x"),"12".concat(g)),Object(h.a)(o,"".concat(p,"5x"),"16".concat(g)),Object(h.a)(o,"".concat(p,"6x"),"24".concat(g)),Object(h.a)(o,"".concat(p,"7x"),"32".concat(g)),Object(h.a)(o,"".concat(p,"8x"),"40".concat(g)),Object(h.a)(o,"".concat(p,"9x"),"44".concat(g)),Object(h.a)(o,"".concat(p,"10x"),"48".concat(g)),Object(h.a)(o,"".concat(p,"11x"),"56".concat(g)),Object(h.a)(o,"".concat(p,"12x"),"64".concat(g)),Object(h.a)(o,"".concat(p,"13x"),"72".concat(g)),o),v=Object.keys(O).reduce((function(e,t){var n=t.split(p)[1];return e["".concat("paSpacing").concat(n)]="var(".concat(t,")"),e}),{}),j="--pa-radius-",m="px",y=(s={},Object(h.a)(s,"".concat(j,"1x"),"4".concat(m)),Object(h.a)(s,"".concat(j,"2x"),"8".concat(m)),Object(h.a)(s,"".concat(j,"3x"),"12".concat(m)),Object(h.a)(s,"".concat(j,"4x"),"16".concat(m)),Object(h.a)(s,"".concat(j,"5x"),"24".concat(m)),Object(h.a)(s,"".concat(j,"6x"),"72".concat(m)),s),x=Object.keys(y).reduce((function(e,t){var n=t.split(j)[1];return e["".concat("paRadius").concat(n)]="var(".concat(t,")"),e}),{}),w=n(15),A=document.documentElement,E=document.getElementsByTagName("head")[0],k={default:{variables:b.a,scrollbars:f,colors:d.b,getColor:d.c,spacings:v,radiuses:x}},C=n(568),S=n(535),T=n(3),_=n(88),I=n(136),R=n.n(I),L=n(27),P=n(9),G=n(83),M=n(569),B=n(74),D=n(125),N=n(17),z=n(21),H=n(0),Y=n(536),X=n(163),U=n(278),F=n(12),W=function(){var e=Object(G.a)((function(e){return{baseGroup:Object(P.ad)(e),stage:Object(P.vd)(e),additionalInfo:Object(P.p)(e),newCanvasEnabled:Object(P.jc)(e),artBoardSizes:Object(P.t)(e)}})),t=e.baseGroup,n=e.stage,r=e.additionalInfo,a=e.newCanvasEnabled,c=e.artBoardSizes,o=Object(L.e)();return Object(T.useCallback)((function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(a){var s=c.initialWidth,u=c.initialHeight,d=Object(U.a)({width:s,height:u});Object(L.b)((function(){o(z.a.actions.emptyBaseGroup()),o(z.a.actions.setArtBoardSizes({width:s,height:u})),o(z.a.actions.setupArtBoard({width:s,height:u,initialLayersAttributes:[d]})),o(z.a.actions.selectBackgroundLayer())}))}else{Object(H.Lb)(n,{collage:null}),Object(H.F)(t),Object(X.a)();var b=r.width,f=r.height;Object(Y.a)(n,t,{width:b,height:f})}i.a.oldResetExportPopupAction(),Object(L.b)((function(){o(B.a.actions.resetZoom()),o(D.a.actions.reset()),o(N.a.actions.setActiveSettings("")),o({type:F.o,activeTexture:0}),o(N.a.actions.resetCurrentTemplateData()),e&&o(N.a.actions.setSelectedCategory("background")),o(B.a.actions.triggerScrollSidebarToTop(l.uc.in_progress))}))}),[a,c,o,n,t,r])},V=n(555),K=n(556);var q=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t&&e&&Object(K.a)({id:l.xe,originalImageUrl:t,isPremium:n,baseGroup:e})},J=n(7),Q=n.n(J),Z=n(10),$=n(30),ee=n(20),te=n(6),ne=n(416),re=n(29);function ae(){return(ae=Object(Z.a)(Q.a.mark((function e(t){var n,r,a,i,c=arguments;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]&&c[1],e.next=3,Object(re.a)(t);case 3:r=e.sent,a=r.width,i=r.height,Object(te.a)(z.a.actions.setArtBoardSizesWithoutHistory({width:a,height:i,initialWidth:a,initialHeight:i})),Object(ne.a)([{type:$.d.IMAGE_LAYER,data:{image:r,width:a,height:i,meta:{type:ee.a.PHOTO,isPremium:n}}}]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ie=function(e){return ae.apply(this,arguments)},ce=n(5),oe=function(){var e=Object(G.a)((function(e){return{baseGroup:Object(P.ad)(e),newLayers:Object(P.uc)(e),additionalInfo:Object(P.p)(e),successModal:Object(P.wd)(e),oneTimePaymentImage:Object(P.Yb)(e,l.xe),oneTimePaymentResultUrl:Object(P.Lc)(e),newCanvasEnabled:Object(P.jc)(e),premiumNewData:Object(P.Sc)(e)}})),t=e.baseGroup,n=e.newLayers,r=e.successModal,a=e.oneTimePaymentImage,i=e.oneTimePaymentResultUrl,c=e.newCanvasEnabled,o=e.premiumNewData,s=Object(L.e)(),u=Object(T.useCallback)((function(){s(B.a.actions.setSuccessModal({isOpen:!1}))}),[s]),d=W(),b=Object(T.useCallback)((function(){d(),u()}),[d,u]),f=Object(T.useCallback)((function(){r.oneTimePayment&&(!a&&i?(d(!1),c?ie(i):q(t,i)):Object(L.b)((function(){c&&n.forEach((function(e){o.map((function(e){return e.id})).includes(e.meta.resourceId||e.meta.templateId)&&s(z.a.actions.patchLayerWithoutHistory({id:e.id,patch:{meta:{type:e.meta.type,isPremium:!1}}}))})),s({type:F.l,isPremium:!1,id:l.xe})}))),u()}),[r.oneTimePayment,u,a,i,c,d,t,s,n,o]);return Object(ce.jsx)(V.a,{isOpen:r.isOpen,description:r.description,onContinue:f,onCreateNew:b})},se=n(174),ue=n.n(se),le=n(33),de=n(2),be=n(44),fe=n(53),he=n(79),pe=Object(be.b)((function(e){return{errorModalOverlay:Object(de.a)(Object(de.a)({},he.h),{},{zIndex:fe.z}),errorHeader:he.f,errModal:Object(de.a)(Object(de.a)({},he.g),{},{height:"auto",minHeight:he.g.height,borderTopColor:e.colors.paColor48,outline:0,position:"absolute",transform:"translate(-50%, -50%)"}),errorModalContent:{justifyContent:"space-between",position:"relative",display:"flex",flexDirection:"column",backgroundColor:e.colors.paColor9,borderRadius:6.3,alignItems:"center",width:"100%"},errorModalBody:{color:e.colors.paColor49},errorClose:Object(de.a)(Object(de.a)({},he.b),he.i),importantClose:Object(de.a)(Object(de.a)({},he.b),he.e),errorModalText:Object(de.a)(Object(de.a)({},he.j),{},{marginTop:20}),errorModalChoice:he.c}})),ge=function(){var e=Object(G.a)((function(e){return Object(P.lb)(e)})),t=e.errorKey,n=e.isVisible,r=Object(L.e)(),a=pe(),i=Object(le.c)(),c=l.hc[t],o=c.buttonText,s=c.headerText,u=Object(T.useCallback)((function(){r(N.a.actions.setErrorModal({isVisible:!1})),c.onClose&&c.onClose()}),[r,c]),d=c.message.split("\n"),b=c.type===l.Bh.errorMessage;return Object(ce.jsxs)(ue.a,{isOpen:n,className:a.errModal,overlayClassName:a.errorModalOverlay,ariaHideApp:!1,onRequestClose:u,shouldFocusAfterRender:!1,children:[Object(ce.jsx)("div",{className:a.errorHeader,"data-test":"modal root",children:s||(b?"Oops":"Important!")}),Object(ce.jsx)("div",{className:a.errorModalBody,children:d.map((function(e){return Object(ce.jsx)("div",{className:a.errorModalText,children:e},e)}))}),Object(ce.jsx)("div",{className:a.errorModalChoice,children:Object(ce.jsx)("div",{onClick:u,className:a.importantClose,children:i(null!==o&&void 0!==o?o:"Close")})})]})},Oe=Object(T.memo)(ge),ve=n(112),je=n(541),me=Object(be.b)((function(e){return{modalHeader:he.f,text:Object(de.a)(Object(de.a)({},he.j),{},{marginTop:20}),portraitModalOverlay:Object(de.a)(Object(de.a)({},he.h),{},{zIndex:fe.S}),phoneIcon:{width:98,height:98,opacity:.49},portraitModal:Object(de.a)(Object(de.a)({},he.g),{},{marginLeft:-he.g.width/2,marginTop:-he.g.height/2,borderTopColor:e.colors.paColor50,height:196})}})),ye=function(){var e=me(),t=Object(le.c)(),n=Object(T.useCallback)((function(){return Object(je.a)()&&(ve.isIOS?0===window.orientation||180===window.orientation:["portrait-primary","portrait-secondary"].includes(window.screen.orientation.type))}),[]),r=Object(T.useState)(n()),a=Object(w.a)(r,2),i=a[0],c=a[1];ue.a.setAppElement("#root");var o=Object(T.useCallback)((function(){c(n())}),[n]);return Object(T.useEffect)((function(){return window.addEventListener("orientationchange",o),function(){window.removeEventListener("orientationchange",o)}})),Object(ce.jsxs)(ue.a,{isOpen:i,className:e.portraitModal,overlayClassName:e.portraitModalOverlay,children:[Object(ce.jsx)("div",{className:e.modalHeader,"data-test":"modal root",children:t("Important!")}),Object(ce.jsx)("p",{className:e.text,children:t("Please turn your tablet to landscape mode to use")})]})},xe=n(279),we=n(343),Ae=n(202),Ee=function(){var e=Object(G.a)(P.u),t=e.open,n=e.closable,r=e.redirectOnSuccessPath,a=Object(L.e)(),i=Object(_.g)(),c=Object(T.useState)(null),o=Object(w.a)(c,2),s=o[0],u=o[1],l=Object(T.useCallback)((function(){var e=Object(te.b)((function(e){return Object(P.u)(e).redirectOnFailPath}));Object(L.b)((function(){a(B.a.actions.closeAuthenticationPopup()),e&&(a(Ae.a.actions.setBlankCanvasSettings({blank:!0})),i.replace(e)),a(B.a.actions.resetAuthenticationPopupRedirections())}))}),[a,i]),d=Object(T.useCallback)((function(){r&&i.replace(r),a(B.a.actions.resetAuthenticationPopupRedirections())}),[a,i,r]);return Object(ce.jsx)(xe.a,Object(de.a)(Object(de.a)({isOpen:t},n&&"verifyView"!==s&&{closeHandler:l}),{},{children:Object(ce.jsx)(we.a,{isLoginView:!1,closeModal:l,viewTypeCheck:function(e){return u(e)},entryProject:"editor",authSuccessHandler:d})}))},ke=n(417),Ce=n(119),Se=function(){var e=Object(_.h)(),t=Object(_.g)(),n=Object(Ce.a)().updateUser;Object(ke.a)((function(){var e="".concat(window.location.pathname).concat(window.location.search);i.a.pageView(e),n(),u.a.leaveBreadcrumb("routeChange",{route:e},"navigation")}),[e.pathname,n]),Object(T.useEffect)((function(){return t.listen((function(){window.scrollTo(0,0)}))}),[t])},Te=n(398),_e=n(450);function Ie(){return(Ie=Object(Z.a)(Q.a.mark((function e(t,n){var r,a,i;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,{mode:"cors"});case 3:return r=e.sent,e.next=6,r.blob();case 6:return a=e.sent,i=URL.createObjectURL(a),Object(_e.a)(i,n),e.abrupt("return",new File([a],"-".concat(Date.now().toString(36),".png"),{type:"image/png"}));case 12:e.prev=12,e.t0=e.catch(0),u.a.trigger(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}var Re=function(e,t){return Ie.apply(this,arguments)},Le=n(39),Pe=n(64);var Ge=function(){var e=Object(Ce.a)().user,t=Object(L.e)(),n=Object(T.useCallback)(Object(Z.a)(Q.a.mark((function n(){var r,a,i;return Q.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null===e||void 0===e?void 0:e.key){n.next=3;break}return t(N.a.actions.setUserPaidItems([])),n.abrupt("return");case 3:return n.prev=3,n.next=6,Object(Pe.a)(l.Ic,{headers:Object(h.a)({},Le.q,e.key)});case 6:return r=n.sent,n.next=9,r.json();case 9:a=n.sent,i=(null===a||void 0===a?void 0:a.data)||[],t(N.a.actions.setUserPaidItems(i)),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(3),t(N.a.actions.setUserPaidItems([]));case 17:case"end":return n.stop()}}),n,null,[[3,14]])}))),[t,null===e||void 0===e?void 0:e.key]);return Object(T.useEffect)((function(){n()}),[n]),n},Me=n(190),Be=n(429),De=Object(h.a)({},l.pg,l.Je);var Ne=function(){var e=Object(G.a)((function(e){return{layers:Object(P.ac)(e),openedFrom:Object(P.gc)(e),usedEffects:Object(P.je)(e),usedPremiumTools:Object(P.ke)(e),currentTemplateData:Object(P.U)(e),baseGroup:Object(P.ad)(e),oneTimePaymentImage:Object(P.Yb)(e,l.xe),newCanvasEnabled:Object(P.jc)(e),setupStage:Object(P.md)(e),newToolNames:Object(P.hc)(e)}})),t=e.openedFrom,n=e.layers,r=e.usedEffects,a=e.usedPremiumTools,c=e.currentTemplateData,o=e.baseGroup,s=e.oneTimePaymentImage,u=e.newCanvasEnabled,d=e.setupStage,b=e.newToolNames,f=Object(L.e)(),h=Object(Be.a)().paymentFlow,p=Object(Ce.a)(),g=p.hardUpdateSubscribed,O=p.waitingUser,v=Ge(),j=Object(T.useState)(null),m=Object(w.a)(j,2),y=m[0],x=m[1],A=Object(T.useMemo)((function(){var e=n.filter((function(e){return e.isPremium})).reduce((function(e,t){var n=t.id,r=t.type,a=t.resources,i=De[r]||r;return e[i]=e[i]||[],e[i].push(a.id||n),e}),{}),t={effect:r},i=Object(de.a)({},a);return i.hasOwnProperty(l.Og.removeObjectBg)&&(i.object_remover=i[l.Og.removeObjectBg],delete i[l.Og.removeObjectBg]),Object(de.a)(Object(de.a)(Object(de.a)({},e),t),i)}),[n,r,a]),E=Object(T.useCallback)(Object(Z.a)(Q.a.mark((function e(){var t,n,r,a,c;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=sessionStorage.getItem(l.Ee.file),n=sessionStorage.getItem(l.Ee.fileName),r=sessionStorage.getItem(l.Ee.analytics),!t){e.next=16;break}return e.next=6,Re(t,n||"Web_Photo_Editor.jpg");case 6:if(!(a=e.sent)){e.next=13;break}return e.next=10,Object(Me.a)(a,"editor","result");case 10:e.t0=e.sent,e.next=14;break;case 13:e.t0=null;case 14:c=e.t0,r&&i.a.sendEvent("object_export","custom_event",Object(de.a)(Object(de.a)({},JSON.parse(r)),{},{result_photo_url:c||""}));case 16:case"end":return e.stop()}}),e)}))),[]),k=Object(T.useCallback)((function(){f(B.a.actions.closeMonetizationPopup()),sessionStorage.removeItem(l.Ee.fileName),sessionStorage.removeItem(l.Ee.data),sessionStorage.removeItem(l.Ee.analytics),sessionStorage.removeItem(l.Ee.file)}),[f]),C=Object(T.useCallback)((function(e){l.vh.authentication&&(e?f(B.a.actions.openMonetizationPopup("")):k())}),[f,k]),S=Object(T.useCallback)((function(e){"onetime"===e?(E(),v(),i.a.sendEvent("purchase_done_popup","custom_event"),f(B.a.actions.setIsExportModalOpen(!1)),f(B.a.actions.setSuccessModal({isOpen:!0,oneTimePayment:!0}))):i.a.sendEvent("subscription_done_popup","custom_event"),k()}),[f,E,k,v]);return Object(T.useEffect)((function(){if("pay_and_download"===t){var e=sessionStorage.getItem(l.Ee.data);e&&x(JSON.parse(e))}else x(null)}),[t]),Object(T.useEffect)((function(){if(!s&&h){var e=sessionStorage.getItem(l.Ee.file);if(e){if(f(N.a.actions.setOneTimePaymentResult(e)),u)return void(d&&ie(e,!0));q(o,e,!0)}}}),[o,f,u,s,h,d]),O?null:Object(ce.jsx)(Te.b,{isCheckoutModalOpen:null!==t,setCheckoutModalOpenState:C,adyenKey:l.i,gtmData:Object(de.a)(Object(de.a)({screen_id:"popup",source:"batch"===t?"batch_editor":"editor",tool_names:y||(u?b:A)},t&&{action_button:"batch"===t?"download_button":t}),c.template_id?c:{}),children:Object(ce.jsx)(Te.a,Object(de.a)(Object(de.a)({authViewType:"signUp",initialView:"form",completePaymentHandler:S,skipPaymentHandler:k},y&&{premiumItems:y}),{},{paymentSuccessHandler:function(e){"subscription"===e&&g(!0)}}))})},ze=n(87),He=n(18),Ye=n.n(He),Xe=n(162),Ue=Object(be.b)((function(e){return{emailContainer:{"--pos":"absolute","--y-pos":"92px","--item-gap":"8px",position:"var(--pos)",top:0,left:"50%",display:"flex",flexFlow:"column",alignItems:"center",maxWidth:"100%",transform:"translate(-50% ,var(--y-pos))",zIndex:fe.x,pointerEvents:"none"},emailContentWrapper:{display:"flex",justifyContent:"center",width:"80vw",pointerEvents:"none","& + &":{marginTop:"var(--item-gap)"}},emailContent:{padding:"12px 16px 12px 18px",backgroundColor:e.colors.paColor6,borderRadius:4,boxShadow:"0px 4px 20px ".concat(e.colors.paColor180),display:"flex",alignItems:"center",pointerEvents:"all"},emailErrorContent:{paddingRight:20},emailText:{color:e.colors.paColor9,fontFamily:"var(--font-family-primary) !important",fontSize:14,lineHeight:1.44},currentEmail:{fontWeight:600},limitedClickText:{color:e.colors.paColor178},resendEmail:{marginLeft:8,textDecoration:"underline",cursor:"pointer",color:e.colors.paColor179,fontWeight:600,"&:disabled":{opacity:.5,cursor:"default"}},sentEmail:{marginLeft:8,color:e.colors.paColor45,fontWeight:600},limitErrorContainer:{marginTop:8},infoIcon:{flexShrink:0,width:24,height:24,marginRight:10,"& path:first-child":{fill:e.colors.paColor6},"& path:last-child":{fill:e.colors.paColor9}},infoRedIcon:{flexShrink:0,width:24,height:24,marginRight:10,"& path:first-child":{fill:e.colors.paColor6},"& path:last-child":{fill:e.colors.paColor18}},infoYellowIcon:{flexShrink:0,width:24,height:24,marginRight:10,"& path:first-child":{fill:e.colors.paColor6},"& path:last-child":{fill:e.colors.paColor178}},closeIcon:{marginLeft:14,width:19,height:19,cursor:"pointer","& path":{fill:e.colors.paColor152}}}})),Fe=function(e){var t=e.userKey,n=e.userEmail,r=e.isShowLimitError,a=e.onShowLimitError,i=Ue(),c=Object(le.c)(),o=Object(Ce.a)().user,s=Object(T.useState)(!1),u=Object(w.a)(s,2),d=u[0],b=u[1],f=Object(T.useState)(!1),p=Object(w.a)(f,2),g=p[0],O=p[1];Object(T.useEffect)((function(){if(null===o||void 0===o?void 0:o.created){var e=new Date(Date.parse(o.created)+864e5).toUTCString();R.a.set("expiresDate",e)}}),[null===o||void 0===o?void 0:o.created]),Object(T.useEffect)((function(){var e=R.a.get("".concat(l.sg).concat(t));e&&2===Number(e)&&O(!0)}),[t]);var v=Object(T.useCallback)((function(e){403===e.status&&(R.a.set("".concat(l.sg).concat(t),"1"),O(!1),a(!0),setTimeout((function(){a(!1)}),4e3))}),[t,a]),j=Object(T.useCallback)(Object(Z.a)(Q.a.mark((function e(){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Xe.b)({userKey:t});case 3:b(!0),setTimeout((function(){b(!1)}),3e3),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),v(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[t,v]);return Object(ce.jsx)("div",{className:i.emailContentWrapper,children:Object(ce.jsxs)("div",{className:i.emailContent,children:[Object(ce.jsx)(ze.a,{name:"info-circle-gen",className:Ye()(i.infoIcon,Object(h.a)({},i.infoYellowIcon,g))}),Object(ce.jsxs)("p",{className:Ye()(i.emailText,Object(h.a)({},i.limitedClickText,g)),children:[c("Verify your email to start editing. Click the button in the email we sent to: "),Object(ce.jsx)("span",{className:i.currentEmail,children:n}),d?Object(ce.jsx)("span",{className:Ye()(i.emailText,i.sentEmail),children:c("Sent")}):Object(ce.jsx)("button",{className:Ye()(i.emailText,i.resendEmail),onClick:j,disabled:r,children:c("Resend Email")})]})]})})},We=function(e){var t=e.onShowLimitError,n=Ue(),r=Object(le.c)();return Object(ce.jsx)("div",{className:n.emailContentWrapper,children:Object(ce.jsxs)("div",{className:Ye()(n.emailContent,n.emailErrorContent),children:[Object(ce.jsx)(ze.a,{name:"info-circle-gen",className:n.infoRedIcon}),Object(ce.jsx)("div",{className:n.emailText,children:r("Too many attempts. Please check your email.")}),Object(ce.jsx)(ze.a,{name:"close-gen",className:n.closeIcon,onClick:function(){return t(!1)}})]})})},Ve=function(){var e=Ue(),t=Object(Ce.a)().user,n=Object(T.useRef)(null),r=Object(T.useState)(!1),a=Object(w.a)(r,2),i=a[0],c=a[1],o=Object(T.useState)(!1),s=Object(w.a)(o,2),u=s[0],d=s[1],b=Object(_.i)("/editor"),f=Object(_.i)("/batch");return Object(T.useEffect)((function(){var e=function(){var e,t,r=window.scrollY>68?"fixed":"absolute",a=window.scrollY>68?"".concat(24,"px"):"".concat(92,"px");null===n||void 0===n||null===(e=n.current)||void 0===e||e.style.setProperty("--pos",r),null===n||void 0===n||null===(t=n.current)||void 0===t||t.style.setProperty("--y-pos",a)};return R.a.get("".concat(l.sg).concat(null===t||void 0===t?void 0:t.key))&&window.addEventListener("scroll",e),function(){return window.removeEventListener("scroll",e)}}),[t]),Object(T.useEffect)((function(){c((null===t||void 0===t?void 0:t.account_type)===l.rg&&!b&&!f)}),[t,b,f]),i?Object(ce.jsxs)("div",{className:e.emailContainer,ref:n,children:[(null===t||void 0===t?void 0:t.key)&&(null===t||void 0===t?void 0:t.email)&&Object(ce.jsx)(Fe,{userKey:null===t||void 0===t?void 0:t.key,userEmail:null===t||void 0===t?void 0:t.email,isShowLimitError:u,onShowLimitError:d}),u&&Object(ce.jsx)(We,{onShowLimitError:d})]}):null},Ke=function(e){var t=e.children;return Object(M.a)(),Se(),Object(ce.jsxs)("main",{children:[Object(ce.jsx)(Ve,{}),Object(ce.jsx)(Oe,{}),Object(ce.jsx)(ye,{}),Object(ce.jsxs)(T.Suspense,{fallback:null,children:[t,Object(ce.jsx)(oe,{}),Object(ce.jsx)(Ne,{}),Object(ce.jsx)(Ee,{})]})]})},qe=n(451),Je=n(552),Qe=Object(T.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(3),n.e(6),n.e(36)]).then(n.bind(null,1434))})),Ze=Object(T.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(6),n.e(5),n.e(37)]).then(n.bind(null,1437))})),$e=function(){return Object(ce.jsx)(T.Suspense,{fallback:Object(ce.jsx)(Je.a,{}),children:Object(ce.jsx)(Qe,{children:Object(ce.jsx)(Ze,{})})})},et=n(195),tt=Object(T.lazy)((function(){return Promise.all([n.e(0),n.e(3),n.e(39),n.e(5),n.e(29)]).then(n.bind(null,1435))}));var nt=function(){return Object(ce.jsx)(T.Suspense,{fallback:null,children:Object(ce.jsx)(et.a,{children:Object(ce.jsx)(tt,{})})})},rt=n(128),at=n(179),it=Object(be.b)({skeletonContentWrap:{width:"100%"},mainContent:{maxWidth:"calc(var(--grid-container-max-size) + 76px)",margin:"0 auto",padding:"16px 44px 48px 44px"},rowBetweenCenterY:{display:"flex",justifyContent:"space-between",alignItems:"center"},headerSkeletonWrap:{height:80},searchSkeletonWrap:{height:180,marginBottom:24},newDesignSection:{marginBottom:60},newDesignTitle:{width:80,height:24,marginBottom:16},newDesignSubTitle:{width:220,height:32},newSectionButtons:{width:400,height:44,margin:"40px 0"},newSectionCustomSIzeBtn:{width:160,height:44},newDesignBoxes:{display:"grid",gridAutoFlow:"column",gap:"32px",margin:"22px 0 100px 0",overflow:"hidden"},newDesignBox:{width:120},newDesignBoxImg:{width:"100%",height:120},newDesignBoxTitle:{marginTop:8,width:"100%",height:16},sectionTitle:{width:140,height:24},sectionSubTitle:{width:290,height:32,margin:"14px 0 26px"},designBoxes:{display:"grid",gridAutoFlow:"column",gap:"24px",margin:"22px 0 50px 0",overflow:"hidden"},designBox:{width:150,height:270},section:{marginBottom:40},sectionName:{width:160,height:32},sectionSeeAll:{width:44,height:20}}),ct=function(){var e=it();return Object(ce.jsxs)("div",{className:e.skeletonContentWrap,children:[Object(ce.jsx)("div",{className:e.headerSkeletonWrap,children:Object(ce.jsx)(rt.a,{})}),Object(ce.jsxs)("div",{className:e.mainContent,children:[Object(ce.jsx)("div",{className:e.searchSkeletonWrap,children:Object(ce.jsx)(rt.a,{})}),Object(ce.jsxs)("div",{className:e.newDesignSection,children:[Object(ce.jsx)("div",{className:e.newDesignTitle,children:Object(ce.jsx)(rt.a,{})}),Object(ce.jsx)("div",{className:e.newDesignSubTitle,children:Object(ce.jsx)(rt.a,{})}),Object(ce.jsxs)("div",{className:e.rowBetweenCenterY,children:[Object(ce.jsx)("div",{className:e.newSectionButtons,children:Object(ce.jsx)(rt.a,{})}),Object(ce.jsx)("div",{className:e.newSectionCustomSIzeBtn,children:Object(ce.jsx)(rt.a,{})})]}),Object(ce.jsx)("div",{className:e.newDesignBoxes,children:Array(9).fill(1).map((function(){return Object(ce.jsxs)("div",{className:e.newDesignBox,children:[Object(ce.jsx)("div",{className:e.newDesignBoxImg,children:Object(ce.jsx)(rt.a,{})}),Object(ce.jsx)("div",{className:e.newDesignBoxTitle,children:Object(ce.jsx)(rt.a,{})})]},Object(at.a)())}))})]}),Object(ce.jsx)("div",{className:e.sectionTitle,children:Object(ce.jsx)(rt.a,{})}),Object(ce.jsx)("div",{className:e.sectionSubTitle,children:Object(ce.jsx)(rt.a,{})}),Array(13).fill(1).map((function(){return Object(ce.jsxs)("div",{className:e.section,children:[Object(ce.jsxs)("div",{className:e.rowBetweenCenterY,children:[Object(ce.jsx)("div",{className:e.sectionName,children:Object(ce.jsx)(rt.a,{})}),Object(ce.jsx)("div",{className:e.sectionSeeAll,children:Object(ce.jsx)(rt.a,{})})]}),Object(ce.jsx)("div",{className:e.designBoxes,children:Array(9).fill(1).map((function(){return Object(ce.jsx)("div",{className:e.designBox,children:Object(ce.jsx)(rt.a,{})},Object(at.a)())}))})]},Object(at.a)())}))]})]})},ot=Object(T.lazy)((function(){return Promise.all([n.e(0),n.e(2),n.e(38),n.e(4),n.e(30)]).then(n.bind(null,1436))}));var st=function(){return Object(ce.jsx)(T.Suspense,{fallback:Object(ce.jsx)(ct,{}),children:Object(ce.jsx)(le.a,{projectName:"photo_editor",language:l.vh.languageSlug||l.kb,children:Object(ce.jsx)(ot,{})})})},ut=Object(T.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(33)]).then(n.bind(null,1438))}));var lt=function(){return Object(ce.jsx)(T.Suspense,{fallback:null,children:Object(ce.jsx)(le.a,{projectName:"photo_editor",language:l.vh.languageSlug||l.kb,children:Object(ce.jsx)(ut,{})})})},dt=Object(T.lazy)((function(){return Promise.all([n.e(2),n.e(4),n.e(28)]).then(n.bind(null,1440))})),bt=function(){return Object(ce.jsx)(T.Suspense,{fallback:null,children:Object(ce.jsx)(le.a,{projectName:"photo_editor",language:l.vh.languageSlug||l.kb,children:Object(ce.jsx)(dt,{})})})},ft=n(271);var ht=function(){return Object(ce.jsx)("button",{children:"Button"})};var pt=function(){return Object(ce.jsx)(ht,{})};var gt=function(){return Object(ce.jsx)(pt,{})},Ot=n(154),vt=[l.de.projectId],jt=function(e){var t,n=new URLSearchParams(e),r=Object(Ot.a)(vt);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(n.has(a)&&n.get(a))return!0}}catch(i){r.e(i)}finally{r.f()}return!1},mt=n(24),yt=n(194),xt={webWidget:{chat:{departments:{enabled:[]}},color:{theme:Object(d.c)(d.b.paColor1)},position:{horizontal:"left",vertical:"bottom"},offset:{horizontal:"0px",vertical:"26px"},zIndex:fe.fb}},wt=function(e){var t=e.apiKey,n=e.onLoad,r=void 0===n?mt.a:n,a=Object(T.useRef)(null),i=Object(T.useCallback)((function(e){var n=document.createElement("script");n.id=e,n.src="https://static.zdassets.com/ekr/snippet.js?key=".concat(t),n.onload=r,document.body.appendChild(n)}),[t,r]),c=Object(T.useCallback)((function(){if(!a.current)return window.zESettings=xt,void(a.current=xt);"undefined"!==typeof window.zE&&(window.zE("webWidget","updateSettings",xt),a.current=xt)}),[]);return Object(yt.a)((function(){c();var e="ze-snippet",t=function(){return i(e)};return window.addEventListener("load",t),function(){var n;delete window.zESettings,null===(n=document.getElementById(e))||void 0===n||n.remove(),window.removeEventListener("load",t)}})),null},At=n(550),Et=function(){var e=Object(_.g)(),t=Object(_.h)(),n=Object(L.e)(),r=Object(_.i)("/chooser"),a=Object(G.a)(P.J),i=Object(Ce.a)(),c=i.user,o=i.waitingUser,s=Object(T.useMemo)((function(){if(r){var e=new URLSearchParams(t.search).get("redirect");return e&&l.uh[e]}}),[t.search,r]);return s||t.pathname.match(l.jc)?(s&&e.replace(s),null):Object(ce.jsxs)(ce.Fragment,{children:[Object(ce.jsx)(Ke,{children:Object(ce.jsxs)(_.d,{children:[Object(ce.jsx)(_.b,{path:"/",exact:!0,component:st}),Object(ce.jsx)(_.b,{path:"/batch",component:nt}),Object(ce.jsx)(_.b,{path:"/search",component:lt}),l.Eh&&Object(ce.jsx)(_.b,{path:"/north-star",component:gt}),l.qd&&Object(ce.jsx)(_.b,{path:"/my-replays",component:bt}),Object(ce.jsx)(_.b,{path:"/".concat(l.Xe.templateEditor),render:function(){var r=t.search;if(!a&&function(e){var t=new URLSearchParams(e),n=t.has(l.fb.image),r=t.has(l.fb.imageId),a=t.has(l.fb.projectId),i=t.has(l.fb.stickerId),c=t.has(l.fb.template),o=t.has(l.fb.background),s=t.has(l.fb.templateSearch),u=t.has(l.fb.templateCategory),d=t.has(l.fb.templateSize),b=t.has(l.fb.customSize),f=t.has(l.fb.tab),h=t.has(l.fb.batch_key),p=t.has(l.fb.paymentFlow),g=t.get(l.fb.category),O=!!g&&t.has(l.fb.search),v=!!g&&qe.a.some((function(e){return e.page===g}));return!(c||s||u||d||b)&&!n&&!r&&!i&&!f&&!h&&!o&&!(g&&"effects"!==g&&(!v||v&&(n||r||i||c)||O))&&!p&&!a}(r)){var i=Object(At.a)(r).toString();return i?e.replace("/search?".concat(ft.g.category,"=photos&").concat(i)):e.replace("/editor?".concat(l.fb.templateSize,"=story")),null}return!jt(r)||(null===c||void 0===c?void 0:c.id)||o?Object(ce.jsx)($e,{}):(n(B.a.actions.openAuthenticationPopup({closable:!0,redirectOnFailPath:"/editor?templateSize=story"})),null)}}),l.xh.map((function(e){var t=e.from,n=e.to;return Object(ce.jsx)(_.a,{from:t,to:n},t)})),Object(ce.jsx)(_.a,{to:"/"})]})}),Object(ce.jsx)(wt,{apiKey:"8f04fe9b-b285-4151-9472-16d9cca03702",onLoad:function(){if(window.zE){var e=R.a.get(l.zd)||"en-US";window.zE("webWidget","setLocale",e),window.zE("webWidget","helpCenter:setSuggestions",{labels:l.jh})}n(B.a.actions.setIsWidgetLoading(!0))}})]})},kt=n(48),Ct=n(32),St=n(570),Tt=n(25),_t=n(571),It=n(572),Rt=Object(kt.a)(Object(de.a)({},Object(Ct.b)(St.a,Object(Tt.d)(Tt.c),Object(Ct.m)(),_t.a,It.a)),{name:"app"}),Lt=n(181),Pt=n(268),Gt=n(146),Mt=function(e){var t=e.children,n=Object(Ce.a)(!0),r=n.user,a=n.waitingUser,i=n.updateUser;return Object(ce.jsx)(Gt.a,{user:r||null,basePath:l.B,onUserChange:function(){return i()},status:a?Gt.b.pending:Gt.b.resolved,children:t})},Bt=n(198),Dt=Object(be.b)({notifierHolder:{zIndex:fe.N}}),Nt=function(e){var t=e.children,n=Dt();return Object(ce.jsx)(Bt.b,Object(de.a)(Object(de.a)({className:n.notifierHolder,direction:Bt.a.bottomLeft},l.Kh),{},{children:t}))},zt=u.a.getErrorBoundary(),Ht=function(e){var t=e.children;return Object(ce.jsx)(zt,{children:Object(ce.jsx)(L.a,{store:Pt.a,children:Object(ce.jsx)(be.a,{theme:k.default,children:Object(ce.jsx)(le.a,{projectName:"photo_editor",language:l.vh.languageSlug,children:Object(ce.jsx)(Mt,{children:Object(ce.jsx)(Nt,{children:Object(ce.jsx)(Lt.a,{basename:l.C,children:t})})})})})})})},Yt=function(e,t){var n=(navigator.userAgent||"").toLocaleLowerCase(),r=e||l.Ib,a=t||l.Ib,i="https://picsart.com";/android/.test(n)?i="".concat(l.Xd,"?deeplink_path=").concat(r):/iphone|ipad|ipod/.test(n)?i="".concat(l.Xd,"?deeplink_path=").concat(a,"&hook_action=").concat(a):/window phone/.test(n)&&(i=l.ih),window.location.href=i},Xt=Object(be.b)((function(e){return{popupContainer:{position:"fixed",display:"flex",flexDirection:"column",top:0,left:0,right:0,bottom:0,height:"100%",paddingTop:"57px",zIndex:fe.K,backgroundColor:e.colors.paColor9,overflow:"hidden","& > *":{paddingLeft:"67px",paddingRight:"67px"}},popupLogo:{display:"block"},popupLogoIcon:{verticalAlign:"top",display:"inline-block",width:120},popupDescription:{display:"flex",flexDirection:"column",overflowY:"auto",flexGrow:1,paddingTop:70,color:e.colors.paColor3,fontSize:"14px",lineHeight:"18px","& > span:not(:last-child)":{marginBottom:"32px",fontWeight:600}},popupButtonWrapper:{display:"flex",position:"sticky",bottom:0,alignItems:"center",justifyContent:"center",height:134,flexShrink:0,boxShadow:"0px 14px 64px ".concat(e.colors.paColor147),borderTopLeftRadius:10,borderTopRightRadius:10,backgroundColor:e.colors.paColor9},popupButton:{width:"240px",height:"50px",lineHeight:"50px",borderRadius:"4px",textAlign:"center",fontSize:"16px",fontWeight:600,color:e.colors.paColor9,backgroundColor:e.colors.paColor1,border:"none",outline:"none",appearance:"none","-webkit-appearance":"none"},"@media (orientation: landscape)":{popupContainer:{paddingTop:25},popupDescription:{paddingTop:40,"& > span:not(:last-child)":{marginBottom:"16px"}},popupButtonWrapper:{height:80}}}})),Ut=function(){var e=Xt(),t=Object(le.c)();return Object(ce.jsxs)("div",{className:e.popupContainer,children:[Object(ce.jsx)("a",{href:"https://picsart.com",className:e.popupLogo,children:Object(ce.jsx)(ze.a,{name:"picsart-logo-brand",className:e.popupLogoIcon})}),Object(ce.jsxs)("div",{className:e.popupDescription,children:[Object(ce.jsxs)("span",{children:[t("Picsart Web Tools are only supported on notebooks, desktops and tablets."),Object(ce.jsx)("br",{})," ",Object(ce.jsx)("br",{}),t("Switch to a device with a bigger screen to view this page.")]}),!l.vh.editorOnly&&Object(ce.jsxs)("span",{children:[t("Accessing from a mobile phone?"),Object(ce.jsx)("br",{})," ",t("Try our app")]})]}),!l.vh.editorOnly&&Object(ce.jsx)("div",{className:e.popupButtonWrapper,children:Object(ce.jsx)("button",{onClick:function(){return Yt()},className:e.popupButton,children:t("Go to app")})})]})},Ft=(n(798),n(799),function(e){var t=e.children,n=Object(T.useState)(ve.isMobileOnly||window.innerWidth<=l.Nd),r=Object(w.a)(n,2),a=r[0],i=r[1];return Object(yt.a)((function(){if(!ve.isMobileOnly){var e=function(){return i(window.innerWidth<=l.Nd)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}})),Object(ce.jsx)(Ht,{children:a?Object(ce.jsx)(Ut,{}):t})});var Wt=function(){return Rt(),Object(ce.jsxs)(ce.Fragment,{children:[Object(ce.jsx)(S.default,{isOpen:!0,container:document.head,children:Object(ce.jsx)(C.a,{})}),Object(ce.jsx)(Ft,{children:Object(ce.jsx)(Et,{})})]})},Vt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Kt(e,t){navigator.serviceWorker.register(e).then((function(e){window.addEventListener("beforeunload",(function(){e.active&&e.active.postMessage("clear_shutterstock_cache")})),e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}u.a.init(),function(e){var t=document.createElement("style");E.contains(t)&&E.removeChild(t),t.innerHTML=Object.entries(e).reduce((function(e,t){var n=Object(w.a)(t,2),r=n[0],a=n[1];return"".concat(e).concat(r,": ").concat(a,";")}),":root.css-colors { ")+"}",E.appendChild(t),A.classList.add("css-colors")}(d.a),function(e){var t=document.createElement("style");E.contains(t)&&E.removeChild(t),t.innerHTML=Object.entries(e).reduce((function(e,t){var n=Object(w.a)(t,2),r=n[0],a=n[1];return"".concat(e).concat(r,": ").concat(a,";")}),":root.css-spacings { ")+"}",E.appendChild(t),A.classList.add("css-spacings")}(O),function(e){var t=document.createElement("style");E.contains(t)&&E.removeChild(t),t.innerHTML=Object.entries(e).reduce((function(e,t){var n=Object(w.a)(t,2),r=n[0],a=n[1];return"".concat(e).concat(r,": ").concat(a,";")}),":root.css-radiuses { ")+"}",E.appendChild(t),A.classList.add("css-radiuses")}(y),!l.Eh&&i.a.init(),a.a.setConfig({apiUrl:l.qh}),Object(r.render)(Object(ce.jsx)(Wt,{}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/create",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/create","/service-worker.js");Vt?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Kt(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Kt(t,e)}))}}()}],[[800,32,34]]]);
//# sourceMappingURL=main.3b4af80a.chunk.js.map